<!DOCTYPE html>
<!-- saved from url=(0394)https://vp.rambler.ru/player/1.146.0/player.html#id=record%3A%3Ab5dc53ad-5493-4b29-864a-75de7cc00680&sspUserId=ugsAAJxS9We8Q35OAbQaAAB%3D&sspUserIdScope=.eda.ru&referrer=https%3A%2F%2Feda.ru%2Frecepty%2Fvypechka-deserty%2Fbrauni-brownie-20955&aspectRatio=1.7777777777777777&initialId=record%3A%3Ab5dc53ad-5493-4b29-864a-75de7cc00680&debug=false&lazy=false&lazyOffset=300&widgetId=m98sebpl.q2h_1 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>RamblerPlayer</title><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="icon" href="https://vp.rambler.ru/player/1.146.0/favicon-32x32.png"><link rel="preconnect" href="https://api.vp.rambler.ru/" crossorigin=""><link rel="preconnect" href="https://view.eaglecdn.com/" crossorigin=""><link rel="preconnect" href="https://static.eaglecdn.com/" crossorigin=""><link rel="preconnect" href="https://hlsvod.rambler.eaglecdn.com/" crossorigin=""><link rel="preconnect" href="https://id.rambler.ru/" crossorigin=""><link rel="preconnect" href="https://imasdk.googleapis.com/" crossorigin=""><link rel="preconnect" href="https://ssp.rambler.ru/" crossorigin=""><link rel="preconnect" href="https://ads.adfox.ru/" crossorigin=""><link rel="preconnect" href="https://an.yandex.ru/" crossorigin=""><link rel="preconnect" href="https://yandex.ru/" crossorigin=""><link rel="preconnect" href="https://static.rambler.ru/" crossorigin=""><style>
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */</style><style>[data-html5-video]{position:absolute;height:100%;width:100%;display:block}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9AY2xhcHByL2NvcmUvc3JjL3BsYXliYWNrcy9odG1sNV92aWRlby9wdWJsaWMvc3R5bGUuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxtQkFDRSxpQkFBQSxDQUNBLFdBQUEsQ0FDQSxVQUFBLENBQ0EsYUFBQSIsInNvdXJjZXNDb250ZW50IjpbIltkYXRhLWh0bWw1LXZpZGVvXSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogYmxvY2s7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */</style><style>[data-no-op]{position:absolute;height:100%;width:100%;text-align:center}[data-no-op] p[data-no-op-msg]{position:absolute;text-align:center;font-size:25px;left:0;right:0;color:#fff;padding:10px;top:50%;transform:translateY(-50%);max-height:100%;overflow:auto}[data-no-op] canvas[data-no-op-canvas]{background-color:#777;height:100%;width:100%}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9AY2xhcHByL2NvcmUvc3JjL3BsYXliYWNrcy9ub19vcC9wdWJsaWMvc3R5bGUuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxhQUNFLGlCQUFBLENBQ0EsV0FBQSxDQUNBLFVBQUEsQ0FDQSxpQkFBQSxDQUdGLCtCQUNFLGlCQUFBLENBQ0EsaUJBQUEsQ0FDQSxjQUFBLENBQ0EsTUFBQSxDQUNBLE9BQUEsQ0FDQSxVQUFBLENBQ0EsWUFBQSxDQUVBLE9BQUEsQ0FDQSwwQkFBQSxDQUNBLGVBQUEsQ0FDQSxhQUFBLENBR0YsdUNBQ0UscUJBQUEsQ0FDQSxXQUFBLENBQ0EsVUFBQSIsInNvdXJjZXNDb250ZW50IjpbIltkYXRhLW5vLW9wXSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG5bZGF0YS1uby1vcF0gcFtkYXRhLW5vLW9wLW1zZ10ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAyNXB4O1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgY29sb3I6IHdoaXRlO1xuICBwYWRkaW5nOiAxMHB4O1xuICAvKiBjZW50ZXIgdmVydGljYWxseSAqL1xuICB0b3A6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuICBtYXgtaGVpZ2h0OiAxMDAlO1xuICBvdmVyZmxvdzogYXV0bztcbn1cblxuW2RhdGEtbm8tb3BdIGNhbnZhc1tkYXRhLW5vLW9wLWNhbnZhc10ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzc3O1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */</style><style>@font-face{font-family:"Manrope";font-style:normal;font-weight:600;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/semibold.woff2") format("woff2")}@font-face{font-family:"Manrope";font-style:normal;font-weight:700;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/bold.woff2") format("truetype")}.SHQA1rJaHER9ejQUvz8b{box-sizing:border-box !important;position:absolute;display:flex;align-items:center;justify-content:center;flex-flow:column;height:100%;width:100%;padding:15px 20px;font-family:Manrope,sans-serif;font-weight:600;color:#fff;background:#343b4c;transition:padding-bottom 200ms cubic-bezier(0.4, 0, 0.3, 1)}.ckPEEgH86119g9tUzA2S{display:inline-flex;align-items:center;flex:none;margin-top:20px;padding:0 20px;font-size:15px;line-height:40px;font-weight:700;color:#343b4c;background:#fff;border-radius:20px;cursor:pointer}.ckPEEgH86119g9tUzA2S svg{flex:none;width:20px;height:20px;margin-right:5px;fill:currentColor}.Kf78AIEdSIlSfsGsWzqc{flex:none;text-align:center;font-size:15px;line-height:20px}.eplayer-not-found .Kf78AIEdSIlSfsGsWzqc{width:275px}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGxheWJhY2tzL25vLW9wL3N0eWxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLFdBQ0UscUJBQUEsQ0FDQSxpQkFBQSxDQUNBLGVBQUEsQ0FDQSxrR0FBQSxDQUtGLFdBQ0UscUJBQUEsQ0FDQSxpQkFBQSxDQUNBLGVBQUEsQ0FDQSxpR0FBQSxDQUlGLHNCQUNFLGdDQUFBLENBQ0EsaUJBQUEsQ0FDQSxZQUFBLENBQ0Esa0JBQUEsQ0FDQSxzQkFBQSxDQUNBLGdCQUFBLENBQ0EsV0FBQSxDQUNBLFVBQUEsQ0FDQSxpQkFBQSxDQUNBLDhCQUFBLENBQ0EsZUFBQSxDQUNBLFVBQUEsQ0FDQSxrQkFBQSxDQUNBLDREQUFBLENBR0Ysc0JBQ0UsbUJBQUEsQ0FDQSxrQkFBQSxDQUNBLFNBQUEsQ0FDQSxlQUFBLENBQ0EsY0FBQSxDQUNBLGNBQUEsQ0FDQSxnQkFBQSxDQUNBLGVBQUEsQ0FDQSxhQUFBLENBQ0EsZUFBQSxDQUNBLGtCQUFBLENBQ0EsY0FBQSxDQUVBLDBCQUNFLFNBQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUNBLGdCQUFBLENBQ0EsaUJBQUEsQ0FJSixzQkFDRSxTQUFBLENBQ0EsaUJBQUEsQ0FDQSxjQUFBLENBQ0EsZ0JBQUEsQ0FFQSx5Q0FDRSxXQUFBIiwic291cmNlc0NvbnRlbnQiOlsiJHRyYW5zaXRpb24tZnVuY3Rpb246IGN1YmljLWJlemllcigwLjQsIDAsIDAuMywgMSk7XG5cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ01hbnJvcGUnO1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIHNyYzogbG9jYWwoJ01hbnJvcGUnKSxcbiAgICB1cmwoJ2h0dHBzOi8vc3RhdGljLnJhbWJsZXIucnUvZm9udHMvTWFucm9wZS9zZW1pYm9sZC53b2ZmMicpXG4gICAgICBmb3JtYXQoJ3dvZmYyJyk7XG59XG5cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ01hbnJvcGUnO1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIHNyYzogbG9jYWwoJ01hbnJvcGUnKSxcbiAgICB1cmwoJ2h0dHBzOi8vc3RhdGljLnJhbWJsZXIucnUvZm9udHMvTWFucm9wZS9ib2xkLndvZmYyJykgZm9ybWF0KCd0cnVldHlwZScpO1xufVxuXG4ubm9vcCB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3ggIWltcG9ydGFudDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZmxleC1mbG93OiBjb2x1bW47XG4gIGhlaWdodDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDE1cHggMjBweDtcbiAgZm9udC1mYW1pbHk6IE1hbnJvcGUsIHNhbnMtc2VyaWY7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYmFja2dyb3VuZDogIzM0M2I0YztcbiAgdHJhbnNpdGlvbjogcGFkZGluZy1ib3R0b20gMjAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG59XG5cbi5idXR0b24ge1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleDogbm9uZTtcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgcGFkZGluZzogMCAyMHB4O1xuICBmb250LXNpemU6IDE1cHg7XG4gIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICBmb250LXdlaWdodDogNzAwO1xuICBjb2xvcjogIzM0M2I0YztcbiAgYmFja2dyb3VuZDogI2ZmZjtcbiAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuXG4gIHN2ZyB7XG4gICAgZmxleDogbm9uZTtcbiAgICB3aWR0aDogMjBweDtcbiAgICBoZWlnaHQ6IDIwcHg7XG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgZmlsbDogY3VycmVudENvbG9yO1xuICB9XG59XG5cbi5tZXNzYWdlIHtcbiAgZmxleDogbm9uZTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDE1cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LWZvdW5kKSAmIHtcbiAgICB3aWR0aDogMjc1cHg7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */</style><style>.eagleplayer-advertisement,.eagleplayer-advertisement-container,.eagleplayer-advertisement-click-area{position:absolute;top:0;left:0;width:100%;height:100%}.eagleplayer-advertisement-container{z-index:3}.eagleplayer-advertisement-click-area[href]{z-index:3;cursor:pointer}.eagleplayer-advertisement video,.eagleplayer-advertisement-banner video{background-color:rgba(0,0,0,0) !important}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy9hZHZlcnRpc2VtZW50L3N0eWxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHNHQUdFLGlCQUFBLENBQ0EsS0FBQSxDQUNBLE1BQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUdGLHFDQUNFLFNBQUEsQ0FHRiw0Q0FDRSxTQUFBLENBQ0EsY0FBQSxDQUtBLHlFQUNFLHlDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLmVhZ2xlcGxheWVyLWFkdmVydGlzZW1lbnQsXG4uZWFnbGVwbGF5ZXItYWR2ZXJ0aXNlbWVudC1jb250YWluZXIsXG4uZWFnbGVwbGF5ZXItYWR2ZXJ0aXNlbWVudC1jbGljay1hcmVhIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5lYWdsZXBsYXllci1hZHZlcnRpc2VtZW50LWNvbnRhaW5lciB7XG4gIHotaW5kZXg6IDM7XG59XG5cbi5lYWdsZXBsYXllci1hZHZlcnRpc2VtZW50LWNsaWNrLWFyZWFbaHJlZl0ge1xuICB6LWluZGV4OiAzO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5lYWdsZXBsYXllci1hZHZlcnRpc2VtZW50LFxuLmVhZ2xlcGxheWVyLWFkdmVydGlzZW1lbnQtYmFubmVyIHtcbiAgdmlkZW8ge1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */</style><style>.eagleplayer-container{width:100%;height:100%;position:relative;text-align:left}.eagleplayer-container *{box-sizing:initial}.eagleplayer-container.fade{animation:fadein 2s}@keyframes fadein{from{opacity:0}to{opacity:1}}.eplayer-poster{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.eplayer-skin{z-index:2}.eagleplayer-advertisement{z-index:3}.eagleplayer-info{color:#fff;z-index:3;position:absolute;width:100%;height:100%;left:0;display:table}video::-webkit-media-controls-enclosure{display:none !important}.container canvas{position:relative}.eagleplayer-fullscreen{width:100% !important;height:100% !important}.eplayer-ios-noskin *::-webkit-media-controls-panel{display:none !important;-webkit-appearance:none}.eplayer-ios-noskin *::-webkit-media-controls-start-playback-button{display:none !important;-webkit-appearance:none}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vY29tcG9uZW50cy9wbGF5ZXIvc3R5bGVzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsdUJBQ0UsVUFBQSxDQUNBLFdBQUEsQ0FDQSxpQkFBQSxDQUNBLGVBQUEsQ0FFQSx5QkFDRSxrQkFBQSxDQUdGLDRCQUNFLG1CQUFBLENBRUEsa0JBQ0UsS0FDRSxTQUFBLENBR0YsR0FDRSxTQUFBLENBQUEsQ0FVUixnQkFDRSxpQkFBQSxDQUNBLEtBQUEsQ0FDQSxNQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxTQUFBLENBR0YsY0FDRSxTQUFBLENBR0YsMkJBQ0UsU0FBQSxDQUdGLGtCQUNFLFVBQUEsQ0FDQSxTQUFBLENBQ0EsaUJBQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUNBLE1BQUEsQ0FDQSxhQUFBLENBR0Ysd0NBQ0UsdUJBQUEsQ0FJQSxrQkFDRSxpQkFBQSxDQUlKLHdCQUNFLHFCQUFBLENBQ0Esc0JBQUEsQ0FJQSxvREFDRSx1QkFBQSxDQUNBLHVCQUFBLENBR0Ysb0VBQ0UsdUJBQUEsQ0FDQSx1QkFBQSIsInNvdXJjZXNDb250ZW50IjpbIi5lYWdsZXBsYXllci1jb250YWluZXIge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG5cbiAgKiB7XG4gICAgYm94LXNpemluZzogaW5pdGlhbDtcbiAgfVxuXG4gICYuZmFkZSB7XG4gICAgYW5pbWF0aW9uOiBmYWRlaW4gMnM7XG5cbiAgICBAa2V5ZnJhbWVzIGZhZGVpbiB7XG4gICAgICBmcm9tIHtcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgIH1cblxuICAgICAgdG8ge1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4uZWFnbGVwbGF5ZXItbG9hZGVyIHtcbiAgLy9iYWNrZ3JvdW5kOiBibGFjayB1cmwobG9hZC5naWYpIG5vLXJlcGVhdCBjZW50ZXIgY2VudGVyO1xufVxuXG4uZXBsYXllci1wb3N0ZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgei1pbmRleDogMTtcbn1cblxuLmVwbGF5ZXItc2tpbiB7XG4gIHotaW5kZXg6IDI7XG59XG5cbi5lYWdsZXBsYXllci1hZHZlcnRpc2VtZW50IHtcbiAgei1pbmRleDogMztcbn1cblxuLmVhZ2xlcGxheWVyLWluZm8ge1xuICBjb2xvcjogd2hpdGU7XG4gIHotaW5kZXg6IDM7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgbGVmdDogMDtcbiAgZGlzcGxheTogdGFibGU7XG59XG5cbnZpZGVvOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLWVuY2xvc3VyZSB7XG4gIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbn1cblxuLmNvbnRhaW5lciB7XG4gIGNhbnZhcyB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB9XG59XG5cbi5lYWdsZXBsYXllci1mdWxsc2NyZWVuIHtcbiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbiAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7XG59XG5cbi5lcGxheWVyLWlvcy1ub3NraW4ge1xuICAqOjotd2Via2l0LW1lZGlhLWNvbnRyb2xzLXBhbmVsIHtcbiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICB9XG5cbiAgKjo6LXdlYmtpdC1tZWRpYS1jb250cm9scy1zdGFydC1wbGF5YmFjay1idXR0b24ge1xuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */</style><style>body{margin:0;padding:0;background-color:#000}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy93aWRnZXRzL3BsYXllci9pZnJhbWUvc3R5bGVzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsS0FDRSxRQUFBLENBQ0EsU0FBQSxDQUNBLHFCQUFBIiwic291cmNlc0NvbnRlbnQiOlsiYm9keSB7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcbiAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */</style><script async="" src="./tag.js"></script><style>[data-video-backdrop]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;background-color:#000}[data-video-backdrop] canvas{width:100%;height:100%}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy92aWRlby1iYWNrZHJvcC9zdHlsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxzQkFDRSxpQkFBQSxDQUNBLEtBQUEsQ0FDQSxNQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxtQkFBQSxDQUNBLHFCQUFBLENBRUEsNkJBQ0UsVUFBQSxDQUNBLFdBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJbZGF0YS12aWRlby1iYWNrZHJvcF0ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuXG4gIGNhbnZhcyB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */</style><style>@font-face{font-family:"Manrope";font-style:normal;font-weight:600;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/semibold.woff2") format("woff2")}.QttQ1tq2ygIZ5_vyHeXR{z-index:14;display:flex;flex-direction:column;padding:15px 15px 5px;font-family:eagle-default,Manrope,sans-serif;font-weight:600;font-size:15px;line-height:20px;color:#fff}.eplayer-fullscreen-menu .QttQ1tq2ygIZ5_vyHeXR{top:0 !important;bottom:0 !important;padding:0;background:rgba(52,59,76,.6)}.u_hqQ8p5xQAkmXIwtWjm{display:none;position:absolute;top:0;right:0;width:100%;height:100%;cursor:pointer}.eplayer-fullscreen-menu .u_hqQ8p5xQAkmXIwtWjm{display:block}.HF6OARQCgql9R_5CiYG2{position:absolute;z-index:1;top:5px;right:5px;width:20px;height:20px;padding:10px;fill:#fff;transition:fill 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-mobile .u_hqQ8p5xQAkmXIwtWjm:active .HF6OARQCgql9R_5CiYG2,.eplayer-not-mobile .u_hqQ8p5xQAkmXIwtWjm:hover .HF6OARQCgql9R_5CiYG2{fill:#dcdfe7;transition-duration:200ms}.eplayer-not-mobile .u_hqQ8p5xQAkmXIwtWjm:active .HF6OARQCgql9R_5CiYG2{fill:#c6cad8;transition-duration:100ms}.JVMklWBVVj29caEIXCNk{position:relative;margin:auto 0 0 auto;max-height:100%;border-radius:5px;background:#1f2431;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none}.eplayer-fullscreen-menu .JVMklWBVVj29caEIXCNk{margin-left:0;max-height:calc(100% - 45px);border-radius:0}.JVMklWBVVj29caEIXCNk::-webkit-scrollbar{display:none}.cF9b4hLOKljfpX4QBm5V{display:flex;flex-direction:column;box-sizing:border-box;list-style:none;margin:0;padding:5px 0;width:-moz-max-content;width:max-content}.eplayer-fullscreen-menu .cF9b4hLOKljfpX4QBm5V{width:auto !important}.LBdBSbyB3hc_aSCl96vg{padding:10px 15px;cursor:pointer;white-space:nowrap;background:rgba(0,0,0,0);color:#8d96b2}.LBdBSbyB3hc_aSCl96vg .STH2FVXxXCGJFC_OIka5{color:#fff}.eplayer-mobile .LBdBSbyB3hc_aSCl96vg:active,.eplayer-not-mobile .LBdBSbyB3hc_aSCl96vg:hover{background:#4a5165}.LBdBSbyB3hc_aSCl96vg svg,.LBdBSbyB3hc_aSCl96vg[data-level]::before,.LBdBSbyB3hc_aSCl96vg[data-rate]::before,.LBdBSbyB3hc_aSCl96vg[data-subtitle]::before{width:20px;height:20px;margin-right:10px;fill:currentColor;display:inline-block;vertical-align:bottom}.LBdBSbyB3hc_aSCl96vg .ed1tD9hfUqsUYFTYoLN9{margin-left:10px}.LBdBSbyB3hc_aSCl96vg[data-level],.LBdBSbyB3hc_aSCl96vg[data-rate],.LBdBSbyB3hc_aSCl96vg[data-subtitle]{color:#fff;padding-right:45px}.LBdBSbyB3hc_aSCl96vg[data-level]::before,.LBdBSbyB3hc_aSCl96vg[data-rate]::before,.LBdBSbyB3hc_aSCl96vg[data-subtitle]::before{content:""}.LBdBSbyB3hc_aSCl96vg[data-level].mUBkmrt_AcrEH5KElxIe::before,.LBdBSbyB3hc_aSCl96vg[data-rate].mUBkmrt_AcrEH5KElxIe::before,.LBdBSbyB3hc_aSCl96vg[data-subtitle].mUBkmrt_AcrEH5KElxIe::before{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCI+CiAgPHBhdGggZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjAgMHYyME0wIDB2MjBtNy44LTUuMDktMy42NS0zLjY0YTEgMSAwIDAgMSAwLTEuNDJsLjctLjdhMSAxIDAgMCAxIDEuNDIgMGwyLjIzIDIuMjMgNS4yMy01LjIzYTEgMSAwIDAgMSAxLjQyIDBsLjcuN2ExIDEgMCAwIDEgMCAxLjQyTDkuMjEgMTQuOWExIDEgMCAwIDEtMS40MiAwIi8+Cjwvc3ZnPgo=)}.LBdBSbyB3hc_aSCl96vg[data-share]{display:none}@media screen and (max-width: 569px){.LBdBSbyB3hc_aSCl96vg[data-share]{display:flex}}.VywaRVXPnlP6YqTY8Tsw{-webkit-user-select:none;-moz-user-select:none;user-select:none}.Kf5ItOaMiKPbZSEgcYXO{position:relative;overflow:hidden}.SVGl3jAKtbvZ_ncIvuCJ{position:absolute;top:5px;right:2px;bottom:5px;z-index:1;width:6px}.StDFad24Gtcd_AGlSTI4{position:relative;display:block;width:100%;height:0;cursor:pointer;border-radius:3px;background-color:#fff;transform:translate3d(0, 0, 0);transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-not-mobile .StDFad24Gtcd_AGlSTI4:hover,.StDFad24Gtcd_AGlSTI4:active{opacity:.6;transition-duration:200ms}.O9NpH52jz7TOuDRApxay{width:100%;height:100%;overflow-y:scroll;transform:translate3d(0, 0, 0);-webkit-overflow-scrolling:touch;scrollbar-width:none;-ms-overflow-style:none}.O9NpH52jz7TOuDRApxay::-webkit-scrollbar{display:none}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy9zZXR0aW5ncy1tZW51L3N0eWxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVlBLFdBQ0UscUJBQUEsQ0FDQSxpQkFBQSxDQUNBLGVBQUEsQ0FDQSxrR0FBQSxDQUtGLHNCQUNFLFVBQUEsQ0FDQSxZQUFBLENBQ0EscUJBQUEsQ0FDQSxxQkFBQSxDQUNBLDRDQUFBLENBQ0EsZUFBQSxDQUNBLGNBQUEsQ0FDQSxnQkFBQSxDQUNBLFVBQUEsQ0FFQSwrQ0FDRSxnQkFBQSxDQUNBLG1CQUFBLENBQ0EsU0FBQSxDQUNBLDRCQUFBLENBSUosc0JBQ0UsWUFBQSxDQUNBLGlCQUFBLENBQ0EsS0FBQSxDQUNBLE9BQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUNBLGNBQUEsQ0FFQSwrQ0FDRSxhQUFBLENBSUosc0JBQ0UsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsT0FBQSxDQUNBLFNBQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUNBLFlBQUEsQ0FDQSxTQTlEYyxDQStEZCxrREFBQSxDQUVBLHlJQUVFLFlBbEVrQixDQW1FbEIseUJBQUEsQ0FHRix1RUFDRSxZQXRFbUIsQ0F1RW5CLHlCQUFBLENBSUosc0JBQ0UsaUJBQUEsQ0FDQSxvQkFBQSxDQUNBLGVBQUEsQ0FDQSxpQkFBQSxDQUNBLGtCQUFBLENBQ0EsZUFBQSxDQUNBLG9CQUFBLENBQ0EsdUJBQUEsQ0FFQSwrQ0FDRSxhQUFBLENBQ0EsNEJBQUEsQ0FDQSxlQUFBLENBR0YseUNBQ0UsWUFBQSxDQUlKLHNCQUNFLFlBQUEsQ0FDQSxxQkFBQSxDQUNBLHFCQUFBLENBQ0EsZUFBQSxDQUNBLFFBQUEsQ0FDQSxhQUFBLENBQ0Esc0JBQUEsQ0FBQSxpQkFBQSxDQUVBLCtDQUNFLHFCQUFBLENBSUosc0JBQ0UsaUJBQUEsQ0FDQSxjQUFBLENBQ0Esa0JBQUEsQ0FDQSx3QkFBQSxDQUNBLGFBQUEsQ0FFQSw0Q0FDRSxVQUFBLENBR0YsNkZBRUUsa0JBQUEsQ0FHRiwwSkFJRSxVQUFBLENBQ0EsV0FBQSxDQUNBLGlCQUFBLENBQ0EsaUJBQUEsQ0FDQSxvQkFBQSxDQUNBLHFCQUFBLENBR0YsNENBQ0UsZ0JBQUEsQ0FHRix3R0FHRSxVQUFBLENBQ0Esa0JBQUEsQ0FFQSxnSUFDRSxVQUFBLENBR0YsK0xBQ0Usd0RBQUEsQ0FJSixrQ0FDRSxZQUFBLENBekpGLHFDQXdKQSxrQ0FJSSxZQUFBLENBQUEsQ0FRTixzQkFDRSx3QkFBQSxDQUFBLHFCQUFBLENBQUEsZ0JBQUEsQ0FHRixzQkFDRSxpQkFBQSxDQUNBLGVBQUEsQ0FHRixzQkFDRSxpQkFBQSxDQUNBLE9BQUEsQ0FDQSxTQUFBLENBQ0EsVUFBQSxDQUNBLFNBQUEsQ0FDQSxTQUFBLENBR0Ysc0JBQ0UsaUJBQUEsQ0FDQSxhQUFBLENBQ0EsVUFBQSxDQUNBLFFBQUEsQ0FDQSxjQUFBLENBQ0EsaUJBQUEsQ0FDQSxxQkFBQSxDQUNBLDhCQUFBLENBQ0EscURBQUEsQ0FFQSw2RUFFRSxVQUFBLENBQ0EseUJBQUEsQ0FJSixzQkFDRSxVQUFBLENBQ0EsV0FBQSxDQUNBLGlCQUFBLENBQ0EsOEJBQUEsQ0FDQSxnQ0FBQSxDQUNBLG9CQUFBLENBQ0EsdUJBQUEsQ0FFQSx5Q0FDRSxZQUFBIiwic291cmNlc0NvbnRlbnQiOlsiJGNvbnRyb2wtY29sb3I6ICNmZmY7XG4kY29udHJvbC1ob3Zlci1jb2xvcjogI2RjZGZlNztcbiRjb250cm9sLWFjdGl2ZS1jb2xvcjogI2M2Y2FkODtcbiR0cmFuc2l0aW9uLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjMsIDEpO1xuJGxhcmdlLXdpZHRoOiA1NzBweDtcblxuQG1peGluIHNtYWxsLXdpZHRoIHtcbiAgQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogKCRsYXJnZS13aWR0aCAtIDFweCkpIHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5AZm9udC1mYWNlIHtcbiAgZm9udC1mYW1pbHk6ICdNYW5yb3BlJztcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXdlaWdodDogNjAwO1xuICBzcmM6IGxvY2FsKCdNYW5yb3BlJyksXG4gICAgdXJsKCdodHRwczovL3N0YXRpYy5yYW1ibGVyLnJ1L2ZvbnRzL01hbnJvcGUvc2VtaWJvbGQud29mZjInKVxuICAgICAgZm9ybWF0KCd3b2ZmMicpO1xufVxuXG4uc2V0dGluZ3Mge1xuICB6LWluZGV4OiAxNDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcGFkZGluZzogMTVweCAxNXB4IDVweDtcbiAgZm9udC1mYW1pbHk6IGVhZ2xlLWRlZmF1bHQsIE1hbnJvcGUsIHNhbnMtc2VyaWY7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGZvbnQtc2l6ZTogMTVweDtcbiAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gIGNvbG9yOiAjZmZmO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItZnVsbHNjcmVlbi1tZW51KSAmIHtcbiAgICB0b3A6IDAgIWltcG9ydGFudDtcbiAgICBib3R0b206IDAgIWltcG9ydGFudDtcbiAgICBwYWRkaW5nOiAwO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoNTIsIDU5LCA3NiwgMC42KTtcbiAgfVxufVxuXG4uY2xvc2Uge1xuICBkaXNwbGF5OiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGN1cnNvcjogcG9pbnRlcjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLWZ1bGxzY3JlZW4tbWVudSkgJiB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gIH1cbn1cblxuLmNsb3NlSWNvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgei1pbmRleDogMTtcbiAgdG9wOiA1cHg7XG4gIHJpZ2h0OiA1cHg7XG4gIHdpZHRoOiAyMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIGZpbGw6ICRjb250cm9sLWNvbG9yO1xuICB0cmFuc2l0aW9uOiBmaWxsIDEwMG1zICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAuY2xvc2U6YWN0aXZlICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLmNsb3NlOmhvdmVyICYge1xuICAgIGZpbGw6ICRjb250cm9sLWhvdmVyLWNvbG9yO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuY2xvc2U6YWN0aXZlICYge1xuICAgIGZpbGw6ICRjb250cm9sLWFjdGl2ZS1jb2xvcjtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAxMDBtcztcbiAgfVxufVxuXG4uaW5uZXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG1hcmdpbjogYXV0byAwIDAgYXV0bztcbiAgbWF4LWhlaWdodDogMTAwJTtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBiYWNrZ3JvdW5kOiAjMWYyNDMxO1xuICBvdmVyZmxvdy15OiBhdXRvO1xuICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7IC8qIEZpcmVmb3ggKi9cbiAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lOyAvKiBJbnRlcm5ldCBFeHBsb3JlciAxMCsgKi9cblxuICA6Z2xvYmFsKC5lcGxheWVyLWZ1bGxzY3JlZW4tbWVudSkgJiB7XG4gICAgbWFyZ2luLWxlZnQ6IDA7XG4gICAgbWF4LWhlaWdodDogY2FsYygxMDAlIC0gNDVweCk7XG4gICAgYm9yZGVyLXJhZGl1czogMDtcbiAgfVxuXG4gICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbi5zZWN0aW9uIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiA1cHggMDtcbiAgd2lkdGg6IG1heC1jb250ZW50O1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItZnVsbHNjcmVlbi1tZW51KSAmIHtcbiAgICB3aWR0aDogYXV0byAhaW1wb3J0YW50O1xuICB9XG59XG5cbi5pdGVtIHtcbiAgcGFkZGluZzogMTBweCAxNXB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBjb2xvcjogIzhkOTZiMjtcblxuICAuaXRlbUxhYmVsIHtcbiAgICBjb2xvcjogI2ZmZjtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAmOmFjdGl2ZSxcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjNGE1MTY1O1xuICB9XG5cbiAgc3ZnLFxuICAmW2RhdGEtbGV2ZWxdOjpiZWZvcmUsXG4gICZbZGF0YS1yYXRlXTo6YmVmb3JlLFxuICAmW2RhdGEtc3VidGl0bGVdOjpiZWZvcmUge1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gICAgZmlsbDogY3VycmVudENvbG9yO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xuICB9XG5cbiAgLml0ZW1WYWx1ZSB7XG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gIH1cblxuICAmW2RhdGEtbGV2ZWxdLFxuICAmW2RhdGEtcmF0ZV0sXG4gICZbZGF0YS1zdWJ0aXRsZV0ge1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIHBhZGRpbmctcmlnaHQ6IDQ1cHg7XG5cbiAgICAmOjpiZWZvcmUge1xuICAgICAgY29udGVudDogJyc7XG4gICAgfVxuXG4gICAgJi5hY3RpdmU6OmJlZm9yZSB7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TUNBeU1DSStDaUFnUEhCaGRHZ2dabWxzYkQwaUkwWkdSaUlnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWlCa1BTSk5NakFnTUhZeU1FMHdJREIyTWpCdE55NDRMVFV1TURrdE15NDJOUzB6TGpZMFlURWdNU0F3SURBZ01TQXdMVEV1TkRKc0xqY3RMamRoTVNBeElEQWdNQ0F4SURFdU5ESWdNR3d5TGpJeklESXVNak1nTlM0eU15MDFMakl6WVRFZ01TQXdJREFnTVNBeExqUXlJREJzTGpjdU4yRXhJREVnTUNBd0lERWdNQ0F4TGpReVREa3VNakVnTVRRdU9XRXhJREVnTUNBd0lERXRNUzQwTWlBd0lpOCtDand2YzNablBnbz0nKTtcbiAgICB9XG4gIH1cblxuICAmW2RhdGEtc2hhcmVdIHtcbiAgICBkaXNwbGF5OiBub25lO1xuXG4gICAgQGluY2x1ZGUgc21hbGwtd2lkdGgge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICB9XG4gIH1cbn1cblxuLyogQ1VTVE9NIFNDUk9MTCAqL1xuXG4vKiBkaXNhYmxlIHNlbGVjdGlvbiB3aGlsZSBkcmFnZ2luZyAqL1xuLnNjcm9sbGJhckRpc2FibGVTZWxlY3Rpb24ge1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuLnNjcm9sbGJhckNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLnNjcm9sbGJhciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1cHg7XG4gIHJpZ2h0OiAycHg7XG4gIGJvdHRvbTogNXB4O1xuICB6LWluZGV4OiAxO1xuICB3aWR0aDogNnB4O1xufVxuXG4uc2Nyb2xsYmFyVGh1bWIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAwO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpICY6aG92ZXIsXG4gICY6YWN0aXZlIHtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cbn1cblxuLnNjcm9sbGJhclZpZXcge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBvdmVyZmxvdy15OiBzY3JvbGw7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7XG4gIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcbiAgc2Nyb2xsYmFyLXdpZHRoOiBub25lOyAvKiBGaXJlZm94ICovXG4gIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTsgLyogSW50ZXJuZXQgRXhwbG9yZXIgMTArICovXG5cbiAgJjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */</style><style>@font-face{font-family:"Manrope";font-style:normal;font-weight:600;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/semibold.woff2") format("woff2")}.cTtcpD_RWs9X9osDOBBV{position:absolute;z-index:100;top:0;left:0;bottom:0;right:0;display:flex;justify-content:center;font-family:eagle-default,Manrope,sans-serif;font-weight:600;font-size:14px;pointer-events:none !important}.cTtcpD_RWs9X9osDOBBV:empty{display:none}.nRvx4CUeDkkRp402c3bw{box-sizing:border-box !important;position:absolute;z-index:1;padding:10px 20px;line-height:20px;font-size:15px;color:#fff;white-space:nowrap;background:#343b4c;border-radius:5px;opacity:0;transition:100ms cubic-bezier(0.4, 0, 0.3, 1);transition-property:top,bottom,opacity;pointer-events:auto}.PUQhryGjdUax5d22Tzec{top:0}.ILbFTbwFG06V8UYarPLW{bottom:0}.oe_wXSUR9n0iJY8Vhv44{--position: 15px;opacity:1;transition-duration:200ms}.oe_wXSUR9n0iJY8Vhv44.PUQhryGjdUax5d22Tzec{top:var(--position)}.oe_wXSUR9n0iJY8Vhv44.ILbFTbwFG06V8UYarPLW{bottom:var(--position)}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy9ub3RpZmllci9zdHlsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUNFLHFCQUFBLENBQ0EsaUJBQUEsQ0FDQSxlQUFBLENBQ0Esa0dBQUEsQ0FLRixzQkFDRSxpQkFBQSxDQUNBLFdBQUEsQ0FDQSxLQUFBLENBQ0EsTUFBQSxDQUNBLFFBQUEsQ0FDQSxPQUFBLENBQ0EsWUFBQSxDQUNBLHNCQUFBLENBQ0EsNENBQUEsQ0FDQSxlQUFBLENBQ0EsY0FBQSxDQUNBLDhCQUFBLENBRUEsNEJBQ0UsWUFBQSxDQUlKLHNCQUNFLGdDQUFBLENBQ0EsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsaUJBQUEsQ0FDQSxnQkFBQSxDQUNBLGNBQUEsQ0FDQSxVQUFBLENBQ0Esa0JBQUEsQ0FDQSxrQkFBQSxDQUNBLGlCQUFBLENBQ0EsU0FBQSxDQUNBLDZDQUFBLENBQ0Esc0NBQUEsQ0FDQSxtQkFBQSxDQUdGLHNCQUNFLEtBQUEsQ0FHRixzQkFDRSxRQUFBLENBR0Ysc0JBQ0UsZ0JBQUEsQ0FFQSxTQUFBLENBQ0EseUJBQUEsQ0FFQSwyQ0FDRSxtQkFBQSxDQUdGLDJDQUNFLHNCQUFBIiwic291cmNlc0NvbnRlbnQiOlsiQGZvbnQtZmFjZSB7XG4gIGZvbnQtZmFtaWx5OiAnTWFucm9wZSc7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgc3JjOiBsb2NhbCgnTWFucm9wZScpLFxuICAgIHVybCgnaHR0cHM6Ly9zdGF0aWMucmFtYmxlci5ydS9mb250cy9NYW5yb3BlL3NlbWlib2xkLndvZmYyJylcbiAgICAgIGZvcm1hdCgnd29mZjInKTtcbn1cblxuLm5vdGlmaWVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAxMDA7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgYm90dG9tOiAwO1xuICByaWdodDogMDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZvbnQtZmFtaWx5OiBlYWdsZS1kZWZhdWx0LCBNYW5yb3BlLCBzYW5zLXNlcmlmO1xuICBmb250LXdlaWdodDogNjAwO1xuICBmb250LXNpemU6IDE0cHg7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7XG5cbiAgJjplbXB0eSB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4ubWVzc2FnZSB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3ggIWltcG9ydGFudDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAxO1xuICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBmb250LXNpemU6IDE1cHg7XG4gIGNvbG9yOiAjZmZmO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBiYWNrZ3JvdW5kOiAjMzQzYjRjO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG9wYWNpdHk6IDA7XG4gIHRyYW5zaXRpb246IDEwMG1zIGN1YmljLWJlemllcigwLjQsIDAsIDAuMywgMSk7XG4gIHRyYW5zaXRpb24tcHJvcGVydHk6IHRvcCwgYm90dG9tLCBvcGFjaXR5O1xuICBwb2ludGVyLWV2ZW50czogYXV0bztcbn1cblxuLnRvcCB7XG4gIHRvcDogMDtcbn1cblxuLmJvdHRvbSB7XG4gIGJvdHRvbTogMDtcbn1cblxuLnZpc2libGUge1xuICAtLXBvc2l0aW9uOiAxNXB4O1xuXG4gIG9wYWNpdHk6IDE7XG4gIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuXG4gICYudG9wIHtcbiAgICB0b3A6IHZhcigtLXBvc2l0aW9uKTtcbiAgfVxuXG4gICYuYm90dG9tIHtcbiAgICBib3R0b206IHZhcigtLXBvc2l0aW9uKTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */</style><style>.eagleplayer-advertisement-banner{height:auto !important;pointer-events:none !important}.eagleplayer-advertisement-banner>div{bottom:15px;pointer-events:auto}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy9hZHZlcnRpc2VtZW50L3BsYXliYWNrcy9vdmVybGF5LXBsYXliYWNrL3NraW5zL3VuaXZlcnNhbC9zdHlsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrQ0FDRSxzQkFBQSxDQUNBLDhCQUFBLENBRUEsc0NBQ0UsV0FBQSxDQUNBLG1CQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLmVhZ2xlcGxheWVyLWFkdmVydGlzZW1lbnQtYmFubmVyIHtcbiAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7XG5cbiAgJiA+IGRpdiB7XG4gICAgYm90dG9tOiAxNXB4O1xuICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */</style><style>@font-face{font-family:"Manrope";font-style:normal;font-weight:600;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/semibold.woff2") format("woff2")}@font-face{font-family:"Manrope";font-style:normal;font-weight:800;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/extrabold.woff2") format("woff2")}.hQlri1AbyaxgxdsYPJRl{display:flex;align-items:flex-end;width:100%;height:80%;font-family:eagle-default,Manrope,sans-serif;font-size:15px;font-weight:600;line-height:20px;color:#fff;--side-gap: 5px;--control-size: 30px;--bottom-controls-gap: 40px}.f5Wwmkow2NuXZUDn199R .hQlri1AbyaxgxdsYPJRl{--side-gap: 15px;--control-size: 40px;--bottom-controls-gap: 65px}.KpefA9pStOWXes3kjR2f::before,.qyEhC9wFL6tR1KgaOCwk::before{content:"";position:absolute;z-index:3;bottom:0;left:0;width:100%;height:calc(20% + var(--control-size) + 35px);background-image:linear-gradient(to bottom, transparent, rgba(31, 36, 49, 0.7));pointer-events:none}.P18ZV0VcDaEc4F66uJlW{box-sizing:border-box !important;position:absolute;z-index:3;top:var(--side-gap);right:var(--side-gap);display:inline-flex;align-items:center;justify-content:center;height:var(--control-size);width:var(--control-size);border-radius:50%;background:rgba(52,59,76,.4);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;transition:100ms cubic-bezier(0.4, 0, 0.3, 1);transition-property:background-color,-webkit-backdrop-filter;transition-property:background-color,backdrop-filter;transition-property:background-color,backdrop-filter,-webkit-backdrop-filter}.P18ZV0VcDaEc4F66uJlW:hover{background:#343b4c;-webkit-backdrop-filter:none;backdrop-filter:none;transition-duration:200ms}.P18ZV0VcDaEc4F66uJlW:active{background:#1f2431;-webkit-backdrop-filter:none;backdrop-filter:none;transition-duration:200ms}.f5Wwmkow2NuXZUDn199R .P18ZV0VcDaEc4F66uJlW{top:auto}.brmUpk0W044P5e8EVtHI{flex:none;width:15px;height:15px;fill:currentColor}.f5Wwmkow2NuXZUDn199R .brmUpk0W044P5e8EVtHI{width:20px;height:20px}.cc3KZILOt2pKyUgY5rul{display:inline}.GJtOooglUfOs2tHJjNMw .cc3KZILOt2pKyUgY5rul{display:none}.aRxgJy6QixCWKr30RXLs{display:none}.GJtOooglUfOs2tHJjNMw .aRxgJy6QixCWKr30RXLs{display:inline}.KK7cVRRDj09YuAWyYjha{--position: 5px}.f5Wwmkow2NuXZUDn199R .KK7cVRRDj09YuAWyYjha{--position: 15px}.eEjZSGbVPb0DbkMnEnB0,.l5efUV33RbAeqA2g9JZR{--height: 20px;display:none;position:absolute;z-index:3;top:var(--side-gap);left:var(--side-gap);padding:0 10.5px;border-radius:calc(var(--height)/2);background:rgba(52,59,76,.4);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);line-height:var(--height);font-size:11px;pointer-events:none}.f5Wwmkow2NuXZUDn199R .eEjZSGbVPb0DbkMnEnB0,.f5Wwmkow2NuXZUDn199R .l5efUV33RbAeqA2g9JZR{top:auto;margin-bottom:calc(-1*var(--height) - 5px)}.KpefA9pStOWXes3kjR2f .eEjZSGbVPb0DbkMnEnB0{display:block}.qyEhC9wFL6tR1KgaOCwk .l5efUV33RbAeqA2g9JZR{display:block}.C2ZsjQubRTyHi0rNTPKO{position:absolute;z-index:3;left:var(--side-gap);display:inline-flex;align-items:center;height:var(--control-size);padding:0 10px 0 15px;border-radius:calc(var(--control-size)/2);color:#fff;text-decoration:none;background:#315efb;background:var(--skin-main-color, #315efb);overflow:hidden;pointer-events:none}.f5Wwmkow2NuXZUDn199R .C2ZsjQubRTyHi0rNTPKO{padding:0 15px 0 20px}.C2ZsjQubRTyHi0rNTPKO::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:#000;opacity:0;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.C2ZsjQubRTyHi0rNTPKO[href]:hover::before,.eagleplayer-advertisement-click-area:hover~.hQlri1AbyaxgxdsYPJRl .C2ZsjQubRTyHi0rNTPKO:not([href])::before{opacity:.05;transition-duration:200ms}.C2ZsjQubRTyHi0rNTPKO[href]:active::before,.eagleplayer-advertisement-click-area:active~.hQlri1AbyaxgxdsYPJRl .C2ZsjQubRTyHi0rNTPKO:not([href])::before{opacity:.1;transition-duration:200ms}.C2ZsjQubRTyHi0rNTPKO[href]{pointer-events:auto;cursor:pointer}.eplayer-light-main-color .C2ZsjQubRTyHi0rNTPKO{color:#343b4c}.qFeeE2sfMhokmEA5Hzfk{position:relative;flex:none;line-height:20px;white-space:nowrap}.f5Wwmkow2NuXZUDn199R .qFeeE2sfMhokmEA5Hzfk{margin:0 5px 0 0}.Y0QD8xdLQd_gOzcf_pMK{position:relative;flex:none;width:20px;height:20px;fill:currentColor}.qdNKfvyNa3loE1ItOHJw{display:inline}.f5Wwmkow2NuXZUDn199R .qdNKfvyNa3loE1ItOHJw{display:none}.WWuRUnWc7O57oZVQf3mn{display:none}.f5Wwmkow2NuXZUDn199R .WWuRUnWc7O57oZVQf3mn{display:inline}.SuSHnJmhtaO0pXE8r4jf{display:none;position:absolute;z-index:3;top:var(--side-gap);right:var(--side-gap);-webkit-user-select:none;-moz-user-select:none;user-select:none}.f5Wwmkow2NuXZUDn199R .Nf3kuRbrjPb93DHJMd4w .SuSHnJmhtaO0pXE8r4jf,.f5Wwmkow2NuXZUDn199R .FphjOLDhj1RJ8YzecWyM .SuSHnJmhtaO0pXE8r4jf{display:block}.aLSRyYldhnTsz0PxmSvV .SuSHnJmhtaO0pXE8r4jf{display:none !important}.zCnunkteXD6xsQNSBibg{display:inline-flex;align-items:center;justify-content:center;width:var(--control-size);height:var(--control-size);border-radius:calc(var(--control-size)/2);background:rgba(52,59,76,.4);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;transition:100ms cubic-bezier(0.4, 0, 0.3, 1);transition-property:background-color,-webkit-backdrop-filter;transition-property:background-color,backdrop-filter;transition-property:background-color,backdrop-filter,-webkit-backdrop-filter}.zCnunkteXD6xsQNSBibg:hover{background:#343b4c;-webkit-backdrop-filter:none;backdrop-filter:none;transition-duration:200ms}.zCnunkteXD6xsQNSBibg:active{background:#1f2431;-webkit-backdrop-filter:none;backdrop-filter:none;transition-duration:200ms}.SnGprh9H2dOBvZJ1p8tK .zCnunkteXD6xsQNSBibg{display:none}.GQw4QTDMETf1d5fhgx7_{flex:none;width:20px;height:20px;fill:currentColor}.G5CHkFIuEIX3AiQpXAWq{display:none}.SnGprh9H2dOBvZJ1p8tK .G5CHkFIuEIX3AiQpXAWq{display:block}.yaIIoSm3iDOncIzodLWs{display:flex;flex-direction:column;width:160px;border-radius:5px;background:#1f2431;box-shadow:0 10px 30px -15px #1f2431;overflow:hidden;pointer-events:none;cursor:pointer}.yaIIoSm3iDOncIzodLWs::after{content:"";position:absolute;z-index:3;top:0;left:0;width:100%;height:100%;border-radius:inherit;box-shadow:inset 0 0 0 2px #fff;pointer-events:none}.m54ueTLTW494L6oUXG4J .yaIIoSm3iDOncIzodLWs{cursor:pointer;pointer-events:auto}.KU_UkPZoSlimYgznVcWA{flex:none;position:absolute;z-index:2;top:5px;left:10px;white-space:nowrap;text-shadow:0 1px 5px #1f2431}.UoULlrmZNzn8iY7jIuaK{display:none}.jGwOFRF9AJbllVi2MI3m .UoULlrmZNzn8iY7jIuaK,.aLSRyYldhnTsz0PxmSvV .UoULlrmZNzn8iY7jIuaK{display:inline}.z2SE4o8tYDRz4xmrMwK2{display:inline}.jGwOFRF9AJbllVi2MI3m .z2SE4o8tYDRz4xmrMwK2,.aLSRyYldhnTsz0PxmSvV .z2SE4o8tYDRz4xmrMwK2,.m54ueTLTW494L6oUXG4J .z2SE4o8tYDRz4xmrMwK2{display:none}.cd_pRM6VPaJ4iTN12Mn2{display:none}.m54ueTLTW494L6oUXG4J .cd_pRM6VPaJ4iTN12Mn2{display:inline}.jGwOFRF9AJbllVi2MI3m .cd_pRM6VPaJ4iTN12Mn2,.aLSRyYldhnTsz0PxmSvV .cd_pRM6VPaJ4iTN12Mn2{display:none}.aCmdhHSnaChkHThjVyI4{position:relative;flex:none;display:flex;justify-content:center;align-items:center;margin:2px;overflow:hidden}.aCmdhHSnaChkHThjVyI4 img{position:absolute;top:0;height:100%}.aCmdhHSnaChkHThjVyI4 img:first-of-type{left:0;width:100%;-o-object-fit:cover;object-fit:cover;filter:blur(7px)}.aCmdhHSnaChkHThjVyI4::after,.aCmdhHSnaChkHThjVyI4::before{content:"";z-index:1;width:100%;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.aCmdhHSnaChkHThjVyI4::before{position:absolute;top:0;left:0;height:100%;background-image:linear-gradient(to bottom, rgba(31, 36, 49, 0.7), transparent)}.aCmdhHSnaChkHThjVyI4::after{position:relative;padding-bottom:56.25%;background:rgba(52,59,76,.6);background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+CiAgPHBhdGggZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNDAgMHY0ME0wIDB2NDBtMzUtMTguM0wxMyAzNC4zYTIgMiAwIDAgMS0zLTEuN1Y3LjRhMiAyIDAgMCAxIDMtMS43bDIyIDEyLjZhMiAyIDAgMCAxIDAgMy40Ii8+Cjwvc3ZnPgo=);background-size:auto 31.5px;background-position:50%;background-repeat:no-repeat;opacity:0}.m54ueTLTW494L6oUXG4J .yaIIoSm3iDOncIzodLWs:hover .aCmdhHSnaChkHThjVyI4::after{opacity:1;transition-duration:200ms}.KMyeXCh3m8Ey6mPwAi5e{position:absolute;z-index:2;bottom:5px;left:8px;opacity:0;text-shadow:0 1px 5px #1f2431;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.m54ueTLTW494L6oUXG4J .yaIIoSm3iDOncIzodLWs:hover .KMyeXCh3m8Ey6mPwAi5e{opacity:1;transition-duration:200ms}.eplayer-live .KMyeXCh3m8Ey6mPwAi5e{display:none}.fJYM7LHULbpNb13PGcN7{display:none;align-items:center;position:absolute;z-index:2;bottom:5px;right:3px;padding:0 5px;border-radius:10px;font-size:12px;font-weight:800;line-height:20px;letter-spacing:1.3px;text-transform:uppercase;background:rgba(52,59,76,.4);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.fJYM7LHULbpNb13PGcN7::before{content:"";flex:none;width:7px;height:7px;margin-right:6px;border-radius:50%;background:#ff564e}.eplayer-live .fJYM7LHULbpNb13PGcN7{display:inline-flex}.a5_nV42wEG0TawqZKNEx{flex:none;display:block;display:-webkit-box;max-height:45px;margin:3px 10px 10px;line-height:15px;-webkit-box-orient:vertical;-webkit-line-clamp:3;text-overflow:ellipsis;word-break:break-word;font-size:11px;overflow:hidden}.eplayer-live .a5_nV42wEG0TawqZKNEx{display:none}.Ef2C74WLwiCFszUzuT7d{position:absolute;z-index:2;top:0;right:0;display:block;width:20px;height:20px;padding:5px;border-radius:15px;fill:#fff;background:rgba(0,0,0,0);transition:100ms cubic-bezier(0.4, 0, 0.3, 1);transition-property:background-color,-webkit-backdrop-filter;transition-property:background-color,backdrop-filter;transition-property:background-color,backdrop-filter,-webkit-backdrop-filter;pointer-events:auto;cursor:pointer}.Ef2C74WLwiCFszUzuT7d:hover{background:rgba(141,150,178,.6);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition-duration:200ms}.Ef2C74WLwiCFszUzuT7d:active{background:rgba(141,150,178,.8);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition-duration:100ms}.v5DuFGOGGrHu1PtLOV4G{display:none;position:absolute;z-index:3;right:var(--side-gap);padding:0 15px;line-height:var(--control-size);border-radius:calc(var(--control-size)/2);background:rgba(52,59,76,.4);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:none;cursor:pointer;color:hsla(0,0%,100%,.6);transition:100ms cubic-bezier(0.4, 0, 0.3, 1);transition-property:background-color,color,-webkit-backdrop-filter;transition-property:background-color,backdrop-filter,color;transition-property:background-color,backdrop-filter,color,-webkit-backdrop-filter}.v5DuFGOGGrHu1PtLOV4G:hover{background:#343b4c;-webkit-backdrop-filter:none;backdrop-filter:none;transition-duration:200ms}.v5DuFGOGGrHu1PtLOV4G:active{background:#1f2431;-webkit-backdrop-filter:none;backdrop-filter:none;transition-duration:200ms}.f5Wwmkow2NuXZUDn199R .v5DuFGOGGrHu1PtLOV4G{right:calc(var(--side-gap) + var(--control-size) + 5px)}.m54ueTLTW494L6oUXG4J .v5DuFGOGGrHu1PtLOV4G{pointer-events:auto;color:inherit}.Nf3kuRbrjPb93DHJMd4w .v5DuFGOGGrHu1PtLOV4G{display:block}.jGwOFRF9AJbllVi2MI3m .v5DuFGOGGrHu1PtLOV4G,.aLSRyYldhnTsz0PxmSvV .v5DuFGOGGrHu1PtLOV4G{display:none}.HZR_5qTaRES7XE1ohjLA{display:inline;opacity:.6}.m54ueTLTW494L6oUXG4J .HZR_5qTaRES7XE1ohjLA{display:none}.YLbEuIilRwQ1KugLMWj3{display:none}.m54ueTLTW494L6oUXG4J .YLbEuIilRwQ1KugLMWj3{display:inline}.aLSRyYldhnTsz0PxmSvV .YLbEuIilRwQ1KugLMWj3{display:none}.qTvK1cp0kwHbiSum0Za1{position:absolute;z-index:3;right:0;bottom:0;left:0;height:5px;background:hsla(0,0%,100%,.5);pointer-events:none}.jGwOFRF9AJbllVi2MI3m .qTvK1cp0kwHbiSum0Za1{display:none}.FMjiiR58lZWV5bbaQXLL{width:0;height:100%;background:#315efb;background:var(--skin-main-color, #315efb)}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy9hZHZlcnRpc2VtZW50L3BsYXliYWNrcy92YXN0LXBsYXliYWNrL3NraW5zL3VuaXZlcnNhbC9zdHlsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFTQSxXQUNFLHFCQUFBLENBQ0EsaUJBQUEsQ0FDQSxlQUFBLENBQ0Esa0dBQUEsQ0FLRixXQUNFLHFCQUFBLENBQ0EsaUJBQUEsQ0FDQSxlQUFBLENBQ0EsbUdBQUEsQ0FLRixzQkFDRSxZQUFBLENBQ0Esb0JBQUEsQ0FDQSxVQUFBLENBQ0EsVUFBQSxDQUNBLDRDQUFBLENBQ0EsY0FBQSxDQUNBLGVBQUEsQ0FDQSxnQkFBQSxDQUNBLFVBbENZLENBb0NaLGVBQUEsQ0FDQSxvQkFBQSxDQUNBLDJCQUFBLENBRUEsNENBQ0UsZ0JBQUEsQ0FDQSxvQkFBQSxDQUNBLDJCQUFBLENBSUosNERBRUUsVUFBQSxDQUNBLGlCQUFBLENBQ0EsU0FBQSxDQUNBLFFBQUEsQ0FDQSxNQUFBLENBQ0EsVUFBQSxDQUNBLDZDQUFBLENBQ0EsK0VBQUEsQ0FDQSxtQkFBQSxDQUlGLHNCQUNFLGdDQUFBLENBQ0EsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsbUJBQUEsQ0FDQSxxQkFBQSxDQUNBLG1CQUFBLENBQ0Esa0JBQUEsQ0FDQSxzQkFBQSxDQUNBLDBCQUFBLENBQ0EseUJBQUEsQ0FDQSxpQkFBQSxDQUNBLDRCQXZFYSxDQXdFYixpQ0FBQSxDQUFBLHlCQUFBLENBQ0Esd0JBQUEsQ0FBQSxxQkFBQSxDQUFBLGdCQUFBLENBQ0EsY0FBQSxDQUNBLDZDQUFBLENBQ0EsNERBQUEsQ0FBQSxvREFBQSxDQUFBLDRFQUFBLENBRUEsNEJBQ0Usa0JBbkZZLENBb0ZaLDRCQUFBLENBQUEsb0JBQUEsQ0FDQSx5QkFBQSxDQUdGLDZCQUNFLGtCQXhGaUIsQ0F5RmpCLDRCQUFBLENBQUEsb0JBQUEsQ0FDQSx5QkFBQSxDQUdGLDRDQUNFLFFBQUEsQ0FJSixzQkFDRSxTQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxpQkFBQSxDQUVBLDRDQUNFLFVBQUEsQ0FDQSxXQUFBLENBSUosc0JBQ0UsY0FBQSxDQUVBLDRDQUNFLFlBQUEsQ0FJSixzQkFDRSxZQUFBLENBRUEsNENBQ0UsY0FBQSxDQUlKLHNCQUNFLGVBQUEsQ0FFQSw0Q0FDRSxnQkFBQSxDQUtKLDRDQUVFLGNBQUEsQ0FFQSxZQUFBLENBQ0EsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsbUJBQUEsQ0FDQSxvQkFBQSxDQUNBLGdCQUFBLENBQ0EsbUNBQUEsQ0FDQSw0QkEvSWEsQ0FnSmIsaUNBQUEsQ0FBQSx5QkFBQSxDQUNBLHlCQUFBLENBQ0EsY0FBQSxDQUNBLG1CQUFBLENBRUEsd0ZBQ0UsUUFBQSxDQUNBLDBDQUFBLENBSUosNENBQ0UsYUFBQSxDQUdGLDRDQUNFLGFBQUEsQ0FJRixzQkFDRSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxvQkFBQSxDQUNBLG1CQUFBLENBQ0Esa0JBQUEsQ0FDQSwwQkFBQSxDQUNBLHFCQUFBLENBQ0EseUNBQUEsQ0FDQSxVQS9LWSxDQWdMWixvQkFBQSxDQUNBLGtCQTlLYyxDQStLZCwwQ0FBQSxDQUNBLGVBQUEsQ0FDQSxtQkFBQSxDQUVBLDRDQUNFLHFCQUFBLENBR0YsOEJBQ0UsVUFBQSxDQUNBLGlCQUFBLENBQ0EsS0FBQSxDQUNBLE1BQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUNBLGVBQUEsQ0FDQSxTQUFBLENBQ0EscURBQUEsQ0FHRixzSkFJRSxXQUFBLENBQ0EseUJBQUEsQ0FHRix3SkFJRSxVQUFBLENBQ0EseUJBQUEsQ0FHRiw0QkFDRSxtQkFBQSxDQUNBLGNBQUEsQ0FHRixnREFDRSxhQTlOWSxDQWtPaEIsc0JBQ0UsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsZ0JBQUEsQ0FDQSxrQkFBQSxDQUVBLDRDQUNFLGdCQUFBLENBSUosc0JBQ0UsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxpQkFBQSxDQUdGLHNCQUNFLGNBQUEsQ0FFQSw0Q0FDRSxZQUFBLENBSUosc0JBQ0UsWUFBQSxDQUVBLDRDQUNFLGNBQUEsQ0FLSixzQkFDRSxZQUFBLENBQ0EsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsbUJBQUEsQ0FDQSxxQkFBQSxDQUNBLHdCQUFBLENBQUEscUJBQUEsQ0FBQSxnQkFBQSxDQUVBLG9JQUVFLGFBQUEsQ0FHRiw0Q0FDRSx1QkFBQSxDQUlKLHNCQUNFLG1CQUFBLENBQ0Esa0JBQUEsQ0FDQSxzQkFBQSxDQUNBLHlCQUFBLENBQ0EsMEJBQUEsQ0FDQSx5Q0FBQSxDQUNBLDRCQTNSYSxDQTRSYixpQ0FBQSxDQUFBLHlCQUFBLENBQ0Esd0JBQUEsQ0FBQSxxQkFBQSxDQUFBLGdCQUFBLENBQ0EsY0FBQSxDQUNBLDZDQUFBLENBQ0EsNERBQUEsQ0FBQSxvREFBQSxDQUFBLDRFQUFBLENBRUEsNEJBQ0Usa0JBdlNZLENBd1NaLDRCQUFBLENBQUEsb0JBQUEsQ0FDQSx5QkFBQSxDQUdGLDZCQUNFLGtCQTVTaUIsQ0E2U2pCLDRCQUFBLENBQUEsb0JBQUEsQ0FDQSx5QkFBQSxDQUdGLDRDQUNFLFlBQUEsQ0FJSixzQkFDRSxTQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxpQkFBQSxDQUlGLHNCQUNFLFlBQUEsQ0FFQSw0Q0FDRSxhQUFBLENBSUosc0JBQ0UsWUFBQSxDQUNBLHFCQUFBLENBQ0EsV0FBQSxDQUNBLGlCQUFBLENBQ0Esa0JBM1VtQixDQTRVbkIsb0NBQUEsQ0FDQSxlQUFBLENBQ0EsbUJBQUEsQ0FDQSxjQUFBLENBRUEsNkJBQ0UsVUFBQSxDQUNBLGlCQUFBLENBQ0EsU0FBQSxDQUNBLEtBQUEsQ0FDQSxNQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxxQkFBQSxDQUNBLCtCQUFBLENBQ0EsbUJBQUEsQ0FHRiw0Q0FDRSxjQUFBLENBQ0EsbUJBQUEsQ0FJSixzQkFDRSxTQUFBLENBQ0EsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsT0FBQSxDQUNBLFNBQUEsQ0FDQSxrQkFBQSxDQUNBLDZCQUFBLENBR0Ysc0JBQ0UsWUFBQSxDQUVBLHdGQUVFLGNBQUEsQ0FJSixzQkFDRSxjQUFBLENBRUEsb0lBR0UsWUFBQSxDQUlKLHNCQUNFLFlBQUEsQ0FFQSw0Q0FDRSxjQUFBLENBR0Ysd0ZBRUUsWUFBQSxDQUlKLHNCQUNFLGlCQUFBLENBQ0EsU0FBQSxDQUNBLFlBQUEsQ0FDQSxzQkFBQSxDQUNBLGtCQUFBLENBQ0EsVUFBQSxDQUNBLGVBQUEsQ0FFQSwwQkFDRSxpQkFBQSxDQUNBLEtBQUEsQ0FDQSxXQUFBLENBRUEsd0NBQ0UsTUFBQSxDQUNBLFVBQUEsQ0FDQSxtQkFBQSxDQUFBLGdCQUFBLENBQ0EsZ0JBQUEsQ0FJSiwyREFFRSxVQUFBLENBQ0EsU0FBQSxDQUNBLFVBQUEsQ0FDQSxxREFBQSxDQUdGLDhCQUNFLGlCQUFBLENBQ0EsS0FBQSxDQUNBLE1BQUEsQ0FDQSxXQUFBLENBQ0EsK0VBQUEsQ0FHRiw2QkFDRSxpQkFBQSxDQUNBLHFCQUFBLENBQ0EsNEJBQUEsQ0FDQSx3REFBQSxDQUNBLDJCQUFBLENBQ0EsdUJBQUEsQ0FDQSwyQkFBQSxDQUNBLFNBQUEsQ0FFQSwrRUFDRSxTQUFBLENBQ0EseUJBQUEsQ0FLTixzQkFDRSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxVQUFBLENBQ0EsUUFBQSxDQUNBLFNBQUEsQ0FDQSw2QkFBQSxDQUNBLHFEQUFBLENBRUEsd0VBQ0UsU0FBQSxDQUNBLHlCQUFBLENBR0Ysb0NBQ0UsWUFBQSxDQUlKLHNCQUNFLFlBQUEsQ0FDQSxrQkFBQSxDQUNBLGlCQUFBLENBQ0EsU0FBQSxDQUNBLFVBQUEsQ0FDQSxTQUFBLENBQ0EsYUFBQSxDQUNBLGtCQUFBLENBQ0EsY0FBQSxDQUNBLGVBQUEsQ0FDQSxnQkFBQSxDQUNBLG9CQUFBLENBQ0Esd0JBQUEsQ0FDQSw0QkFuZWEsQ0FvZWIsaUNBQUEsQ0FBQSx5QkFBQSxDQUVBLDhCQUNFLFVBQUEsQ0FDQSxTQUFBLENBQ0EsU0FBQSxDQUNBLFVBQUEsQ0FDQSxnQkFBQSxDQUNBLGlCQUFBLENBQ0Esa0JBQUEsQ0FHRixvQ0FDRSxtQkFBQSxDQUlKLHNCQUlFLFNBQUEsQ0FDQSxhQUFBLENBQ0EsbUJBQUEsQ0FDQSxlQUFBLENBQ0Esb0JBQUEsQ0FDQSxnQkFQYSxDQVFiLDJCQUFBLENBQ0Esb0JBVlEsQ0FXUixzQkFBQSxDQUNBLHFCQUFBLENBQ0EsY0FBQSxDQUNBLGVBQUEsQ0FFQSxvQ0FDRSxZQUFBLENBSUosc0JBQ0UsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsS0FBQSxDQUNBLE9BQUEsQ0FDQSxhQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxXQUFBLENBQ0Esa0JBQUEsQ0FDQSxTQXZoQlksQ0F3aEJaLHdCQUFBLENBQ0EsNkNBQUEsQ0FDQSw0REFBQSxDQUFBLG9EQUFBLENBQUEsNEVBQUEsQ0FDQSxtQkFBQSxDQUNBLGNBQUEsQ0FFQSw0QkFDRSwrQkFBQSxDQUNBLGlDQUFBLENBQUEseUJBQUEsQ0FDQSx5QkFBQSxDQUdGLDZCQUNFLCtCQUFBLENBQ0EsaUNBQUEsQ0FBQSx5QkFBQSxDQUNBLHlCQUFBLENBS0osc0JBQ0UsWUFBQSxDQUNBLGlCQUFBLENBQ0EsU0FBQSxDQUNBLHFCQUFBLENBQ0EsY0FBQSxDQUNBLCtCQUFBLENBQ0EseUNBQUEsQ0FDQSw0QkFsakJhLENBbWpCYixpQ0FBQSxDQUFBLHlCQUFBLENBQ0Esd0JBQUEsQ0FBQSxxQkFBQSxDQUFBLGdCQUFBLENBQ0EsbUJBQUEsQ0FDQSxjQUFBLENBQ0Esd0JBeGpCcUIsQ0F5akJyQiw2Q0FBQSxDQUNBLGtFQUFBLENBQUEsMERBQUEsQ0FBQSxrRkFBQSxDQUVBLDRCQUNFLGtCQWhrQlksQ0Fpa0JaLDRCQUFBLENBQUEsb0JBQUEsQ0FDQSx5QkFBQSxDQUdGLDZCQUNFLGtCQXJrQmlCLENBc2tCakIsNEJBQUEsQ0FBQSxvQkFBQSxDQUNBLHlCQUFBLENBR0YsNENBQ0UsdURBQUEsQ0FHRiw0Q0FDRSxtQkFBQSxDQUNBLGFBQUEsQ0FHRiw0Q0FDRSxhQUFBLENBR0Ysd0ZBRUUsWUFBQSxDQUlKLHNCQUNFLGNBQUEsQ0FDQSxVQUFBLENBRUEsNENBQ0UsWUFBQSxDQUlKLHNCQUNFLFlBQUEsQ0FFQSw0Q0FDRSxjQUFBLENBR0YsNENBQ0UsWUFBQSxDQUtKLHNCQUNFLGlCQUFBLENBQ0EsU0FBQSxDQUNBLE9BQUEsQ0FDQSxRQUFBLENBQ0EsTUFBQSxDQUNBLFVBQUEsQ0FDQSw2QkFBQSxDQUNBLG1CQUFBLENBRUEsNENBQ0UsWUFBQSxDQUlKLHNCQUNFLE9BQUEsQ0FDQSxXQUFBLENBQ0Esa0JBam9CYyxDQWtvQmQsMENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIkY2FyYm9uZS1jb2xvcjogIzM0M2I0YztcbiRkYXJrLWNhcmJvbmUtY29sb3I6ICMxZjI0MzE7XG4kbGlnaHQtY29sb3I6ICNmZmY7XG4kbGlnaHQtY29sb3ItZGlzYWJsZWQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC42KTtcbiRzaGFkb3ctY29sb3I6IHJnYmEoNTIsIDU5LCA3NiwgMC40KTtcbiRwcmltYXJ5LWNvbG9yOiAjMzE1ZWZiO1xuJHRyYW5zaXRpb24tZnVuY3Rpb246IGN1YmljLWJlemllcigwLjQsIDAsIDAuMywgMSk7XG4kZ3JhZGllbnQtY29sb3I6IHJnYmEoMzEsIDM2LCA0OSwgMC43KTtcblxuQGZvbnQtZmFjZSB7XG4gIGZvbnQtZmFtaWx5OiAnTWFucm9wZSc7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgc3JjOiBsb2NhbCgnTWFucm9wZScpLFxuICAgIHVybCgnaHR0cHM6Ly9zdGF0aWMucmFtYmxlci5ydS9mb250cy9NYW5yb3BlL3NlbWlib2xkLndvZmYyJylcbiAgICAgIGZvcm1hdCgnd29mZjInKTtcbn1cblxuQGZvbnQtZmFjZSB7XG4gIGZvbnQtZmFtaWx5OiAnTWFucm9wZSc7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IDgwMDtcbiAgc3JjOiBsb2NhbCgnTWFucm9wZScpLFxuICAgIHVybCgnaHR0cHM6Ly9zdGF0aWMucmFtYmxlci5ydS9mb250cy9NYW5yb3BlL2V4dHJhYm9sZC53b2ZmMicpXG4gICAgICBmb3JtYXQoJ3dvZmYyJyk7XG59XG5cbi5yb290IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiA4MCU7XG4gIGZvbnQtZmFtaWx5OiBlYWdsZS1kZWZhdWx0LCBNYW5yb3BlLCBzYW5zLXNlcmlmO1xuICBmb250LXNpemU6IDE1cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBjb2xvcjogJGxpZ2h0LWNvbG9yO1xuXG4gIC0tc2lkZS1nYXA6IDVweDtcbiAgLS1jb250cm9sLXNpemU6IDMwcHg7XG4gIC0tYm90dG9tLWNvbnRyb2xzLWdhcDogNDBweDtcblxuICAubGFyZ2VIZWlnaHQgJiB7XG4gICAgLS1zaWRlLWdhcDogMTVweDtcbiAgICAtLWNvbnRyb2wtc2l6ZTogNDBweDtcbiAgICAtLWJvdHRvbS1jb250cm9scy1nYXA6IDY1cHg7XG4gIH1cbn1cblxuLndpdGhMYWJlbDo6YmVmb3JlLFxuLndpdGhCbG9ja0NvdW50OjpiZWZvcmUge1xuICBjb250ZW50OiAnJztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAzO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IGNhbGMoMjAlICsgdmFyKC0tY29udHJvbC1zaXplKSArIDM1cHgpO1xuICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCB0cmFuc3BhcmVudCwgJGdyYWRpZW50LWNvbG9yKTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi8qIFZPTFVNRSAqL1xuLnZvbHVtZSB7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3ggIWltcG9ydGFudDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAzO1xuICB0b3A6IHZhcigtLXNpZGUtZ2FwKTtcbiAgcmlnaHQ6IHZhcigtLXNpZGUtZ2FwKTtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBoZWlnaHQ6IHZhcigtLWNvbnRyb2wtc2l6ZSk7XG4gIHdpZHRoOiB2YXIoLS1jb250cm9sLXNpemUpO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGJhY2tncm91bmQ6ICRzaGFkb3ctY29sb3I7XG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cigycHgpO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbiAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZC1jb2xvciwgYmFja2Ryb3AtZmlsdGVyO1xuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICRjYXJib25lLWNvbG9yO1xuICAgIGJhY2tkcm9wLWZpbHRlcjogbm9uZTtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kOiAkZGFyay1jYXJib25lLWNvbG9yO1xuICAgIGJhY2tkcm9wLWZpbHRlcjogbm9uZTtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gIC5sYXJnZUhlaWdodCAmIHtcbiAgICB0b3A6IGF1dG87XG4gIH1cbn1cblxuLnZvbHVtZUljb24ge1xuICBmbGV4OiBub25lO1xuICB3aWR0aDogMTVweDtcbiAgaGVpZ2h0OiAxNXB4O1xuICBmaWxsOiBjdXJyZW50Q29sb3I7XG5cbiAgLmxhcmdlSGVpZ2h0ICYge1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGhlaWdodDogMjBweDtcbiAgfVxufVxuXG4ubXV0ZWQge1xuICBkaXNwbGF5OiBpbmxpbmU7XG5cbiAgLmhhc1NvdW5kICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cblxuLm5vdE11dGVkIHtcbiAgZGlzcGxheTogbm9uZTtcblxuICAuaGFzU291bmQgJiB7XG4gICAgZGlzcGxheTogaW5saW5lO1xuICB9XG59XG5cbi52b2x1bWVNZXNzYWdlIHtcbiAgLS1wb3NpdGlvbjogNXB4O1xuXG4gIC5sYXJnZUhlaWdodCAmIHtcbiAgICAtLXBvc2l0aW9uOiAxNXB4O1xuICB9XG59XG5cbi8qIEFEIExBQkVMLCBBRCBCTE9DSyBDT1VOVCAqL1xuLmxhYmVsLFxuLmJsb2NrQ291bnQge1xuICAtLWhlaWdodDogMjBweDtcblxuICBkaXNwbGF5OiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHotaW5kZXg6IDM7XG4gIHRvcDogdmFyKC0tc2lkZS1nYXApO1xuICBsZWZ0OiB2YXIoLS1zaWRlLWdhcCk7XG4gIHBhZGRpbmc6IDAgMTAuNXB4O1xuICBib3JkZXItcmFkaXVzOiBjYWxjKHZhcigtLWhlaWdodCkgLyAyKTtcbiAgYmFja2dyb3VuZDogJHNoYWRvdy1jb2xvcjtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDJweCk7XG4gIGxpbmUtaGVpZ2h0OiB2YXIoLS1oZWlnaHQpO1xuICBmb250LXNpemU6IDExcHg7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gIC5sYXJnZUhlaWdodCAmIHtcbiAgICB0b3A6IGF1dG87XG4gICAgbWFyZ2luLWJvdHRvbTogY2FsYygtMSAqIHZhcigtLWhlaWdodCkgLSA1cHgpO1xuICB9XG59XG5cbi53aXRoTGFiZWwgLmxhYmVsIHtcbiAgZGlzcGxheTogYmxvY2s7XG59XG5cbi53aXRoQmxvY2tDb3VudCAuYmxvY2tDb3VudCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4vKiBBQ0NFUFQgQlVUVE9OICovXG4uYWNjZXB0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAzO1xuICBsZWZ0OiB2YXIoLS1zaWRlLWdhcCk7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBoZWlnaHQ6IHZhcigtLWNvbnRyb2wtc2l6ZSk7XG4gIHBhZGRpbmc6IDAgMTBweCAwIDE1cHg7XG4gIGJvcmRlci1yYWRpdXM6IGNhbGModmFyKC0tY29udHJvbC1zaXplKSAvIDIpO1xuICBjb2xvcjogJGxpZ2h0LWNvbG9yO1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIGJhY2tncm91bmQ6ICRwcmltYXJ5LWNvbG9yO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1za2luLW1haW4tY29sb3IsICRwcmltYXJ5LWNvbG9yKTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgLmxhcmdlSGVpZ2h0ICYge1xuICAgIHBhZGRpbmc6IDAgMTVweCAwIDIwcHg7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYmFja2dyb3VuZDogIzAwMDtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMTAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG4gIH1cblxuICAmW2hyZWZdOmhvdmVyOjpiZWZvcmUsXG4gIDpnbG9iYWwoLmVhZ2xlcGxheWVyLWFkdmVydGlzZW1lbnQtY2xpY2stYXJlYSk6aG92ZXJcbiAgICB+IC5yb290XG4gICAgJjpub3QoW2hyZWZdKTo6YmVmb3JlIHtcbiAgICBvcGFjaXR5OiAwLjA1O1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuICB9XG5cbiAgJltocmVmXTphY3RpdmU6OmJlZm9yZSxcbiAgOmdsb2JhbCguZWFnbGVwbGF5ZXItYWR2ZXJ0aXNlbWVudC1jbGljay1hcmVhKTphY3RpdmVcbiAgICB+IC5yb290XG4gICAgJjpub3QoW2hyZWZdKTo6YmVmb3JlIHtcbiAgICBvcGFjaXR5OiAwLjE7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICAmW2hyZWZdIHtcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWxpZ2h0LW1haW4tY29sb3IpICYge1xuICAgIGNvbG9yOiAkY2FyYm9uZS1jb2xvcjtcbiAgfVxufVxuXG4uYWNjZXB0VGV4dCB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZmxleDogbm9uZTtcbiAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG5cbiAgLmxhcmdlSGVpZ2h0ICYge1xuICAgIG1hcmdpbjogMCA1cHggMCAwO1xuICB9XG59XG5cbi5hY2NlcHRJY29uIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBmbGV4OiBub25lO1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBmaWxsOiBjdXJyZW50Q29sb3I7XG59XG5cbi5hY2NlcHRTbWFsbFBhdGgge1xuICBkaXNwbGF5OiBpbmxpbmU7XG5cbiAgLmxhcmdlSGVpZ2h0ICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cblxuLmFjY2VwdExhcmdlUGF0aCB7XG4gIGRpc3BsYXk6IG5vbmU7XG5cbiAgLmxhcmdlSGVpZ2h0ICYge1xuICAgIGRpc3BsYXk6IGlubGluZTtcbiAgfVxufVxuXG4vKiBQUkVWSUVXICovXG4ucHJldmlld0NvbnRhaW5lciB7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgei1pbmRleDogMztcbiAgdG9wOiB2YXIoLS1zaWRlLWdhcCk7XG4gIHJpZ2h0OiB2YXIoLS1zaWRlLWdhcCk7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuXG4gIC5sYXJnZUhlaWdodCAud2l0aFNraXAgJixcbiAgLmxhcmdlSGVpZ2h0IC53aXRoUmVtYWluVGltZSAmIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxuXG4gIC5oYXNNb3JlQmxvY2tzICYge1xuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgfVxufVxuXG4ucHJldmlld1RvZ2dsZSB7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgd2lkdGg6IHZhcigtLWNvbnRyb2wtc2l6ZSk7XG4gIGhlaWdodDogdmFyKC0tY29udHJvbC1zaXplKTtcbiAgYm9yZGVyLXJhZGl1czogY2FsYyh2YXIoLS1jb250cm9sLXNpemUpIC8gMik7XG4gIGJhY2tncm91bmQ6ICRzaGFkb3ctY29sb3I7XG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cigycHgpO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbiAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZC1jb2xvciwgYmFja2Ryb3AtZmlsdGVyO1xuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICRjYXJib25lLWNvbG9yO1xuICAgIGJhY2tkcm9wLWZpbHRlcjogbm9uZTtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kOiAkZGFyay1jYXJib25lLWNvbG9yO1xuICAgIGJhY2tkcm9wLWZpbHRlcjogbm9uZTtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gIC5wcmV2aWV3VmlzaWJsZSAmIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbi5wcmV2aWV3VG9nZ2xlSWNvbiB7XG4gIGZsZXg6IG5vbmU7XG4gIHdpZHRoOiAyMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIGZpbGw6IGN1cnJlbnRDb2xvcjtcbn1cblxuLyogUFJFVklFVyAqL1xuLnByZXZpZXcge1xuICBkaXNwbGF5OiBub25lO1xuXG4gIC5wcmV2aWV3VmlzaWJsZSAmIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxufVxuXG4ucHJldmlld0lubmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgd2lkdGg6IDE2MHB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGJhY2tncm91bmQ6ICRkYXJrLWNhcmJvbmUtY29sb3I7XG4gIGJveC1zaGFkb3c6IDAgMTBweCAzMHB4IC0xNXB4ICRkYXJrLWNhcmJvbmUtY29sb3I7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgJjo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAzO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBib3JkZXItcmFkaXVzOiBpbmhlcml0O1xuICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDJweCAkbGlnaHQtY29sb3I7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIH1cblxuICAuc2tpcEFjdGl2ZSAmIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gIH1cbn1cblxuLnByZXZpZXdBY3Rpb24ge1xuICBmbGV4OiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHotaW5kZXg6IDI7XG4gIHRvcDogNXB4O1xuICBsZWZ0OiAxMHB4O1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB0ZXh0LXNoYWRvdzogMCAxcHggNXB4ICRkYXJrLWNhcmJvbmUtY29sb3I7XG59XG5cbi5wcmV2aWV3Tm9UaW1lTGFiZWwge1xuICBkaXNwbGF5OiBub25lO1xuXG4gIC50aW1lckRpc2FibGVkICYsXG4gIC5oYXNNb3JlQmxvY2tzICYge1xuICAgIGRpc3BsYXk6IGlubGluZTtcbiAgfVxufVxuXG4ucHJldmlld1RpbWVMYWJlbCB7XG4gIGRpc3BsYXk6IGlubGluZTtcblxuICAudGltZXJEaXNhYmxlZCAmLFxuICAuaGFzTW9yZUJsb2NrcyAmLFxuICAuc2tpcEFjdGl2ZSAmIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbi5wcmV2aWV3QWN0aXZlTGFiZWwge1xuICBkaXNwbGF5OiBub25lO1xuXG4gIC5za2lwQWN0aXZlICYge1xuICAgIGRpc3BsYXk6IGlubGluZTtcbiAgfVxuXG4gIC50aW1lckRpc2FibGVkICYsXG4gIC5oYXNNb3JlQmxvY2tzICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cblxuLnByZXZpZXdJbWFnZSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZmxleDogbm9uZTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbjogMnB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIGltZyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBoZWlnaHQ6IDEwMCU7XG5cbiAgICAmOmZpcnN0LW9mLXR5cGUge1xuICAgICAgbGVmdDogMDtcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgb2JqZWN0LWZpdDogY292ZXI7XG4gICAgICBmaWx0ZXI6IGJsdXIoN3B4KTtcbiAgICB9XG4gIH1cblxuICAmOjphZnRlcixcbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiAnJztcbiAgICB6LWluZGV4OiAxO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMTAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgJGdyYWRpZW50LWNvbG9yLCB0cmFuc3BhcmVudCk7XG4gIH1cblxuICAmOjphZnRlciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHBhZGRpbmctYm90dG9tOiBjYWxjKDEwMCUgKiA5IC8gMTYpO1xuICAgIGJhY2tncm91bmQ6IHJnYmEoNTIsIDU5LCA3NiwgMC42KTtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIWnBaWGRDYjNnOUlqQWdNQ0EwTUNBME1DSStDaUFnUEhCaGRHZ2dabWxzYkQwaUkwWkdSaUlnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWlCa1BTSk5OREFnTUhZME1FMHdJREIyTkRCdE16VXRNVGd1TTB3eE15QXpOQzR6WVRJZ01pQXdJREFnTVMwekxURXVOMVkzTGpSaE1pQXlJREFnTUNBeElETXRNUzQzYkRJeUlERXlMalpoTWlBeUlEQWdNQ0F4SURBZ015NDBJaTgrQ2p3dmMzWm5QZ289Jyk7XG4gICAgYmFja2dyb3VuZC1zaXplOiBhdXRvIDMxLjVweDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiA1MCU7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBvcGFjaXR5OiAwO1xuXG4gICAgLnNraXBBY3RpdmUgLnByZXZpZXdJbm5lcjpob3ZlciAmIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgICB9XG4gIH1cbn1cblxuLnByZXZpZXdEdXJhdGlvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgei1pbmRleDogMjtcbiAgYm90dG9tOiA1cHg7XG4gIGxlZnQ6IDhweDtcbiAgb3BhY2l0eTogMDtcbiAgdGV4dC1zaGFkb3c6IDAgMXB4IDVweCAkZGFyay1jYXJib25lLWNvbG9yO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDEwMG1zICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuXG4gIC5za2lwQWN0aXZlIC5wcmV2aWV3SW5uZXI6aG92ZXIgJiB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGl2ZSkgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4ucHJldmlld0xpdmUge1xuICBkaXNwbGF5OiBub25lO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHotaW5kZXg6IDI7XG4gIGJvdHRvbTogNXB4O1xuICByaWdodDogM3B4O1xuICBwYWRkaW5nOiAwIDVweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBmb250LXdlaWdodDogODAwO1xuICBsaW5lLWhlaWdodDogMjBweDtcbiAgbGV0dGVyLXNwYWNpbmc6IDEuM3B4O1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBiYWNrZ3JvdW5kOiAkc2hhZG93LWNvbG9yO1xuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMnB4KTtcblxuICAmOjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIGZsZXg6IG5vbmU7XG4gICAgd2lkdGg6IDdweDtcbiAgICBoZWlnaHQ6IDdweDtcbiAgICBtYXJnaW4tcmlnaHQ6IDZweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgYmFja2dyb3VuZDogI2ZmNTY0ZTtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGl2ZSkgJiB7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIH1cbn1cblxuLnByZXZpZXdUaXRsZSB7XG4gICRjbGFtcDogMztcbiAgJGxpbmVIZWlnaHQ6IDE1cHg7XG5cbiAgZmxleDogbm9uZTtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICBtYXgtaGVpZ2h0OiAkY2xhbXAgKiAkbGluZUhlaWdodDtcbiAgbWFyZ2luOiAzcHggMTBweCAxMHB4O1xuICBsaW5lLWhlaWdodDogJGxpbmVIZWlnaHQ7XG4gIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG4gIC13ZWJraXQtbGluZS1jbGFtcDogJGNsYW1wO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgZm9udC1zaXplOiAxMXB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGl2ZSkgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4ucHJldmlld0Nsb3NlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAyO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBkaXNwbGF5OiBibG9jaztcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgcGFkZGluZzogNXB4O1xuICBib3JkZXItcmFkaXVzOiAxNXB4O1xuICBmaWxsOiAkbGlnaHQtY29sb3I7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICB0cmFuc2l0aW9uOiAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbiAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZC1jb2xvciwgYmFja2Ryb3AtZmlsdGVyO1xuICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgY3Vyc29yOiBwb2ludGVyO1xuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMTQxLCAxNTAsIDE3OCwgMC42KTtcbiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMnB4KTtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDE0MSwgMTUwLCAxNzgsIDAuOCk7XG4gICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDJweCk7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMTAwbXM7XG4gIH1cbn1cblxuLyogU0tJUCBCVVRUT04gKi9cbi5za2lwQnV0dG9uIHtcbiAgZGlzcGxheTogbm9uZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAzO1xuICByaWdodDogdmFyKC0tc2lkZS1nYXApO1xuICBwYWRkaW5nOiAwIDE1cHg7XG4gIGxpbmUtaGVpZ2h0OiB2YXIoLS1jb250cm9sLXNpemUpO1xuICBib3JkZXItcmFkaXVzOiBjYWxjKHZhcigtLWNvbnRyb2wtc2l6ZSkgLyAyKTtcbiAgYmFja2dyb3VuZDogJHNoYWRvdy1jb2xvcjtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDJweCk7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBjb2xvcjogJGxpZ2h0LWNvbG9yLWRpc2FibGVkO1xuICB0cmFuc2l0aW9uOiAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbiAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogYmFja2dyb3VuZC1jb2xvciwgYmFja2Ryb3AtZmlsdGVyLCBjb2xvcjtcblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAkY2FyYm9uZS1jb2xvcjtcbiAgICBiYWNrZHJvcC1maWx0ZXI6IG5vbmU7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZDogJGRhcmstY2FyYm9uZS1jb2xvcjtcbiAgICBiYWNrZHJvcC1maWx0ZXI6IG5vbmU7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICAubGFyZ2VIZWlnaHQgJiB7XG4gICAgcmlnaHQ6IGNhbGModmFyKC0tc2lkZS1nYXApICsgdmFyKC0tY29udHJvbC1zaXplKSArIDVweCk7XG4gIH1cblxuICAuc2tpcEFjdGl2ZSAmIHtcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICBjb2xvcjogaW5oZXJpdDtcbiAgfVxuXG4gIC53aXRoU2tpcCAmIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxuXG4gIC50aW1lckRpc2FibGVkICYsXG4gIC5oYXNNb3JlQmxvY2tzICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cblxuLnNraXBCdXR0b25EaXNhYmxlZExhYmVsIHtcbiAgZGlzcGxheTogaW5saW5lO1xuICBvcGFjaXR5OiAwLjY7XG5cbiAgLnNraXBBY3RpdmUgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4uc2tpcEJ1dHRvbkFjdGl2ZUxhYmVsIHtcbiAgZGlzcGxheTogbm9uZTtcblxuICAuc2tpcEFjdGl2ZSAmIHtcbiAgICBkaXNwbGF5OiBpbmxpbmU7XG4gIH1cblxuICAuaGFzTW9yZUJsb2NrcyAmIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbi8qIFNFRUsgQkFSICovXG4uc2VlayB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgei1pbmRleDogMztcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgaGVpZ2h0OiA1cHg7XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgLnRpbWVyRGlzYWJsZWQgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4uc2Vla0JhciB7XG4gIHdpZHRoOiAwO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGJhY2tncm91bmQ6ICRwcmltYXJ5LWNvbG9yO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1za2luLW1haW4tY29sb3IsICRwcmltYXJ5LWNvbG9yKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */</style><style>.eplayer-unmute{pointer-events:none !important}.eplayer-mobile:not(.eplayer-vertical)
        .eplayer-skin:not(.eplayer-hide-skin) .eplayer-unmute{top:0;bottom:0}.J1WoJaQ26k1NCpicZikk{position:absolute;top:15px;left:15px;display:inline-flex;justify-content:center;align-items:center;width:40px;height:40px;border-radius:50%;background:#315efb;background:var(--skin-main-color, #315efb);pointer-events:auto;transition:100ms cubic-bezier(0.4, 0, 0.3, 1);transition-property:opacity,background-color;cursor:pointer}.J1WoJaQ26k1NCpicZikk:hover{opacity:.9}.J1WoJaQ26k1NCpicZikk:active{opacity:.8}.eplayer-mobile .eEyxL1EJeXz5FMlOW6lf .J1WoJaQ26k1NCpicZikk{background:#343b4c}.eplayer-mobile .J1WoJaQ26k1NCpicZikk{top:0;bottom:0;right:15px;left:auto;margin:auto 0}.eplayer-hide-skin .J1WoJaQ26k1NCpicZikk{top:auto;bottom:15px;margin:0}.eplayer-mobile.eplayer-vertical .J1WoJaQ26k1NCpicZikk{top:24px;left:15px;bottom:auto;right:auto;margin:0}.fvIwz46YsXRSg9lxAyTf{flex:none;fill:#fff;width:20px;height:20px;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-light-main-color .fvIwz46YsXRSg9lxAyTf{fill:#343b4c}.eplayer-mobile .eEyxL1EJeXz5FMlOW6lf .fvIwz46YsXRSg9lxAyTf{fill:#fff}.YMGjIipf6sxcHLWo7KdW{display:none}.eEyxL1EJeXz5FMlOW6lf .YMGjIipf6sxcHLWo7KdW,.eplayer-mute .YMGjIipf6sxcHLWo7KdW{display:inline}.xgcQDcTeyuib7G0jSUXp{display:inline}.eEyxL1EJeXz5FMlOW6lf .xgcQDcTeyuib7G0jSUXp,.eplayer-mute .xgcQDcTeyuib7G0jSUXp{display:none}.eplayer-mobile:not(.eplayer-active) .eEyxL1EJeXz5FMlOW6lf .J1WoJaQ26k1NCpicZikk{background:rgba(52,59,76,.6);transition-duration:200ms}.eplayer-mobile:not(.eplayer-active) .eEyxL1EJeXz5FMlOW6lf .fvIwz46YsXRSg9lxAyTf{opacity:.5;transition-duration:200ms}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy91bm11dGUvc2tpbnMvdW5pdmVyc2FsL3N0eWxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBLGdCQUNFLDhCQUFBLENBRUE7OERBS0UsS0FBQSxDQUNBLFFBQUEsQ0FJSixzQkFDRSxpQkFBQSxDQUNBLFFBQUEsQ0FDQSxTQUFBLENBQ0EsbUJBQUEsQ0FDQSxzQkFBQSxDQUNBLGtCQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxpQkFBQSxDQUNBLGtCQTFCYyxDQTJCZCwwQ0FBQSxDQUNBLG1CQUFBLENBQ0EsNkNBQUEsQ0FDQSw0Q0FBQSxDQUNBLGNBQUEsQ0FFQSw0QkFDRSxVQUFBLENBR0YsNkJBQ0UsVUFBQSxDQUdGLDREQUNFLGtCQTVDUyxDQStDWCxzQ0FDRSxLQUFBLENBQ0EsUUFBQSxDQUNBLFVBQUEsQ0FDQSxTQUFBLENBQ0EsYUFBQSxDQUdGLHlDQUNFLFFBQUEsQ0FDQSxXQUFBLENBQ0EsUUFBQSxDQUtGLHVEQUNFLFFBQUEsQ0FDQSxTQUFBLENBQ0EsV0FBQSxDQUNBLFVBQUEsQ0FDQSxRQUFBLENBSUosc0JBQ0UsU0FBQSxDQUNBLFNBekVZLENBMEVaLFVBQUEsQ0FDQSxXQUFBLENBQ0EscURBQUEsQ0FFQSxnREFDRSxZQWhGUyxDQW1GWCw0REFDRSxTQW5GVSxDQXVGZCxzQkFDRSxZQUFBLENBRUEsZ0ZBRUUsY0FBQSxDQUlKLHNCQUNFLGNBQUEsQ0FFQSxnRkFFRSxZQUFBLENBS0YsaUZBQ0UsNEJBQUEsQ0FDQSx5QkFBQSxDQUdGLGlGQUNFLFVBQUEsQ0FDQSx5QkFBQSIsInNvdXJjZXNDb250ZW50IjpbIiRkYXJrLWNvbG9yOiAjMzQzYjRjO1xuJGxpZ2h0LWNvbG9yOiAjZmZmO1xuJHByaW1hcnktY29sb3I6ICMzMTVlZmI7XG4kdHJhbnNpdGlvbi1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4zLCAxKTtcblxuOmdsb2JhbCguZXBsYXllci11bm11dGUpIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmUgIWltcG9ydGFudDtcblxuICA6Z2xvYmFsKFxuICAgICAgLmVwbGF5ZXItbW9iaWxlOm5vdCguZXBsYXllci12ZXJ0aWNhbClcbiAgICAgICAgLmVwbGF5ZXItc2tpbjpub3QoLmVwbGF5ZXItaGlkZS1za2luKVxuICAgIClcbiAgICAmIHtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICB9XG59XG5cbi5idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMTVweDtcbiAgbGVmdDogMTVweDtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB3aWR0aDogNDBweDtcbiAgaGVpZ2h0OiA0MHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGJhY2tncm91bmQ6ICRwcmltYXJ5LWNvbG9yO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1za2luLW1haW4tY29sb3IsICRwcmltYXJ5LWNvbG9yKTtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gIHRyYW5zaXRpb246IDEwMG1zICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuICB0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5LCBiYWNrZ3JvdW5kLWNvbG9yO1xuICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgJjpob3ZlciB7XG4gICAgb3BhY2l0eTogMC45O1xuICB9XG5cbiAgJjphY3RpdmUge1xuICAgIG9wYWNpdHk6IDAuODtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAubm9Tb3VuZCAmIHtcbiAgICBiYWNrZ3JvdW5kOiAkZGFyay1jb2xvcjtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAmIHtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIHJpZ2h0OiAxNXB4O1xuICAgIGxlZnQ6IGF1dG87XG4gICAgbWFyZ2luOiBhdXRvIDA7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWhpZGUtc2tpbikgJiB7XG4gICAgdG9wOiBhdXRvO1xuICAgIGJvdHRvbTogMTVweDtcbiAgICBtYXJnaW46IDA7XG4gIH1cblxuICAvLyBOT1RFOiBzcGVjaWZpYyBzdHlsZXMgZm9yIHN0b3JpZXMgb24gY2hhbXBpb25hdFxuICAvLyBodHRwczovL2ppcmEucmFtYmxlci1jby5ydS9icm93c2UvVlAtNDA1MlxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZS5lcGxheWVyLXZlcnRpY2FsKSAmIHtcbiAgICB0b3A6IDI0cHg7XG4gICAgbGVmdDogMTVweDtcbiAgICBib3R0b206IGF1dG87XG4gICAgcmlnaHQ6IGF1dG87XG4gICAgbWFyZ2luOiAwO1xuICB9XG59XG5cbi5pY29uIHtcbiAgZmxleDogbm9uZTtcbiAgZmlsbDogJGxpZ2h0LWNvbG9yO1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDEwMG1zICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGlnaHQtbWFpbi1jb2xvcikgJiB7XG4gICAgZmlsbDogJGRhcmstY29sb3I7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgLm5vU291bmQgJiB7XG4gICAgZmlsbDogJGxpZ2h0LWNvbG9yO1xuICB9XG59XG5cbi5ub1NvdW5kUGF0aCB7XG4gIGRpc3BsYXk6IG5vbmU7XG5cbiAgLm5vU291bmQgJixcbiAgOmdsb2JhbCguZXBsYXllci1tdXRlKSAmIHtcbiAgICBkaXNwbGF5OiBpbmxpbmU7XG4gIH1cbn1cblxuLmhhc1NvdW5kUGF0aCB7XG4gIGRpc3BsYXk6IGlubGluZTtcblxuICAubm9Tb3VuZCAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW11dGUpICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cblxuOmdsb2JhbCguZXBsYXllci1tb2JpbGU6bm90KC5lcGxheWVyLWFjdGl2ZSkpIC5ub1NvdW5kIHtcbiAgLmJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZDogcmdiYSg1MiwgNTksIDc2LCAwLjYpO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuICB9XG5cbiAgLmljb24ge1xuICAgIG9wYWNpdHk6IDAuNTtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */</style><style>@font-face{font-family:"Manrope";font-style:normal;font-weight:600;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/semibold.woff2") format("woff2")}.pCPn7s7tOCIyZv8Dcbhv{z-index:1;position:relative;flex:none;display:flex;flex-direction:column;justify-content:flex-end;width:100%;background:#1f2431;font-family:eagle-default,Manrope,sans-serif;font-size:15px;font-weight:600}.eplayer-full-height-suggest .pCPn7s7tOCIyZv8Dcbhv{position:absolute;top:0;left:0;height:100%}.fxPXsXNjn_O0c8QeDGDd{flex:none;position:absolute;z-index:1;cursor:pointer}.fxPXsXNjn_O0c8QeDGDd svg{width:20px;height:20px;padding:10px;vertical-align:middle;fill:#fff;transition:color 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-mobile .fxPXsXNjn_O0c8QeDGDd:active svg,.eplayer-not-mobile .fxPXsXNjn_O0c8QeDGDd:hover svg{fill:#dcdfe7;transition-duration:200ms}.eplayer-not-mobile .fxPXsXNjn_O0c8QeDGDd:active svg{fill:#c6cad8;transition-duration:100ms}.iFEHTbqP9gNZ_s1ZNxQy{top:5px;right:5px;display:none}.eplayer-full-height-suggest .T2M4MS5lJ_ksxVdwMB9C .iFEHTbqP9gNZ_s1ZNxQy{display:block}.XQphghR3bRjVd2gDhOCI{position:absolute;top:10px;left:15px;max-width:calc(100% - 60px);line-height:20px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.eplayer-full-height-suggest .XQphghR3bRjVd2gDhOCI{top:15px}.rLyGM0Wc61hDBtvDq8z9{top:0;right:5px}.eplayer-full-height-suggest .rLyGM0Wc61hDBtvDq8z9{top:5px}.T2M4MS5lJ_ksxVdwMB9C .rLyGM0Wc61hDBtvDq8z9{display:none}.dlYmV_wjOzOiLxXsUEbk{box-sizing:border-box !important;flex:none;padding:40px 0 10px;width:100%;max-height:100%}.eplayer-full-height-suggest .dlYmV_wjOzOiLxXsUEbk{padding-top:50px !important}.aFLzrHo_xJdnylqncIg4{position:relative;z-index:2}.ZkqV8rc5gLGBSbGpN1Yg{position:absolute;top:0;bottom:0;width:100px;opacity:0;pointer-events:none;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.lBadRwS7PGxmC6Zwb02P{position:absolute;top:30px;width:20px;height:20px;padding:10px;border-radius:50%;fill:#fff;background:#315efb;background:var(--skin-main-color, #315efb)}.eplayer-light-main-color .lBadRwS7PGxmC6Zwb02P{fill:#343b4c}.m2ljNxRKLZ_x88eGuKum{left:0;background-image:linear-gradient(to left, transparent 0%, #1f2431 100%)}.m2ljNxRKLZ_x88eGuKum .lBadRwS7PGxmC6Zwb02P{left:5px}.iJPG52Yp4zma9cWQvDqt{right:0;background-image:linear-gradient(to right, transparent 0%, #1f2431 100%)}.iJPG52Yp4zma9cWQvDqt .lBadRwS7PGxmC6Zwb02P{right:5px}.p3NJ03Qn85VEN7YSHFgW .m2ljNxRKLZ_x88eGuKum,.cgJbpoRR4tskgXZpt8rU .iJPG52Yp4zma9cWQvDqt{opacity:1;transition-duration:200ms}.p3NJ03Qn85VEN7YSHFgW .m2ljNxRKLZ_x88eGuKum .lBadRwS7PGxmC6Zwb02P,.cgJbpoRR4tskgXZpt8rU .iJPG52Yp4zma9cWQvDqt .lBadRwS7PGxmC6Zwb02P{cursor:pointer;pointer-events:auto}.AkEBkXjtHmWWy5jMyEGH{display:flex;margin:0;padding:0;list-style:none;overflow-x:auto;scroll-behavior:smooth;scrollbar-width:none;-ms-overflow-style:none}.AkEBkXjtHmWWy5jMyEGH::-webkit-scrollbar{display:none}.klrjEyvyQmrvN7APhXdQ{position:relative;flex:none;width:187px;margin-right:10px;cursor:pointer}.klrjEyvyQmrvN7APhXdQ:first-child{margin-left:15px}.klrjEyvyQmrvN7APhXdQ:last-child{margin-right:15px}.rCxgKsf00_34cnjc4YGY{position:relative;z-index:0;display:flex;justify-content:center;align-items:center;height:105px;border-radius:5px;color:#315efb;background:#343b4c;overflow:hidden}.rCxgKsf00_34cnjc4YGY::before,.rCxgKsf00_34cnjc4YGY::after{content:"";position:absolute;z-index:1;display:none;opacity:0;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.rCxgKsf00_34cnjc4YGY::before{display:block;width:100%;height:100%;background-repeat:no-repeat}.eplayer-mobile .rCxgKsf00_34cnjc4YGY::before{background-size:100% 50%;background-image:linear-gradient(to bottom, rgba(31, 36, 49, 0.7), rgba(31, 36, 49, 0))}.eplayer-mobile .eplayer-tiny-suggest .rCxgKsf00_34cnjc4YGY::before,.eplayer-not-mobile .rCxgKsf00_34cnjc4YGY::before{background-size:100%;background-image:linear-gradient(to bottom, rgba(31, 36, 49, 0), rgba(31, 36, 49, 0.7))}.eplayer-not-mobile .eplayer-tiny-suggest .rCxgKsf00_34cnjc4YGY::before,.eplayer-not-mobile .J4OxDRJHdQTwPCm40vtf .rCxgKsf00_34cnjc4YGY::before{background:rgba(31,36,49,.8)}.eplayer-not-mobile .rCxgKsf00_34cnjc4YGY::after{display:block;width:40px;height:40px;background-size:100%;background-position:50%;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+CiAgPHBhdGggZmlsbD0iI0ZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNDAgMHY0ME0wIDB2NDBtMzUtMTguM0wxMyAzNC4zYTIgMiAwIDAgMS0zLTEuN1Y3LjRhMiAyIDAgMCAxIDMtMS43bDIyIDEyLjZhMiAyIDAgMCAxIDAgMy40Ii8+Cjwvc3ZnPgo=)}.eplayer-mobile .rCxgKsf00_34cnjc4YGY::before,.eplayer-not-mobile .klrjEyvyQmrvN7APhXdQ:hover .rCxgKsf00_34cnjc4YGY::before,.eplayer-not-mobile .klrjEyvyQmrvN7APhXdQ:hover .rCxgKsf00_34cnjc4YGY::after{opacity:1;transition-duration:200ms}.eplayer-tiny-suggest .rCxgKsf00_34cnjc4YGY::after,.eplayer-not-mobile .J4OxDRJHdQTwPCm40vtf .rCxgKsf00_34cnjc4YGY::after{opacity:0 !important}.sxgLHmvwGEA8suARULQ1{position:absolute;height:100%}.osECURjJqcqmlzf0_Iow{position:absolute;z-index:1;left:10px;top:5px;line-height:20px;color:#fff;opacity:0;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-tiny-suggest .osECURjJqcqmlzf0_Iow,.eplayer-not-mobile .osECURjJqcqmlzf0_Iow{top:auto;bottom:5px}.eplayer-mobile .osECURjJqcqmlzf0_Iow,.eplayer-not-mobile .klrjEyvyQmrvN7APhXdQ:hover .osECURjJqcqmlzf0_Iow{opacity:1;transition-duration:200ms}.WeqPPxCEq5HLh1i70meU{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin:5px 0 0;max-height:40px;overflow:hidden;text-overflow:ellipsis;line-height:20px;color:#fff;transition:100ms cubic-bezier(0.4, 0, 0.3, 1);transition-property:opacity,color;word-break:break-word}.eplayer-mobile .klrjEyvyQmrvN7APhXdQ:active .WeqPPxCEq5HLh1i70meU,.eplayer-not-mobile .klrjEyvyQmrvN7APhXdQ:hover .WeqPPxCEq5HLh1i70meU{color:#dcdfe7;transition-duration:200ms}.eplayer-not-mobile .klrjEyvyQmrvN7APhXdQ:active .WeqPPxCEq5HLh1i70meU{color:#c6cad8}.eplayer-tiny-suggest .WeqPPxCEq5HLh1i70meU,.eplayer-not-mobile .J4OxDRJHdQTwPCm40vtf .WeqPPxCEq5HLh1i70meU{position:absolute;right:10px;bottom:30px;left:10px;color:#fff !important}.eplayer-not-mobile .eplayer-tiny-suggest .WeqPPxCEq5HLh1i70meU,.eplayer-not-mobile .J4OxDRJHdQTwPCm40vtf .WeqPPxCEq5HLh1i70meU{opacity:0}.eplayer-not-mobile .eplayer-tiny-suggest .klrjEyvyQmrvN7APhXdQ:hover .WeqPPxCEq5HLh1i70meU,.eplayer-not-mobile .J4OxDRJHdQTwPCm40vtf .klrjEyvyQmrvN7APhXdQ:hover .WeqPPxCEq5HLh1i70meU{opacity:1}.eplayer-not-found .pCPn7s7tOCIyZv8Dcbhv{position:absolute;bottom:0}.eplayer-not-found .pCPn7s7tOCIyZv8Dcbhv [data-suggest-close],.eplayer-not-found .pCPn7s7tOCIyZv8Dcbhv [data-suggest-replay]{display:none}.eplayer-not-found .eplayer-full-height-suggest .pCPn7s7tOCIyZv8Dcbhv~.container .eplayer-error{background:rgba(52,59,76,.95);z-index:1}.eplayer-not-found :not(.eplayer-full-height-suggest) .pCPn7s7tOCIyZv8Dcbhv~.container .eplayer-error .eplayer-error-button{display:none}.eplayer-not-found :not(.eplayer-full-height-suggest) .pCPn7s7tOCIyZv8Dcbhv~.container .eplayer-error{padding-bottom:170px;display:flex !important}.eplayer-not-found :not(.eplayer-full-height-suggest) .pCPn7s7tOCIyZv8Dcbhv:hover~.container .eplayer-error{padding-bottom:200px !important}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy9zdWdnZXN0L3NraW5zL3VuaXZlcnNhbC9zdHlsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFVQSxXQUNFLHFCQUFBLENBQ0EsaUJBQUEsQ0FDQSxlQUFBLENBQ0Esa0dBQUEsQ0FLRixzQkFDRSxTQUFBLENBQ0EsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsWUFBQSxDQUNBLHFCQUFBLENBQ0Esd0JBQUEsQ0FDQSxVQUFBLENBQ0Esa0JBekJXLENBMEJYLDRDQUFBLENBQ0EsY0FBQSxDQUNBLGVBQUEsQ0FFQSxtREFDRSxpQkFBQSxDQUNBLEtBQUEsQ0FDQSxNQUFBLENBQ0EsV0FBQSxDQVVKLHNCQUNFLFNBQUEsQ0FDQSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxjQUFBLENBRUEsMEJBQ0UsVUFBQSxDQUNBLFdBQUEsQ0FDQSxZQUFBLENBQ0EscUJBQUEsQ0FDQSxTQXhEVSxDQXlEVixtREFBQSxDQUdGLHFHQUVFLFlBM0RlLENBNERmLHlCQUFBLENBR0YscURBQ0UsWUEvRGdCLENBZ0VoQix5QkFBQSxDQUlKLHNCQUNFLE9BQUEsQ0FDQSxTQUFBLENBQ0EsWUFBQSxDQUVBLHlFQUNFLGFBQUEsQ0FJSixzQkFDRSxpQkFBQSxDQUNBLFFBQUEsQ0FDQSxTQUFBLENBQ0EsMkJBQUEsQ0FDQSxnQkFBQSxDQUNBLGtCQUFBLENBQ0Esc0JBQUEsQ0FDQSxlQUFBLENBRUEsbURBQ0UsUUFBQSxDQUlKLHNCQUNFLEtBQUEsQ0FDQSxTQUFBLENBRUEsbURBQ0UsT0FBQSxDQUdGLDRDQUNFLFlBQUEsQ0FJSixzQkFDRSxnQ0FBQSxDQUNBLFNBQUEsQ0FDQSxtQkFBQSxDQUNBLFVBQUEsQ0FDQSxlQUFBLENBRUEsbURBQ0UsMkJBQUEsQ0FJSixzQkFDRSxpQkFBQSxDQUNBLFNBQUEsQ0FHRixzQkFDRSxpQkFBQSxDQUNBLEtBQUEsQ0FDQSxRQUFBLENBQ0EsV0FBQSxDQUNBLFNBQUEsQ0FDQSxtQkFBQSxDQUNBLHFEQUFBLENBR0Ysc0JBQ0UsaUJBQUEsQ0FDQSxRQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxZQUFBLENBQ0EsaUJBQUEsQ0FDQSxTQWhKWSxDQWlKWixrQkEzSWMsQ0E0SWQsMENBQUEsQ0FFQSxnREFDRSxZQXRKUyxDQTBKYixzQkFDRSxNQUFBLENBQ0EsdUVBQUEsQ0FFQSw0Q0FDRSxRQUFBLENBSUosc0JBQ0UsT0FBQSxDQUNBLHdFQUFBLENBRUEsNENBQ0UsU0FBQSxDQUlKLHdGQUVFLFNBQUEsQ0FDQSx5QkFBQSxDQUVBLG9JQUNFLGNBQUEsQ0FDQSxtQkFBQSxDQUlKLHNCQUNFLFlBQUEsQ0FDQSxRQUFBLENBQ0EsU0FBQSxDQUNBLGVBQUEsQ0FDQSxlQUFBLENBQ0Esc0JBQUEsQ0FDQSxvQkFBQSxDQUNBLHVCQUFBLENBRUEseUNBQ0UsWUFBQSxDQUlKLHNCQUNFLGlCQUFBLENBQ0EsU0FBQSxDQUNBLFdBQUEsQ0FDQSxpQkFBQSxDQUNBLGNBQUEsQ0FFQSxrQ0FDRSxnQkFBQSxDQUdGLGlDQUNFLGlCQUFBLENBSUosc0JBQ0UsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsWUFBQSxDQUNBLHNCQUFBLENBQ0Esa0JBQUEsQ0FDQSxZQUFBLENBQ0EsaUJBQUEsQ0FDQSxhQXZOYyxDQXdOZCxrQkEvTlcsQ0FnT1gsZUFBQSxDQUVBLDJEQUVFLFVBQUEsQ0FDQSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxZQUFBLENBQ0EsU0FBQSxDQUNBLHFEQUFBLENBR0YsOEJBQ0UsYUFBQSxDQUNBLFVBQUEsQ0FDQSxXQUFBLENBQ0EsMkJBQUEsQ0FFQSw4Q0FDRSx3QkFBQSxDQUNBLHVGQUFBLENBT0Ysc0hBRUUsb0JBQUEsQ0FDQSx1RkFBQSxDQU9GLGdKQUVFLDRCQUFBLENBSUosaURBQ0UsYUFBQSxDQUNBLFVBQUEsQ0FDQSxXQUFBLENBQ0Esb0JBQUEsQ0FDQSx1QkFBQSxDQUNBLDJCQUFBLENBQ0Esd0RBQUEsQ0FHRix5TUFHRSxTQUFBLENBQ0EseUJBQUEsQ0FHRiwwSEFFRSxvQkFBQSxDQUlKLHNCQUNFLGlCQUFBLENBQ0EsV0FBQSxDQUdGLHNCQUNFLGlCQUFBLENBQ0EsU0FBQSxDQUNBLFNBQUEsQ0FDQSxPQUFBLENBQ0EsZ0JBQUEsQ0FDQSxVQUFBLENBQ0EsU0FBQSxDQUNBLHFEQUFBLENBRUEsc0ZBRUUsUUFBQSxDQUNBLFVBQUEsQ0FHRiw0R0FFRSxTQUFBLENBQ0EseUJBQUEsQ0FJSixzQkFDRSxtQkFBQSxDQUNBLG9CQUFBLENBQ0EsMkJBQUEsQ0FDQSxjQUFBLENBQ0EsZUFBQSxDQUNBLGVBQUEsQ0FDQSxzQkFBQSxDQUNBLGdCQUFBLENBQ0EsVUF0VVksQ0F1VVosNkNBQUEsQ0FDQSxpQ0FBQSxDQUNBLHFCQUFBLENBRUEseUlBRUUsYUExVWUsQ0EyVWYseUJBQUEsQ0FHRix1RUFDRSxhQTlVZ0IsQ0FpVmxCLDRHQUVFLGlCQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxTQUFBLENBQ0EscUJBQUEsQ0FHRixnSUFFRSxTQUFBLENBR0Ysd0xBRUUsU0FBQSxDQUlKLHlDQUNFLGlCQUFBLENBQ0EsUUFBQSxDQUVBLDZIQUVFLFlBQUEsQ0FLRixnR0FDRSw2QkFBQSxDQUNBLFNBQUEsQ0FLRiw0SEFDRSxZQUFBLENBR0Ysc0dBQ0Usb0JBQUEsQ0FDQSx1QkFBQSxDQUdGLDRHQUNFLCtCQUFBIiwic291cmNlc0NvbnRlbnQiOlsiJGRhcmstY29sb3I6ICMzNDNiNGM7XG4kbGlnaHQtY29sb3I6ICNmZmY7XG4kYmFja2dyb3VuZDogIzFmMjQzMTtcbiRpdGVtLWNvbG9yOiAkbGlnaHQtY29sb3I7XG4kaXRlbS1jb2xvci1ob3ZlcjogI2RjZGZlNztcbiRpdGVtLWNvbG9yLWFjdGl2ZTogI2M2Y2FkODtcbiRpdGVtLWJnLWNvbG9yOiAkZGFyay1jb2xvcjtcbiRwcmltYXJ5LWNvbG9yOiAjMzE1ZWZiO1xuJHRyYW5zaXRpb24tZnVuY3Rpb246IGN1YmljLWJlemllcigwLjQsIDAsIDAuMywgMSk7XG5cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ01hbnJvcGUnO1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIHNyYzogbG9jYWwoJ01hbnJvcGUnKSxcbiAgICB1cmwoJ2h0dHBzOi8vc3RhdGljLnJhbWJsZXIucnUvZm9udHMvTWFucm9wZS9zZW1pYm9sZC53b2ZmMicpXG4gICAgICBmb3JtYXQoJ3dvZmYyJyk7XG59XG5cbi5yb290IHtcbiAgei1pbmRleDogMTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBmbGV4OiBub25lO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICB3aWR0aDogMTAwJTtcbiAgYmFja2dyb3VuZDogJGJhY2tncm91bmQ7XG4gIGZvbnQtZmFtaWx5OiBlYWdsZS1kZWZhdWx0LCBNYW5yb3BlLCBzYW5zLXNlcmlmO1xuICBmb250LXNpemU6IDE1cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG5cbiAgOmdsb2JhbCguZXBsYXllci1mdWxsLWhlaWdodC1zdWdnZXN0KSAmIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG59XG5cbi8qIHN0eWxlbGludC1kaXNhYmxlIGJsb2NrLW5vLWVtcHR5ICovXG4uaXNQYXVzZWQsXG4uaXNFbmRlZCB7XG59XG4vKiBzdHlsZWxpbnQtZW5hYmxlICovXG5cbi5idXR0b24ge1xuICBmbGV4OiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHotaW5kZXg6IDE7XG4gIGN1cnNvcjogcG9pbnRlcjtcblxuICBzdmcge1xuICAgIHdpZHRoOiAyMHB4O1xuICAgIGhlaWdodDogMjBweDtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gICAgZmlsbDogJGl0ZW0tY29sb3I7XG4gICAgdHJhbnNpdGlvbjogY29sb3IgMTAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgJjphY3RpdmUgc3ZnLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpICY6aG92ZXIgc3ZnIHtcbiAgICBmaWxsOiAkaXRlbS1jb2xvci1ob3ZlcjtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgJjphY3RpdmUgc3ZnIHtcbiAgICBmaWxsOiAkaXRlbS1jb2xvci1hY3RpdmU7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMTAwbXM7XG4gIH1cbn1cblxuLnJlcGxheSB7XG4gIHRvcDogNXB4O1xuICByaWdodDogNXB4O1xuICBkaXNwbGF5OiBub25lO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItZnVsbC1oZWlnaHQtc3VnZ2VzdCkgLmlzRW5kZWQgJiB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gIH1cbn1cblxuLnRpdGxlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDEwcHg7XG4gIGxlZnQ6IDE1cHg7XG4gIG1heC13aWR0aDogY2FsYygxMDAlIC0gNjBweCk7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLWZ1bGwtaGVpZ2h0LXN1Z2dlc3QpICYge1xuICAgIHRvcDogMTVweDtcbiAgfVxufVxuXG4uY2xvc2Uge1xuICB0b3A6IDA7XG4gIHJpZ2h0OiA1cHg7XG5cbiAgOmdsb2JhbCguZXBsYXllci1mdWxsLWhlaWdodC1zdWdnZXN0KSAmIHtcbiAgICB0b3A6IDVweDtcbiAgfVxuXG4gIC5pc0VuZGVkICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cblxuLmNvbnRlbnQge1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94ICFpbXBvcnRhbnQ7XG4gIGZsZXg6IG5vbmU7XG4gIHBhZGRpbmc6IDQwcHggMCAxMHB4O1xuICB3aWR0aDogMTAwJTtcbiAgbWF4LWhlaWdodDogMTAwJTtcblxuICA6Z2xvYmFsKC5lcGxheWVyLWZ1bGwtaGVpZ2h0LXN1Z2dlc3QpICYge1xuICAgIHBhZGRpbmctdG9wOiA1MHB4ICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuLnNsaWRlciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgei1pbmRleDogMjtcbn1cblxuLmFycm93IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgd2lkdGg6IDEwMHB4O1xuICBvcGFjaXR5OiAwO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbn1cblxuLmFycm93SWNvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAzMHB4O1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIGZpbGw6ICRsaWdodC1jb2xvcjtcbiAgYmFja2dyb3VuZDogJHByaW1hcnktY29sb3I7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNraW4tbWFpbi1jb2xvciwgJHByaW1hcnktY29sb3IpO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGlnaHQtbWFpbi1jb2xvcikgJiB7XG4gICAgZmlsbDogJGRhcmstY29sb3I7XG4gIH1cbn1cblxuLmxlZnRBcnJvdyB7XG4gIGxlZnQ6IDA7XG4gIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBsZWZ0LCB0cmFuc3BhcmVudCAwJSwgJGJhY2tncm91bmQgMTAwJSk7XG5cbiAgLmFycm93SWNvbiB7XG4gICAgbGVmdDogNXB4O1xuICB9XG59XG5cbi5yaWdodEFycm93IHtcbiAgcmlnaHQ6IDA7XG4gIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgdHJhbnNwYXJlbnQgMCUsICRiYWNrZ3JvdW5kIDEwMCUpO1xuXG4gIC5hcnJvd0ljb24ge1xuICAgIHJpZ2h0OiA1cHg7XG4gIH1cbn1cblxuLmxlZnRBcnJvd1Zpc2libGUgLmxlZnRBcnJvdyxcbi5yaWdodEFycm93VmlzaWJsZSAucmlnaHRBcnJvdyB7XG4gIG9wYWNpdHk6IDE7XG4gIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuXG4gIC5hcnJvd0ljb24ge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgfVxufVxuXG4ubGlzdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgb3ZlcmZsb3cteDogYXV0bztcbiAgc2Nyb2xsLWJlaGF2aW9yOiBzbW9vdGg7XG4gIHNjcm9sbGJhci13aWR0aDogbm9uZTsgLyogRmlyZWZveCAqL1xuICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IC8qIEludGVybmV0IEV4cGxvcmVyIDEwKyAqL1xuXG4gICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbi5pdGVtIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBmbGV4OiBub25lO1xuICB3aWR0aDogMTg3cHg7XG4gIG1hcmdpbi1yaWdodDogMTBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuXG4gICY6Zmlyc3QtY2hpbGQge1xuICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xuICB9XG5cbiAgJjpsYXN0LWNoaWxkIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gIH1cbn1cblxuLml0ZW1UaHVtYm5haWwge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHotaW5kZXg6IDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBoZWlnaHQ6IDEwNXB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGNvbG9yOiAkcHJpbWFyeS1jb2xvcjtcbiAgYmFja2dyb3VuZDogJGl0ZW0tYmctY29sb3I7XG4gIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgJjo6YmVmb3JlLFxuICAmOjphZnRlciB7XG4gICAgY29udGVudDogJyc7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDE7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMTAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuXG4gICAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpICYge1xuICAgICAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDUwJTtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudChcbiAgICAgICAgdG8gYm90dG9tLFxuICAgICAgICByZ2JhKDMxLCAzNiwgNDksIDAuNyksXG4gICAgICAgIHJnYmEoMzEsIDM2LCA0OSwgMClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUgLmVwbGF5ZXItdGlueS1zdWdnZXN0KSAmLFxuICAgIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgJiB7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDEwMCU7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgICAgIHRvIGJvdHRvbSxcbiAgICAgICAgcmdiYSgzMSwgMzYsIDQ5LCAwKSxcbiAgICAgICAgcmdiYSgzMSwgMzYsIDQ5LCAwLjcpXG4gICAgICApO1xuICAgIH1cblxuICAgIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSAuZXBsYXllci10aW55LXN1Z2dlc3QpICYsXG4gICAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuaGlkZU5hbWVzICYge1xuICAgICAgYmFja2dyb3VuZDogcmdiYSgzMSwgMzYsIDQ5LCAwLjgpO1xuICAgIH1cbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgJjo6YWZ0ZXIge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHdpZHRoOiA0MHB4O1xuICAgIGhlaWdodDogNDBweDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IDEwMCU7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogNTAlO1xuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSFpwWlhkQ2IzZzlJakFnTUNBME1DQTBNQ0krQ2lBZ1BIQmhkR2dnWm1sc2JEMGlJMFpHUmlJZ1ptbHNiQzF5ZFd4bFBTSmxkbVZ1YjJSa0lpQmtQU0pOTkRBZ01IWTBNRTB3SURCMk5EQnRNelV0TVRndU0wd3hNeUF6TkM0ellUSWdNaUF3SURBZ01TMHpMVEV1TjFZM0xqUmhNaUF5SURBZ01DQXhJRE10TVM0M2JESXlJREV5TGpaaE1pQXlJREFnTUNBeElEQWdNeTQwSWk4K0Nqd3ZjM1puUGdvPScpO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpICY6OmJlZm9yZSxcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuaXRlbTpob3ZlciAmOjpiZWZvcmUsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLml0ZW06aG92ZXIgJjo6YWZ0ZXIge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLXRpbnktc3VnZ2VzdCkgJjo6YWZ0ZXIsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLmhpZGVOYW1lcyAmOjphZnRlciB7XG4gICAgb3BhY2l0eTogMCAhaW1wb3J0YW50O1xuICB9XG59XG5cbi5pdGVtSW1hZ2Uge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLml0ZW1EdXJhdGlvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgei1pbmRleDogMTtcbiAgbGVmdDogMTBweDtcbiAgdG9wOiA1cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBjb2xvcjogI2ZmZjtcbiAgb3BhY2l0eTogMDtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLXRpbnktc3VnZ2VzdCkgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAmIHtcbiAgICB0b3A6IGF1dG87XG4gICAgYm90dG9tOiA1cHg7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuaXRlbTpob3ZlciAmIHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuICB9XG59XG5cbi5pdGVtQ2FwdGlvbiB7XG4gIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAtd2Via2l0LWxpbmUtY2xhbXA6IDI7XG4gIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG4gIG1hcmdpbjogNXB4IDAgMDtcbiAgbWF4LWhlaWdodDogNDBweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBjb2xvcjogJGl0ZW0tY29sb3I7XG4gIHRyYW5zaXRpb246IDEwMG1zICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuICB0cmFuc2l0aW9uLXByb3BlcnR5OiBvcGFjaXR5LCBjb2xvcjtcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgLml0ZW06YWN0aXZlICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLml0ZW06aG92ZXIgJiB7XG4gICAgY29sb3I6ICRpdGVtLWNvbG9yLWhvdmVyO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuaXRlbTphY3RpdmUgJiB7XG4gICAgY29sb3I6ICRpdGVtLWNvbG9yLWFjdGl2ZTtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItdGlueS1zdWdnZXN0KSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpIC5oaWRlTmFtZXMgJiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHJpZ2h0OiAxMHB4O1xuICAgIGJvdHRvbTogMzBweDtcbiAgICBsZWZ0OiAxMHB4O1xuICAgIGNvbG9yOiAkaXRlbS1jb2xvciAhaW1wb3J0YW50O1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlIC5lcGxheWVyLXRpbnktc3VnZ2VzdCkgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuaGlkZU5hbWVzICYge1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUgLmVwbGF5ZXItdGlueS1zdWdnZXN0KSAuaXRlbTpob3ZlciAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpIC5oaWRlTmFtZXMgLml0ZW06aG92ZXIgJiB7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxufVxuXG46Z2xvYmFsKC5lcGxheWVyLW5vdC1mb3VuZCkgLnJvb3Qge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMDtcblxuICBbZGF0YS1zdWdnZXN0LWNsb3NlXSxcbiAgW2RhdGEtc3VnZ2VzdC1yZXBsYXldIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbjpnbG9iYWwoLmVwbGF5ZXItbm90LWZvdW5kIC5lcGxheWVyLWZ1bGwtaGVpZ2h0LXN1Z2dlc3QpIHtcbiAgLnJvb3QgfiA6Z2xvYmFsKC5jb250YWluZXIgLmVwbGF5ZXItZXJyb3IpIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDUyLCA1OSwgNzYsIDAuOTUpO1xuICAgIHotaW5kZXg6IDE7XG4gIH1cbn1cblxuOmdsb2JhbCguZXBsYXllci1ub3QtZm91bmQgOm5vdCguZXBsYXllci1mdWxsLWhlaWdodC1zdWdnZXN0KSkge1xuICAucm9vdCB+IDpnbG9iYWwoLmNvbnRhaW5lciAuZXBsYXllci1lcnJvciAuZXBsYXllci1lcnJvci1idXR0b24pIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgLnJvb3QgfiA6Z2xvYmFsKC5jb250YWluZXIgLmVwbGF5ZXItZXJyb3IpIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMTcwcHg7XG4gICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICB9XG5cbiAgLnJvb3Q6aG92ZXIgfiA6Z2xvYmFsKC5jb250YWluZXIgLmVwbGF5ZXItZXJyb3IpIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogMjAwcHggIWltcG9ydGFudDtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */</style><style>@font-face{font-family:"Manrope";font-style:normal;font-weight:600;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/semibold.woff2") format("woff2")}.eplayer-time-to-ad{pointer-events:none !important}.RXAxDMcxuRgXcmykt9qo{position:absolute;top:15px;right:15px;padding:0 15px;line-height:30px;border-radius:15px;background:rgba(52,59,76,.4);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);font-family:eagle-default,Manrope,sans-serif;font-size:15px;font-weight:600;color:hsla(0,0%,100%,.6)}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy90aW1lLXRvLWFkdmVydGlzZW1lbnQvc2tpbnMvdW5pdmVyc2FsL3N0eWxlcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQ0UscUJBQUEsQ0FDQSxpQkFBQSxDQUNBLGVBQUEsQ0FDQSxrR0FBQSxDQUtGLG9CQUNFLDhCQUFBLENBR0Ysc0JBQ0UsaUJBQUEsQ0FDQSxRQUFBLENBQ0EsVUFBQSxDQUNBLGNBQUEsQ0FDQSxnQkFBQSxDQUNBLGtCQUFBLENBQ0EsNEJBQUEsQ0FDQSxpQ0FBQSxDQUFBLHlCQUFBLENBQ0EsNENBQUEsQ0FDQSxjQUFBLENBQ0EsZUFBQSxDQUNBLHdCQUFBIiwic291cmNlc0NvbnRlbnQiOlsiQGZvbnQtZmFjZSB7XG4gIGZvbnQtZmFtaWx5OiAnTWFucm9wZSc7XG4gIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgc3JjOiBsb2NhbCgnTWFucm9wZScpLFxuICAgIHVybCgnaHR0cHM6Ly9zdGF0aWMucmFtYmxlci5ydS9mb250cy9NYW5yb3BlL3NlbWlib2xkLndvZmYyJylcbiAgICAgIGZvcm1hdCgnd29mZjInKTtcbn1cblxuOmdsb2JhbCguZXBsYXllci10aW1lLXRvLWFkKSB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7XG59XG5cbi50aW1lVG9BZENvdW50ZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMTVweDtcbiAgcmlnaHQ6IDE1cHg7XG4gIHBhZGRpbmc6IDAgMTVweDtcbiAgbGluZS1oZWlnaHQ6IDMwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gIGJhY2tncm91bmQ6IHJnYmEoNTIsIDU5LCA3NiwgMC40KTtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDJweCk7XG4gIGZvbnQtZmFtaWx5OiBlYWdsZS1kZWZhdWx0LCBNYW5yb3BlLCBzYW5zLXNlcmlmO1xuICBmb250LXNpemU6IDE1cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNik7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */</style><style>.eplayer-mobile .URPE3uegZa6K1qu6Kyae:active .oZ7L2wLsgD_vqPsa5Qkl,.eplayer-not-mobile .URPE3uegZa6K1qu6Kyae:hover .oZ7L2wLsgD_vqPsa5Qkl,.eplayer-not-mobile .URPE3uegZa6K1qu6Kyae[data-menu-item-active] .oZ7L2wLsgD_vqPsa5Qkl,.eplayer-not-mobile .URPE3uegZa6K1qu6Kyae[data-menu-item-active]~.WEvv65vcGxtg6D8a7JGC>.oZ7L2wLsgD_vqPsa5Qkl{fill:#dcdfe7;fill:var(--skin-hover-color, #dcdfe7);transition-duration:200ms}@font-face{font-family:"Manrope";font-style:normal;font-weight:500;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/medium.woff2") format("woff2")}@font-face{font-family:"Manrope";font-style:normal;font-weight:600;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/semibold.woff2") format("woff2")}@font-face{font-family:"Manrope";font-style:normal;font-weight:800;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/extrabold.woff2") format("woff2")}.eplayer{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%}.eplayer *,.eplayer *::before,.eplayer *::after{box-sizing:content-box}.eplayer-fullscreen-menu.settings-menu-visible .eplayer-holdable,.eplayer-hide-skin .eplayer-holdable{display:none !important;pointer-events:none}.eagleplayer-container{display:flex;flex-direction:column}.container{position:absolute !important;top:0;left:0;width:100%;height:100%}.eplayer-skin{position:relative;z-index:1;flex:auto;width:100%;font-family:eagle-default,Manrope,sans-serif;font-weight:600;font-size:14px;pointer-events:none}.eplayer-skin,.eplayer-skin *{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.eplayer-skin>*{pointer-events:auto}.eplayer-skin .eplayer-skin-fullsize{width:auto;height:auto;position:absolute;top:0;left:0;bottom:0;right:0}.eplayer-skin .eplayer-skin-component{z-index:10}.eplayer-skin .eplayer-skin-foreground{z-index:100}.eplayer-skin .eplayer-skin-background{z-index:0}.eplayer-skin .eplayer-skin-middleground{z-index:6}.eplayer-skin .eplayer-text{font-size:12px}.eplayer-handled-error{display:block !important}.eplayer-skin-not-started .eplayer-hide-control-start{display:none !important}.eplayer-skin-fullsize.eplayer-skin-shiftable{top:0;bottom:5px;transition:top 100ms,bottom 200ms;transition-timing-function:cubic-bezier(0.4, 0, 0.3, 1)}.VMOa0WVYDVoAMVuF6t8l .eplayer-skin-fullsize.eplayer-skin-shiftable,.eplayer-mobile.eplayer-active .eplayer-skin-fullsize.eplayer-skin-shiftable,.eplayer-mobile .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .eplayer-skin-fullsize.eplayer-skin-shiftable,.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .eplayer-skin-fullsize.eplayer-skin-shiftable,.eplayer-normal-menu.settings-menu-visible .eplayer-skin-fullsize.eplayer-skin-shiftable,.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-skin-fullsize.eplayer-skin-shiftable{top:35px;bottom:35px;transition:top 100ms,bottom 300ms;transition-timing-function:cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-mobile.eplayer-active .eplayer-skin-fullsize.eplayer-skin-shiftable[data-banner],.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .eplayer-skin-fullsize.eplayer-skin-shiftable[data-banner],.eplayer-normal-menu.settings-menu-visible .eplayer-skin-fullsize.eplayer-skin-shiftable[data-banner],.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-skin-fullsize.eplayer-skin-shiftable[data-banner]{top:auto;bottom:50px}.eplayer-hide-skin .eplayer-skin-fullsize.eplayer-skin-shiftable,.eplayer-skin-not-started .eplayer-skin-fullsize.eplayer-skin-shiftable,.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .eplayer-skin-fullsize.eplayer-skin-shiftable{top:0 !important;bottom:5px !important}.eplayer-title-hidden:not(.eplayer-skin-with-likes) .eplayer-skin-fullsize.eplayer-skin-shiftable{top:0 !important}.eplayer-live-status{display:block}.Ui6arcgDYDPWnMjd1t5M .eplayer-live-status,.VMOa0WVYDVoAMVuF6t8l .eplayer-live-status,.eplayer-mobile.eplayer-active .eplayer-live-status,.eplayer-mobile .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .eplayer-live-status,.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .eplayer-live-status,.eplayer-normal-menu.settings-menu-visible .eplayer-live-status,.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-live-status{display:none}.eplayer-skin-not-started .eplayer-live-status{display:block !important}.eplayer-fullscreen{width:100% !important;height:100% !important}.uYaTe6HCN9zQQoSqR0fw{position:absolute;width:100%;pointer-events:none}.gsPn7YuUnkuSP6rCrcJf{top:-100px;height:100px;background:linear-gradient(0deg, transparent 0, rgba(31, 36, 49, 0.7) 100%);transition:top 200ms cubic-bezier(0.4, 0, 0.3, 1)}.VMOa0WVYDVoAMVuF6t8l .gsPn7YuUnkuSP6rCrcJf,.eplayer-mobile.eplayer-active .gsPn7YuUnkuSP6rCrcJf,.eplayer-mobile .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .gsPn7YuUnkuSP6rCrcJf,.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .gsPn7YuUnkuSP6rCrcJf,.eplayer-normal-menu.settings-menu-visible .gsPn7YuUnkuSP6rCrcJf,.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover~.gsPn7YuUnkuSP6rCrcJf{top:0;transition-duration:300ms}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .gsPn7YuUnkuSP6rCrcJf{top:-100px !important}.gMG1wB2IgDMSSssajBJp{bottom:-70px;height:70px;background:linear-gradient(180deg, transparent 0, rgba(31, 36, 49, 0.7) 100%);transition:bottom 200ms cubic-bezier(0.4, 0, 0.3, 1)}.VMOa0WVYDVoAMVuF6t8l .gMG1wB2IgDMSSssajBJp,.eplayer-mobile.eplayer-active .gMG1wB2IgDMSSssajBJp,.eplayer-mobile .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .gMG1wB2IgDMSSssajBJp,.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .gMG1wB2IgDMSSssajBJp,.eplayer-normal-menu.settings-menu-visible .gMG1wB2IgDMSSssajBJp,.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover~.gMG1wB2IgDMSSssajBJp{bottom:0;transition-duration:300ms}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .gMG1wB2IgDMSSssajBJp{bottom:-70px !important}.Ra92aSe94EkacKMKpaE3{box-sizing:border-box;position:absolute;top:0;visibility:hidden;opacity:0;z-index:12;width:100%;padding:15px 15px 10px;transition:opacity 200ms cubic-bezier(0.4, 0, 0.3, 1)}.VMOa0WVYDVoAMVuF6t8l .Ra92aSe94EkacKMKpaE3,.eplayer-mobile.eplayer-active .Ra92aSe94EkacKMKpaE3,.eplayer-mobile .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .Ra92aSe94EkacKMKpaE3,.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .Ra92aSe94EkacKMKpaE3,.eplayer-normal-menu.settings-menu-visible .Ra92aSe94EkacKMKpaE3,.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover~.Ra92aSe94EkacKMKpaE3{visibility:visible;opacity:1;transition-duration:300ms}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .Ra92aSe94EkacKMKpaE3{visibility:hidden !important;opacity:0 !important}.eplayer-title-hidden .Ra92aSe94EkacKMKpaE3{display:none !important}.DW2hBww0s2WznCtQaABS{white-space:nowrap;text-overflow:ellipsis;font-size:15px;line-height:20px;color:#fff;overflow:hidden;text-decoration:none;pointer-events:auto;cursor:pointer;transition:color 200ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-mobile .DW2hBww0s2WznCtQaABS:active,.eplayer-not-mobile .DW2hBww0s2WznCtQaABS:hover{color:#dcdfe7;color:var(--skin-hover-color, #dcdfe7);transition-duration:300ms}.eplayer-not-mobile .DW2hBww0s2WznCtQaABS:active{color:#c6cad8;transition-duration:200ms}.eplayer-skin-with-likes .DW2hBww0s2WznCtQaABS{margin-right:75px}.eplayer-likes{visibility:hidden;opacity:0;transition:opacity 200ms cubic-bezier(0.4, 0, 0.3, 1)}.VMOa0WVYDVoAMVuF6t8l .eplayer-likes,.eplayer-mobile.eplayer-active .eplayer-likes,.eplayer-mobile .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .eplayer-likes,.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .eplayer-likes,.eplayer-normal-menu.settings-menu-visible .eplayer-likes,.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-likes{visibility:visible;opacity:1;transition-duration:300ms}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .eplayer-likes{visibility:visible !important;opacity:1 !important;transition-duration:200ms !important}.eplayer-skin-not-started .eplayer-likes{display:none}.eplayer-not-mobile .eplayer-title-hidden .eplayer-unmute{top:0 !important}.xaiLYUBoQUHKWYrveUhg .eplayer-unmute{display:none !important}.eplayer-not-mobile
          .eplayer-large-screen.eplayer-with-three-sixty-viewer .Ui6arcgDYDPWnMjd1t5M .eplayer-unmute [data-unmute],.eplayer-not-mobile
          .eplayer-large-screen.eplayer-with-three-sixty-viewer .WKW80FnxPR0_7tVAxx5f .eplayer-unmute [data-unmute]{top:75px;left:20px}.eplayer-title-hidden .eplayer-promo-button-left-up{top:0 !important}.eplayer-title-hidden .eplayer-three-sixty{top:0 !important}.eplayer-three-sixty-button{display:none}.eplayer-not-mobile .eplayer-large-screen .Ui6arcgDYDPWnMjd1t5M .eplayer-three-sixty-button,.eplayer-not-mobile .eplayer-large-screen .WKW80FnxPR0_7tVAxx5f .eplayer-three-sixty-button{display:block}.eplayer-three-sixty-label{position:fixed !important;opacity:1;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-active.eplayer-not-mobile .xaiLYUBoQUHKWYrveUhg:hover .eplayer-three-sixty-label,.eplayer-not-mobile .xaiLYUBoQUHKWYrveUhg .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-three-sixty .eplayer-three-sixty-label{opacity:0;transition-duration:200ms}.Ui6arcgDYDPWnMjd1t5M .eplayer-three-sixty-label,.WKW80FnxPR0_7tVAxx5f .eplayer-three-sixty-label{display:none}.u9XDMzbFMAqO7NyK9ulv{position:absolute;left:0;right:0;bottom:-50px;height:50px;transition:bottom 200ms cubic-bezier(0.4, 0, 0.3, 1);z-index:13 !important}.VMOa0WVYDVoAMVuF6t8l .u9XDMzbFMAqO7NyK9ulv,.eplayer-mobile.eplayer-active .u9XDMzbFMAqO7NyK9ulv,.eplayer-mobile .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .u9XDMzbFMAqO7NyK9ulv,.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .u9XDMzbFMAqO7NyK9ulv,.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover,.eplayer-normal-menu.settings-menu-visible .u9XDMzbFMAqO7NyK9ulv{bottom:0;transition-duration:300ms}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .u9XDMzbFMAqO7NyK9ulv{bottom:-50px !important}._32zwiHYCtqPi8PyAE0S{display:flex;height:100%;padding:0 5px}.TiO74SfiDSOKcmosHslW{display:inline-flex;height:100%}.K01cowoNUeJSyzVMDrXz{flex:none}.URPE3uegZa6K1qu6Kyae{flex:none;position:relative;display:inline-flex;align-items:center;justify-content:center;width:40px;cursor:pointer}.oZ7L2wLsgD_vqPsa5Qkl{flex:none;width:20px;height:20px;fill:#fff;transition:fill 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-not-mobile .URPE3uegZa6K1qu6Kyae:active .oZ7L2wLsgD_vqPsa5Qkl{fill:#c6cad8;transition-duration:100ms}.BKlUDFsUy1ipHeZoPJ8N{justify-content:flex-start;flex:auto}.rhlywXBNykvui9fCrp6B{justify-content:flex-end}.JdxX8XLsS7vYD3D5YpnJ{flex:none;align-self:center;padding-right:5px;line-height:20px;font-size:12px;color:#fff;white-space:nowrap}@media screen and (min-width: 570px){.JdxX8XLsS7vYD3D5YpnJ{padding-right:10px}}.XV62sRZm6k02ffrBfVGu,.oFTaysBjfwbvJfV8YeHA,.uZpB4MrTQ1SdQcDAZCTl{flex-direction:column;height:20px;overflow:hidden;text-align:right;visibility:hidden}.XV62sRZm6k02ffrBfVGu{display:none}.XV62sRZm6k02ffrBfVGu .AkeQCTC8rbIXFagL05NN::after,.XV62sRZm6k02ffrBfVGu .oZ_hNpHqHcwGdDQGbtD0::after{content:" / "}.eplayer-live-dvr .XV62sRZm6k02ffrBfVGu .AkeQCTC8rbIXFagL05NN::after,.eplayer-live-dvr .XV62sRZm6k02ffrBfVGu .oZ_hNpHqHcwGdDQGbtD0::after{content:""}@media screen and (min-width: 570px){.XV62sRZm6k02ffrBfVGu{display:inline-flex}}.eplayer-live-dvr .XV62sRZm6k02ffrBfVGu{display:inline-flex;text-align:left}.oFTaysBjfwbvJfV8YeHA{display:none;text-align:left}@media screen and (min-width: 570px){.oFTaysBjfwbvJfV8YeHA{display:inline-flex}}.eplayer-live-dvr .oFTaysBjfwbvJfV8YeHA{display:none}.uZpB4MrTQ1SdQcDAZCTl{display:inline-flex}.uZpB4MrTQ1SdQcDAZCTl .AkeQCTC8rbIXFagL05NN::before,.uZpB4MrTQ1SdQcDAZCTl .oZ_hNpHqHcwGdDQGbtD0::before{content:"- "}@media screen and (min-width: 570px){.uZpB4MrTQ1SdQcDAZCTl{display:none}}.eplayer-live-dvr .uZpB4MrTQ1SdQcDAZCTl{display:none}.AkeQCTC8rbIXFagL05NN,.oZ_hNpHqHcwGdDQGbtD0{flex:none}.AkeQCTC8rbIXFagL05NN{visibility:visible}.yDzIQuMitYISHPpK31Sw{z-index:9;display:flex;align-items:center;justify-content:center;padding:15px 20px;cursor:pointer}.eplayer-mobile:not(.eplayer-active) .Ui6arcgDYDPWnMjd1t5M .yDzIQuMitYISHPpK31Sw,.eplayer-mobile:not(.eplayer-active) .WKW80FnxPR0_7tVAxx5f:not(.qYpnfAd5WhDulY1H2hPb) .yDzIQuMitYISHPpK31Sw{pointer-events:none}.eplayer-handled-error .yDzIQuMitYISHPpK31Sw{pointer-events:none}.xaiLYUBoQUHKWYrveUhg .yDzIQuMitYISHPpK31Sw{padding:30px}.eplayer-large-screen .eplayer-skin .yDzIQuMitYISHPpK31Sw{padding:30px}.eplayer-mobile .eplayer-large-height .xaiLYUBoQUHKWYrveUhg:not(.eplayer-fullscreen-hidden) .yDzIQuMitYISHPpK31Sw,.eplayer-mobile .eplayer-large-height.eplayer-with-sharing .xaiLYUBoQUHKWYrveUhg .yDzIQuMitYISHPpK31Sw{padding-bottom:50px}.Ui6arcgDYDPWnMjd1t5M .yDzIQuMitYISHPpK31Sw,.WKW80FnxPR0_7tVAxx5f .yDzIQuMitYISHPpK31Sw,.xaiLYUBoQUHKWYrveUhg .yDzIQuMitYISHPpK31Sw{cursor:default}.eplayer-with-three-sixty-viewer .Ui6arcgDYDPWnMjd1t5M .yDzIQuMitYISHPpK31Sw,.eplayer-with-three-sixty-viewer .WKW80FnxPR0_7tVAxx5f .yDzIQuMitYISHPpK31Sw{cursor:grab}.eplayer-with-three-sixty-viewer .Ui6arcgDYDPWnMjd1t5M .yDzIQuMitYISHPpK31Sw:active,.eplayer-with-three-sixty-viewer .WKW80FnxPR0_7tVAxx5f .yDzIQuMitYISHPpK31Sw:active{cursor:grabbing}.yDzIQuMitYISHPpK31Sw::before,.yDzIQuMitYISHPpK31Sw::after{content:"";position:absolute;top:0;right:0;bottom:0;left:0}.yDzIQuMitYISHPpK31Sw::before{display:none;transition:background-color 100ms cubic-bezier(0.4, 0, 0.3, 1)}.xaiLYUBoQUHKWYrveUhg .yDzIQuMitYISHPpK31Sw::before{display:block;background:rgba(52,59,76,.6)}.eplayer-handled-error:not(.eplayer-has-announce) .yDzIQuMitYISHPpK31Sw::before{display:block;background:rgba(52,59,76,.8)}.yDzIQuMitYISHPpK31Sw::after{background-image:linear-gradient(180deg, transparent 0, rgba(52, 59, 76, 0.7) 100%);background-size:100% 50%;background-repeat:no-repeat;background-position:bottom;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.Ui6arcgDYDPWnMjd1t5M .yDzIQuMitYISHPpK31Sw::after,.WKW80FnxPR0_7tVAxx5f .yDzIQuMitYISHPpK31Sw::after{display:none}.xaiLYUBoQUHKWYrveUhg .yDzIQuMitYISHPpK31Sw::after{background-size:100% 100%}.eplayer-not-mobile.eplayer-active .xaiLYUBoQUHKWYrveUhg:hover .yDzIQuMitYISHPpK31Sw::before,.eplayer-not-mobile .xaiLYUBoQUHKWYrveUhg .u9XDMzbFMAqO7NyK9ulv:hover~.yDzIQuMitYISHPpK31Sw::before{background:rgba(0,0,0,0);transition-duration:200ms}.eplayer-not-mobile.eplayer-active .xaiLYUBoQUHKWYrveUhg:hover .yDzIQuMitYISHPpK31Sw::after,.eplayer-not-mobile .xaiLYUBoQUHKWYrveUhg .u9XDMzbFMAqO7NyK9ulv:hover~.yDzIQuMitYISHPpK31Sw::after{opacity:0;transition-duration:200ms}.VDMy0JzsmiEViQHm0X0r{flex:none;position:absolute;z-index:1;isolation:isolate;top:0;right:0;bottom:0;left:0;width:50px;height:50px;margin:auto;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.xaiLYUBoQUHKWYrveUhg .VDMy0JzsmiEViQHm0X0r{position:static;margin:0 15px 0 0}.eplayer-large-height .VDMy0JzsmiEViQHm0X0r{position:absolute;margin:auto}.eplayer-large-screen .VDMy0JzsmiEViQHm0X0r{width:100px;height:100px}.Ui6arcgDYDPWnMjd1t5M .VDMy0JzsmiEViQHm0X0r,.WKW80FnxPR0_7tVAxx5f .VDMy0JzsmiEViQHm0X0r,.xaiLYUBoQUHKWYrveUhg .VDMy0JzsmiEViQHm0X0r,.VDMy0JzsmiEViQHm0X0r.C29dzOZnB_rpOjH1jFWr,.xaiLYUBoQUHKWYrveUhg .VDMy0JzsmiEViQHm0X0r.wPIaSvDsJJ39mLEwu8s6{display:none}.eplayer-not-mobile .WKW80FnxPR0_7tVAxx5f .VDMy0JzsmiEViQHm0X0r.wPIaSvDsJJ39mLEwu8s6,.xaiLYUBoQUHKWYrveUhg .VDMy0JzsmiEViQHm0X0r.C29dzOZnB_rpOjH1jFWr{display:inline}.eplayer-handled-error .VDMy0JzsmiEViQHm0X0r,.eplayer.loading .VDMy0JzsmiEViQHm0X0r.wPIaSvDsJJ39mLEwu8s6{display:none !important}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .VDMy0JzsmiEViQHm0X0r{opacity:1}.eplayer-not-mobile .eagleplayer-container:hover .dtQuPGjioU7QCWHqbDha:not(:hover) .VDMy0JzsmiEViQHm0X0r{opacity:.6;transition-duration:200ms}.eplayer-not-mobile.eplayer-active .dtQuPGjioU7QCWHqbDha:hover .VDMy0JzsmiEViQHm0X0r,.eplayer-not-mobile .dtQuPGjioU7QCWHqbDha .u9XDMzbFMAqO7NyK9ulv:hover~.yDzIQuMitYISHPpK31Sw .VDMy0JzsmiEViQHm0X0r{opacity:0;transition-duration:200ms}.eplayer-not-mobile.eplayer-active .eplayer-large-height .dtQuPGjioU7QCWHqbDha:hover .VDMy0JzsmiEViQHm0X0r,.eplayer-not-mobile .eplayer-large-height .dtQuPGjioU7QCWHqbDha .u9XDMzbFMAqO7NyK9ulv:hover~.yDzIQuMitYISHPpK31Sw .VDMy0JzsmiEViQHm0X0r{opacity:.3;transition-duration:200ms}.IWXzbl9owMA9saHd_7Gn{fill:#fff;transition:fill 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-mobile .yDzIQuMitYISHPpK31Sw:active .IWXzbl9owMA9saHd_7Gn,.eplayer-not-mobile .yDzIQuMitYISHPpK31Sw:hover .IWXzbl9owMA9saHd_7Gn{fill:#dcdfe7;fill:var(--skin-hover-color, #dcdfe7);transition-duration:200ms}.eplayer-not-mobile .yDzIQuMitYISHPpK31Sw:active .IWXzbl9owMA9saHd_7Gn{fill:#c6cad8;transition-duration:100ms}.Ui6arcgDYDPWnMjd1t5M .IWXzbl9owMA9saHd_7Gn,.WKW80FnxPR0_7tVAxx5f .IWXzbl9owMA9saHd_7Gn,.xaiLYUBoQUHKWYrveUhg .IWXzbl9owMA9saHd_7Gn{fill:#fff !important}.Dq8rU1SEL7sPMW_zxGeo{position:relative;z-index:1;align-self:flex-end;width:100%;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1);pointer-events:none}.xaiLYUBoQUHKWYrveUhg .Dq8rU1SEL7sPMW_zxGeo{align-self:center;width:auto;max-width:calc(100% - 50px - 15px)}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg:not(.eplayer-fullscreen-hidden) .Dq8rU1SEL7sPMW_zxGeo,.eplayer-mobile .eplayer-with-sharing .xaiLYUBoQUHKWYrveUhg .Dq8rU1SEL7sPMW_zxGeo{max-width:calc(100% - 50px - 15px - 55px);margin-right:55px}.eplayer-large-height .Dq8rU1SEL7sPMW_zxGeo{align-self:flex-end !important;width:100% !important;max-width:none !important;margin-right:0 !important}.Ui6arcgDYDPWnMjd1t5M .Dq8rU1SEL7sPMW_zxGeo,.WKW80FnxPR0_7tVAxx5f .Dq8rU1SEL7sPMW_zxGeo{display:none}.eplayer-not-mobile .eagleplayer-container:hover .dtQuPGjioU7QCWHqbDha:not(:hover) .Dq8rU1SEL7sPMW_zxGeo{opacity:.6;transition-duration:200ms}.eplayer-mobile.eplayer-active .xaiLYUBoQUHKWYrveUhg .Dq8rU1SEL7sPMW_zxGeo,.eplayer-not-mobile.eplayer-active .xaiLYUBoQUHKWYrveUhg:hover .Dq8rU1SEL7sPMW_zxGeo,.eplayer-not-mobile .xaiLYUBoQUHKWYrveUhg .u9XDMzbFMAqO7NyK9ulv:hover~.yDzIQuMitYISHPpK31Sw .Dq8rU1SEL7sPMW_zxGeo{opacity:0;transition-duration:200ms}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .Dq8rU1SEL7sPMW_zxGeo{opacity:1 !important}.D2k0FEvmOzRLRbXEuIm4{display:none;flex:none;margin-bottom:5px;font-size:15px;font-weight:500;line-height:20px;white-space:nowrap}.xaiLYUBoQUHKWYrveUhg .D2k0FEvmOzRLRbXEuIm4{display:block}.TxDKC71Eg4tdbXKKjPnP{flex:none;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;line-height:25px;max-height:50px;overflow:hidden;text-overflow:ellipsis;font-size:18px;font-weight:800;color:#fff;word-break:break-word}.eplayer-large-title .TxDKC71Eg4tdbXKKjPnP{line-height:30px;max-height:60px;font-size:26px}.eplayer-shorten-title .TxDKC71Eg4tdbXKKjPnP{display:block;white-space:nowrap}.KV59UMOWEQgvuVOZms9t{position:absolute;height:5px;left:0;right:0;bottom:0;background:hsla(0,0%,100%,.5);opacity:1;transition:opacity 200ms cubic-bezier(0.4, 0, 0.3, 1);pointer-events:none}.VMOa0WVYDVoAMVuF6t8l .KV59UMOWEQgvuVOZms9t,.eplayer-mobile.eplayer-active .KV59UMOWEQgvuVOZms9t,.eplayer-mobile .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .KV59UMOWEQgvuVOZms9t,.eplayer-not-mobile.eplayer-active .eplayer-skin:hover .KV59UMOWEQgvuVOZms9t,.eplayer-normal-menu.settings-menu-visible .KV59UMOWEQgvuVOZms9t,.eplayer-not-mobile .u9XDMzbFMAqO7NyK9ulv:hover~.KV59UMOWEQgvuVOZms9t{opacity:0;transition-duration:300ms}.eplayer-hide-skin .KV59UMOWEQgvuVOZms9t{opacity:1 !important}.xaiLYUBoQUHKWYrveUhg .KV59UMOWEQgvuVOZms9t{display:none}.KV59UMOWEQgvuVOZms9t::before,.KV59UMOWEQgvuVOZms9t::after{content:"";position:absolute;overflow:hidden;left:0;width:0;height:100%}.KV59UMOWEQgvuVOZms9t::before{left:calc(var(--seekbar-loaded-left)*100%);width:calc(var(--seekbar-loaded)*100%);background:hsla(0,0%,100%,.5);transition:width 300ms ease,left 300ms ease}.KV59UMOWEQgvuVOZms9t::after{width:calc(var(--seekbar-position)*100%);background:#315efb;background:var(--skin-main-color, #315efb)}.nIobtIy0hFqBwti_nFwa{display:flex;align-items:center;transition:opacity 200ms;transition-delay:100ms;cursor:pointer;pointer-events:none}.nIobtIy0hFqBwti_nFwa::before{content:"";flex:none;width:7px;height:7px;border-radius:50%;margin-right:6px;background:#ff564e}.eplayer-live-history .nIobtIy0hFqBwti_nFwa{pointer-events:auto}.eplayer-live-history .nIobtIy0hFqBwti_nFwa::before{background:#8d96b2}.nIobtIy0hFqBwti_nFwa:hover::before{background:#ff564e}.U7nJwbzJpR2ULPYdUphp{flex:none;display:flex;align-items:center;justify-content:center;height:100%}.U7nJwbzJpR2ULPYdUphp span{flex:none;font-size:12px;line-height:20px;font-weight:800;letter-spacing:1.3px;text-transform:uppercase}.TuJl1IGpHD8gN5lhKP1P{position:relative;z-index:1;flex:auto;display:flex;align-items:center;margin:0 10px;transition:opacity 200ms;transition-delay:100ms;cursor:pointer}.l_iPVSY22AC8V4YqOqVl{--episodes-gap: 2px;box-sizing:border-box;flex:none;display:flex;align-items:center;width:calc(100%*(var(--episode-end) - var(--episode-start))/var(--duration));height:100%;border-right:var(--episodes-gap) solid rgba(0,0,0,0);overflow:hidden}.l_iPVSY22AC8V4YqOqVl:last-of-type{--episodes-gap: 0;--episode-end: var(--duration) !important}.la10zGeSOnDcDasdYvdm{--height: 5px;--border-radius: calc(var(--height) / 2);position:relative;flex:auto;width:calc(100% + var(--episodes-gap));height:var(--height);overflow:hidden;background:hsla(0,0%,100%,.5);-webkit-mask-image:radial-gradient(circle, white 100%, black 100%)}.la10zGeSOnDcDasdYvdm::before,.la10zGeSOnDcDasdYvdm::after{content:"";position:absolute;overflow:hidden;left:0;width:0;height:100%}.la10zGeSOnDcDasdYvdm::before{left:min(max(100%*(var(--seekbar-loaded-left)*var(--duration) - var(--episode-start))/(var(--episode-end) - var(--episode-start)),0%),100%);width:min(max(100%*(var(--seekbar-loaded)*var(--duration) - var(--episode-start))/(var(--episode-end) - var(--episode-start)),0%),100%);background:hsla(0,0%,100%,.5)}.la10zGeSOnDcDasdYvdm::after{width:min(max(100%*(var(--seekbar-position)*var(--duration) - var(--episode-start))/(var(--episode-end) - var(--episode-start)),0%),100%);background:#315efb;background:var(--skin-main-color, #315efb)}.l_iPVSY22AC8V4YqOqVl:first-of-type .la10zGeSOnDcDasdYvdm{border-top-left-radius:var(--border-radius);border-bottom-left-radius:var(--border-radius)}.l_iPVSY22AC8V4YqOqVl:last-of-type .la10zGeSOnDcDasdYvdm{border-top-right-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius)}.eplayer-not-mobile .la10zGeSOnDcDasdYvdm{transition-property:height,border-radius,background-color;transition-duration:100ms;transition-timing-function:cubic-bezier(0.4, 0, 0.3, 1)}.VMOa0WVYDVoAMVuF6t8l .l_iPVSY22AC8V4YqOqVl:first-child:nth-last-child(2) .la10zGeSOnDcDasdYvdm,.VMOa0WVYDVoAMVuF6t8l .TuJl1IGpHD8gN5lhKP1P:not(:hover) .zplv_QyDuJoFdJO8SiVw .la10zGeSOnDcDasdYvdm,.eplayer-not-mobile .l_iPVSY22AC8V4YqOqVl:hover .la10zGeSOnDcDasdYvdm{--height: 10px;transition-duration:200ms}.VMOa0WVYDVoAMVuF6t8l .TuJl1IGpHD8gN5lhKP1P:not(:hover) .zplv_QyDuJoFdJO8SiVw:not(:first-of-type:last-of-type) .la10zGeSOnDcDasdYvdm,.eplayer-not-mobile .l_iPVSY22AC8V4YqOqVl:not(:first-of-type:last-of-type):hover .la10zGeSOnDcDasdYvdm{background:hsla(0,0%,100%,.75)}.orXpRxeW9xF3qLbSaRzC{position:absolute;left:calc(100%*var(--seekbar-position));height:0;padding:7.5px;border-radius:50%;transform:translateX(-50%);background:#315efb;background:var(--skin-main-color, #315efb);pointer-events:none;transition:padding 100ms cubic-bezier(0.4, 0, 0.3, 1)}@media screen and (min-width: 570px){.eplayer-not-mobile .orXpRxeW9xF3qLbSaRzC{padding:0}}.eplayer-not-mobile .TuJl1IGpHD8gN5lhKP1P:hover .orXpRxeW9xF3qLbSaRzC{padding:7.5px}.VMOa0WVYDVoAMVuF6t8l .orXpRxeW9xF3qLbSaRzC,.eplayer-not-mobile .TuJl1IGpHD8gN5lhKP1P:hover .orXpRxeW9xF3qLbSaRzC:nth-child(2),.eplayer-not-mobile .zplv_QyDuJoFdJO8SiVw:hover~.orXpRxeW9xF3qLbSaRzC{padding:10px}.KQ8y1L6rrX8MQVbUmAJw{--thumbnails-side-gap: 15px;--thumbnails-width: 100px;--thumbnails-border-width: 2px;box-sizing:border-box;position:absolute;left:0 !important;display:none;flex-direction:column;justify-content:flex-end;align-items:flex-start;padding:15px 0 12px;line-height:15px;font-size:12px;font-weight:600;color:#fff;text-align:center;background:none;pointer-events:none}.eplayer-title-hidden .KQ8y1L6rrX8MQVbUmAJw{top:0 !important}.KQ8y1L6rrX8MQVbUmAJw.eplayer-time-visible{display:flex}.eplayer-hide-thumbnails .KQ8y1L6rrX8MQVbUmAJw{display:none}.eplayer-thumbnails-vertical{--thumbnails-width: 75px}.zXDoZtA5P3I0UuZ_BRfe{position:relative;left:min(max(var(--thumbnails-side-gap) - var(--thumbnails-border-width),var(--thumbnails-position) - var(--thumbnails-width)/2),100vw - var(--thumbnails-side-gap) - var(--thumbnails-width) - var(--thumbnails-border-width));min-height:25px;max-height:100%;border:var(--thumbnails-border-width) solid rgba(0,0,0,0);background:#fff;border-radius:7px;overflow:hidden}.eplayer-episodes-one-line .zXDoZtA5P3I0UuZ_BRfe{max-height:calc(100% - 15px - 5px)}.eplayer-episodes-two-lines .zXDoZtA5P3I0UuZ_BRfe{max-height:calc(100% - 30px - 5px)}.eplayer-thumbnails-without-preview .zXDoZtA5P3I0UuZ_BRfe{background:none;overflow:visible}.tC5VmS97bmahd9MKEcIS{flex:none;width:var(--thumbnails-width) !important;height:calc(var(--thumbnails-width)/var(--thumbnails-image-ratio)) !important;border-radius:5px;overflow:hidden;-webkit-mask-image:radial-gradient(circle, white 100%, black 100%)}.tC5VmS97bmahd9MKEcIS::after{position:absolute;content:"";width:100%;height:50%;bottom:0;left:0;background-image:linear-gradient(to bottom, rgba(31, 36, 49, 0), rgba(31, 36, 49, 0.7))}.lBTomF9Us1hMRK2lC7Kw{position:absolute;z-index:2;right:5px;bottom:5px;left:5px;text-shadow:0 0 10px #1f2431}.eplayer-thumbnails-without-preview .lBTomF9Us1hMRK2lC7Kw{text-shadow:none;filter:drop-shadow(0 0 10px #1f2431)}.mCHb4oySdsfGjsGdHZ7S{--thumbnails-label-width: 160px;position:relative;left:min(max(var(--thumbnails-side-gap),var(--thumbnails-position) - var(--thumbnails-label-width)/2),100vw - var(--thumbnails-side-gap) - var(--thumbnails-label-width));display:none;flex:none;margin-top:5px;width:var(--thumbnails-label-width);white-space:nowrap;filter:drop-shadow(0 0 10px #1f2431);text-overflow:ellipsis;overflow:hidden}.eplayer-episodes-one-line .mCHb4oySdsfGjsGdHZ7S:not(:empty){display:block}.eplayer-episodes-two-lines .mCHb4oySdsfGjsGdHZ7S:not(:empty){display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;max-height:30px;word-break:break-word;white-space:normal}.eplayer-thumbnails-without-preview .mCHb4oySdsfGjsGdHZ7S{margin-top:0}.RNBojmMlPZ8PvONeJKpw .wPIaSvDsJJ39mLEwu8s6,.RNBojmMlPZ8PvONeJKpw .AhNM5yJEK_Nzb6Nq_m0p,.RNBojmMlPZ8PvONeJKpw .C29dzOZnB_rpOjH1jFWr{display:none}.Ui6arcgDYDPWnMjd1t5M .RNBojmMlPZ8PvONeJKpw .AhNM5yJEK_Nzb6Nq_m0p,.WKW80FnxPR0_7tVAxx5f .RNBojmMlPZ8PvONeJKpw .wPIaSvDsJJ39mLEwu8s6,.xaiLYUBoQUHKWYrveUhg .RNBojmMlPZ8PvONeJKpw .C29dzOZnB_rpOjH1jFWr{display:inline}.Lfv5NnHE5OJyfG2L4m0w{display:inline-flex;align-items:center;width:40px}.eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w::after{content:"";width:0;transition:width 100ms cubic-bezier(0.4, 0, 0.3, 1);transition-delay:400ms}.WpxDvAJnU2fAYxPwPFwR .eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w::after,.eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w:hover::after{content:"";flex:none;order:1;width:20px;height:100%}.WpxDvAJnU2fAYxPwPFwR .eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w .vmFAfGxN5HeCCzE4Efbd,.eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w:hover .vmFAfGxN5HeCCzE4Efbd{width:120px;transition-duration:200ms;transition-delay:400ms}.WpxDvAJnU2fAYxPwPFwR .eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w~.nIobtIy0hFqBwti_nFwa,.WpxDvAJnU2fAYxPwPFwR .eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w~.TuJl1IGpHD8gN5lhKP1P,.eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w:hover~.nIobtIy0hFqBwti_nFwa,.eplayer-not-mobile .Lfv5NnHE5OJyfG2L4m0w:hover~.TuJl1IGpHD8gN5lhKP1P{opacity:0;transition-duration:0ms;transition-delay:400ms;pointer-events:none}.Lfv5NnHE5OJyfG2L4m0w .URPE3uegZa6K1qu6Kyae{align-self:stretch}.Lfv5NnHE5OJyfG2L4m0w .vmFAfGxN5HeCCzE4Efbd:hover~.URPE3uegZa6K1qu6Kyae .oZ7L2wLsgD_vqPsa5Qkl{fill:#dcdfe7;fill:var(--skin-hover-color, #dcdfe7);transition-duration:200ms}.Lfv5NnHE5OJyfG2L4m0w .vQyqSPmituv2_yLvfvUS,.lkmOG3wUM0Z5a0SeJ1r5 .Lfv5NnHE5OJyfG2L4m0w .pizYCFa54fJeBklKsmn6{display:none}.Lfv5NnHE5OJyfG2L4m0w .pizYCFa54fJeBklKsmn6,.lkmOG3wUM0Z5a0SeJ1r5 .Lfv5NnHE5OJyfG2L4m0w .vQyqSPmituv2_yLvfvUS{display:inline}.alX7sNxyc_76hKDEExge .Lfv5NnHE5OJyfG2L4m0w{opacity:.5;pointer-events:none}.eplayer-volume-hidden .Lfv5NnHE5OJyfG2L4m0w{display:none !important}.vmFAfGxN5HeCCzE4Efbd{order:1;flex:none;display:inline-flex;align-items:center;position:relative;width:0;height:100%;transition:width 100ms cubic-bezier(0.4, 0, 0.3, 1);cursor:pointer}.qdn6JQnrqbPII1mhW36H{height:10px;width:100%;border-radius:5px;background:hsla(0,0%,100%,.3);overflow:hidden;-webkit-mask-image:radial-gradient(circle, white 100%, black 100%)}.UeGdTTJw8YPpKmhwgbnL{position:relative;height:100%;background:#fff;transition:background-color 200ms cubic-bezier(0.4, 0, 0.3, 1)}.vmFAfGxN5HeCCzE4Efbd:hover .UeGdTTJw8YPpKmhwgbnL{background:#dcdfe7;background:var(--skin-hover-color, #dcdfe7);transition-duration:300ms}.eplayer-fullscreen-hidden .UZZIXu3ct190ZkdFwT6Z{display:none !important}.UcavstO8yvMTRit4GHxz{display:none;flex:none;position:absolute;top:-35px;padding:10px 20px;line-height:20px;font-weight:500;text-align:center;color:#fff;border-radius:5px;white-space:nowrap;background:#343b4c;pointer-events:none}.UcavstO8yvMTRit4GHxz::after{content:"";position:absolute;bottom:-5px;left:50%;margin-left:-5px;width:0;height:0;border-top:5px solid #343b4c;border-right:5px solid rgba(0,0,0,0);border-left:5px solid rgba(0,0,0,0)}.eplayer-not-mobile .URPE3uegZa6K1qu6Kyae:hover .UcavstO8yvMTRit4GHxz{display:block}.settings-menu-visible .UcavstO8yvMTRit4GHxz{display:none !important}.Acvi2LuTDbLrhnA7P1go{display:none}.eplayer-with-sharing .Acvi2LuTDbLrhnA7P1go{display:inline-flex}@media screen and (max-width: 569px){.settings-menu-with-levels ._32zwiHYCtqPi8PyAE0S .Acvi2LuTDbLrhnA7P1go,.settings-menu-with-rates ._32zwiHYCtqPi8PyAE0S .Acvi2LuTDbLrhnA7P1go,.settings-menu-with-subtitles ._32zwiHYCtqPi8PyAE0S .Acvi2LuTDbLrhnA7P1go{display:none}}.WEvv65vcGxtg6D8a7JGC{display:none}.settings-menu-multiple .WEvv65vcGxtg6D8a7JGC{display:inline-flex}@media screen and (max-width: 569px){.eplayer-fullscreen-menu.eplayer-with-sharing.settings-menu-with-levels .WEvv65vcGxtg6D8a7JGC,.eplayer-fullscreen-menu.eplayer-with-sharing.settings-menu-with-rates .WEvv65vcGxtg6D8a7JGC,.eplayer-fullscreen-menu.eplayer-with-sharing.settings-menu-with-subtitles .WEvv65vcGxtg6D8a7JGC{display:inline-flex}}.Z35qhSFoFblyghPV_k_f{display:none}.settings-menu-with-levels .Z35qhSFoFblyghPV_k_f{display:inline-flex}.settings-menu-multiple .Z35qhSFoFblyghPV_k_f{display:none}.CVs0BTgazJvOy78WOxcg{display:none}.settings-menu-with-rates .CVs0BTgazJvOy78WOxcg{display:inline-flex}.settings-menu-multiple .CVs0BTgazJvOy78WOxcg{display:none}.lxCElCu1siAw2uiAsdTk{display:none}.settings-menu-with-subtitles .lxCElCu1siAw2uiAsdTk{display:inline-flex}.settings-menu-multiple .lxCElCu1siAw2uiAsdTk{display:none}@media screen and (max-width: 569px){.eplayer-with-sharing.settings-menu-with-levels .Z35qhSFoFblyghPV_k_f,.eplayer-with-sharing.settings-menu-with-rates .Z35qhSFoFblyghPV_k_f,.eplayer-with-sharing.settings-menu-with-subtitles .Z35qhSFoFblyghPV_k_f,.eplayer-with-sharing.settings-menu-with-levels .CVs0BTgazJvOy78WOxcg,.eplayer-with-sharing.settings-menu-with-rates .CVs0BTgazJvOy78WOxcg,.eplayer-with-sharing.settings-menu-with-subtitles .CVs0BTgazJvOy78WOxcg,.eplayer-with-sharing.settings-menu-with-levels .lxCElCu1siAw2uiAsdTk,.eplayer-with-sharing.settings-menu-with-rates .lxCElCu1siAw2uiAsdTk,.eplayer-with-sharing.settings-menu-with-subtitles .lxCElCu1siAw2uiAsdTk{display:none}}.d9ANyqB6x7Zcv6pDws23{display:none;position:absolute;z-index:12;height:50px;right:5px;bottom:0;transition:opacity 100ms cubic-bezier(0.4, 0, 0.3, 1)}.eplayer-mobile .d9ANyqB6x7Zcv6pDws23{display:inline-flex;opacity:0;pointer-events:none}.eplayer-mobile .xaiLYUBoQUHKWYrveUhg .d9ANyqB6x7Zcv6pDws23{opacity:1;pointer-events:auto;transition-duration:200ms}.bnerg71ROuWznY868UxH{display:inline-flex}.BVIFxxTPVkwVFj3H6zA2{display:inline-flex;align-items:center;justify-content:center;width:100%;height:100%}.eplayer-mobile .BVIFxxTPVkwVFj3H6zA2,.eplayer-watch-next-hidden .BVIFxxTPVkwVFj3H6zA2{pointer-events:none}.settings-menu-visible .eplayer-watch-next,.eplayer-watch-next-hidden .eplayer-watch-next{display:none}.eplayer-active-watch-next-three-lines .VMOa0WVYDVoAMVuF6t8l .eplayer-watch-next-title,.eplayer-mobile.eplayer-active .eplayer-active-watch-next-three-lines .eplayer-watch-next-title,.eplayer-mobile .eplayer-active-watch-next-three-lines .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .eplayer-watch-next-title,.eplayer-not-mobile.eplayer-active .eplayer-active-watch-next-three-lines .eplayer-skin:hover .eplayer-watch-next-title,.eplayer-watch-next-title .eplayer-normal-menu.settings-menu-visible.eplayer-active-watch-next-three-lines,.eplayer-not-mobile .eplayer-active-watch-next-three-lines .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-watch-next .eplayer-watch-next-title{--watch-next-line-clamp: 3}.eplayer-active-watch-next-two-lines .VMOa0WVYDVoAMVuF6t8l .eplayer-watch-next-title,.eplayer-mobile.eplayer-active .eplayer-active-watch-next-two-lines .eplayer-watch-next-title,.eplayer-mobile .eplayer-active-watch-next-two-lines .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .eplayer-watch-next-title,.eplayer-not-mobile.eplayer-active .eplayer-active-watch-next-two-lines .eplayer-skin:hover .eplayer-watch-next-title,.eplayer-watch-next-title .eplayer-normal-menu.settings-menu-visible.eplayer-active-watch-next-two-lines,.eplayer-not-mobile .eplayer-active-watch-next-two-lines .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-watch-next .eplayer-watch-next-title{--watch-next-line-clamp: 2}.eplayer-active-watch-next-one-line .VMOa0WVYDVoAMVuF6t8l .eplayer-watch-next-title,.eplayer-mobile.eplayer-active .eplayer-active-watch-next-one-line .eplayer-watch-next-title,.eplayer-mobile .eplayer-active-watch-next-one-line .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .eplayer-watch-next-title,.eplayer-not-mobile.eplayer-active .eplayer-active-watch-next-one-line .eplayer-skin:hover .eplayer-watch-next-title,.eplayer-watch-next-title .eplayer-normal-menu.settings-menu-visible.eplayer-active-watch-next-one-line,.eplayer-not-mobile .eplayer-active-watch-next-one-line .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-watch-next .eplayer-watch-next-title{--watch-next-line-clamp: 1}.eplayer-active-watch-next-hidden-text .VMOa0WVYDVoAMVuF6t8l .eplayer-watch-next-title,.eplayer-mobile.eplayer-active .eplayer-active-watch-next-hidden-text .eplayer-watch-next-title,.eplayer-mobile .eplayer-active-watch-next-hidden-text .qYpnfAd5WhDulY1H2hPb.WKW80FnxPR0_7tVAxx5f .eplayer-watch-next-title,.eplayer-not-mobile.eplayer-active .eplayer-active-watch-next-hidden-text .eplayer-skin:hover .eplayer-watch-next-title,.eplayer-watch-next-title .eplayer-normal-menu.settings-menu-visible.eplayer-active-watch-next-hidden-text,.eplayer-not-mobile .eplayer-active-watch-next-hidden-text .u9XDMzbFMAqO7NyK9ulv:hover~.eplayer-watch-next .eplayer-watch-next-title{display:none}.XLBBfwYI1SCCEQ1VJtGA,._PrcML9Dd5BCBD5o3N8u{fill:none;stroke-width:11px}.eplayer-large-screen .XLBBfwYI1SCCEQ1VJtGA,.eplayer-large-screen ._PrcML9Dd5BCBD5o3N8u{stroke-width:10px}.pZUgR3nHn1YXpC3zT3f7{flex:none;position:absolute;width:60px;height:60px;pointer-events:none}.eplayer-large-screen .pZUgR3nHn1YXpC3zT3f7{width:110px;height:110px}.i7ub3t6TEyYfkQOp60xA{position:absolute;width:100%;height:100%}._PrcML9Dd5BCBD5o3N8u{stroke:hsla(0,0%,100%,.3)}.XLBBfwYI1SCCEQ1VJtGA{stroke-linecap:round;transform-origin:50% 50%;stroke-dasharray:360;stroke:#fff}.jEr0I7RfazmSzHjKGiGK{stroke-dashoffset:360;transform:rotate(-90deg);animation:KEdwLmGdFk_rN5w0p04Y 8s linear infinite}@keyframes KEdwLmGdFk_rN5w0p04Y{0%{stroke-dashoffset:360}100%{stroke-dashoffset:0}}.d0Wtmh2nCgM8caj_TqLG{pointer-events:none}.eplayer.loading .d0Wtmh2nCgM8caj_TqLG{background:rgba(52,59,76,.6);transition:background-color 300ms cubic-bezier(0.4, 0, 0.3, 1)}.xaiLYUBoQUHKWYrveUhg .d0Wtmh2nCgM8caj_TqLG{visibility:hidden}.QYO7K0CPc6Not_CRjC15{display:none;top:0;right:0;bottom:0;left:0;margin:auto;animation:K7rW2UFbyZC67GDds7s6 1568.2352941176ms linear infinite}.eplayer.loading .QYO7K0CPc6Not_CRjC15{display:block}.bRPcZBMubpuqfuqcSLH7{animation:VGNy3_xe7H_kVhfISwLs 5332ms cubic-bezier(0.4, 0, 0.3, 1) infinite both}.jWK0NJrUpXuxqUNbLdAu{transform:rotate(-219deg);stroke-dashoffset:135;animation:WRuLOyfxL2dYse3W_75t 1333ms cubic-bezier(0.4, 0, 0.3, 1) infinite both}@keyframes K7rW2UFbyZC67GDds7s6{100%{transform:rotate(360deg)}}@keyframes VGNy3_xe7H_kVhfISwLs{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes WRuLOyfxL2dYse3W_75t{0%{transform:rotate(-91deg);stroke-dashoffset:358}50%{transform:rotate(-225deg);stroke-dashoffset:125}100%{transform:rotate(-91deg);stroke-dashoffset:358}}.eplayer-live [data-seek],.eplayer-live .JdxX8XLsS7vYD3D5YpnJ,.eplayer-live .KV59UMOWEQgvuVOZms9t{display:none !important}[data-subtitles]{display:flex;justify-content:center}[data-subtitles][data-subtitles]{z-index:3}.eplayer-subtitles{display:flex;justify-content:center;max-width:90%;position:absolute;bottom:calc(var(--player-height)*.05);padding:5px 10px;box-sizing:border-box;text-align:center;border-radius:5px;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background-color:rgba(31,36,49,.8)}.eplayer-subtitles p{margin:0;font-size:13px;line-height:1.15;font-weight:600;color:#fff}.eplayer-large-screen .eplayer-subtitles{padding:max(var(--player-height)*.015,5px) max(var(--player-height)*.03,10px);border-radius:max(var(--player-height)*.02,5px)}.eplayer-large-screen .eplayer-subtitles p{line-height:1.33;font-size:max(var(--player-height)*.04,15px)}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb21tb24vcGx1Z2lucy9tZWRpYS1jb250cm9sL3NraW5zL3VuaXZlcnNhbC9zdHlsZXMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0QkEsNlVBQ0UsWUExQm9CLENBMkJwQixxQ0FBQSxDQUNBLHlCQUFBLENBR0YsV0FDRSxxQkFBQSxDQUNBLGlCQUFBLENBQ0EsZUFBQSxDQUNBLGdHQUFBLENBSUYsV0FDRSxxQkFBQSxDQUNBLGlCQUFBLENBQ0EsZUFBQSxDQUNBLGtHQUFBLENBS0YsV0FDRSxxQkFBQSxDQUNBLGlCQUFBLENBQ0EsZUFBQSxDQUNBLG1HQUFBLENBS0YsU0FDRSxrQ0FBQSxDQUNBLGlDQUFBLENBQ0EsNkJBQUEsQ0FFQSxnREFHRSxzQkFBQSxDQUtGLHNHQUVFLHVCQUFBLENBQ0EsbUJBQUEsQ0FJSix1QkFDRSxZQUFBLENBQ0EscUJBQUEsQ0FHRixXQUNFLDRCQUFBLENBQ0EsS0FBQSxDQUNBLE1BQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUdGLGNBQ0UsaUJBQUEsQ0FDQSxTQUFBLENBQ0EsU0FBQSxDQUNBLFVBQUEsQ0FDQSw0Q0FBQSxDQUNBLGVBQUEsQ0FDQSxjQUFBLENBQ0EsbUJBQUEsQ0FFQSw4QkFFRSwwQkFBQSxDQUNBLHdCQUFBLENBQUEscUJBQUEsQ0FBQSxnQkFBQSxDQUdGLGdCQUNFLG1CQUFBLENBR0YscUNBQ0UsVUFBQSxDQUNBLFdBQUEsQ0FDQSxpQkFBQSxDQUNBLEtBQUEsQ0FDQSxNQUFBLENBQ0EsUUFBQSxDQUNBLE9BQUEsQ0FHRixzQ0FDRSxVQUFBLENBR0YsdUNBQ0UsV0FBQSxDQUdGLHVDQUNFLFNBQUEsQ0FHRix5Q0FDRSxTQUFBLENBR0YsNEJBQ0UsY0FBQSxDQUlKLHVCQUNFLHdCQUFBLENBR0Ysc0RBQ0UsdUJBQUEsQ0FHRiw4Q0FDRSxLQUFBLENBQ0EsVUFBQSxDQUNBLGlDQUFBLENBQ0EsdURBaEpvQixDQWtKcEIsc2hCQU1FLFFBQUEsQ0FDQSxXQUFBLENBQ0EsaUNBQUEsQ0FDQSx1REEzSmtCLENBOEpwQiw2WkFLRSxRQUFBLENBQ0EsV0FBQSxDQUdGLDZOQUdFLGdCQUFBLENBQ0EscUJBQUEsQ0FHRixrR0FDRSxnQkFBQSxDQUtKLHFCQUNFLGFBQUEsQ0FFQSwyYUFPRSxZQUFBLENBR0YsK0NBQ0Usd0JBQUEsQ0FJSixvQkFDRSxxQkFBQSxDQUNBLHNCQUFBLENBSUYsc0JBQ0UsaUJBQUEsQ0FDQSxVQUFBLENBQ0EsbUJBQUEsQ0FHRixzQkFDRSxVQUFBLENBQ0EsWUFBQSxDQUNBLDJFQUFBLENBS0EsaURBQUEsQ0FFQSxzWUFNRSxLQUFBLENBQ0EseUJBQUEsQ0FHRiw0REFDRSxxQkFBQSxDQUlKLHNCQUNFLFlBQUEsQ0FDQSxXQUFBLENBQ0EsNkVBQUEsQ0FLQSxvREFBQSxDQUVBLHNZQU1FLFFBQUEsQ0FDQSx5QkFBQSxDQUdGLDREQUNFLHVCQUFBLENBS0osc0JBQ0UscUJBQUEsQ0FDQSxpQkFBQSxDQUNBLEtBQUEsQ0FDQSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxVQUFBLENBQ0EsVUFBQSxDQUNBLHNCQUFBLENBQ0EscURBQUEsQ0FFQSxzWUFNRSxrQkFBQSxDQUNBLFNBQUEsQ0FDQSx5QkFBQSxDQUdGLDREQUNFLDRCQUFBLENBQ0Esb0JBQUEsQ0FHRiw0Q0FDRSx1QkFBQSxDQUlKLHNCQUNFLGtCQUFBLENBQ0Esc0JBQUEsQ0FDQSxjQUFBLENBQ0EsZ0JBQUEsQ0FDQSxVQXBUYyxDQXFUZCxlQUFBLENBQ0Esb0JBQUEsQ0FDQSxtQkFBQSxDQUNBLGNBQUEsQ0FDQSxtREFBQSxDQUVBLDZGQUVFLGFBNVRrQixDQTZUbEIsc0NBQUEsQ0FDQSx5QkFBQSxDQUdGLGlEQUNFLGFBalVtQixDQWtVbkIseUJBQUEsQ0FHRiwrQ0FDRSxpQkFBQSxDQUtKLGVBQ0UsaUJBQUEsQ0FDQSxTQUFBLENBQ0EscURBQUEsQ0FFQSw0VkFNRSxrQkFBQSxDQUNBLFNBQUEsQ0FDQSx5QkFBQSxDQUdGLHFEQUNFLDZCQUFBLENBQ0Esb0JBQUEsQ0FDQSxvQ0FBQSxDQUdGLHlDQUNFLFlBQUEsQ0FNRiwwREFDRSxnQkFBQSxDQUdGLHNDQUNFLHVCQUFBLENBS0E7O29IQU1FLFFBQUEsQ0FDQSxTQUFBLENBTU4sb0RBQ0UsZ0JBQUEsQ0FLQSwyQ0FDRSxnQkFBQSxDQUlKLDRCQUNFLFlBQUEsQ0FJRSx3TEFDRSxhQUFBLENBS04sMkJBQ0UseUJBQUEsQ0FDQSxTQUFBLENBQ0EscURBQUEsQ0FFQSxnTkFNRSxTQUFBLENBQ0EseUJBQUEsQ0FHRixrR0FFRSxZQUFBLENBS0osc0JBQ0UsaUJBQUEsQ0FDQSxNQUFBLENBQ0EsT0FBQSxDQUNBLFlBQUEsQ0FDQSxXQS9hdUIsQ0FnYnZCLG9EQUFBLENBQ0EscUJBQUEsQ0FFQSxnWEFNRSxRQUFBLENBQ0EseUJBQUEsQ0FHRiw0REFDRSx1QkFBQSxDQUlKLHNCQUNFLFlBQUEsQ0FDQSxXQUFBLENBQ0EsYUFBQSxDQUdGLHNCQUNFLG1CQUFBLENBQ0EsV0FBQSxDQUdGLHNCQUNFLFNBQUEsQ0FHRixzQkFDRSxTQUFBLENBQ0EsaUJBQUEsQ0FDQSxtQkFBQSxDQUNBLGtCQUFBLENBQ0Esc0JBQUEsQ0FDQSxVQUFBLENBQ0EsY0FBQSxDQUdGLHNCQUNFLFNBQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUNBLFNBbGVjLENBbWVkLGtEQUFBLENBWUEsdUVBQ0UsWUE5ZW1CLENBK2VuQix5QkFBQSxDQUlKLHNCQUNFLDBCQUFBLENBQ0EsU0FBQSxDQUdGLHNCQUNFLHdCQUFBLENBSUYsc0JBQ0UsU0FBQSxDQUNBLGlCQUFBLENBQ0EsaUJBQUEsQ0FDQSxnQkFBQSxDQUNBLGNBQUEsQ0FDQSxVQUFBLENBQ0Esa0JBQUEsQ0FqZkEscUNBMGVGLHNCQVVJLGtCQUFBLENBQUEsQ0FJSixrRUFHRSxxQkFBQSxDQUNBLFdBQUEsQ0FDQSxlQUFBLENBQ0EsZ0JBQUEsQ0FDQSxpQkFBQSxDQUdGLHNCQUNFLFlBQUEsQ0FJRSxzR0FDRSxhQUFBLENBRUEsMElBQ0UsVUFBQSxDQTNnQk4scUNBa2dCRixzQkFlSSxtQkFBQSxDQUFBLENBR0Ysd0NBQ0UsbUJBQUEsQ0FDQSxlQUFBLENBSUosc0JBQ0UsWUFBQSxDQUNBLGVBQUEsQ0E1aEJBLHFDQTBoQkYsc0JBS0ksbUJBQUEsQ0FBQSxDQUdGLHdDQUNFLFlBQUEsQ0FJSixzQkFDRSxtQkFBQSxDQUlFLHdHQUNFLFlBQUEsQ0E3aUJKLHFDQXVpQkYsc0JBV0ksWUFBQSxDQUFBLENBR0Ysd0NBQ0UsWUFBQSxDQUlKLDRDQUVFLFNBQUEsQ0FHRixzQkFDRSxrQkFBQSxDQUlGLHNCQUNFLFNBQUEsQ0FDQSxZQUFBLENBQ0Esa0JBQUEsQ0FDQSxzQkFBQSxDQUNBLGlCQUFBLENBQ0EsY0FBQSxDQUlFLDZMQUNFLG1CQUFBLENBSUosNkNBQ0UsbUJBQUEsQ0FHRiw0Q0FDRSxZQUFBLENBR0YsMERBQ0UsWUFBQSxDQUdGLHlOQU1FLG1CQUFBLENBR0Ysb0lBR0UsY0FBQSxDQUtBLDBKQUNFLFdBQUEsQ0FFQSx3S0FDRSxlQUFBLENBS04sMkRBRUUsVUFBQSxDQUNBLGlCQUFBLENBQ0EsS0FBQSxDQUNBLE9BQUEsQ0FDQSxRQUFBLENBQ0EsTUFBQSxDQUdGLDhCQUNFLFlBQUEsQ0FDQSw4REFBQSxDQUVBLG9EQUNFLGFBQUEsQ0FDQSw0QkF0cEJZLENBeXBCZCxnRkFDRSxhQUFBLENBQ0EsNEJBMXBCaUIsQ0E4cEJyQiw2QkFDRSxtRkFBQSxDQUtBLHdCQUFBLENBQ0EsMkJBQUEsQ0FDQSwwQkFBQSxDQUNBLHFEQUFBLENBRUEsc0dBRUUsWUFBQSxDQUdGLG1EQUNFLHlCQUFBLENBTUYsaU1BQ0Usd0JBQUEsQ0FDQSx5QkFBQSxDQUdGLCtMQUNFLFNBQUEsQ0FDQSx5QkFBQSxDQUtOLHNCQUNFLFNBQUEsQ0FDQSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxpQkFBQSxDQUNBLEtBQUEsQ0FDQSxPQUFBLENBQ0EsUUFBQSxDQUNBLE1BQUEsQ0FDQSxVQUFBLENBQ0EsV0FBQSxDQUNBLFdBQUEsQ0FDQSxxREFBQSxDQUVBLDRDQUNFLGVBQUEsQ0FDQSxpQkFBQSxDQUdGLDRDQUNFLGlCQUFBLENBQ0EsV0FBQSxDQUdGLDRDQUNFLFdBQUEsQ0FDQSxZQUFBLENBR0YsZ1BBS0UsWUFBQSxDQUdGLHNKQUVFLGNBQUEsQ0FHRix5R0FFRSx1QkFBQSxDQUdGLDREQUNFLFNBQUEsQ0FHRix5R0FHRSxVQUFBLENBQ0EseUJBQUEsQ0FHRix1TUFNRSxTQUFBLENBQ0EseUJBQUEsQ0FHRixtUEFRRSxVQUFBLENBQ0EseUJBQUEsQ0FJSixzQkFDRSxTQTV4QmMsQ0E2eEJkLGtEQUFBLENBRUEseUlBRUUsWUFoeUJrQixDQWl5QmxCLHFDQUFBLENBQ0EseUJBQUEsQ0FHRix1RUFDRSxZQXJ5Qm1CLENBc3lCbkIseUJBQUEsQ0FHRixvSUFHRSxvQkFBQSxDQUlKLHNCQUNFLGlCQUFBLENBQ0EsU0FBQSxDQUNBLG1CQUFBLENBQ0EsVUFBQSxDQUNBLHFEQUFBLENBQ0EsbUJBQUEsQ0FFQSw0Q0FDRSxpQkFBQSxDQUNBLFVBQUEsQ0FDQSxrQ0FBQSxDQUdGLDhLQUlFLHlDQUFBLENBQ0EsaUJBQUEsQ0FHRiw0Q0FDRSw4QkFBQSxDQUNBLHFCQUFBLENBQ0EseUJBQUEsQ0FDQSx5QkFBQSxDQUdGLHdGQUVFLFlBQUEsQ0FHRix5R0FHRSxVQUFBLENBQ0EseUJBQUEsQ0FHRixrUkFPRSxTQUFBLENBQ0EseUJBQUEsQ0FHRiw0REFDRSxvQkFBQSxDQUlKLHNCQUNFLFlBQUEsQ0FDQSxTQUFBLENBQ0EsaUJBQUEsQ0FDQSxjQUFBLENBQ0EsZUFBQSxDQUNBLGdCQUFBLENBQ0Esa0JBQUEsQ0FFQSw0Q0FDRSxhQUFBLENBSUosc0JBQ0UsU0FBQSxDQUNBLG1CQUFBLENBQ0Esb0JBQUEsQ0FDQSwyQkFBQSxDQUNBLGdCQUFBLENBQ0EsZUFBQSxDQUNBLGVBQUEsQ0FDQSxzQkFBQSxDQUNBLGNBQUEsQ0FDQSxlQUFBLENBQ0EsVUFBQSxDQUNBLHFCQUFBLENBRUEsMkNBQ0UsZ0JBQUEsQ0FDQSxlQUFBLENBQ0EsY0FBQSxDQUdGLDZDQUNFLGFBQUEsQ0FDQSxrQkFBQSxDQUtKLHNCQUNFLGlCQUFBLENBQ0EsVUFBQSxDQUNBLE1BQUEsQ0FDQSxPQUFBLENBQ0EsUUFBQSxDQUNBLDZCQXQ1QmlCLENBdTVCakIsU0FBQSxDQUNBLHFEQUFBLENBQ0EsbUJBQUEsQ0FFQSxzWUFNRSxTQUFBLENBQ0EseUJBQUEsQ0FHRix5Q0FDRSxvQkFBQSxDQUdGLDRDQUNFLFlBQUEsQ0FHRiwyREFFRSxVQUFBLENBQ0EsaUJBQUEsQ0FDQSxlQUFBLENBQ0EsTUFBQSxDQUNBLE9BQUEsQ0FDQSxXQUFBLENBSUYsOEJBQ0UsMENBQUEsQ0FDQSxzQ0FBQSxDQUNBLDZCQTM3QmUsQ0E0N0JmLDJDQUFBLENBSUYsNkJBQ0Usd0NBQUEsQ0FDQSxrQkF4OEJZLENBeThCWiwwQ0FBQSxDQUtKLHNCQUNFLFlBQUEsQ0FDQSxrQkFBQSxDQUNBLHdCQUFBLENBQ0Esc0JBQUEsQ0FDQSxjQUFBLENBQ0EsbUJBQUEsQ0FFQSw4QkFDRSxVQUFBLENBQ0EsU0FBQSxDQUNBLFNBQUEsQ0FDQSxVQUFBLENBQ0EsaUJBQUEsQ0FDQSxnQkFBQSxDQUNBLGtCQUFBLENBR0YsNENBQ0UsbUJBQUEsQ0FFQSxvREFDRSxrQkFBQSxDQUlKLG9DQUNFLGtCQUFBLENBSUosc0JBQ0UsU0FBQSxDQUNBLFlBQUEsQ0FDQSxrQkFBQSxDQUNBLHNCQUFBLENBQ0EsV0FBQSxDQUVBLDJCQUNFLFNBQUEsQ0FDQSxjQUFBLENBQ0EsZ0JBQUEsQ0FDQSxlQUFBLENBQ0Esb0JBQUEsQ0FDQSx3QkFBQSxDQUtKLHNCQUNFLGlCQUFBLENBQ0EsU0FBQSxDQUNBLFNBQUEsQ0FDQSxZQUFBLENBQ0Esa0JBQUEsQ0FDQSxhQUFBLENBQ0Esd0JBQUEsQ0FDQSxzQkFBQSxDQUNBLGNBQUEsQ0FHRixzQkFDRSxtQkFBQSxDQUVBLHFCQUFBLENBQ0EsU0FBQSxDQUNBLFlBQUEsQ0FDQSxrQkFBQSxDQUNBLDRFQUFBLENBR0EsV0FBQSxDQUNBLG9EQUFBLENBQ0EsZUFBQSxDQUVBLG1DQUNFLGlCQUFBLENBQ0EseUNBQUEsQ0FJSixzQkFDRSxhQUFBLENBQ0Esd0NBQUEsQ0FFQSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxzQ0FBQSxDQUNBLG9CQUFBLENBQ0EsZUFBQSxDQUNBLDZCQWxpQ2lCLENBbWlDakIsa0VBQUEsQ0FFQSwyREFFRSxVQUFBLENBQ0EsaUJBQUEsQ0FDQSxlQUFBLENBQ0EsTUFBQSxDQUNBLE9BQUEsQ0FDQSxXQUFBLENBSUYsOEJBQ0UsMklBQUEsQ0FhQSx1SUFBQSxDQVdBLDZCQXprQ2UsQ0E2a0NqQiw2QkFDRSx5SUFBQSxDQVdBLGtCQS9sQ1ksQ0FnbUNaLDBDQUFBLENBR0YsMERBQ0UsMkNBQUEsQ0FDQSw4Q0FBQSxDQUdGLHlEQUNFLDRDQUFBLENBQ0EsK0NBQUEsQ0FHRiwwQ0FDRSx5REFBQSxDQUNBLHlCQUFBLENBQ0EsdURBcG1Da0IsQ0F1bUNwQiwwUUFHRSxjQUFBLENBRUEseUJBQUEsQ0FHRiw0T0FPRSw4QkEzbkNxQixDQStuQ3pCLHNCQUNFLGlCQUFBLENBQ0EsdUNBQUEsQ0FDQSxRQUFBLENBQ0EsYUFBQSxDQUNBLGlCQUFBLENBQ0EsMEJBQUEsQ0FDQSxrQkE3b0NjLENBOG9DZCwwQ0FBQSxDQUNBLG1CQUFBLENBQ0EscURBQUEsQ0F6bkNBLHFDQTJuQ0EsMENBRUksU0FBQSxDQUFBLENBSUosc0VBQ0UsYUFBQSxDQUdGLHFNQUdFLFlBQUEsQ0FLSixzQkFDRSwyQkFBQSxDQUNBLHlCQUFBLENBQ0EsOEJBQUEsQ0FFQSxxQkFBQSxDQUNBLGlCQUFBLENBQ0EsaUJBQUEsQ0FDQSxZQUFBLENBQ0EscUJBQUEsQ0FDQSx3QkFBQSxDQUNBLHNCQUFBLENBQ0EsbUJBQUEsQ0FDQSxnQkFBQSxDQUNBLGNBQUEsQ0FDQSxlQUFBLENBQ0EsVUFBQSxDQUNBLGlCQUFBLENBQ0EsZUFBQSxDQUNBLG1CQUFBLENBRUEsNENBQ0UsZ0JBQUEsQ0FHRiwyQ0FDRSxZQUFBLENBR0YsK0NBQ0UsWUFBQSxDQUlKLDZCQUNFLHdCQUFBLENBR0Ysc0JBQ0UsaUJBQUEsQ0FDQSwrTkFBQSxDQVVBLGVBQUEsQ0FDQSxlQUFBLENBQ0EseURBQUEsQ0FDQSxlQUFBLENBQ0EsaUJBQUEsQ0FDQSxlQUFBLENBRUEsaURBQ0Usa0NBQUEsQ0FHRixrREFDRSxrQ0FBQSxDQUdGLDBEQUNFLGVBQUEsQ0FDQSxnQkFBQSxDQUlKLHNCQUNFLFNBQUEsQ0FDQSx3Q0FBQSxDQUNBLDZFQUFBLENBR0EsaUJBQUEsQ0FDQSxlQUFBLENBQ0Esa0VBQUEsQ0FFQSw2QkFDRSxpQkFBQSxDQUNBLFVBQUEsQ0FDQSxVQUFBLENBQ0EsVUFBQSxDQUNBLFFBQUEsQ0FDQSxNQUFBLENBQ0EsdUZBQUEsQ0FRSixzQkFDRSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxTQUFBLENBQ0EsVUFBQSxDQUNBLFFBQUEsQ0FDQSw0QkFBQSxDQUVBLDBEQUNFLGdCQUFBLENBQ0Esb0NBQUEsQ0FJSixzQkFDRSwrQkFBQSxDQUVBLGlCQUFBLENBQ0EseUtBQUEsQ0FPQSxZQUFBLENBQ0EsU0FBQSxDQUNBLGNBQUEsQ0FDQSxtQ0FBQSxDQUNBLGtCQUFBLENBQ0Esb0NBQUEsQ0FDQSxzQkFBQSxDQUNBLGVBQUEsQ0FFQSw2REFDRSxhQUFBLENBR0YsOERBQ0UsbUJBQUEsQ0FDQSxvQkFBQSxDQUNBLDJCQUFBLENBQ0EsZUFBQSxDQUNBLHFCQUFBLENBQ0Esa0JBQUEsQ0FHRiwwREFDRSxZQUFBLENBTUYsb0lBR0UsWUFBQSxDQUdGLHNNQUdFLGNBQUEsQ0FLSixzQkFDRSxtQkFBQSxDQUNBLGtCQUFBLENBQ0EsVUFBQSxDQUdFLGlEQUNFLFVBQUEsQ0FDQSxPQUFBLENBQ0EsbURBQUEsQ0FDQSxzQkFBQSxDQUtBLDhIQUNFLFVBQUEsQ0FDQSxTQUFBLENBQ0EsT0FBQSxDQUNBLFVBQUEsQ0FDQSxXQUFBLENBR0YsNEpBQ0UsV0FBQSxDQUNBLHlCQUFBLENBQ0Esc0JBQUEsQ0FHRix3VEFFRSxTQUFBLENBQ0EsdUJBQUEsQ0FDQSxzQkFBQSxDQUNBLG1CQUFBLENBS04sNENBQ0Usa0JBQUEsQ0FHRiw4RkFDRSxZQWozQ2tCLENBazNDbEIscUNBQUEsQ0FDQSx5QkFBQSxDQUdGLDhHQUVFLFlBQUEsQ0FHRiw4R0FFRSxjQUFBLENBR0YsNENBQ0UsVUFBQSxDQUNBLG1CQUFBLENBR0YsNkNBQ0UsdUJBQUEsQ0FJSixzQkFDRSxPQUFBLENBQ0EsU0FBQSxDQUNBLG1CQUFBLENBQ0Esa0JBQUEsQ0FDQSxpQkFBQSxDQUNBLE9BQUEsQ0FDQSxXQUFBLENBQ0EsbURBQUEsQ0FDQSxjQUFBLENBR0Ysc0JBQ0UsV0FBQSxDQUNBLFVBQUEsQ0FDQSxpQkFBQSxDQUNBLDZCQUFBLENBQ0EsZUFBQSxDQUNBLGtFQUFBLENBR0Ysc0JBQ0UsaUJBQUEsQ0FDQSxXQUFBLENBQ0EsZUFuNkNjLENBbzZDZCw4REFBQSxDQUVBLGtEQUNFLGtCQXQ2Q2tCLENBdTZDbEIsMkNBQUEsQ0FDQSx5QkFBQSxDQU1GLGlEQUNFLHVCQUFBLENBS0osc0JBQ0UsWUFBQSxDQUNBLFNBQUEsQ0FDQSxpQkFBQSxDQUNBLFNBQUEsQ0FDQSxpQkFBQSxDQUNBLGdCQUFBLENBQ0EsZUFBQSxDQUNBLGlCQUFBLENBQ0EsVUFBQSxDQUNBLGlCQUFBLENBQ0Esa0JBQUEsQ0FDQSxrQkFsOENjLENBbThDZCxtQkFBQSxDQUVBLDZCQUNFLFVBQUEsQ0FDQSxpQkFBQSxDQUNBLFdBQUEsQ0FDQSxRQUFBLENBQ0EsZ0JBQUEsQ0FDQSxPQUFBLENBQ0EsUUFBQSxDQUNBLDRCQUFBLENBQ0Esb0NBQUEsQ0FDQSxtQ0FBQSxDQUdGLHNFQUNFLGFBQUEsQ0FHRiw2Q0FDRSx1QkFBQSxDQUtKLHNCQUNFLFlBQUEsQ0FFQSw0Q0FDRSxtQkFBQSxDQWg5Q0YscUNBbTlDQSx1TkFJSSxZQUFBLENBQUEsQ0FNTixzQkFDRSxZQUFBLENBRUEsOENBQ0UsbUJBQUEsQ0FqK0NGLHFDQW8rQ0EsNFJBYUksbUJBQUEsQ0FBQSxDQU1OLHNCQUNFLFlBQUEsQ0FFQSxpREFDRSxtQkFBQSxDQUdGLDhDQUNFLFlBQUEsQ0FLSixzQkFDRSxZQUFBLENBRUEsZ0RBQ0UsbUJBQUEsQ0FHRiw4Q0FDRSxZQUFBLENBS0osc0JBQ0UsWUFBQSxDQUVBLG9EQUNFLG1CQUFBLENBR0YsOENBQ0UsWUFBQSxDQXpoREYscUNBZ2lEQSw0bkJBSUksWUFBQSxDQUFBLENBS04sc0JBQ0UsWUFBQSxDQUNBLGlCQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FDQSxTQUFBLENBQ0EsUUFBQSxDQUNBLHFEQUFBLENBRUEsc0NBQ0UsbUJBQUEsQ0FDQSxTQUFBLENBQ0EsbUJBQUEsQ0FHRiw0REFDRSxTQUFBLENBQ0EsbUJBQUEsQ0FDQSx5QkFBQSxDQUtKLHNCQUNFLG1CQUFBLENBR0Ysc0JBQ0UsbUJBQUEsQ0FDQSxrQkFBQSxDQUNBLHNCQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FFQSx1RkFFRSxtQkFBQSxDQUlKLDBGQUVFLFlBQUEsQ0FrQkUsMnBCQWVJLDBCQUFBLENBZkosK29CQWVJLDBCQUFBLENBZkoseW9CQWVJLDBCQUFBLENBZkosMnBCQWFJLFlBQUEsQ0FTUiw0Q0FDRSxTQUFBLENBQ0EsaUJBQUEsQ0FFQSx3RkFDRSxpQkFBQSxDQUlKLHNCQUNFLFNBQUEsQ0FDQSxpQkFBQSxDQUNBLFVBQUEsQ0FDQSxXQUFBLENBQ0EsbUJBQUEsQ0FFQSw0Q0FDRSxXQUFBLENBQ0EsWUFBQSxDQUlKLHNCQUNFLGlCQUFBLENBQ0EsVUFBQSxDQUNBLFdBQUEsQ0FHRixzQkFHRSx5QkFBQSxDQUdGLHNCQUdFLG9CQUFBLENBQ0Esd0JBQUEsQ0FDQSxvQkFBQSxDQUNBLFdBQUEsQ0FJRixzQkFDRSxxQkFBQSxDQUNBLHdCQUFBLENBQ0EsaURBQUEsQ0FHRixnQ0FDRSxHQUNFLHFCQUFBLENBR0YsS0FDRSxtQkFBQSxDQUFBLENBS0osc0JBQ0UsbUJBQUEsQ0FFQSx1Q0FDRSw0QkFuc0RjLENBb3NEZCw4REFBQSxDQUdGLDRDQUNFLGlCQUFBLENBSUosc0JBQ0UsWUFBQSxDQUNBLEtBQUEsQ0FDQSxPQUFBLENBQ0EsUUFBQSxDQUNBLE1BQUEsQ0FDQSxXQUFBLENBRUEsZ0VBQUEsQ0FFQSx1Q0FDRSxhQUFBLENBSUosc0JBQ0UsZ0ZBQUEsQ0FHRixzQkFDRSx5QkFBQSxDQUNBLHFCQUFBLENBQ0EsZ0ZBQUEsQ0FHRixnQ0FDRSxLQUNFLHdCQUFBLENBQUEsQ0FJSixnQ0FDRSxNQUNFLHdCQUFBLENBR0YsSUFDRSx3QkFBQSxDQUdGLE1BQ0Usd0JBQUEsQ0FHRixJQUNFLHdCQUFBLENBR0YsTUFDRSx3QkFBQSxDQUdGLElBQ0Usd0JBQUEsQ0FHRixNQUNFLHdCQUFBLENBR0YsS0FDRSx5QkFBQSxDQUFBLENBSUosZ0NBQ0UsR0FDRSx3QkFBQSxDQUNBLHFCQUFBLENBR0YsSUFDRSx5QkFBQSxDQUNBLHFCQUFBLENBR0YsS0FDRSx3QkFBQSxDQUNBLHFCQUFBLENBQUEsQ0FNRixrR0FHRSx1QkFBQSxDQUtKLGlCQUNFLFlBQUEsQ0FDQSxzQkFBQSxDQUVBLGlDQUNFLFNBQUEsQ0FJSixtQkFDRSxZQUFBLENBQ0Esc0JBQUEsQ0FDQSxhQUFBLENBQ0EsaUJBQUEsQ0FDQSxxQ0FBQSxDQUNBLGdCQUFBLENBQ0EscUJBQUEsQ0FDQSxpQkFBQSxDQUNBLGlCQUFBLENBQ0EsaUNBQUEsQ0FDQSx5QkFBQSxDQUNBLGtDQUFBLENBRUEscUJBQ0UsUUFBQSxDQUNBLGNBQUEsQ0FDQSxnQkFBQSxDQUNBLGVBQUEsQ0FDQSxVQUFBLENBR0YseUNBQ0UsNkVBQUEsQ0FFQSwrQ0FBQSxDQUdGLDJDQUNFLGdCQUFBLENBQ0EsNENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIkcHJpbWFyeS1jb2xvcjogIzMxNWVmYjtcbiRwYW5lLWJnLWNvbG9yOiAjMzQzYjRjO1xuJGNvbnRyb2wtY29sb3I6ICNmZmY7XG4kY29udHJvbC1ob3Zlci1jb2xvcjogI2RjZGZlNztcbiRjb250cm9sLWFjdGl2ZS1jb2xvcjogI2M2Y2FkODtcbiRib3R0b20tY29udHJvbHMtaGVpZ2h0OiA1MHB4O1xuJHNlZWtiYXItYmctY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTtcbiRzZWVrYmFyLWJnLWhvdmVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpO1xuJGdyYWRpZW50LWZyb20tY29sb3I6IHRyYW5zcGFyZW50O1xuJGdyYWRpZW50LXRvLWNvbG9yOiByZ2JhKDMxLCAzNiwgNDksIDAuNyk7XG4kc2hhZG93LWJnLWNvbG9yOiByZ2JhKDUyLCA1OSwgNzYsIDAuNik7XG4kZGFyay1zaGFkb3ctYmctY29sb3I6IHJnYmEoNTIsIDU5LCA3NiwgMC44KTtcbiR0cmFuc2l0aW9uLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjMsIDEpO1xuJHRodW1ibmFpbHMtdGV4dC1zaGFkb3c6ICMxZjI0MzE7XG4kbGFyZ2Utd2lkdGg6IDU3MHB4O1xuXG5AbWl4aW4gc21hbGwtd2lkdGgge1xuICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAoJGxhcmdlLXdpZHRoIC0gMXB4KSkge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiBsYXJnZS13aWR0aCB7XG4gIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6ICRsYXJnZS13aWR0aCkge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbiVidXR0b25JY29uSGlnaGxpZ2h0IHtcbiAgZmlsbDogJGNvbnRyb2wtaG92ZXItY29sb3I7XG4gIGZpbGw6IHZhcigtLXNraW4taG92ZXItY29sb3IsICRjb250cm9sLWhvdmVyLWNvbG9yKTtcbiAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG59XG5cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ01hbnJvcGUnO1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHNyYzogbG9jYWwoJ01hbnJvcGUnKSxcbiAgICB1cmwoJ2h0dHBzOi8vc3RhdGljLnJhbWJsZXIucnUvZm9udHMvTWFucm9wZS9tZWRpdW0ud29mZjInKSBmb3JtYXQoJ3dvZmYyJyk7XG59XG5cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ01hbnJvcGUnO1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIHNyYzogbG9jYWwoJ01hbnJvcGUnKSxcbiAgICB1cmwoJ2h0dHBzOi8vc3RhdGljLnJhbWJsZXIucnUvZm9udHMvTWFucm9wZS9zZW1pYm9sZC53b2ZmMicpXG4gICAgICBmb3JtYXQoJ3dvZmYyJyk7XG59XG5cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ01hbnJvcGUnO1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIHNyYzogbG9jYWwoJ01hbnJvcGUnKSxcbiAgICB1cmwoJ2h0dHBzOi8vc3RhdGljLnJhbWJsZXIucnUvZm9udHMvTWFucm9wZS9leHRyYWJvbGQud29mZjInKVxuICAgICAgZm9ybWF0KCd3b2ZmMicpO1xufVxuXG46Z2xvYmFsKC5lcGxheWVyKSB7XG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xuICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlO1xuICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7XG5cbiAgKixcbiAgKjo6YmVmb3JlLFxuICAqOjphZnRlciB7XG4gICAgYm94LXNpemluZzogY29udGVudC1ib3g7XG4gIH1cbn1cblxuOmdsb2JhbCguZXBsYXllci1ob2xkYWJsZSkge1xuICA6Z2xvYmFsKC5lcGxheWVyLWZ1bGxzY3JlZW4tbWVudS5zZXR0aW5ncy1tZW51LXZpc2libGUpICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItaGlkZS1za2luKSAmIHtcbiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIH1cbn1cblxuOmdsb2JhbCguZWFnbGVwbGF5ZXItY29udGFpbmVyKSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG59XG5cbjpnbG9iYWwoLmNvbnRhaW5lcikge1xuICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG46Z2xvYmFsKC5lcGxheWVyLXNraW4pIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB6LWluZGV4OiAxO1xuICBmbGV4OiBhdXRvO1xuICB3aWR0aDogMTAwJTtcbiAgZm9udC1mYW1pbHk6IGVhZ2xlLWRlZmF1bHQsIE1hbnJvcGUsIHNhbnMtc2VyaWY7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgJixcbiAgJiAqIHtcbiAgICAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIH1cblxuICAmID4gKiB7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLXNraW4tZnVsbHNpemUpIHtcbiAgICB3aWR0aDogYXV0bztcbiAgICBoZWlnaHQ6IGF1dG87XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICByaWdodDogMDtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItc2tpbi1jb21wb25lbnQpIHtcbiAgICB6LWluZGV4OiAxMDtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItc2tpbi1mb3JlZ3JvdW5kKSB7XG4gICAgei1pbmRleDogMTAwO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1za2luLWJhY2tncm91bmQpIHtcbiAgICB6LWluZGV4OiAwO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1za2luLW1pZGRsZWdyb3VuZCkge1xuICAgIHotaW5kZXg6IDY7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLXRleHQpIHtcbiAgICBmb250LXNpemU6IDEycHg7XG4gIH1cbn1cblxuOmdsb2JhbCguZXBsYXllci1oYW5kbGVkLWVycm9yKSB7XG4gIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7XG59XG5cbjpnbG9iYWwoLmVwbGF5ZXItc2tpbi1ub3Qtc3RhcnRlZCAuZXBsYXllci1oaWRlLWNvbnRyb2wtc3RhcnQpIHtcbiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xufVxuXG46Z2xvYmFsKC5lcGxheWVyLXNraW4tZnVsbHNpemUuZXBsYXllci1za2luLXNoaWZ0YWJsZSkge1xuICB0b3A6IDA7XG4gIGJvdHRvbTogNXB4O1xuICB0cmFuc2l0aW9uOiB0b3AgMTAwbXMsIGJvdHRvbSAyMDBtcztcbiAgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuXG4gIC5hY3RpdmVTZWVrQmFyICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlLmVwbGF5ZXItYWN0aXZlKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgLnNraW5XaXRoU3VnZ2VzdC5za2luUGF1c2VkICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZS5lcGxheWVyLWFjdGl2ZSAuZXBsYXllci1za2luOmhvdmVyKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vcm1hbC1tZW51LnNldHRpbmdzLW1lbnUtdmlzaWJsZSkgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuY29udHJvbHNDb250YWluZXI6aG92ZXIgfiAmIHtcbiAgICB0b3A6IDM1cHg7XG4gICAgYm90dG9tOiAzNXB4O1xuICAgIHRyYW5zaXRpb246IHRvcCAxMDBtcywgYm90dG9tIDMwMG1zO1xuICAgIHRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlLmVwbGF5ZXItYWN0aXZlKSAmW2RhdGEtYmFubmVyXSxcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlLmVwbGF5ZXItYWN0aXZlIC5lcGxheWVyLXNraW46aG92ZXIpXG4gICAgJltkYXRhLWJhbm5lcl0sXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm9ybWFsLW1lbnUuc2V0dGluZ3MtbWVudS12aXNpYmxlKSAmW2RhdGEtYmFubmVyXSxcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuY29udHJvbHNDb250YWluZXI6aG92ZXIgfiAmW2RhdGEtYmFubmVyXSB7XG4gICAgdG9wOiBhdXRvO1xuICAgIGJvdHRvbTogNTBweDtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItaGlkZS1za2luKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLXNraW4tbm90LXN0YXJ0ZWQpICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAuc2tpbkVuZGVkICYge1xuICAgIHRvcDogMCAhaW1wb3J0YW50O1xuICAgIGJvdHRvbTogNXB4ICFpbXBvcnRhbnQ7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLXRpdGxlLWhpZGRlbjpub3QoLmVwbGF5ZXItc2tpbi13aXRoLWxpa2VzKSkgJiB7XG4gICAgdG9wOiAwICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuLyogTElWRSBTVEFUVVMgKi9cbjpnbG9iYWwoLmVwbGF5ZXItbGl2ZS1zdGF0dXMpIHtcbiAgZGlzcGxheTogYmxvY2s7XG5cbiAgLnNraW5QbGF5aW5nICYsXG4gIC5hY3RpdmVTZWVrQmFyICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlLmVwbGF5ZXItYWN0aXZlKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgLnNraW5XaXRoU3VnZ2VzdC5za2luUGF1c2VkICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZS5lcGxheWVyLWFjdGl2ZSAuZXBsYXllci1za2luOmhvdmVyKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vcm1hbC1tZW51LnNldHRpbmdzLW1lbnUtdmlzaWJsZSkgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuY29udHJvbHNDb250YWluZXI6aG92ZXIgfiAmIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1za2luLW5vdC1zdGFydGVkKSAmIHtcbiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50O1xuICB9XG59XG5cbjpnbG9iYWwoLmVwbGF5ZXItZnVsbHNjcmVlbikge1xuICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbn1cblxuLyogR1JBRElORU5UUyAqL1xuLmdyYWRpZW50IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMTAwJTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5ncmFkaWVudFRvcCB7XG4gIHRvcDogLTEwMHB4O1xuICBoZWlnaHQ6IDEwMHB4O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgMGRlZyxcbiAgICAkZ3JhZGllbnQtZnJvbS1jb2xvciAwLFxuICAgICRncmFkaWVudC10by1jb2xvciAxMDAlXG4gICk7XG4gIHRyYW5zaXRpb246IHRvcCAyMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICAuYWN0aXZlU2Vla0JhciAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZS5lcGxheWVyLWFjdGl2ZSkgJixcbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpIC5za2luV2l0aFN1Z2dlc3Quc2tpblBhdXNlZCAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUuZXBsYXllci1hY3RpdmUgLmVwbGF5ZXItc2tpbjpob3ZlcikgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3JtYWwtbWVudS5zZXR0aW5ncy1tZW51LXZpc2libGUpICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLmNvbnRyb2xzQ29udGFpbmVyOmhvdmVyIH4gJiB7XG4gICAgdG9wOiAwO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDMwMG1zO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpIC5za2luRW5kZWQgJiB7XG4gICAgdG9wOiAtMTAwcHggIWltcG9ydGFudDtcbiAgfVxufVxuXG4uZ3JhZGllbnRCb3R0b20ge1xuICBib3R0b206IC03MHB4O1xuICBoZWlnaHQ6IDcwcHg7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICAxODBkZWcsXG4gICAgJGdyYWRpZW50LWZyb20tY29sb3IgMCxcbiAgICAkZ3JhZGllbnQtdG8tY29sb3IgMTAwJVxuICApO1xuICB0cmFuc2l0aW9uOiBib3R0b20gMjAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG5cbiAgLmFjdGl2ZVNlZWtCYXIgJixcbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUuZXBsYXllci1hY3RpdmUpICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAuc2tpbldpdGhTdWdnZXN0LnNraW5QYXVzZWQgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlLmVwbGF5ZXItYWN0aXZlIC5lcGxheWVyLXNraW46aG92ZXIpICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm9ybWFsLW1lbnUuc2V0dGluZ3MtbWVudS12aXNpYmxlKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpIC5jb250cm9sc0NvbnRhaW5lcjpob3ZlciB+ICYge1xuICAgIGJvdHRvbTogMDtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAzMDBtcztcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAuc2tpbkVuZGVkICYge1xuICAgIGJvdHRvbTogLTcwcHggIWltcG9ydGFudDtcbiAgfVxufVxuXG4vKiBUSVRMRSAqL1xuLnRpdGxlIHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgb3BhY2l0eTogMDtcbiAgei1pbmRleDogMTI7XG4gIHdpZHRoOiAxMDAlO1xuICBwYWRkaW5nOiAxNXB4IDE1cHggMTBweDtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAyMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICAuYWN0aXZlU2Vla0JhciAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZS5lcGxheWVyLWFjdGl2ZSkgJixcbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpIC5za2luV2l0aFN1Z2dlc3Quc2tpblBhdXNlZCAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUuZXBsYXllci1hY3RpdmUgLmVwbGF5ZXItc2tpbjpob3ZlcikgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3JtYWwtbWVudS5zZXR0aW5ncy1tZW51LXZpc2libGUpICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLmNvbnRyb2xzQ29udGFpbmVyOmhvdmVyIH4gJiB7XG4gICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDMwMG1zO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpIC5za2luRW5kZWQgJiB7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuICFpbXBvcnRhbnQ7XG4gICAgb3BhY2l0eTogMCAhaW1wb3J0YW50O1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci10aXRsZS1oaWRkZW4pICYge1xuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgfVxufVxuXG4udGl0bGVJbm5lciB7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBmb250LXNpemU6IDE1cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBjb2xvcjogJGNvbnRyb2wtY29sb3I7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogY29sb3IgMjAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG5cbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpICY6YWN0aXZlLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpICY6aG92ZXIge1xuICAgIGNvbG9yOiAkY29udHJvbC1ob3Zlci1jb2xvcjtcbiAgICBjb2xvcjogdmFyKC0tc2tpbi1ob3Zlci1jb2xvciwgJGNvbnRyb2wtaG92ZXItY29sb3IpO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDMwMG1zO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAmOmFjdGl2ZSB7XG4gICAgY29sb3I6ICRjb250cm9sLWFjdGl2ZS1jb2xvcjtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItc2tpbi13aXRoLWxpa2VzKSAmIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDc1cHg7XG4gIH1cbn1cblxuLyogTElLRVMgKi9cbjpnbG9iYWwoLmVwbGF5ZXItbGlrZXMpIHtcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICBvcGFjaXR5OiAwO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDIwMG1zICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuXG4gIC5hY3RpdmVTZWVrQmFyICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlLmVwbGF5ZXItYWN0aXZlKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgLnNraW5XaXRoU3VnZ2VzdC5za2luUGF1c2VkICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZS5lcGxheWVyLWFjdGl2ZSAuZXBsYXllci1za2luOmhvdmVyKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vcm1hbC1tZW51LnNldHRpbmdzLW1lbnUtdmlzaWJsZSkgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuY29udHJvbHNDb250YWluZXI6aG92ZXIgfiAmIHtcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMzAwbXM7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgLnNraW5FbmRlZCAmIHtcbiAgICB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7XG4gICAgb3BhY2l0eTogMSAhaW1wb3J0YW50O1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zICFpbXBvcnRhbnQ7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLXNraW4tbm90LXN0YXJ0ZWQpICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cblxuLyogVU5NVVRFICovXG46Z2xvYmFsKC5lcGxheWVyLXVubXV0ZSkge1xuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUgLmVwbGF5ZXItdGl0bGUtaGlkZGVuKSAmIHtcbiAgICB0b3A6IDAgIWltcG9ydGFudDtcbiAgfVxuXG4gIC5za2luRW5kZWQgJiB7XG4gICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICB9XG5cbiAgLnNraW5QbGF5aW5nICYsXG4gIC5za2luUGF1c2VkICYge1xuICAgIDpnbG9iYWwoXG4gICAgICAgIC5lcGxheWVyLW5vdC1tb2JpbGVcbiAgICAgICAgICAuZXBsYXllci1sYXJnZS1zY3JlZW4uZXBsYXllci13aXRoLXRocmVlLXNpeHR5LXZpZXdlclxuICAgICAgKVxuICAgICAgJlxuICAgICAgW2RhdGEtdW5tdXRlXSB7XG4gICAgICB0b3A6IDc1cHg7XG4gICAgICBsZWZ0OiAyMHB4O1xuICAgIH1cbiAgfVxufVxuXG4vKiBQUk9NTyBCVVRUT04gKi9cbjpnbG9iYWwoLmVwbGF5ZXItdGl0bGUtaGlkZGVuIC5lcGxheWVyLXByb21vLWJ1dHRvbi1sZWZ0LXVwKSB7XG4gIHRvcDogMCAhaW1wb3J0YW50O1xufVxuXG4vKiBUSFJFRSBTSVhUWSBWSUVXRVIgKi9cbjpnbG9iYWwoLmVwbGF5ZXItdGhyZWUtc2l4dHkpIHtcbiAgOmdsb2JhbCguZXBsYXllci10aXRsZS1oaWRkZW4pICYge1xuICAgIHRvcDogMCAhaW1wb3J0YW50O1xuICB9XG59XG5cbjpnbG9iYWwoLmVwbGF5ZXItdGhyZWUtc2l4dHktYnV0dG9uKSB7XG4gIGRpc3BsYXk6IG5vbmU7XG5cbiAgLnNraW5QbGF5aW5nICYsXG4gIC5za2luUGF1c2VkICYge1xuICAgIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSAuZXBsYXllci1sYXJnZS1zY3JlZW4pICYge1xuICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuICB9XG59XG5cbjpnbG9iYWwoLmVwbGF5ZXItdGhyZWUtc2l4dHktbGFiZWwpIHtcbiAgcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7XG4gIG9wYWNpdHk6IDE7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMTAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG5cbiAgOmdsb2JhbCguZXBsYXllci1hY3RpdmUuZXBsYXllci1ub3QtbW9iaWxlKSAuc2tpbkVuZGVkOmhvdmVyICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSlcbiAgICAuc2tpbkVuZGVkXG4gICAgLmNvbnRyb2xzQ29udGFpbmVyOmhvdmVyXG4gICAgfiA6Z2xvYmFsKC5lcGxheWVyLXRocmVlLXNpeHR5KVxuICAgICYge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICAuc2tpblBsYXlpbmcgJixcbiAgLnNraW5QYXVzZWQgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4vKiBDT05UUk9MUyAqL1xuLmNvbnRyb2xzQ29udGFpbmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAtJGJvdHRvbS1jb250cm9scy1oZWlnaHQ7XG4gIGhlaWdodDogJGJvdHRvbS1jb250cm9scy1oZWlnaHQ7XG4gIHRyYW5zaXRpb246IGJvdHRvbSAyMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbiAgei1pbmRleDogMTMgIWltcG9ydGFudDtcblxuICAuYWN0aXZlU2Vla0JhciAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZS5lcGxheWVyLWFjdGl2ZSkgJixcbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpIC5za2luV2l0aFN1Z2dlc3Quc2tpblBhdXNlZCAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUuZXBsYXllci1hY3RpdmUgLmVwbGF5ZXItc2tpbjpob3ZlcikgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAmOmhvdmVyLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vcm1hbC1tZW51LnNldHRpbmdzLW1lbnUtdmlzaWJsZSkgJiB7XG4gICAgYm90dG9tOiAwO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDMwMG1zO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpIC5za2luRW5kZWQgJiB7XG4gICAgYm90dG9tOiAtJGJvdHRvbS1jb250cm9scy1oZWlnaHQgIWltcG9ydGFudDtcbiAgfVxufVxuXG4uY29udHJvbHMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBoZWlnaHQ6IDEwMCU7XG4gIHBhZGRpbmc6IDAgNXB4O1xufVxuXG4uY29udHJvbHNMaXN0IHtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLmNvbnRyb2xzSXRlbSB7XG4gIGZsZXg6IG5vbmU7XG59XG5cbi5idXR0b24ge1xuICBmbGV4OiBub25lO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgd2lkdGg6IDQwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLmJ1dHRvbkljb24ge1xuICBmbGV4OiBub25lO1xuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuICBmaWxsOiAkY29udHJvbC1jb2xvcjtcbiAgdHJhbnNpdGlvbjogZmlsbCAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgLmJ1dHRvbjphY3RpdmUgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuYnV0dG9uOmhvdmVyICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLmJ1dHRvbltkYXRhLW1lbnUtaXRlbS1hY3RpdmVdICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSlcbiAgICAuYnV0dG9uW2RhdGEtbWVudS1pdGVtLWFjdGl2ZV1cbiAgICB+IC5tZW51QnV0dG9uXG4gICAgPiAmIHtcbiAgICBAZXh0ZW5kICVidXR0b25JY29uSGlnaGxpZ2h0O1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuYnV0dG9uOmFjdGl2ZSAmIHtcbiAgICBmaWxsOiAkY29udHJvbC1hY3RpdmUtY29sb3I7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMTAwbXM7XG4gIH1cbn1cblxuLmNvbnRyb2xzTGVmdCB7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgZmxleDogYXV0bztcbn1cblxuLmNvbnRyb2xzUmlnaHQge1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xufVxuXG4vKiBUSU1FSU5GTyAqL1xuLnRpbWVpbmZvIHtcbiAgZmxleDogbm9uZTtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBwYWRkaW5nLXJpZ2h0OiA1cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBmb250LXNpemU6IDEycHg7XG4gIGNvbG9yOiAjZmZmO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuXG4gIEBpbmNsdWRlIGxhcmdlLXdpZHRoIHtcbiAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICB9XG59XG5cbi50aW1laW5mb0N1cnJlbnQsXG4udGltZWluZm9Ub3RhbCxcbi50aW1laW5mb0xlZnQge1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBoZWlnaHQ6IDIwcHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRleHQtYWxpZ246IHJpZ2h0O1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG59XG5cbi50aW1laW5mb0N1cnJlbnQge1xuICBkaXNwbGF5OiBub25lO1xuXG4gIC50aW1laW5mb1ZhbHVlLFxuICAudGltZWluZm9QbGFjZWhvbGRlciB7XG4gICAgJjo6YWZ0ZXIge1xuICAgICAgY29udGVudDogJyAvICc7XG5cbiAgICAgIDpnbG9iYWwoLmVwbGF5ZXItbGl2ZS1kdnIpICYge1xuICAgICAgICBjb250ZW50OiAnJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBAaW5jbHVkZSBsYXJnZS13aWR0aCB7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWxpdmUtZHZyKSAmIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICB9XG59XG5cbi50aW1laW5mb1RvdGFsIHtcbiAgZGlzcGxheTogbm9uZTtcbiAgdGV4dC1hbGlnbjogbGVmdDtcblxuICBAaW5jbHVkZSBsYXJnZS13aWR0aCB7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWxpdmUtZHZyKSAmIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbi50aW1laW5mb0xlZnQge1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcblxuICAudGltZWluZm9WYWx1ZSxcbiAgLnRpbWVpbmZvUGxhY2Vob2xkZXIge1xuICAgICY6OmJlZm9yZSB7XG4gICAgICBjb250ZW50OiAnLSAnO1xuICAgIH1cbiAgfVxuXG4gIEBpbmNsdWRlIGxhcmdlLXdpZHRoIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1saXZlLWR2cikgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4udGltZWluZm9WYWx1ZSxcbi50aW1laW5mb1BsYWNlaG9sZGVyIHtcbiAgZmxleDogbm9uZTtcbn1cblxuLnRpbWVpbmZvVmFsdWUge1xuICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xufVxuXG4vKiBMQVJHRSBQTEFZICovXG4ubGFyZ2VQbGF5IHtcbiAgei1pbmRleDogOTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIHBhZGRpbmc6IDE1cHggMjBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuXG4gIC5za2luUGxheWluZyAmLFxuICAuc2tpblBhdXNlZDpub3QoLnNraW5XaXRoU3VnZ2VzdCkgJiB7XG4gICAgOmdsb2JhbCguZXBsYXllci1tb2JpbGU6bm90KC5lcGxheWVyLWFjdGl2ZSkpICYge1xuICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1oYW5kbGVkLWVycm9yKSAmIHtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxuXG4gIC5za2luRW5kZWQgJiB7XG4gICAgcGFkZGluZzogMzBweDtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGFyZ2Utc2NyZWVuIC5lcGxheWVyLXNraW4pICYge1xuICAgIHBhZGRpbmc6IDMwcHg7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSAuZXBsYXllci1sYXJnZS1oZWlnaHQpXG4gICAgLnNraW5FbmRlZDpub3QoOmdsb2JhbCguZXBsYXllci1mdWxsc2NyZWVuLWhpZGRlbikpXG4gICAgJixcbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUgLmVwbGF5ZXItbGFyZ2UtaGVpZ2h0LmVwbGF5ZXItd2l0aC1zaGFyaW5nKVxuICAgIC5za2luRW5kZWRcbiAgICAmIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogNTBweDtcbiAgfVxuXG4gIC5za2luUGxheWluZyAmLFxuICAuc2tpblBhdXNlZCAmLFxuICAuc2tpbkVuZGVkICYge1xuICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgfVxuXG4gIC5za2luUGxheWluZyAmLFxuICAuc2tpblBhdXNlZCAmIHtcbiAgICA6Z2xvYmFsKC5lcGxheWVyLXdpdGgtdGhyZWUtc2l4dHktdmlld2VyKSAmIHtcbiAgICAgIGN1cnNvcjogZ3JhYjtcblxuICAgICAgJjphY3RpdmUge1xuICAgICAgICBjdXJzb3I6IGdyYWJiaW5nO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICY6OmJlZm9yZSxcbiAgJjo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gIH1cblxuICAmOjpiZWZvcmUge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICAgIC5za2luRW5kZWQgJiB7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIGJhY2tncm91bmQ6ICRzaGFkb3ctYmctY29sb3I7XG4gICAgfVxuXG4gICAgOmdsb2JhbCguZXBsYXllci1oYW5kbGVkLWVycm9yOm5vdCguZXBsYXllci1oYXMtYW5ub3VuY2UpKSAmIHtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgYmFja2dyb3VuZDogJGRhcmstc2hhZG93LWJnLWNvbG9yO1xuICAgIH1cbiAgfVxuXG4gICY6OmFmdGVyIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgICAxODBkZWcsXG4gICAgICB0cmFuc3BhcmVudCAwLFxuICAgICAgcmdiYSg1MiwgNTksIDc2LCAwLjcpIDEwMCVcbiAgICApO1xuICAgIGJhY2tncm91bmQtc2l6ZTogMTAwJSA1MCU7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBib3R0b207XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICAgIC5za2luUGxheWluZyAmLFxuICAgIC5za2luUGF1c2VkICYge1xuICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG5cbiAgICAuc2tpbkVuZGVkICYge1xuICAgICAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7XG4gICAgfVxuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlLmVwbGF5ZXItYWN0aXZlKSAuc2tpbkVuZGVkOmhvdmVyICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLnNraW5FbmRlZCAuY29udHJvbHNDb250YWluZXI6aG92ZXIgfiAmIHtcbiAgICAmOjpiZWZvcmUge1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgICB9XG5cbiAgICAmOjphZnRlciB7XG4gICAgICBvcGFjaXR5OiAwO1xuICAgICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gICAgfVxuICB9XG59XG5cbi5sYXJnZVBsYXlJY29uIHtcbiAgZmxleDogbm9uZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAxO1xuICBpc29sYXRpb246IGlzb2xhdGU7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDUwcHg7XG4gIGhlaWdodDogNTBweDtcbiAgbWFyZ2luOiBhdXRvO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDEwMG1zICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuXG4gIC5za2luRW5kZWQgJiB7XG4gICAgcG9zaXRpb246IHN0YXRpYztcbiAgICBtYXJnaW46IDAgMTVweCAwIDA7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWxhcmdlLWhlaWdodCkgJiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIG1hcmdpbjogYXV0bztcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGFyZ2Utc2NyZWVuKSAmIHtcbiAgICB3aWR0aDogMTAwcHg7XG4gICAgaGVpZ2h0OiAxMDBweDtcbiAgfVxuXG4gIC5za2luUGxheWluZyAmLFxuICAuc2tpblBhdXNlZCAmLFxuICAuc2tpbkVuZGVkICYsXG4gICYucmVwbGF5SWNvbixcbiAgLnNraW5FbmRlZCAmLnBsYXlJY29uIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuc2tpblBhdXNlZCAmLnBsYXlJY29uLFxuICAuc2tpbkVuZGVkICYucmVwbGF5SWNvbiB7XG4gICAgZGlzcGxheTogaW5saW5lO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1oYW5kbGVkLWVycm9yKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLmxvYWRpbmcpICYucGxheUljb24ge1xuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAuc2tpbkVuZGVkICYge1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUgLmVhZ2xlcGxheWVyLWNvbnRhaW5lcjpob3ZlcilcbiAgICAuc2tpblN0b3BwZWQ6bm90KDpob3ZlcilcbiAgICAmIHtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUuZXBsYXllci1hY3RpdmUpIC5za2luU3RvcHBlZDpob3ZlciAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpXG4gICAgLnNraW5TdG9wcGVkXG4gICAgLmNvbnRyb2xzQ29udGFpbmVyOmhvdmVyXG4gICAgfiAubGFyZ2VQbGF5XG4gICAgJiB7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZS5lcGxheWVyLWFjdGl2ZSAuZXBsYXllci1sYXJnZS1oZWlnaHQpXG4gICAgLnNraW5TdG9wcGVkOmhvdmVyXG4gICAgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlIC5lcGxheWVyLWxhcmdlLWhlaWdodClcbiAgICAuc2tpblN0b3BwZWRcbiAgICAuY29udHJvbHNDb250YWluZXI6aG92ZXJcbiAgICB+IC5sYXJnZVBsYXlcbiAgICAmIHtcbiAgICBvcGFjaXR5OiAwLjM7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cbn1cblxuLmxhcmdlUGxheUljb25QYXRoIHtcbiAgZmlsbDogJGNvbnRyb2wtY29sb3I7XG4gIHRyYW5zaXRpb246IGZpbGwgMTAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG5cbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpIC5sYXJnZVBsYXk6YWN0aXZlICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZSkgLmxhcmdlUGxheTpob3ZlciAmIHtcbiAgICBmaWxsOiAkY29udHJvbC1ob3Zlci1jb2xvcjtcbiAgICBmaWxsOiB2YXIoLS1za2luLWhvdmVyLWNvbG9yLCAkY29udHJvbC1ob3Zlci1jb2xvcik7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpIC5sYXJnZVBsYXk6YWN0aXZlICYge1xuICAgIGZpbGw6ICRjb250cm9sLWFjdGl2ZS1jb2xvcjtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAxMDBtcztcbiAgfVxuXG4gIC5za2luUGxheWluZyAmLFxuICAuc2tpblBhdXNlZCAmLFxuICAuc2tpbkVuZGVkICYge1xuICAgIGZpbGw6ICRjb250cm9sLWNvbG9yICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuLmxhcmdlUGxheVRpdGxlIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB6LWluZGV4OiAxO1xuICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgd2lkdGg6IDEwMCU7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMTAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gIC5za2luRW5kZWQgJiB7XG4gICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIG1heC13aWR0aDogY2FsYygxMDAlIC0gNTBweCAtIDE1cHgpO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpXG4gICAgLnNraW5FbmRlZDpub3QoOmdsb2JhbCguZXBsYXllci1mdWxsc2NyZWVuLWhpZGRlbikpXG4gICAgJixcbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUgLmVwbGF5ZXItd2l0aC1zaGFyaW5nKSAuc2tpbkVuZGVkICYge1xuICAgIG1heC13aWR0aDogY2FsYygxMDAlIC0gNTBweCAtIDE1cHggLSA1NXB4KTtcbiAgICBtYXJnaW4tcmlnaHQ6IDU1cHg7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWxhcmdlLWhlaWdodCkgJiB7XG4gICAgYWxpZ24tc2VsZjogZmxleC1lbmQgIWltcG9ydGFudDtcbiAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICAgIG1heC13aWR0aDogbm9uZSAhaW1wb3J0YW50O1xuICAgIG1hcmdpbi1yaWdodDogMCAhaW1wb3J0YW50O1xuICB9XG5cbiAgLnNraW5QbGF5aW5nICYsXG4gIC5za2luUGF1c2VkICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUgLmVhZ2xlcGxheWVyLWNvbnRhaW5lcjpob3ZlcilcbiAgICAuc2tpblN0b3BwZWQ6bm90KDpob3ZlcilcbiAgICAmIHtcbiAgICBvcGFjaXR5OiAwLjY7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZS5lcGxheWVyLWFjdGl2ZSkgLnNraW5FbmRlZCAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUuZXBsYXllci1hY3RpdmUpIC5za2luRW5kZWQ6aG92ZXIgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKVxuICAgIC5za2luRW5kZWRcbiAgICAuY29udHJvbHNDb250YWluZXI6aG92ZXJcbiAgICB+IC5sYXJnZVBsYXlcbiAgICAmIHtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1tb2JpbGUpIC5za2luRW5kZWQgJiB7XG4gICAgb3BhY2l0eTogMSAhaW1wb3J0YW50O1xuICB9XG59XG5cbi5sYXJnZVBsYXlUaXRsZVByZSB7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIGZsZXg6IG5vbmU7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBmb250LXdlaWdodDogNTAwO1xuICBsaW5lLWhlaWdodDogMjBweDtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcblxuICAuc2tpbkVuZGVkICYge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG59XG5cbi5sYXJnZVBsYXlUaXRsZUlubmVyIHtcbiAgZmxleDogbm9uZTtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIC13ZWJraXQtbGluZS1jbGFtcDogMjtcbiAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgbGluZS1oZWlnaHQ6IDI1cHg7XG4gIG1heC1oZWlnaHQ6IDUwcHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBmb250LXNpemU6IDE4cHg7XG4gIGZvbnQtd2VpZ2h0OiA4MDA7XG4gIGNvbG9yOiAjZmZmO1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGFyZ2UtdGl0bGUpICYge1xuICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuICAgIG1heC1oZWlnaHQ6IDYwcHg7XG4gICAgZm9udC1zaXplOiAyNnB4O1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1zaG9ydGVuLXRpdGxlKSAmIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB9XG59XG5cbi8qIFBST0dSRVNTIEJBUiAqL1xuLnByb2dyZXNzQmFyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBoZWlnaHQ6IDVweDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgYmFja2dyb3VuZDogJHNlZWtiYXItYmctY29sb3I7XG4gIG9wYWNpdHk6IDE7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMjAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gIC5hY3RpdmVTZWVrQmFyICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlLmVwbGF5ZXItYWN0aXZlKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgLnNraW5XaXRoU3VnZ2VzdC5za2luUGF1c2VkICYsXG4gIDpnbG9iYWwoLmVwbGF5ZXItbm90LW1vYmlsZS5lcGxheWVyLWFjdGl2ZSAuZXBsYXllci1za2luOmhvdmVyKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vcm1hbC1tZW51LnNldHRpbmdzLW1lbnUtdmlzaWJsZSkgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuY29udHJvbHNDb250YWluZXI6aG92ZXIgfiAmIHtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDMwMG1zO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1oaWRlLXNraW4pICYge1xuICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDtcbiAgfVxuXG4gIC5za2luRW5kZWQgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gICY6OmJlZm9yZSxcbiAgJjo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGxlZnQ6IDA7XG4gICAgd2lkdGg6IDA7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG5cbiAgLyogbG9hZGluZyBiYXIgKi9cbiAgJjo6YmVmb3JlIHtcbiAgICBsZWZ0OiBjYWxjKHZhcigtLXNlZWtiYXItbG9hZGVkLWxlZnQpICogMTAwJSk7XG4gICAgd2lkdGg6IGNhbGModmFyKC0tc2Vla2Jhci1sb2FkZWQpICogMTAwJSk7XG4gICAgYmFja2dyb3VuZDogJHNlZWtiYXItYmctY29sb3I7XG4gICAgdHJhbnNpdGlvbjogd2lkdGggMzAwbXMgZWFzZSwgbGVmdCAzMDBtcyBlYXNlO1xuICB9XG5cbiAgLyogcG9zaXRpb24gYmFyICovXG4gICY6OmFmdGVyIHtcbiAgICB3aWR0aDogY2FsYyh2YXIoLS1zZWVrYmFyLXBvc2l0aW9uKSAqIDEwMCUpO1xuICAgIGJhY2tncm91bmQ6ICRwcmltYXJ5LWNvbG9yO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLXNraW4tbWFpbi1jb2xvciwgJHByaW1hcnktY29sb3IpO1xuICB9XG59XG5cbi8qIExJVkUgQlVUVE9OICovXG4ubGl2ZUJ1dHRvbiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMjAwbXM7XG4gIHRyYW5zaXRpb24tZGVsYXk6IDEwMG1zOyAvLyDQn9C+0LrQsNC3INC/0L7RgdC70LUg0YHRhdC70L7Qv9GL0LLQsNC90LjRjyB2b2x1bWUtYmFyXG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiAnJztcbiAgICBmbGV4OiBub25lO1xuICAgIHdpZHRoOiA3cHg7XG4gICAgaGVpZ2h0OiA3cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIG1hcmdpbi1yaWdodDogNnB4O1xuICAgIGJhY2tncm91bmQ6ICNmZjU2NGU7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWxpdmUtaGlzdG9yeSkgJiB7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG5cbiAgICAmOjpiZWZvcmUge1xuICAgICAgYmFja2dyb3VuZDogIzhkOTZiMjtcbiAgICB9XG4gIH1cblxuICAmOmhvdmVyOjpiZWZvcmUge1xuICAgIGJhY2tncm91bmQ6ICNmZjU2NGU7XG4gIH1cbn1cblxuLmxpdmVCdXR0b25UZXh0IHtcbiAgZmxleDogbm9uZTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGhlaWdodDogMTAwJTtcblxuICBzcGFuIHtcbiAgICBmbGV4OiBub25lO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICBmb250LXdlaWdodDogODAwO1xuICAgIGxldHRlci1zcGFjaW5nOiAxLjNweDtcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICB9XG59XG5cbi8qIENPTlRST0xMRUQgUFJPR1JFU1MgQkFSICovXG4uY29udHJvbGxlZFByb2dlc3NCYXIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHotaW5kZXg6IDE7XG4gIGZsZXg6IGF1dG87XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbjogMCAxMHB4O1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDIwMG1zO1xuICB0cmFuc2l0aW9uLWRlbGF5OiAxMDBtczsgLy8g0J/QvtC60LDQtyDQv9C+0YHQu9C1INGB0YXQu9C+0L/Ri9Cy0LDQvdC40Y8gdm9sdW1lLWJhclxuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5jb250cm9sbGVkUHJvZ2Vzc0JhckVwaXNvZGUge1xuICAtLWVwaXNvZGVzLWdhcDogMnB4O1xuXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZsZXg6IG5vbmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHdpZHRoOiBjYWxjKFxuICAgIDEwMCUgKiAodmFyKC0tZXBpc29kZS1lbmQpIC0gdmFyKC0tZXBpc29kZS1zdGFydCkpIC8gdmFyKC0tZHVyYXRpb24pXG4gICk7XG4gIGhlaWdodDogMTAwJTtcbiAgYm9yZGVyLXJpZ2h0OiB2YXIoLS1lcGlzb2Rlcy1nYXApIHNvbGlkIHRyYW5zcGFyZW50O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gICY6bGFzdC1vZi10eXBlIHtcbiAgICAtLWVwaXNvZGVzLWdhcDogMDtcbiAgICAtLWVwaXNvZGUtZW5kOiB2YXIoLS1kdXJhdGlvbikgIWltcG9ydGFudDtcbiAgfVxufVxuXG4uY29udHJvbGxlZFByb2dlc3NCYXJUcmFjayB7XG4gIC0taGVpZ2h0OiA1cHg7XG4gIC0tYm9yZGVyLXJhZGl1czogY2FsYyh2YXIoLS1oZWlnaHQpIC8gMik7XG5cbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBmbGV4OiBhdXRvO1xuICB3aWR0aDogY2FsYygxMDAlICsgdmFyKC0tZXBpc29kZXMtZ2FwKSk7XG4gIGhlaWdodDogdmFyKC0taGVpZ2h0KTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgYmFja2dyb3VuZDogJHNlZWtiYXItYmctY29sb3I7XG4gIC13ZWJraXQtbWFzay1pbWFnZTogcmFkaWFsLWdyYWRpZW50KGNpcmNsZSwgd2hpdGUgMTAwJSwgYmxhY2sgMTAwJSk7XG5cbiAgJjo6YmVmb3JlLFxuICAmOjphZnRlciB7XG4gICAgY29udGVudDogJyc7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgbGVmdDogMDtcbiAgICB3aWR0aDogMDtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cblxuICAvKiBsb2FkaW5nIGJhciAqL1xuICAmOjpiZWZvcmUge1xuICAgIGxlZnQ6IE1pbihcbiAgICAgIE1heChcbiAgICAgICAgY2FsYyhcbiAgICAgICAgICAxMDAlICpcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgdmFyKC0tc2Vla2Jhci1sb2FkZWQtbGVmdCkgKiB2YXIoLS1kdXJhdGlvbikgLVxuICAgICAgICAgICAgICAgIHZhcigtLWVwaXNvZGUtc3RhcnQpXG4gICAgICAgICAgICApIC8gKHZhcigtLWVwaXNvZGUtZW5kKSAtIHZhcigtLWVwaXNvZGUtc3RhcnQpKVxuICAgICAgICApLFxuICAgICAgICAwJVxuICAgICAgKSxcbiAgICAgIDEwMCVcbiAgICApO1xuICAgIHdpZHRoOiBNaW4oXG4gICAgICBNYXgoXG4gICAgICAgIGNhbGMoXG4gICAgICAgICAgMTAwJSAqXG4gICAgICAgICAgICAodmFyKC0tc2Vla2Jhci1sb2FkZWQpICogdmFyKC0tZHVyYXRpb24pIC0gdmFyKC0tZXBpc29kZS1zdGFydCkpIC9cbiAgICAgICAgICAgICh2YXIoLS1lcGlzb2RlLWVuZCkgLSB2YXIoLS1lcGlzb2RlLXN0YXJ0KSlcbiAgICAgICAgKSxcbiAgICAgICAgMCVcbiAgICAgICksXG4gICAgICAxMDAlXG4gICAgKTtcbiAgICBiYWNrZ3JvdW5kOiAkc2Vla2Jhci1iZy1jb2xvcjtcbiAgfVxuXG4gIC8qIHBvc2l0aW9uIGJhciAqL1xuICAmOjphZnRlciB7XG4gICAgd2lkdGg6IE1pbihcbiAgICAgIE1heChcbiAgICAgICAgY2FsYyhcbiAgICAgICAgICAxMDAlICpcbiAgICAgICAgICAgICh2YXIoLS1zZWVrYmFyLXBvc2l0aW9uKSAqIHZhcigtLWR1cmF0aW9uKSAtIHZhcigtLWVwaXNvZGUtc3RhcnQpKSAvXG4gICAgICAgICAgICAodmFyKC0tZXBpc29kZS1lbmQpIC0gdmFyKC0tZXBpc29kZS1zdGFydCkpXG4gICAgICAgICksXG4gICAgICAgIDAlXG4gICAgICApLFxuICAgICAgMTAwJVxuICAgICk7XG4gICAgYmFja2dyb3VuZDogJHByaW1hcnktY29sb3I7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tc2tpbi1tYWluLWNvbG9yLCAkcHJpbWFyeS1jb2xvcik7XG4gIH1cblxuICAuY29udHJvbGxlZFByb2dlc3NCYXJFcGlzb2RlOmZpcnN0LW9mLXR5cGUgJiB7XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7XG4gIH1cblxuICAuY29udHJvbGxlZFByb2dlc3NCYXJFcGlzb2RlOmxhc3Qtb2YtdHlwZSAmIHtcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7XG4gICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpO1xuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAmIHtcbiAgICB0cmFuc2l0aW9uLXByb3BlcnR5OiBoZWlnaHQsIGJvcmRlci1yYWRpdXMsIGJhY2tncm91bmQtY29sb3I7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMTAwbXM7XG4gICAgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ICR0cmFuc2l0aW9uLWZ1bmN0aW9uO1xuICB9XG5cbiAgLmFjdGl2ZVNlZWtCYXIgLmNvbnRyb2xsZWRQcm9nZXNzQmFyRXBpc29kZTpmaXJzdC1jaGlsZDpudGgtbGFzdC1jaGlsZCgyKSAmLFxuICAuYWN0aXZlU2Vla0JhciAuY29udHJvbGxlZFByb2dlc3NCYXI6bm90KDpob3ZlcikgLmFjdGl2ZUVwaXNvZGUgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuY29udHJvbGxlZFByb2dlc3NCYXJFcGlzb2RlOmhvdmVyICYge1xuICAgIC0taGVpZ2h0OiAxMHB4O1xuXG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cblxuICAuYWN0aXZlU2Vla0JhclxuICAgIC5jb250cm9sbGVkUHJvZ2Vzc0Jhcjpub3QoOmhvdmVyKVxuICAgIC5hY3RpdmVFcGlzb2RlOm5vdCg6Zmlyc3Qtb2YtdHlwZTpsYXN0LW9mLXR5cGUpXG4gICAgJixcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKVxuICAgIC5jb250cm9sbGVkUHJvZ2Vzc0JhckVwaXNvZGU6bm90KDpmaXJzdC1vZi10eXBlOmxhc3Qtb2YtdHlwZSk6aG92ZXJcbiAgICAmIHtcbiAgICBiYWNrZ3JvdW5kOiAkc2Vla2Jhci1iZy1ob3Zlci1jb2xvcjtcbiAgfVxufVxuXG4uY29udHJvbGxlZFByb2dlc3NCYXJUaHVtYiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogY2FsYygxMDAlICogdmFyKC0tc2Vla2Jhci1wb3NpdGlvbikpO1xuICBoZWlnaHQ6IDA7XG4gIHBhZGRpbmc6IDcuNXB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcbiAgYmFja2dyb3VuZDogJHByaW1hcnktY29sb3I7XG4gIGJhY2tncm91bmQ6IHZhcigtLXNraW4tbWFpbi1jb2xvciwgJHByaW1hcnktY29sb3IpO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgdHJhbnNpdGlvbjogcGFkZGluZyAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpICYge1xuICAgIEBpbmNsdWRlIGxhcmdlLXdpZHRoIHtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgfVxuICB9XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuY29udHJvbGxlZFByb2dlc3NCYXI6aG92ZXIgJiB7XG4gICAgcGFkZGluZzogNy41cHg7XG4gIH1cblxuICAuYWN0aXZlU2Vla0JhciAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpIC5jb250cm9sbGVkUHJvZ2Vzc0Jhcjpob3ZlciAmOm50aC1jaGlsZCgyKSxcbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAuYWN0aXZlRXBpc29kZTpob3ZlciB+ICYge1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gIH1cbn1cblxuLyogVEhVTUJOQUlMICovXG4udGh1bWJuYWlscyB7XG4gIC0tdGh1bWJuYWlscy1zaWRlLWdhcDogMTVweDtcbiAgLS10aHVtYm5haWxzLXdpZHRoOiAxMDBweDtcbiAgLS10aHVtYm5haWxzLWJvcmRlci13aWR0aDogMnB4O1xuXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMCAhaW1wb3J0YW50O1xuICBkaXNwbGF5OiBub25lO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgcGFkZGluZzogMTVweCAwIDEycHg7XG4gIGxpbmUtaGVpZ2h0OiAxNXB4O1xuICBmb250LXNpemU6IDEycHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiAjZmZmO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItdGl0bGUtaGlkZGVuKSAmIHtcbiAgICB0b3A6IDAgIWltcG9ydGFudDtcbiAgfVxuXG4gICY6Z2xvYmFsKC5lcGxheWVyLXRpbWUtdmlzaWJsZSkge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWhpZGUtdGh1bWJuYWlscykgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG46Z2xvYmFsKC5lcGxheWVyLXRodW1ibmFpbHMtdmVydGljYWwpIHtcbiAgLS10aHVtYm5haWxzLXdpZHRoOiA3NXB4O1xufVxuXG4udGh1bWJuYWlsc0ltYWdlIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBsZWZ0OiBNaW4oXG4gICAgTWF4KFxuICAgICAgY2FsYyh2YXIoLS10aHVtYm5haWxzLXNpZGUtZ2FwKSAtIHZhcigtLXRodW1ibmFpbHMtYm9yZGVyLXdpZHRoKSksXG4gICAgICBjYWxjKHZhcigtLXRodW1ibmFpbHMtcG9zaXRpb24pIC0gdmFyKC0tdGh1bWJuYWlscy13aWR0aCkgLyAyKVxuICAgICksXG4gICAgY2FsYyhcbiAgICAgIDEwMHZ3IC0gdmFyKC0tdGh1bWJuYWlscy1zaWRlLWdhcCkgLSB2YXIoLS10aHVtYm5haWxzLXdpZHRoKSAtXG4gICAgICAgIHZhcigtLXRodW1ibmFpbHMtYm9yZGVyLXdpZHRoKVxuICAgIClcbiAgKTtcbiAgbWluLWhlaWdodDogMjVweDtcbiAgbWF4LWhlaWdodDogMTAwJTtcbiAgYm9yZGVyOiB2YXIoLS10aHVtYm5haWxzLWJvcmRlci13aWR0aCkgc29saWQgdHJhbnNwYXJlbnQ7XG4gIGJhY2tncm91bmQ6ICNmZmY7XG4gIGJvcmRlci1yYWRpdXM6IDdweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLWVwaXNvZGVzLW9uZS1saW5lKSAmIHtcbiAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMCUgLSAxNXB4IC0gNXB4KTtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItZXBpc29kZXMtdHdvLWxpbmVzKSAmIHtcbiAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMCUgLSAyICogMTVweCAtIDVweCk7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLXRodW1ibmFpbHMtd2l0aG91dC1wcmV2aWV3KSAmIHtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIG92ZXJmbG93OiB2aXNpYmxlO1xuICB9XG59XG5cbi50aHVtYm5haWxzU3ByaXRlIHtcbiAgZmxleDogbm9uZTtcbiAgd2lkdGg6IHZhcigtLXRodW1ibmFpbHMtd2lkdGgpICFpbXBvcnRhbnQ7XG4gIGhlaWdodDogY2FsYyhcbiAgICB2YXIoLS10aHVtYm5haWxzLXdpZHRoKSAvIHZhcigtLXRodW1ibmFpbHMtaW1hZ2UtcmF0aW8pXG4gICkgIWltcG9ydGFudDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICAtd2Via2l0LW1hc2staW1hZ2U6IHJhZGlhbC1ncmFkaWVudChjaXJjbGUsIHdoaXRlIDEwMCUsIGJsYWNrIDEwMCUpO1xuXG4gICY6OmFmdGVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgY29udGVudDogJyc7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiA1MCU7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KFxuICAgICAgdG8gYm90dG9tLFxuICAgICAgcmdiYSgzMSwgMzYsIDQ5LCAwKSxcbiAgICAgIHJnYmEoMzEsIDM2LCA0OSwgMC43KVxuICAgICk7XG4gIH1cbn1cblxuLnRodW1ibmFpbHNUaW1lIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiAyO1xuICByaWdodDogNXB4O1xuICBib3R0b206IDVweDtcbiAgbGVmdDogNXB4O1xuICB0ZXh0LXNoYWRvdzogMCAwIDEwcHggJHRodW1ibmFpbHMtdGV4dC1zaGFkb3c7XG5cbiAgOmdsb2JhbCguZXBsYXllci10aHVtYm5haWxzLXdpdGhvdXQtcHJldmlldykgJiB7XG4gICAgdGV4dC1zaGFkb3c6IG5vbmU7XG4gICAgZmlsdGVyOiBkcm9wLXNoYWRvdygwIDAgMTBweCAkdGh1bWJuYWlscy10ZXh0LXNoYWRvdyk7XG4gIH1cbn1cblxuLnRodW1ibmFpbHNFcGlzb2RlIHtcbiAgLS10aHVtYm5haWxzLWxhYmVsLXdpZHRoOiAxNjBweDtcblxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGxlZnQ6IE1pbihcbiAgICBNYXgoXG4gICAgICB2YXIoLS10aHVtYm5haWxzLXNpZGUtZ2FwKSxcbiAgICAgIGNhbGModmFyKC0tdGh1bWJuYWlscy1wb3NpdGlvbikgLSB2YXIoLS10aHVtYm5haWxzLWxhYmVsLXdpZHRoKSAvIDIpXG4gICAgKSxcbiAgICBjYWxjKDEwMHZ3IC0gdmFyKC0tdGh1bWJuYWlscy1zaWRlLWdhcCkgLSB2YXIoLS10aHVtYm5haWxzLWxhYmVsLXdpZHRoKSlcbiAgKTtcbiAgZGlzcGxheTogbm9uZTtcbiAgZmxleDogbm9uZTtcbiAgbWFyZ2luLXRvcDogNXB4O1xuICB3aWR0aDogdmFyKC0tdGh1bWJuYWlscy1sYWJlbC13aWR0aCk7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIGZpbHRlcjogZHJvcC1zaGFkb3coMCAwIDEwcHggJHRodW1ibmFpbHMtdGV4dC1zaGFkb3cpO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLWVwaXNvZGVzLW9uZS1saW5lKSAmOm5vdCg6ZW1wdHkpIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItZXBpc29kZXMtdHdvLWxpbmVzKSAmOm5vdCg6ZW1wdHkpIHtcbiAgICBkaXNwbGF5OiAtd2Via2l0LWJveDtcbiAgICAtd2Via2l0LWxpbmUtY2xhbXA6IDI7XG4gICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbiAgICBtYXgtaGVpZ2h0OiAzMHB4O1xuICAgIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gICAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItdGh1bWJuYWlscy13aXRob3V0LXByZXZpZXcpICYge1xuICAgIG1hcmdpbi10b3A6IDA7XG4gIH1cbn1cblxuLyogUExBWSBCVVRUT04gKi9cbi5wbGF5QnV0dG9uIHtcbiAgLnBsYXlJY29uLFxuICAucGF1c2VJY29uLFxuICAucmVwbGF5SWNvbiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gIC5za2luUGxheWluZyAmIC5wYXVzZUljb24sXG4gIC5za2luUGF1c2VkICYgLnBsYXlJY29uLFxuICAuc2tpbkVuZGVkICYgLnJlcGxheUljb24ge1xuICAgIGRpc3BsYXk6IGlubGluZTtcbiAgfVxufVxuXG4vKiBWT0xVTUUgKi9cbi52b2x1bWUge1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgd2lkdGg6IDQwcHg7XG5cbiAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlKSAmIHtcbiAgICAmOjphZnRlciB7XG4gICAgICBjb250ZW50OiAnJztcbiAgICAgIHdpZHRoOiAwO1xuICAgICAgdHJhbnNpdGlvbjogd2lkdGggMTAwbXMgJHRyYW5zaXRpb24tZnVuY3Rpb247XG4gICAgICB0cmFuc2l0aW9uLWRlbGF5OiA0MDBtcztcbiAgICB9XG5cbiAgICAuYWN0aXZlVm9sdW1lQmFyICYsXG4gICAgJjpob3ZlciB7XG4gICAgICAmOjphZnRlciB7XG4gICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICBmbGV4OiBub25lO1xuICAgICAgICBvcmRlcjogMTtcbiAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLnZvbHVtZUNvbnRyb2wge1xuICAgICAgICB3aWR0aDogMTIwcHg7XG4gICAgICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDIwMG1zO1xuICAgICAgICB0cmFuc2l0aW9uLWRlbGF5OiA0MDBtcztcbiAgICAgIH1cblxuICAgICAgJiB+IC5saXZlQnV0dG9uLFxuICAgICAgJiB+IC5jb250cm9sbGVkUHJvZ2Vzc0JhciB7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgIHRyYW5zaXRpb24tZHVyYXRpb246IDBtcztcbiAgICAgICAgdHJhbnNpdGlvbi1kZWxheTogNDAwbXM7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5idXR0b24ge1xuICAgIGFsaWduLXNlbGY6IHN0cmV0Y2g7XG4gIH1cblxuICAudm9sdW1lQ29udHJvbDpob3ZlciB+IC5idXR0b24gLmJ1dHRvbkljb24ge1xuICAgIGZpbGw6ICRjb250cm9sLWhvdmVyLWNvbG9yO1xuICAgIGZpbGw6IHZhcigtLXNraW4taG92ZXItY29sb3IsICRjb250cm9sLWhvdmVyLWNvbG9yKTtcbiAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiAyMDBtcztcbiAgfVxuXG4gIC52b2x1bWVNdXRlSWNvbixcbiAgLnNraW5Wb2x1bWVNdXRlICYgLnZvbHVtZUhpZ2hJY29uIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgLnZvbHVtZUhpZ2hJY29uLFxuICAuc2tpblZvbHVtZU11dGUgJiAudm9sdW1lTXV0ZUljb24ge1xuICAgIGRpc3BsYXk6IGlubGluZTtcbiAgfVxuXG4gIC5za2luTm9Tb3VuZCAmIHtcbiAgICBvcGFjaXR5OiAwLjU7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLXZvbHVtZS1oaWRkZW4pICYge1xuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgfVxufVxuXG4udm9sdW1lQ29udHJvbCB7XG4gIG9yZGVyOiAxO1xuICBmbGV4OiBub25lO1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB3aWR0aDogMDtcbiAgaGVpZ2h0OiAxMDAlO1xuICB0cmFuc2l0aW9uOiB3aWR0aCAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udm9sdW1lTGV2ZWwge1xuICBoZWlnaHQ6IDEwcHg7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgLXdlYmtpdC1tYXNrLWltYWdlOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlLCB3aGl0ZSAxMDAlLCBibGFjayAxMDAlKTtcbn1cblxuLnZvbHVtZUJhciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kOiAkY29udHJvbC1jb2xvcjtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAyMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICAudm9sdW1lQ29udHJvbDpob3ZlciAmIHtcbiAgICBiYWNrZ3JvdW5kOiAkY29udHJvbC1ob3Zlci1jb2xvcjtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1za2luLWhvdmVyLWNvbG9yLCAkY29udHJvbC1ob3Zlci1jb2xvcik7XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMzAwbXM7XG4gIH1cbn1cblxuLyogRlVMTFNDUkVFTiAqL1xuLmZ1bGxzY3JlZW5CdXR0b24ge1xuICA6Z2xvYmFsKC5lcGxheWVyLWZ1bGxzY3JlZW4taGlkZGVuKSAmIHtcbiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuLyogTUVOVSBCVVRUT04gVE9PTFRJUCAqL1xuLmJ1dHRvblRleHQge1xuICBkaXNwbGF5OiBub25lO1xuICBmbGV4OiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTM1cHg7XG4gIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgbGluZS1oZWlnaHQ6IDIwcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICNmZmY7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgYmFja2dyb3VuZDogJHBhbmUtYmctY29sb3I7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gICY6OmFmdGVyIHtcbiAgICBjb250ZW50OiAnJztcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgYm90dG9tOiAtNXB4O1xuICAgIGxlZnQ6IDUwJTtcbiAgICBtYXJnaW4tbGVmdDogLTVweDtcbiAgICB3aWR0aDogMDtcbiAgICBoZWlnaHQ6IDA7XG4gICAgYm9yZGVyLXRvcDogNXB4IHNvbGlkICRwYW5lLWJnLWNvbG9yO1xuICAgIGJvcmRlci1yaWdodDogNXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLW5vdC1tb2JpbGUpIC5idXR0b246aG92ZXIgJiB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gIH1cblxuICA6Z2xvYmFsKC5zZXR0aW5ncy1tZW51LXZpc2libGUpICYge1xuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgfVxufVxuXG4vKiBTSEFSRSAqL1xuLnNoYXJlQnV0dG9uIHtcbiAgZGlzcGxheTogbm9uZTtcblxuICA6Z2xvYmFsKC5lcGxheWVyLXdpdGgtc2hhcmluZykgJiB7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIH1cblxuICA6Z2xvYmFsKC5zZXR0aW5ncy1tZW51LXdpdGgtbGV2ZWxzKSAuY29udHJvbHMgJixcbiAgOmdsb2JhbCguc2V0dGluZ3MtbWVudS13aXRoLXJhdGVzKSAuY29udHJvbHMgJixcbiAgOmdsb2JhbCguc2V0dGluZ3MtbWVudS13aXRoLXN1YnRpdGxlcykgLmNvbnRyb2xzICYge1xuICAgIEBpbmNsdWRlIHNtYWxsLXdpZHRoIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG59XG5cbi8qIFNFVFRJTkdTIE1FTlUgKi9cbi5tZW51QnV0dG9uIHtcbiAgZGlzcGxheTogbm9uZTtcblxuICA6Z2xvYmFsKC5zZXR0aW5ncy1tZW51LW11bHRpcGxlKSAmIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgfVxuXG4gIDpnbG9iYWwoXG4gICAgICAuZXBsYXllci1mdWxsc2NyZWVuLW1lbnUuZXBsYXllci13aXRoLXNoYXJpbmcuc2V0dGluZ3MtbWVudS13aXRoLWxldmVsc1xuICAgIClcbiAgICAmLFxuICA6Z2xvYmFsKFxuICAgICAgLmVwbGF5ZXItZnVsbHNjcmVlbi1tZW51LmVwbGF5ZXItd2l0aC1zaGFyaW5nLnNldHRpbmdzLW1lbnUtd2l0aC1yYXRlc1xuICAgIClcbiAgICAmLFxuICA6Z2xvYmFsKFxuICAgICAgLmVwbGF5ZXItZnVsbHNjcmVlbi1tZW51LmVwbGF5ZXItd2l0aC1zaGFyaW5nLnNldHRpbmdzLW1lbnUtd2l0aC1zdWJ0aXRsZXNcbiAgICApXG4gICAgJiB7XG4gICAgQGluY2x1ZGUgc21hbGwtd2lkdGgge1xuICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgfVxuICB9XG59XG5cbi8qIExFVkVMUyBCVVRUT04gKi9cbi5sZXZlbHNCdXR0b24ge1xuICBkaXNwbGF5OiBub25lO1xuXG4gIDpnbG9iYWwoLnNldHRpbmdzLW1lbnUtd2l0aC1sZXZlbHMpICYge1xuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICB9XG5cbiAgOmdsb2JhbCguc2V0dGluZ3MtbWVudS1tdWx0aXBsZSkgJiB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxufVxuXG4vKiBSQVRFUyBCVVRUT04gKi9cbi5yYXRlc0J1dHRvbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG5cbiAgOmdsb2JhbCguc2V0dGluZ3MtbWVudS13aXRoLXJhdGVzKSAmIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgfVxuXG4gIDpnbG9iYWwoLnNldHRpbmdzLW1lbnUtbXVsdGlwbGUpICYge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cblxuLyogU1VCVElUTEVTIEJVVFRPTiAqL1xuLnN1YnRpdGxlc0J1dHRvbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG5cbiAgOmdsb2JhbCguc2V0dGluZ3MtbWVudS13aXRoLXN1YnRpdGxlcykgJiB7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIH1cblxuICA6Z2xvYmFsKC5zZXR0aW5ncy1tZW51LW11bHRpcGxlKSAmIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG5cbi5sZXZlbHNCdXR0b24sXG4ucmF0ZXNCdXR0b24sXG4uc3VidGl0bGVzQnV0dG9uIHtcbiAgOmdsb2JhbCguZXBsYXllci13aXRoLXNoYXJpbmcuc2V0dGluZ3MtbWVudS13aXRoLWxldmVscykgJixcbiAgOmdsb2JhbCguZXBsYXllci13aXRoLXNoYXJpbmcuc2V0dGluZ3MtbWVudS13aXRoLXJhdGVzKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLXdpdGgtc2hhcmluZy5zZXR0aW5ncy1tZW51LXdpdGgtc3VidGl0bGVzKSAmIHtcbiAgICBAaW5jbHVkZSBzbWFsbC13aWR0aCB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxufVxuXG4uZW5kQ29udHJvbHMge1xuICBkaXNwbGF5OiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHotaW5kZXg6IDEyO1xuICBoZWlnaHQ6IDUwcHg7XG4gIHJpZ2h0OiA1cHg7XG4gIGJvdHRvbTogMDtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcblxuICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZSkgJiB7XG4gICAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gICAgb3BhY2l0eTogMDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAuc2tpbkVuZGVkICYge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMjAwbXM7XG4gIH1cbn1cblxuLyogV0FUQ0ggTkVYVCAqL1xuLnBsYXlOZXh0IHtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG59XG5cbi5wbGF5TmV4dElubmVyIHtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlKSAmLFxuICA6Z2xvYmFsKC5lcGxheWVyLXdhdGNoLW5leHQtaGlkZGVuKSAmIHtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxufVxuXG46Z2xvYmFsKC5zZXR0aW5ncy1tZW51LXZpc2libGUgLmVwbGF5ZXItd2F0Y2gtbmV4dCksXG46Z2xvYmFsKC5lcGxheWVyLXdhdGNoLW5leHQtaGlkZGVuIC5lcGxheWVyLXdhdGNoLW5leHQpIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cblxuLy8gdmFyaWFudCwgbGluZXMgY291bnRcbiR2YXJpYW50czogKFxuICAoJ2hpZGRlbi10ZXh0JywgMCksXG4gICgnb25lLWxpbmUnLCAxKSxcbiAgKCd0d28tbGluZXMnLCAyKSxcbiAgKCd0aHJlZS1saW5lcycsIDMpXG4pO1xuXG46Z2xvYmFsKC5lcGxheWVyLXdhdGNoLW5leHQtdGl0bGUpIHtcbiAgQGZvciAkdiBmcm9tIDQgdGhyb3VnaCAxIHtcbiAgICAkdmFyUGFyYW1zOiBudGgoJHZhcmlhbnRzLCAkdik7XG4gICAgJHZhcmlhbnQ6IG50aCgkdmFyUGFyYW1zLCAxKTtcbiAgICAkbGluZUNsYW1wOiBudGgoJHZhclBhcmFtcywgMik7XG4gICAgJGNsYXNzTmFtZTogJy5lcGxheWVyLWFjdGl2ZS13YXRjaC1uZXh0LSN7JHZhcmlhbnR9JztcblxuICAgIDpnbG9iYWwoI3skY2xhc3NOYW1lfSkgLmFjdGl2ZVNlZWtCYXIgJixcbiAgICA6Z2xvYmFsKC5lcGxheWVyLW1vYmlsZS5lcGxheWVyLWFjdGl2ZSAjeyRjbGFzc05hbWV9KSAmLFxuICAgIDpnbG9iYWwoLmVwbGF5ZXItbW9iaWxlICN7JGNsYXNzTmFtZX0pIC5za2luV2l0aFN1Z2dlc3Quc2tpblBhdXNlZCAmLFxuICAgIDpnbG9iYWwoXG4gICAgICAgIC5lcGxheWVyLW5vdC1tb2JpbGUuZXBsYXllci1hY3RpdmUgI3skY2xhc3NOYW1lfSAuZXBsYXllci1za2luOmhvdmVyXG4gICAgICApXG4gICAgICAmLFxuICAgIDpnbG9iYWwoLmVwbGF5ZXItbm9ybWFsLW1lbnUuc2V0dGluZ3MtbWVudS12aXNpYmxlI3skY2xhc3NOYW1lfSksXG4gICAgOmdsb2JhbCguZXBsYXllci1ub3QtbW9iaWxlICN7JGNsYXNzTmFtZX0pXG4gICAgICAuY29udHJvbHNDb250YWluZXI6aG92ZXJcbiAgICAgIH4gOmdsb2JhbCguZXBsYXllci13YXRjaC1uZXh0KVxuICAgICAgJiB7XG4gICAgICBAaWYgKCR2YXJpYW50ID09ICdoaWRkZW4tdGV4dCcpIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH0gQGVsc2Uge1xuICAgICAgICAtLXdhdGNoLW5leHQtbGluZS1jbGFtcDogI3skbGluZUNsYW1wfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyogU1BJTk5FUiAqL1xuJXNwaW5uZXItYm9yZGVyIHtcbiAgZmlsbDogbm9uZTtcbiAgc3Ryb2tlLXdpZHRoOiAxMXB4O1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGFyZ2Utc2NyZWVuKSAmIHtcbiAgICBzdHJva2Utd2lkdGg6IDEwcHg7XG4gIH1cbn1cblxuLnNwaW5uZXIge1xuICBmbGV4OiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiA2MHB4O1xuICBoZWlnaHQ6IDYwcHg7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXItbGFyZ2Utc2NyZWVuKSAmIHtcbiAgICB3aWR0aDogMTEwcHg7XG4gICAgaGVpZ2h0OiAxMTBweDtcbiAgfVxufVxuXG4uc3Bpbm5lckljb24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5zcGlubmVyQ2lyY2xlIHtcbiAgQGV4dGVuZCAlc3Bpbm5lci1ib3JkZXI7XG5cbiAgc3Ryb2tlOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7XG59XG5cbi5zcGlubmVyUHJvZ3Jlc3Mge1xuICBAZXh0ZW5kICVzcGlubmVyLWJvcmRlcjtcblxuICBzdHJva2UtbGluZWNhcDogcm91bmQ7XG4gIHRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7XG4gIHN0cm9rZS1kYXNoYXJyYXk6IDM2MDtcbiAgc3Ryb2tlOiAjZmZmO1xufVxuXG4vKiBQTEFZIE5FWFQgKi9cbi5wbGF5TmV4dFByb2dyZXNzIHtcbiAgc3Ryb2tlLWRhc2hvZmZzZXQ6IDM2MDtcbiAgdHJhbnNmb3JtOiByb3RhdGUoLTkwZGVnKTtcbiAgYW5pbWF0aW9uOiBlcGxheWVyLXBsYXktbmV4dC1wcm9ncmVzcyA4cyBsaW5lYXIgaW5maW5pdGU7XG59XG5cbkBrZXlmcmFtZXMgZXBsYXllci1wbGF5LW5leHQtcHJvZ3Jlc3Mge1xuICAwJSB7XG4gICAgc3Ryb2tlLWRhc2hvZmZzZXQ6IDM2MDtcbiAgfVxuXG4gIDEwMCUge1xuICAgIHN0cm9rZS1kYXNob2Zmc2V0OiAwO1xuICB9XG59XG5cbi8qIExPQURJTkcgU1BJTk5FUiAqL1xuLmxvYWRpbmcge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcblxuICA6Z2xvYmFsKC5lcGxheWVyLmxvYWRpbmcpICYge1xuICAgIGJhY2tncm91bmQ6ICRzaGFkb3ctYmctY29sb3I7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAzMDBtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbjtcbiAgfVxuXG4gIC5za2luRW5kZWQgJiB7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICB9XG59XG5cbi5sb2FkaW5nU3Bpbm5lciB7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgbWFyZ2luOiBhdXRvO1xuICAvKiBzdHlsZWxpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbnVtYmVyLW1heC1wcmVjaXNpb24gKi9cbiAgYW5pbWF0aW9uOiBlcGxheWVyLWxvYWRpbmcgMTU2OC4yMzUyOTQxMTc2bXMgbGluZWFyIGluZmluaXRlO1xuXG4gIDpnbG9iYWwoLmVwbGF5ZXIubG9hZGluZykgJiB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gIH1cbn1cblxuLmxvYWRpbmdTcGlubmVySWNvbiB7XG4gIGFuaW1hdGlvbjogZXBsYXllci1sb2FkaW5nLWVhc2UgNTMzMm1zICR0cmFuc2l0aW9uLWZ1bmN0aW9uIGluZmluaXRlIGJvdGg7XG59XG5cbi5sb2FkaW5nU3Bpbm5lclByb2dyZXNzIHtcbiAgdHJhbnNmb3JtOiByb3RhdGUoLTIxOWRlZyk7XG4gIHN0cm9rZS1kYXNob2Zmc2V0OiAxMzU7XG4gIGFuaW1hdGlvbjogZXBsYXllci1sb2FkaW5nLXByb2dyZXNzIDEzMzNtcyAkdHJhbnNpdGlvbi1mdW5jdGlvbiBpbmZpbml0ZSBib3RoO1xufVxuXG5Aa2V5ZnJhbWVzIGVwbGF5ZXItbG9hZGluZyB7XG4gIDEwMCUge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XG4gIH1cbn1cblxuQGtleWZyYW1lcyBlcGxheWVyLWxvYWRpbmctZWFzZSB7XG4gIDEyLjUlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgxMzVkZWcpO1xuICB9XG5cbiAgMjUlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgyNzBkZWcpO1xuICB9XG5cbiAgMzcuNSUge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDQwNWRlZyk7XG4gIH1cblxuICA1MCUge1xuICAgIHRyYW5zZm9ybTogcm90YXRlKDU0MGRlZyk7XG4gIH1cblxuICA2Mi41JSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoNjc1ZGVnKTtcbiAgfVxuXG4gIDc1JSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoODEwZGVnKTtcbiAgfVxuXG4gIDg3LjUlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSg5NDVkZWcpO1xuICB9XG5cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMTA4MGRlZyk7XG4gIH1cbn1cblxuQGtleWZyYW1lcyBlcGxheWVyLWxvYWRpbmctcHJvZ3Jlc3Mge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoLTkxZGVnKTtcbiAgICBzdHJva2UtZGFzaG9mZnNldDogMzU4O1xuICB9XG5cbiAgNTAlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtMjI1ZGVnKTtcbiAgICBzdHJva2UtZGFzaG9mZnNldDogMTI1O1xuICB9XG5cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoLTkxZGVnKTtcbiAgICBzdHJva2UtZGFzaG9mZnNldDogMzU4O1xuICB9XG59XG5cbi8vTElWRSBTRUNUSU9OXG46Z2xvYmFsKC5lcGxheWVyLWxpdmUpIHtcbiAgW2RhdGEtc2Vla10sXG4gIC50aW1laW5mbyxcbiAgLnByb2dyZXNzQmFyIHtcbiAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuLy8gU1VCVElUTEVTXG46Z2xvYmFsKFtkYXRhLXN1YnRpdGxlc10pIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cbiAgJltkYXRhLXN1YnRpdGxlc10ge1xuICAgIHotaW5kZXg6IDM7XG4gIH1cbn1cblxuOmdsb2JhbCguZXBsYXllci1zdWJ0aXRsZXMpIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1heC13aWR0aDogOTAlO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogY2FsYyh2YXIoLS1wbGF5ZXItaGVpZ2h0KSAqIDAuMDUpO1xuICBwYWRkaW5nOiA1cHggMTBweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOiBibHVyKDZweCk7XG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cig2cHgpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMxLCAzNiwgNDksIDAuOCk7XG5cbiAgJiBwIHtcbiAgICBtYXJnaW46IDA7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjE1O1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgY29sb3I6ICNmZmY7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWxhcmdlLXNjcmVlbikgJiB7XG4gICAgcGFkZGluZzogbWF4KHZhcigtLXBsYXllci1oZWlnaHQpICogMC4wMTUsIDVweClcbiAgICAgIG1heCh2YXIoLS1wbGF5ZXItaGVpZ2h0KSAqIDAuMDMsIDEwcHgpO1xuICAgIGJvcmRlci1yYWRpdXM6IG1heCh2YXIoLS1wbGF5ZXItaGVpZ2h0KSAqIDAuMDIsIDVweCk7XG4gIH1cblxuICA6Z2xvYmFsKC5lcGxheWVyLWxhcmdlLXNjcmVlbikgJiBwIHtcbiAgICBsaW5lLWhlaWdodDogMS4zMztcbiAgICBmb250LXNpemU6IG1heCh2YXIoLS1wbGF5ZXItaGVpZ2h0KSAqIDAuMDQsIDE1cHgpO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */</style><style type="text/css" data-scope="mediaControl">
          .eagleplayer {
            --skin-main-color: rgba(255, 255, 255, 1.00);
            --skin-text-color: rgba(255, 255, 255, 1.00);
            --skin-hover-color: rgba(175, 33, 43, 1.00);
            --skin-bg-color: rgba(0, 0, 0, 0.70);
          }
          .eplayer-main-color {color:rgba(255, 255, 255, 1.00)}
          .eplayer-main-color-background {background:rgba(255, 255, 255, 1.00)}
          .eplayer-text-color {color:rgba(255, 255, 255, 1.00)}
          .eplayer-text-color-background {background:rgba(255, 255, 255, 1.00)}
          .eplayer-hover-color:hover {color:rgba(175, 33, 43, 1.00)}
          .eplayer-active-color {color:rgba(175, 33, 43, 1.00)}
          .eplayer-active-bg-color {background:rgba(175, 33, 43, 1.00)}
          .eplayer-skin-button {color:rgba(255, 255, 255, 1.00)}
          .eplayer-skin-button-active {color:rgba(175, 33, 43, 1.00)}
          .eplayer-skin-button:hover {color:rgba(175, 33, 43, 1.00)}
          .eagleplayer .active {color:rgba(175, 33, 43, 1.00)}
          .eplayer-skin-pane {background:rgba(0, 0, 0, 0.70)}
          .eplayer-skin-volume-handler {background:rgba(255, 255, 255, 1.00)}
        </style></head><body><script defer="defer">!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d2d00588-e601-4e8d-96fc-a50bc56f52e7",e._sentryDebugIdIdentifier="sentry-dbid-d2d00588-e601-4e8d-96fc-a50bc56f52e7")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"f0ab10434d7b135457739dd053c7cfc98089cbe3"},(()=>{var e,t,i={105:(e,t)=>{"use strict"},121:e=>{var t,i,s,n,r,o;e.exports=(i=[],n=(s=document).documentElement.doScroll,r="DOMContentLoaded",(o=(n?/^loaded|^c/:/^loaded|^i|^c/).test(s.readyState))||s.addEventListener(r,t=function(){for(s.removeEventListener(r,t),o=1;t=i.shift();)t()}),function(e){o?setTimeout(e,0):i.push(e)})},181:(e,t,i)=>{var s=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,d="object"==typeof self&&self&&self.Object===Object&&self,c=l||d||Function("return this")(),h=Object.prototype.toString,u=Math.max,f=Math.min,p=function(){return c.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var i=r.test(e);return i||o.test(e)?a(e.slice(2),i?2:8):n.test(e)?NaN:+e}e.exports=function(e,t,i){var s,n,r,o,a,l,d=0,c=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function A(t){var i=s,r=n;return s=n=void 0,d=t,o=e.apply(r,i)}function E(e){var i=e-l;return void 0===l||i>=t||i<0||h&&e-d>=r}function y(){var e=p();if(E(e))return T(e);a=setTimeout(y,function(e){var i=t-(e-l);return h?f(i,r-(e-d)):i}(e))}function T(e){return a=void 0,v&&s?A(e):(s=n=void 0,o)}function b(){var e=p(),i=E(e);if(s=arguments,n=this,l=e,i){if(void 0===a)return function(e){return d=e,a=setTimeout(y,t),c?A(e):o}(l);if(h)return a=setTimeout(y,t),A(l)}return void 0===a&&(a=setTimeout(y,t)),o}return t=m(t)||0,g(i)&&(c=!!i.leading,r=(h="maxWait"in i)?u(m(i.maxWait)||0,t):r,v="trailing"in i?!!i.trailing:v),b.cancel=function(){void 0!==a&&clearTimeout(a),d=0,s=l=n=a=void 0},b.flush=function(){return void 0===a?o:T(p())},b}},234:function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Histogram=t.defaultBuckets=void 0;var o=i(3271),a=i(2717),l=i(2737);t.defaultBuckets=Object.freeze([.005,.01,.025,.05,.075,.1,.25,.5,.75,1,2.5,5,7.5,10]);var d=function(e){function i(i){var s=e.call(this,i)||this;if(s.type="histogram",s.buckets=t.defaultBuckets,s.bucketValueMap={},s.timers={},i.labels)for(var n=0,r=i.labels;n<r.length;n++)if("le"===r[n])throw new Error("Invalid label name: `le`");return i.buckets&&(s.buckets=i.buckets),s}return n(i,e),i.prototype.createInitialBucketMap=function(){for(var e={},t=0,i=this.buckets;t<i.length;t++){var s=i[t];e["".concat(s)]=0}return e},i.prototype.createInitialBucketValue=function(){return{labelMap:{},bucketMap:this.createInitialBucketMap(),sum:0,count:0}},i.prototype.getBucketByValue=function(e){for(var t=0,i=this.buckets;t<i.length;t++){var s=i[t];if(e<=s)return s}return-1},i.prototype.validateLabels=function(e){for(var t=0,i=e;t<i.length;t++){var s=i[t];if(!this.labels.includes(s))throw new Error("Invalid label: ".concat(s))}},i.prototype.reset=function(){this.bucketValueMap={}},i.prototype.observe=function(e,t){if(t&&this.validateLabels(Object.keys(t)),!Number.isFinite(e))throw new Error("Invalid Histogram value: ".concat(e));var i=t?(0,l.hashLabelMap)(t):"",s=this.bucketValueMap[i];s||(s=this.createInitialBucketValue(),this.bucketValueMap[i]=s),s.sum=s.sum+e,s.count=s.count+1,t&&(s.labelMap=t);var n=this.getBucketByValue(e);Number.isFinite(s.bucketMap[n])&&(s.bucketMap[n]+=1)},i.prototype.startTimer=function(e){var t=Date.now(),i=e?(0,l.hashLabelMap)(e):"",s=new a.Timer({histogram:this,start:t,labelMap:e});return this.timers[i]=s,s},i.prototype.collect=function(){for(var e=[],t=0,i=Object.values(this.bucketValueMap);t<i.length;t++){for(var s=i[t],n=0,o=0,a=this.buckets;o<a.length;o++){var l=a[o];n+=s.bucketMap[l],e.push({labels:r(r({},s.labelMap),{le:"".concat(l)}),value:n,name:"".concat(this.name,"_bucket")})}e.push.apply(e,[{labels:r(r({},s.labelMap),{le:"+Inf"}),value:s.count,name:"".concat(this.name,"_bucket")},{labels:s.labelMap,value:s.sum,name:"".concat(this.name,"_sum")},{labels:s.labelMap,value:s.count,name:"".concat(this.name,"_count")}])}return e},i}(o.Collector);t.Histogram=d},242:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1354),n=i.n(s),r=i(6314),o=i.n(r)()(n());o.push([e.id,'@font-face{font-family:"Manrope";font-style:normal;font-weight:600;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/semibold.woff2") format("woff2")}@font-face{font-family:"Manrope";font-style:normal;font-weight:700;src:local("Manrope"),url("https://static.rambler.ru/fonts/Manrope/bold.woff2") format("truetype")}.SHQA1rJaHER9ejQUvz8b{box-sizing:border-box !important;position:absolute;display:flex;align-items:center;justify-content:center;flex-flow:column;height:100%;width:100%;padding:15px 20px;font-family:Manrope,sans-serif;font-weight:600;color:#fff;background:#343b4c;transition:padding-bottom 200ms cubic-bezier(0.4, 0, 0.3, 1)}.ckPEEgH86119g9tUzA2S{display:inline-flex;align-items:center;flex:none;margin-top:20px;padding:0 20px;font-size:15px;line-height:40px;font-weight:700;color:#343b4c;background:#fff;border-radius:20px;cursor:pointer}.ckPEEgH86119g9tUzA2S svg{flex:none;width:20px;height:20px;margin-right:5px;fill:currentColor}.Kf78AIEdSIlSfsGsWzqc{flex:none;text-align:center;font-size:15px;line-height:20px}.eplayer-not-found .Kf78AIEdSIlSfsGsWzqc{width:275px}',"",{version:3,sources:["webpack://./src/common/playbacks/no-op/styles.scss"],names:[],mappings:"AAEA,WACE,qBAAA,CACA,iBAAA,CACA,eAAA,CACA,kGAAA,CAKF,WACE,qBAAA,CACA,iBAAA,CACA,eAAA,CACA,iGAAA,CAIF,sBACE,gCAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,gBAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CACA,8BAAA,CACA,eAAA,CACA,UAAA,CACA,kBAAA,CACA,4DAAA,CAGF,sBACE,mBAAA,CACA,kBAAA,CACA,SAAA,CACA,eAAA,CACA,cAAA,CACA,cAAA,CACA,gBAAA,CACA,eAAA,CACA,aAAA,CACA,eAAA,CACA,kBAAA,CACA,cAAA,CAEA,0BACE,SAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CAIJ,sBACE,SAAA,CACA,iBAAA,CACA,cAAA,CACA,gBAAA,CAEA,yCACE,WAAA",sourcesContent:["$transition-function: cubic-bezier(0.4, 0, 0.3, 1);\n\n@font-face {\n  font-family: 'Manrope';\n  font-style: normal;\n  font-weight: 600;\n  src: local('Manrope'),\n    url('https://static.rambler.ru/fonts/Manrope/semibold.woff2')\n      format('woff2');\n}\n\n@font-face {\n  font-family: 'Manrope';\n  font-style: normal;\n  font-weight: 700;\n  src: local('Manrope'),\n    url('https://static.rambler.ru/fonts/Manrope/bold.woff2') format('truetype');\n}\n\n.noop {\n  box-sizing: border-box !important;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-flow: column;\n  height: 100%;\n  width: 100%;\n  padding: 15px 20px;\n  font-family: Manrope, sans-serif;\n  font-weight: 600;\n  color: white;\n  background: #343b4c;\n  transition: padding-bottom 200ms $transition-function;\n}\n\n.button {\n  display: inline-flex;\n  align-items: center;\n  flex: none;\n  margin-top: 20px;\n  padding: 0 20px;\n  font-size: 15px;\n  line-height: 40px;\n  font-weight: 700;\n  color: #343b4c;\n  background: #fff;\n  border-radius: 20px;\n  cursor: pointer;\n\n  svg {\n    flex: none;\n    width: 20px;\n    height: 20px;\n    margin-right: 5px;\n    fill: currentColor;\n  }\n}\n\n.message {\n  flex: none;\n  text-align: center;\n  font-size: 15px;\n  line-height: 20px;\n\n  :global(.eplayer-not-found) & {\n    width: 275px;\n  }\n}\n"],sourceRoot:""}]),o.locals={noop:"SHQA1rJaHER9ejQUvz8b",button:"ckPEEgH86119g9tUzA2S",message:"Kf78AIEdSIlSfsGsWzqc"};const a=o},317:e=>{e.exports=""},377:(e,t,i)=>{"use strict";i.d(t,{_o:()=>a,o:()=>n,yz:()=>r,zD:()=>o});let s=!1;const n=e=>{s=e},r=()=>!1,o=()=>Boolean(~"https://vp.rambler.ru".indexOf("vp-stage"))||Boolean(~"https://vp.rambler.ru".indexOf("vp-dev")),a=()=>s||r()||o()},396:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s,n=(s=i(7007))&&s.__esModule?s:{default:s};function r(){n.default.call(this),this.setMaxListeners(1/0)}Object.assign(r.prototype,n.default.prototype,{externalizeEmitter:function(){var e=["on","once","removeListener"],t=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).withEmit&&e.push("emit"),e.reduce((function(e,i){return e[i]=function(){t[i].apply(t,arguments)},e}),{})}})},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},611:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1354),n=i.n(s),r=i(6314),o=i.n(r)()(n());o.push([e.id,".eagleplayer-advertisement,.eagleplayer-advertisement-container,.eagleplayer-advertisement-click-area{position:absolute;top:0;left:0;width:100%;height:100%}.eagleplayer-advertisement-container{z-index:3}.eagleplayer-advertisement-click-area[href]{z-index:3;cursor:pointer}.eagleplayer-advertisement video,.eagleplayer-advertisement-banner video{background-color:rgba(0,0,0,0) !important}","",{version:3,sources:["webpack://./src/common/plugins/advertisement/styles.scss"],names:[],mappings:"AAAA,sGAGE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CAGF,qCACE,SAAA,CAGF,4CACE,SAAA,CACA,cAAA,CAKA,yEACE,yCAAA",sourcesContent:[".eagleplayer-advertisement,\n.eagleplayer-advertisement-container,\n.eagleplayer-advertisement-click-area {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.eagleplayer-advertisement-container {\n  z-index: 3;\n}\n\n.eagleplayer-advertisement-click-area[href] {\n  z-index: 3;\n  cursor: pointer;\n}\n\n.eagleplayer-advertisement,\n.eagleplayer-advertisement-banner {\n  video {\n    background-color: transparent !important;\n  }\n}\n"],sourceRoot:""}]),o.locals={};const a=o},617:(e,t)=>{"use strict";var i=[new RegExp("^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)\n?</div>"),new RegExp("^(.+)\n")];t.failOnParseError=function(e){return function(e){var t;if(null===e)throw new Error("Parse error");var s=function(e){return"parsererror"===e.documentElement.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===e.documentElement.namespaceURI?e.documentElement:("xml"===e.documentElement.tagName||"html"===e.documentElement.tagName)&&e.documentElement.childNodes&&e.documentElement.childNodes.length>0&&"parsererror"===e.documentElement.childNodes[0].nodeName?e.documentElement.childNodes[0]:"html"===e.documentElement.tagName&&e.documentElement.childNodes&&e.documentElement.childNodes.length>0&&"body"===e.documentElement.childNodes[0].nodeName&&e.documentElement.childNodes[0].childNodes&&e.documentElement.childNodes[0].childNodes.length&&"parsererror"===e.documentElement.childNodes[0].childNodes[0].nodeName?e.documentElement.childNodes[0].childNodes[0]:void 0}(e);if(void 0!==s)throw t=function(e){var t,s,n,r,o=(n=e,r=new XMLSerializer,Array.prototype.map.call(n.childNodes,(function(e){return r.serializeToString(e)})).join(""));for(t=0;t<i.length;t++)if(s=i[t].exec(o))return s[1]}(s)||"Parse error",new Error(t)}(e),e}},711:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalViewportEvents=t.mutationObserver=t.mutationEvents=void 0,t.setMutationParams=function(e){d=e,c&&p()},t.initObserve=p,t.createViewportManager=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s="function"==typeof i?i(t):(0,n.default)(t,i),r=void 0,o=void 0;return e&&(r=y(e,!0))&&r!==document.body&&r!==document.documentElement&&(r.addEventListener("scroll",s,!1),o=!0),g.on("change",s),{destroy:function(){g.removeListener("change",s),o&&r.removeEventListener("scroll",s,!1)}}},t.onRemoveFromDOM=function(e,t){var i=v(e),s=(0,n.default)((function(){var n=v(e);!n&&i&&(u.removeListener("mutation",s),t()),i=n}));u.on("mutation",s)},t.removeFromDOM=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.isElementInDOM=v,t.inViewport=function(e,t){return e.getBoundingClientRect().top-t<window.innerHeight},t.setClass=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];e&&(e.className=i.filter(Boolean).join(" "))},t.addClass=A,t.removeClass=E,t.toggleClass=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var n,r=(n=i.reverse(),Array.isArray(n)?n:Array.from(n)),o=r[0],a=r.slice(1);o?A.apply(void 0,[e].concat(l(a))):E.apply(void 0,[e].concat(l(a)))},t.findById=function(e,t){return t?t.querySelector('[id="'+e+'"]'):document.getElementById(e)},t.scrollByElementTo=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=y(e);if(s&&s!==e){var n=e.getBoundingClientRect().top-s.getBoundingClientRect().top+t;return s!==document.body&&s!==document.documentElement&&(n+=(0,o.getScroll)(s)),(0,o.scrollToTop)(s,n,i)}};var s=a(i(121)),n=a(i(181)),r=a(i(7007)),o=i(7166);function a(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var d={childList:!0,subtree:!0},c=!1,h=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||function(e){var t=void 0;return{observe:function(){t=setInterval(e,2e3)},disconnect:function(){clearInterval(t)}}},u=t.mutationEvents=new r.default,f=t.mutationObserver=new h((function(e){u.emit("mutation",e)}));function p(){c&&f.disconnect();var e=document.body||document.documentElement;f.observe(e,d),c=!0}var g=t.globalViewportEvents=new r.default,m=function(e){g.emit("change",e)};function v(e){return document.body.contains(e)}function A(e){for(var t,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];e&&(t=e.classList).add.apply(t,l(s.filter(Boolean)))}function E(e){for(var t,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];e&&(t=e.classList).remove.apply(t,l(s.filter(Boolean)))}function y(e,t){if(!(e=e.parentElement)||e===document.documentElement)return document.documentElement;if(t||e.scrollHeight>e.clientHeight||e===document.body||e===document.documentElement){var i=getComputedStyle(e).overflowY;if("auto"===i||"scroll"===i)return e}return y(e,t)}window.addEventListener("scroll",m),window.addEventListener("resize",m),(0,s.default)(p)},997:(e,t,i)=>{"use strict";i.d(t,{D:()=>n,R:()=>s});const s=(e,t,i)=>{const{length:s}=e.toString();return`${s<i?[...new Array(i-s)].map((()=>t)).join(""):""}${e}`},n=()=>`${(Number(new Date)/1e3).toString()}-${Math.round(Math.random()*Number.MAX_SAFE_INTEGER).toString()}`},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1162:(e,t,i)=>{"use strict";i.d(t,{Pn:()=>n,n$:()=>o,n4:()=>r,nT:()=>s});const s=16/9,n=400,r="unknown",o=-1},1354:e=>{"use strict";e.exports=function(e){var t=e[1],i=e[3];if(!i)return t;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),r="/*# ".concat(n," */");return[t].concat([r]).join("\n")}return[t].join("\n")}},1582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(t instanceof Error){var i={};return Object.getOwnPropertyNames(t).forEach((function(e){i[e]=t[e]})),i}return t};t.parse=JSON.parse.bind(JSON),t.stringify=function(e){return JSON.stringify(e,i)}},1669:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1354),n=i.n(s),r=i(6314),o=i.n(r)()(n());o.push([e.id,".eagleplayer-container{width:100%;height:100%;position:relative;text-align:left}.eagleplayer-container *{box-sizing:initial}.eagleplayer-container.fade{animation:fadein 2s}@keyframes fadein{from{opacity:0}to{opacity:1}}.eplayer-poster{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.eplayer-skin{z-index:2}.eagleplayer-advertisement{z-index:3}.eagleplayer-info{color:#fff;z-index:3;position:absolute;width:100%;height:100%;left:0;display:table}video::-webkit-media-controls-enclosure{display:none !important}.container canvas{position:relative}.eagleplayer-fullscreen{width:100% !important;height:100% !important}.eplayer-ios-noskin *::-webkit-media-controls-panel{display:none !important;-webkit-appearance:none}.eplayer-ios-noskin *::-webkit-media-controls-start-playback-button{display:none !important;-webkit-appearance:none}","",{version:3,sources:["webpack://./src/common/components/player/styles.scss"],names:[],mappings:"AAAA,uBACE,UAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CAEA,yBACE,kBAAA,CAGF,4BACE,mBAAA,CAEA,kBACE,KACE,SAAA,CAGF,GACE,SAAA,CAAA,CAUR,gBACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CAGF,cACE,SAAA,CAGF,2BACE,SAAA,CAGF,kBACE,UAAA,CACA,SAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,MAAA,CACA,aAAA,CAGF,wCACE,uBAAA,CAIA,kBACE,iBAAA,CAIJ,wBACE,qBAAA,CACA,sBAAA,CAIA,oDACE,uBAAA,CACA,uBAAA,CAGF,oEACE,uBAAA,CACA,uBAAA",sourcesContent:[".eagleplayer-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  text-align: left;\n\n  * {\n    box-sizing: initial;\n  }\n\n  &.fade {\n    animation: fadein 2s;\n\n    @keyframes fadein {\n      from {\n        opacity: 0;\n      }\n\n      to {\n        opacity: 1;\n      }\n    }\n  }\n}\n\n.eagleplayer-loader {\n  //background: black url(load.gif) no-repeat center center;\n}\n\n.eplayer-poster {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n.eplayer-skin {\n  z-index: 2;\n}\n\n.eagleplayer-advertisement {\n  z-index: 3;\n}\n\n.eagleplayer-info {\n  color: white;\n  z-index: 3;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  display: table;\n}\n\nvideo::-webkit-media-controls-enclosure {\n  display: none !important;\n}\n\n.container {\n  canvas {\n    position: relative;\n  }\n}\n\n.eagleplayer-fullscreen {\n  width: 100% !important;\n  height: 100% !important;\n}\n\n.eplayer-ios-noskin {\n  *::-webkit-media-controls-panel {\n    display: none !important;\n    -webkit-appearance: none;\n  }\n\n  *::-webkit-media-controls-start-playback-button {\n    display: none !important;\n    -webkit-appearance: none;\n  }\n}\n"],sourceRoot:""}]),o.locals={};const a=o},1687:(e,t,i)=>{"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();t._s=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return new(Function.prototype.bind.apply(u,[null].concat(t)))};var r=i(8132),o=d(i(5858)),a=i(711),l=d(i(396));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(0,a.setMutationParams)({attributes:!0,childList:!0,subtree:!0,characterData:!0});var h=function(){function e(t){c(this,e),this.events=new l.default,this.transport=t,this.resize=(0,o.default)(this.resize.bind(this),60,{leading:!0,trailing:!0})}return n(e,[{key:"getSize",value:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}}},{key:"resize",value:function(){var e=this.getSize();(!this.currentSize||e.width!==this.currentSize.width||e.height!==this.currentSize.height)&&(this.transport.provider.setSize(e),this.currentSize=e,this.events.emit("resize",this.currentSize))}},{key:"watchSize",value:function(){a.mutationEvents.on("mutation",this.resize)}}]),e}(),u=function(){function e(t){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in c(this,e),this.id=this.parseId(),this.config=t,this.properties={},this.provider=null,s)if(s.hasOwnProperty(n)){var o=s[n];this.properties[n]="function"==typeof o?o.bind(this):o,void 0===this[n]&&(this[n]=this.properties[n])}this.transport=new r.Consumer(this.id,"*",this.externalizeAsConsumer()),this.resizer=new h(this.transport),this.consumer=this.transport.consumer,this.transport.once("ready",(function(){i.provider=i.transport.provider,i.parentUrl=i.provider.url;var e=new URL(i.parentUrl),t=e.protocol,s=e.host;i.parentOrigin=t+"//"+s}))}return n(e,[{key:"parseId",value:function(){return new URLSearchParams(window.location.hash.slice(1)).get("widgetId")}},{key:"externalizeAsConsumer",value:function(){var e=this;return s({},this.config.externalizeAsConsumer?this.config.externalizeAsConsumer.call(this):this.properties,{initialize:function(){return e.config.initialize.call(e,e.provider)},externalizedProps:this.externalize(),getSize:function(){return e.resizer.getSize()},watchSize:function(){return e.resizer.watchSize()},resize:function(t){e.resizer.resize(t)}})}},{key:"externalize",value:function(){return this.config.externalize?this.config.externalize.call(this):this.properties}}]),e}()},1724:(e,t,i)=>{"use strict";i.d(t,{E9:()=>a,Kh:()=>o,V1:()=>r});var s=i(997);const n=3600,r=(e,t={})=>{const i=e%1e3,r=(e-i)/1e3,o=(0,s.R)(Math.floor(r/n),"0",2),a=(0,s.R)(Math.floor(r%n/60),"0",2),l=(0,s.R)(Math.floor(r%n%60),"0",2);let d="";return(t.hours||"00"!==o)&&(d+=`${o}:`),d+=`${a}:${l}`,t.ms&&(d+=`.${(0,s.R)(i,"0",3)}`),d},o=e=>{const[t="0",i="0",s="0"]=e.split(":").reverse(),r=parseFloat(s)*n+60*parseFloat(i)+parseFloat(t);return isNaN(r)?-1:r},a=e=>{if(null==e)return-1;if("number"==typeof e)return parseInt(e,10);const[t,i,s=""]=e.split(":");if(!s)return-1;const[r,o="0"]=s.split(/[.,]/),a=parseFloat(t)*n+60*parseFloat(i)+parseFloat(r)+parseFloat(o)/1e3;return isNaN(a)?-1:a}},1978:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Docking:()=>d,Plugin:()=>d});var s=i(9371),n=i(181),r=i.n(n),o=i(6121),a=i(9200),l=i(8644);class d extends s.rV{constructor(){super(...arguments),this.playbackStarted=!1,this.dockingRequested=!1,this.isFullscreen=!1,this.onFullscreenChange=r()((e=>{e||(this.isFullscreen=!1)}),d.FULLSCREEN_THROTTLE_TIMEOUT),this.onEnforceStart=e=>{const{playerId:t}=this.core.options;e!==t&&this.undock()},this.onShown=async()=>{if(this.provider){const e=await this.provider.getEmbedVisibleArea();this.onPageScroll(e)}},this.onPageScroll=async e=>{if(!this.provider||!d.parentOffsetHeight)return;const{dockingDirection:t,parentElement:i}=this.options,{minPlayingVisibleHeight:s=.5}=this.core.options,n=await this.provider.getClientHeight(),r=e.height/Math.min(d.parentOffsetHeight,n);if(e.top>=0&&r+e.top/d.parentOffsetHeight>=s&&(d.inViewportOrBelow=!0),!d.inViewportOrBelow)return;const o=e.top<=0&&"down"===t;o&&!this.isDocked()||this.isFullscreen||(r<s&&d.parentOffsetHeight===(null==i?void 0:i.offsetHeight)&&(this.isStartWithAutoPlay()||this.isPlayingOrPaused())&&!this.isDocked()?this.dock():(r>=s||o)&&this.isDocked()&&this.undock())},this.undock=async()=>{var e,t,i;if(!this.isDocked()||this.dockingRequested||!this.provider)return;const{playerId:s,dockingParentId:n,[a.gM]:r,[a.yN]:l,enforceStartWhenPlayingInParent:c}=this.core.options;this.dockingRequested=!0,this.cancelWaitDocking(),await this.waitDockingChanged((()=>{var e;return null===(e=this.provider)||void 0===e?void 0:e.undock()})),!(null===(e=this.multiPlayer)||void 0===e?void 0:e.isNextRecordRequested())&&(!this.isPlaying()||!r&&!l)&&!c&&(null===(i=null===(t=this.provider)||void 0===t?void 0:t.mediator)||void 0===i||i.stopPlaying(s,n)),d.docked=!1,this.dockingRequested=!1,this.waitDocking=window.setTimeout((()=>{this.cancelWaitDocking(),this.trigger(o.s.DOCKING_CHANGED,!1)}),d.WAIT_DOCKING_TIMEOUT)},this.disable=async(e=!1)=>{var t,i;d.disabled||(e&&(d.disabled=!0,null===(i=null===(t=this.provider)||void 0===t?void 0:t.mediator)||void 0===i||i.disableDocking()),super.disable(),await this.undock())},this.enable=()=>{d.disabled||super.enable()}}get name(){return"docking"}get supportedVersion(){return{min:"0.5.0"}}get provider(){return this.core.options.provider}get advertisement(){return this.core.getPlugin("advertisement")}get multiPlayer(){return this.core.getPlugin("multiplayer")}get canPlay(){var e;return(null===(e=this.core.activePlayback)||void 0===e?void 0:e.getPlaybackType())!==s.YZ.NO_OP}isDocked(){return d.docked}isDockingRequested(){return this.dockingRequested}isDockingAwaited(){return Boolean(this.waitDocking)}getEmbedSize(){return this.embedSize}configure(){var e,t;this.options.docking?this.enable():(this.disable(),this.stopListening(this.core,o.s.CORE_OPTIONS_CHANGE,this.configure),null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t||t.once("disableDocking",this.disable),this.listenTo(this.core,o.s.CORE_OPTIONS_CHANGE,this.configure))}bindEvents(){var e,t;if(d.disabled)return void this.disable();if(null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t||t.once("disableDocking",this.disable),!this.options.docking)return void this.configure();super.stopListening(this.core,o.s.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,o.s.CORE_OPTIONS_CHANGE,this.configure),this.core.isReady?this.onReady():this.listenToOnce(this.core,o.s.CORE_READY,this.onReady),this.listenTo(this.core,o.s.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),this.listenTo(this.core,o.s.CORE_RESIZE,this.onResize),this.listenTo(this.core,o.s.CORE_FULLSCREEN,this.onFullscreenChange);const{activeContainer:i,activePlayback:s}=this.core;i&&this.listenTo(i,o.s.CONTAINER_ERROR,this.onError),s&&this.listenToOnce(s,o.s.PLAYBACK_PLAY_INTENT,this.onInitialPlay);const n=this.core.getPlugin("mediaControl");n&&this.listenTo(n,o.s.MEDIACONTROL_FULLSCREEN,this.onRequestFullscreen)}stopListening(e,t,i){var s,n,r,o;return i||(this.cancelWaitDocking(),this.unsubscribePageScroll(),null===(n=null===(s=this.provider)||void 0===s?void 0:s.mediator)||void 0===n||n.removeListener("disableDocking",this.disable),this.onEnforceStart&&(null===(o=null===(r=this.provider)||void 0===r?void 0:r.mediator)||void 0===o||o.removeListener("enforceStart",this.onEnforceStart))),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onResize(e){var t,i;this.isDocked()||this.dockingRequested||this.isDockingAwaited()||(this.embedSize=e,d.parentOffsetHeight=null!==(i=null===(t=this.options.parentElement)||void 0===t?void 0:t.offsetHeight)&&void 0!==i?i:0)}onRequestFullscreen(){this.isFullscreen=!0}onError(){this.isDocked()&&this.undock()}onInitialPlay(){this.playbackStarted=!0}async onReady(){var e,t,i,s;this.isFullscreen=this.core.isFullscreen(),this.canPlay&&this.provider&&(this.provider.once("widgetShown",this.onShown),null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t||t.on("enforceStart",this.onEnforceStart),this.unsubscribePageScroll=await this.provider.subscribePageScroll(this.onPageScroll)),this.isDocked()||this.dockingRequested||(d.parentOffsetHeight=null!==(s=null===(i=this.options.parentElement)||void 0===i?void 0:i.offsetHeight)&&void 0!==s?s:0),this.embedSize={width:this.core.el.offsetWidth,height:this.core.el.offsetHeight}}unsubscribePageScroll(){}isPlaying(){var e;return this.core.activeContainer.isPlaying()||!!(null===(e=this.advertisement)||void 0===e?void 0:e.isPlaying())}isPlayingOrPaused(){var e;return!!this.playbackStarted&&(this.isPlaying()||(null===(e=this.core.activePlayback)||void 0===e?void 0:e.el).paused)}isStartWithAutoPlay(){const{autoPlay:e,[a.gM]:t,[a.yN]:i}=this.options;return!this.playbackStarted&&!!(e||t||i)}async waitDockingChanged(e){var t;const{parentElement:i}=this.core.options,s=(null==i?void 0:i.offsetWidth)===(null===(t=this.embedSize)||void 0===t?void 0:t.width);await new Promise((t=>{s?setTimeout(t,60):this.listenToOnce(this.core,o.s.CORE_RESIZE,t),e()}))}cancelWaitDocking(){clearTimeout(this.waitDocking),delete this.waitDocking}async dock(){var e,t,i;if(d.disabled||this.isDocked()||this.dockingRequested||!this.provider)return;const{docking:n,dockingWidth:r,dockingOffset:a,dockingOffsetX:c=a,dockingOffsetY:h=a,dockingCloseDelay:u,dockingParentId:f,playerId:p,mediaControl:g}=this.options;if(this.dockingRequested=!0,this.cancelWaitDocking(),!1!==await(null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t?void 0:t.canPlay(p,f))){const e=(0,l.Rv)((0,l.dA)(null!==(i=null==g?void 0:g.foregroundColor)&&void 0!==i?i:0),1),t="universal"===(null==g?void 0:g.skinName)?{buttonSize:40,buttonGap:10,buttonHoverable:!s.Pw.isMobile,buttonStyle:{padding:"10px",fill:"#343b4c","box-shadow":"0 10px 10px -10px rgba(52, 59, 76, 0.4)",background:"#fff"}}:{buttonSize:36,buttonGap:10,buttonHoverable:!s.Pw.isMobile,buttonStyle:{padding:"8px",fill:"rgba(255, 255, 255, 1.00)"===e?"black":e,filter:"drop-shadow(-2px 2px 10px rgba(102, 116, 166, 0.2))",background:"#fff"}};await this.waitDockingChanged((()=>{var e;null===(e=this.provider)||void 0===e||e.dock(Object.assign({docking:n,dockingWidth:r,dockingOffsetX:c,dockingOffsetY:h,dockingCloseDelay:u,dockingParentId:f,onCloseClick:()=>this.disable(!0)},t))})),d.docked=!0,this.trigger(o.s.DOCKING_CHANGED,!0)}this.dockingRequested=!1}}d.WAIT_DOCKING_TIMEOUT=150,d.FULLSCREEN_THROTTLE_TIMEOUT=500,d.inViewportOrBelow=!1,d.docked=!1,d.disabled=!1,d.parentOffsetHeight=0},2039:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=o(i(8009)),r=o(i(7007));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,i,s,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n||(n=s,s=null);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s)),a=new r.default;return a.setMaxListeners(0),o.provider=o.facade=Object.assign(a,n),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"handleInitialize",value:function(e,t){var i=this,s=e.id,n=e.args;this.connectedWindow||(this.connectedWindow=t);var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],s=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(s=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);s=!0);}catch(e){n=!0,r=e}finally{try{!s&&a.return&&a.return()}finally{if(n)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(n,1)[0];this.consumer=r,this.sendMessage({type:"response",response:{result:[this.provider]},responseToId:s,waitResponse:!0}).then((function(){i.emit("ready",r)}))}}]),t}(n.default);t.default=a},2136:(e,t,i)=>{"use strict";i.d(t,{hD:()=>o});var s,n,r=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=function(e){function t(i){var s,n=e.call(this)||this;return n.name="ApiError",n.message=i.message.toString().toLowerCase(),n.code=null!==(s=i.code)&&void 0!==s?s:"unknown",n.details=i.details,Object.setPrototypeOf(n,t.prototype),n}return r(t,e),t}(Error);n=Error,r((function e(t){var i=n.call(this)||this;return i.name="SubmissionError",i.message="failed: ".concat(Object.keys(t)),i.errors=t,Object.setPrototypeOf(i,e.prototype),i}),n),function(e){r((function t(i){var s=e.call(this)||this;return s.no=i,s.code="error",Object.setPrototypeOf(s,t.prototype),s}),e)}(Error)},2452:(e,t,i)=>{"use strict";i.d(t,{J1:()=>r,JT:()=>a,al:()=>o,rT:()=>l});var s=function(){return s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)},n=function(e){var t={};return Object.keys(e).forEach((function(i){null!=e[i]&&(t[i]=e[i])})),t},r=function(e){var t,i=e.protocol,s=e.host,r=e.pathname,o=e.query;if(o&&"object"==typeof o){var a=n(o);t=new URLSearchParams(a).toString()}else t=o;return(i?"".concat(i,"//"):"")+(null!=s?s:"")+r+(t?"?".concat(t):"")},o=function(e){var t={};return new URL(e).searchParams.forEach((function(e,i){t[i]=e})),t},a=function(e,t,i){if(!(Object.keys(t).length||i&&Object.keys(i).length))return e;var r=new URL(e),a=r.protocol,l=r.host,d=r.pathname,c=o(e),h=n(s(s({},c),t)),u=new URLSearchParams(h).toString(),f=u?"?".concat(u):"",p=function(e){var t={},i=new URL(e).hash;return new URLSearchParams(i.substring(1)).forEach((function(e,i){t[i]=e})),t}(e),g=n(s(s({},p),i)),m=new URLSearchParams(g).toString(),v=m?"#".concat(m):"";return"".concat(a,"//").concat(l).concat(d).concat(f).concat(v)},l=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}},2522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,s,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n=n||"",Array.isArray(t)?function(t,i,s,n){var r="";t.forEach((function(t,o,a){r=s?s+"."+o:o.toString(),!1!==i.call(a,t,o,a,r,n)&&e(a[o],i,r,n+1)}))}(t,s,n,r):!t||"object"!==(void 0===t?"undefined":i(t))||t instanceof Error||function(t,i,s,n){for(var r in t){var o=s?s+"."+r:r;!1!==i.call(t,t[r],r,t,o,n)&&e(t[r],i,o,n+1)}}(t,s,n,r)}},2591:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EventsReport:()=>E,Plugin:()=>E});var s=i(9371),n=i(7083),r=i.n(n),o=i(6121),a=i(9200),l=i(9836),d=i(377),c=i(6682);const h=async(...e)=>{if((0,d._o)()&&l.t.debug("reportEvents",...e),(0,d.yz)())return;const t=encodeURIComponent(JSON.stringify(e));try{await(0,c.E)(`https://api.vp.rambler.ru/events/?data=${t}`,{keepalive:!0,method:"get",timeout:5e3,mode:"no-cors"})}catch(e){}};var u=i(8081),f=i(6413),p=i(997),g=i(7546),m=i(1162),v=i(5250);const A=Symbol("onVisibleAreaChanged");class E extends s.rV{constructor(){super(...arguments),this.percentViewSent=-1,this.adViewSent=-1,this.viewId=this.randomNumber,this.started=!1,this.ended=!1,this.socketErrorsCount=0,this.socketClosedWithError=!1,this.visibleHeight=-1,this.isAiAdInitialRenderSent=!1,this.isLiveWatched=!1,this.currentLiveDuration=0,this.currentGlobalLiveTime=0,this.onUnload=()=>{this.clearLivePingTimeout(),this.unsubscribeLivePing(),this.getCurrentLiveDuration()>0&&this.sendLiveEvent("watch")},this.onBufferfull=()=>{this.bufferingStartTime&&(Date.now()-this.bufferingStartTime>E.BUFFERING_TIMEOUT&&this.sendMeasureEvent("videoDelay",0),delete this.bufferingStartTime)},this.onSocketOpen=()=>{var e;null!==(e=E.pingInterval)&&void 0!==e||(E.pingInterval=window.setInterval((()=>{var e;return null===(e=E.socket)||void 0===e?void 0:e.send("")}),E.PING_TIMEOUT))},this.onSocketError=()=>{this.socketErrorsCount+=1,this.socketClosedWithError=!0},this.onSocketClose=e=>{let t;if(1006===e.code||!1===e.wasClean){const{target:i}=e;t={code:e.code,timeStamp:e.timeStamp,type:e.type,wasClean:e.wasClean,closedWithError:this.socketClosedWithError},i instanceof WebSocket&&(t.readyState=i.readyState,t.url=i.url)}this.socketClosedWithError&&this.socketErrorsCount>2?t&&(0,f.Cp)(new Error("socket closed"),t):(clearTimeout(this.reconnectTimeout),clearInterval(E.pingInterval),delete E.socket,delete E.pingInterval,this.reconnectTimeout=window.setTimeout(this.createSocket,this.socketClosedWithError?E.ERROR_RECONNECT_TIMEOUT:E.RECONNECT_TIMEOUT*Math.random()),this.socketClosedWithError?this.socketClosedWithError=!1:this.socketErrorsCount=0)},this.createSocket=()=>{if(!E.socket){const e=this.getHostname("https://api.vp.rambler.ru");E.socket=new WebSocket(`wss://${e}/api/ws`)}E.socket&&!E.socket.onerror&&(E.socket.onopen=this.onSocketOpen,E.socket.onerror=this.onSocketError,E.socket.onclose=this.onSocketClose)},this.onPlayerEnterFullscreen=e=>{e&&this.sendTop100Event(o.s.PLAYER_FULLSCREEN)}}get name(){return"eventsReport"}get supportedVersion(){return{min:"0.5.0"}}get isLive(){var e;return this.core.options.live||(null===(e=this.core.activePlayback)||void 0===e?void 0:e.getPlaybackType())===s.YZ.LIVE}get id(){var e,t;const{playList:i}=this.core.options;return null!==(t=null!==(e=null==i?void 0:i.id)&&void 0!==e?e:null==i?void 0:i.uuid)&&void 0!==t?t:null}get randomNumber(){return Math.ceil(Math.random()*Number.MAX_SAFE_INTEGER)}get provider(){return this.options.provider}get viewport(){return this.core.getPlugin("viewport")}get advertisement(){return this.core.getPlugin("advertisement")}get docking(){return this.core.getPlugin("docking")}get multiplayer(){return this.core.getPlugin("multiplayer")}get suggest(){return this.core.getPlugin("suggest")}get aiAd(){return this.core.getPlugin("aiAd")}get mediaControl(){return this.core.getPlugin("mediaControl")}get share(){return this.core.getPlugin("share")}get watchNext(){return this.core.getPlugin("watchNext")}get settingsMenu(){return this.core.getPlugin("settingsMenu")}get liveStatus(){return this.core.getPlugin("liveStatus")}get promoButton(){return this.core.getPlugin("promoButton")}get startPlayEventType(){const{autoPlay:e,[a.QT]:t,[a.gM]:i,[a.yN]:s}=this.core.options;return i?"autoPlayScroll":s?"autoPlayScrollMute":e||t?"autoPlay":"clickToPlay"}getHostname(e){return e?new URL(e.replace(/^\/\//,"https://")).hostname:null}async setUserCookie(){var e,t,i,s;if(this.userCookie=null!==(e=(0,v.R)("vpuid"))&&void 0!==e?e:await(null===(t=this.provider)||void 0===t?void 0:t.getCookie("vpuid")),!this.userCookie){this.userCookie=(0,p.D)();const e={path:"/",expires:new Date(Date.now()+E.USER_COOKIE_EXPIRES).toUTCString(),sameSite:"None",secure:!0};if(g.QS){const t=this.getHostname(null!==(i=this.options.referrer)&&void 0!==i?i:""),n=null==t?void 0:t.split(".").slice(-2).join(".");await(null===(s=this.provider)||void 0===s?void 0:s.setCookie("vpuid",this.userCookie,Object.assign(Object.assign({},e),{domain:n})))}else{const t=window.location.hostname.split(".").slice(-2).join(".");(0,v.T)("vpuid",this.userCookie,Object.assign(Object.assign({},e),{domain:t}))}}}sendTop100Event(e,t){var i;const s={[e]:t};if(!s[e]){const{channel:t,referrer:i}=this.core.options,n=this.getHostname(null!=i?i:"");s[e]=`${null!=t?t:m.n4}::${n}`}null===(i=this.provider)||void 0===i||i.sendCustomVars(E.TOP100_ID,s)}async sendRender(){var e;if(!E.isRenderSent){const t=await(null===(e=this.provider)||void 0===e?void 0:e.getStartTime()),i=Date.now()-t;this.sendMeasureEvent("playerRender",i),this.sendTop100Event("playerRender"),E.isRenderSent=!0}}sendInitialAutoPlay(){const{autoPlayPolicy:e}=this.core.options;e&&!E.isInitialAutoPlaySent&&("muted"!==e&&"unmuted"!==e&&this.sendTop100Event(`initialAutoPlay::${e}`),E.isInitialAutoPlaySent=!0)}sendStartingPlay(e){E.isStartingPlaySent||(this.sendTop100Event(null!=e?e:this.startPlayEventType),E.isStartingPlaySent=!0)}sendBaseEvent(e){var t;const{channel:i,referrer:s}=this.core.options;this.id&&h({accountCode:null!=i?i:"",recordId:this.id,type:e,embedUrl:null!=s?s:"",userCookie:null!==(t=this.userCookie)&&void 0!==t?t:""})}sendPercentView(e){var t;const{channel:i,referrer:s}=this.core.options;this.id&&(h(Object.assign(Object.assign({accountCode:null!=i?i:"",recordId:this.id,type:`percentView${e}`},this.ended&&{param1:"replay"}),{embedUrl:null!=s?s:"",userCookie:null!==(t=this.userCookie)&&void 0!==t?t:""})),this.sendTop100Event(`pv${e}`))}sendLiveEvent(e){var t;const{referrer:i}=this.core.options;if(!this.id)return;const s={objectType:"live",type:e,objectId:String(this.id),embedUrl:null!=i?i:"",userCookie:null!==(t=this.userCookie)&&void 0!==t?t:"",viewId:this.viewId};if("watch"===e&&(s.duration=this.getCurrentLiveDuration()),"ping"===e){const[e,t]=(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"}).split(",").map((e=>e.split(".")));s.localDateTime=`${e.reverse().join("-")}T${t[0].trim()}+03:00`}h(s)}sendMeasureEvent(e,t){var i,s;const{playList:n,channel:r,referrer:o}=this.core.options;if(!n||!this.id)return;const{activePlayback:a}=this.core,l=a.el.offsetWidth<a.el.offsetHeight?"vert-":"",d=null!==(i=n.directSource)&&void 0!==i?i:"",c=this.getHostname(d),u=null===(s=this.currentLevel)||void 0===s?void 0:s.level.height;h({type:"measureEvent",accountCode:null!=r?r:"",objectType:this.isLive?"live":"record",objectId:String(this.id),resolution:null!=u?`${l}${u}p`:m.n4,embedUrl:null!=o?o:"",eventType:e,rnd:this.randomNumber,split:"",sourceName:null!=c?c:"",measure:t})}sendAdEvent(e,t){var i,s,n;const{channel:r,referrer:o,playerTemplateId:a}=this.core.options;this.id&&h({type:"adEvent",eventType:e,account:null!=r?r:"",objectType:this.isLive?"live":"record",objectId:String(this.id),copyrightHolder:m.n4,monetizer:null!==(i=t.adSystem)&&void 0!==i?i:m.n4,format:t.blockType,embedUrl:null!=o?o:"",playerTmplId:null!=a?a:m.n$,adTmplId:m.n$,adType:null!==(s=t.adType)&&void 0!==s?s:m.n4,rnd:this.randomNumber,viewId:this.viewId,userCookie:null!==(n=this.userCookie)&&void 0!==n?n:""})}bindEvents(){E.needConnectToSocket&&this.listenTo(this.core,o.s.CORE_READY,this.createSocket),this.core.isReady||(this.onReady=r()(this.onReady)),this.listenToOnce(this.core,o.s.CORE_READY,this.onReady),this.listenTo(this.core,o.s.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,o.s.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),this.listenTo(this.core,o.s.CORE_FULLSCREEN,this.onPlayerEnterFullscreen);const{activeContainer:e,activePlayback:t,optionsLoader:i}=this.core;t&&(this.listenTo(t,o.s.PLAYBACK_PLAY_INTENT,this.onPlayIntent),this.listenTo(t,o.s.PLAYBACK_LOADEDMETADATA,this.onLoadedMetadata),this.listenTo(t,o.s.PLAYBACK_LEVEL_SWITCH,this.onLevelSwitch),this.listenTo(t,o.s.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(t,o.s.PLAYBACK_BUFFERFULL,this.onBufferfull)),e&&(this.listenTo(e,o.s.CONTAINER_PLAY,this.onPlay),this.listenTo(e,o.s.CONTAINER_PAUSE,this.onPause),this.listenTo(e,o.s.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(e,o.s.CONTAINER_ENDED,this.onEnded),this.listenTo(e,o.s.CONTAINER_ERROR,this.onError),this.listenTo(e,o.s.CONTAINER_CLICK,this.onPlayPauseControlClick)),i&&this.listenTo(i,o.s.OPTIONS_LOADER_ERROR,this.onLoadingError),this.viewport&&this.listenTo(this.viewport,o.s.VIEWPORT_VISIBLE_AREA_CHANGED,this[A]),this.advertisement&&(this.listenTo(this.advertisement,o.s.ADVERTISEMENT_LOADING,this.onAdLoading),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_STARTED,this.onAdStarted),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_IMPRESSION,this.onAdImpression),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_PROGRESS,this.onAdProgress),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_CLICK,this.onAdClick),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested)),this.isLive&&this.core.options.eventsReportLive&&window.addEventListener("beforeunload",this.onUnload),this.multiplayer&&(this.listenTo(this.multiplayer,o.s.MULTIPLAYER_SUGGEST_CLICK,this.onMultiplayerSuggestClick),this.listenTo(this.multiplayer,o.s.MULTIPLAYER_SUGGEST_ERROR,this.onSuggestError)),this.suggest&&(this.listenTo(this.suggest,o.s.SUGGEST_ERROR,this.onSuggestError),this.listenTo(this.suggest,o.s.SUGGEST_CLICK,this.onSuggestClick)),this.aiAd&&(this.listenTo(this.aiAd,o.s.AI_AD_ITEM_RENDER,this.onAiAdItemRendered),this.listenTo(this.aiAd,o.s.AI_AD_ITEM_OPEN,this.onAiAdItemOpened),this.listenTo(this.aiAd,o.s.AI_AD_ITEM_CLICK,this.onAiAdItemClicked)),this.mediaControl&&(this.listenTo(this.mediaControl,o.s.MEDIACONTROL_PLAYPAUSE_CLICK,this.onPlayPauseControlClick),this.listenTo(this.mediaControl,o.s.MEDIACONTROL_VOLUME_MOUSEDOWN,this.onVolumeBarControlClick),this.listenTo(this.mediaControl,o.s.MEDIACONTROL_MUTE_CLICK,this.onMuteControlClick),this.listenTo(this.mediaControl,o.s.MEDIACONTROL_LEVEL_SELECTOR_CLICK,this.onLevelSelectorControlClick),this.listenTo(this.mediaControl,o.s.MEDIACONTROL_FULLSCREEN_CLICK,this.onFullscreenControlClick),this.listenTo(this.mediaControl,o.s.MEDIACONTROL_SHARE,this.onShareControlClick)),this.settingsMenu&&(this.listenTo(this.settingsMenu,o.s.SETTINGS_MENU_RATE_SELECTOR_CLICK,this.onRateSelectorClick),this.listenTo(this.settingsMenu,o.s.SETTINGS_MENU_LEVEL_SELECTOR_CLICK,this.onLevelSelectorControlClick),this.listenTo(this.settingsMenu,o.s.SETTINGS_MENU_SUBTITLE_SELECTOR_CLICK,this.onSubtitleSelectorControlClick)),this.share&&(this.listenTo(this.share,o.s.SHARE_SOCIALNETWORK,this.onShareSocialNetworkClick),this.listenTo(this.share,o.s.SHARE_EMBED,this.onShareEmbedClick),this.listenTo(this.share,o.s.SHARE_LINK,this.onShareLinkClick)),this.watchNext&&(this.listenTo(this.watchNext,o.s.WATCH_NEXT_CLICK,this.onWatchNextClick),this.listenTo(this.mediaControl,o.s.WATCH_NEXT_CLICK,this.onWatchNextClick)),this.promoButton&&this.listenTo(this.promoButton,o.s.PROMO_BUTTON_CLICK,this.onPromoButtonClick)}stopListening(e,t,i){return i||(E.socket&&(E.socket.onerror=null,E.socket.onclose=null),delete this.bufferingStartTime,this.isLive&&this.core.options.eventsReportLive&&window.removeEventListener("beforeunload",this.onUnload)),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onPlayIntent(){this.playIntentTime=Date.now()}onLoadedMetadata(){null==this.firstChunkLoadingTime&&this.playIntentTime&&(this.firstChunkLoadingTime=Date.now()-this.playIntentTime)}onLevelSwitch(e){const[t]=this.core.activePlayback.levels.filter((t=>t.id===(null==e?void 0:e.level)));this.currentLevel=t}async onReady(){var e,t;if(await this.setUserCookie(),!E.ready){const{channel:t}=this.core.options,i=(0,g.fx)();null===(e=this.provider)||void 0===e||e.activateTop100({project:E.TOP100_ID,splits:[`env_${i}`],pubId:this.userCookie,pubScope:null!=t?t:m.n4}),E.ready=!0}(null===(t=this.liveStatus)||void 0===t?void 0:t.isRetrying)||(await this.sendRender(),this.sendInitialAutoPlay(),this.sendPercentView(-1))}onMultiplayerSuggestClick(){this.sendStartingPlay("clickToPlay"),this.sendBaseEvent("click:multiplayer")}onSuggestError(e){(null==e?void 0:e.recommender)?this.sendBaseEvent("adtSuggestError"):(null==e?void 0:e.random)?this.sendBaseEvent("randomSuggestError"):this.sendBaseEvent("filterSuggestError")}onAiAdItemRendered({firstTime:e}){const{id:t,channel:i,referrer:s}=this.core.options;if([e&&"aiAdItemFirstTimeRender","aiAdItemRender"].filter(Boolean).forEach((e=>this.sendBaseEvent(e))),!this.isAiAdInitialRenderSent){const e=this.getHostname(null!=s?s:"");this.sendTop100Event("aiAdShown",`${null!=i?i:m.n4}::${e}::${t}`),this.isAiAdInitialRenderSent=!0}}onAiAdItemOpened(){this.sendBaseEvent("aiAdItemOpen")}onAiAdItemClicked(){this.sendBaseEvent("aiAdItemClick")}onPause(){this.isLive&&this.core.options.eventsReportLive&&(this.sendLiveEvent("watch"),this.clearLiveTime())}onPlay(){var e,t,i;if(null==this.playStartTime&&this.playIntentTime){this.playStartTime=Date.now()-this.playIntentTime;const s=null!==(t=null===(e=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===e?void 0:e.call(performance,"resource"))&&void 0!==t?t:[],n=null!==(i=this.firstChunkLoadingTime)&&void 0!==i?i:m.n$,r=s.length>0&&s.filter((({name:e})=>e.includes("seg-1"))).map((({duration:e,fetchStart:t,responseEnd:i})=>Math.round(e||i-t)));[{eventType:"firstChunkDownloadTime",measure:Array.isArray(r)&&r.length>0?r[r.length-1]:n},{eventType:"firstChunkWaitTime",measure:this.playStartTime}].forEach((({eventType:e,measure:t})=>{this.sendMeasureEvent(e,t)}))}this.sendStartingPlay()}onTimeUpdate(e){var t;if(e.total<=0)return;const i=null===(t=this.core.activeContainer)||void 0===t?void 0:t.isPlaying();if(i&&(this.started=!0),i&&!this.isLive){const t=5*Math.floor(e.current/e.total*20);return-1===this.percentViewSent&&this.sendPercentView(-2),void(t>this.percentViewSent&&t<100&&(this.sendPercentView(t),this.percentViewSent=t))}if(this.core.options.eventsReportLive){if(i){const e=Date.now(),t=this.currentGlobalLiveTime||e;this.currentGlobalLiveTime=e,this.currentLiveDuration+=this.currentGlobalLiveTime-t}i&&!this.isLiveWatched&&(this.sendLiveEvent("livewatch0"),this.sendPingLiveEvent(),this.isLiveWatched=!0)}}getCurrentLiveDuration(){return Math.floor(this.currentLiveDuration/1e3)}subscribeLivePing(){var e;null!==(e=this.livePingInterval)&&void 0!==e||(this.livePingInterval=window.setInterval((()=>{this.sendPingLiveEvent()}),E.LIVE_PING_INTERVAL))}unsubscribeLivePing(){window.clearInterval(this.livePingInterval),delete this.livePingInterval}clearLivePingTimeout(){window.clearTimeout(this.livePingTimeout),delete this.livePingTimeout}sendPingLiveEvent(){if(!this.id)return;const e=Date.now(),t=e-(function(e,t){void 0===t&&(t={});var i,s=t.raw;try{var n=window.localStorage.getItem(e);i=s?n:JSON.parse(null!=n?n:"")}catch(e){}return null!=i?i:null}(`${this.id}_${E.LIVE_PING_TIMESTAMP_KEY}`)||0)>=E.LIVE_PING_INTERVAL;if(t)return this.sendLiveEvent("ping"),function(e,t,i){void 0===i&&(i={});var s=i.raw;try{var n=s?String(t):JSON.stringify(t);window.localStorage.setItem(e,n)}catch(e){}}(`${this.id}_${E.LIVE_PING_TIMESTAMP_KEY}`,e),void this.subscribeLivePing();this.unsubscribeLivePing(),this.livePingTimeout=window.setTimeout((()=>{this.sendPingLiveEvent()}),1e3)}onBuffering(){var e;(null===(e=this.core.activeContainer)||void 0===e?void 0:e.getCurrentTime())>0&&(this.bufferingStartTime=Date.now())}onError(e){this.sendMeasureEvent("videoError",0),this.started||e.level!==s.Mk.Levels.FATAL||(this.isLive?this.sendLiveEvent("liveFatalError"):this.sendBaseEvent("vodFatalError")),e.level===s.Mk.Levels.FATAL&&this.isLive&&this.core.options.eventsReportLive&&this.isLiveWatched&&(this.getCurrentLiveDuration()>0&&this.sendLiveEvent("watch"),this.clearLivePingTimeout(),this.unsubscribeLivePing(),this.clearLiveTime())}onLoadingError(e){const t=(null==e?void 0:e.code)&&E.LOADING_ERRORS[e.code];t&&this.sendTop100Event(t)}[A](e){this.visibleHeight=e}onOptionsChange(){this.sendInitialAutoPlay()}onAdLoading(e){var t;const{channel:i}=this.core.options;let s="";if("url"in e){const i=this.getHostname(null!==(t=e.url)&&void 0!==t?t:"");s=null!=i?i:m.n4}else s=`yandex.${e.partnerId}`;this.sendTop100Event("adRequest",`${null!=i?i:m.n4}::${e.blockType}::${s}`)}onAdStarted(e){var t,i;if(["preRoll","preRollMobile"].includes(e.blockType)){const e=1e3*(this.core.isFullscreen()||(null===(t=this.docking)||void 0===t?void 0:t.isDocked())?1:this.visibleHeight);e>=0&&e<=1e3&&this.sendMeasureEvent("viewability-preroll",Math.round(e));const s=0===(null===(i=this.advertisement)||void 0===i?void 0:i.getVolume())?"preRollMuted":"preRollUnmuted";this.sendTop100Event(s)}this.docking&&this.listenTo(this.docking,o.s.DOCKING_CHANGED,this.onDockingChange),this.getCurrentLiveDuration()>0&&this.core.options.eventsReportLive&&(this.sendLiveEvent("watch"),this.clearLiveTime()),this.sendStartingPlay(),this.sendAdEvent("start",e)}clearLiveTime(){this.getCurrentLiveDuration()>0&&(this.currentGlobalLiveTime=0,this.currentLiveDuration=0)}onAdImpression(e){this.sendAdEvent("show",e)}onAdProgress(e){const t=Math.ceil(e.current/e.total);t>this.adViewSent&&e.current>=1&&(this.sendAdEvent("show1s",e),this.adViewSent=t)}onAdClick(e){this.sendAdEvent("click",e)}onAdContentResumeRequested(){this.docking&&this.stopListening(this.docking,o.s.DOCKING_CHANGED,this.onDockingChange),this.adViewSent=-1}onDockingChange(e){var t,i;const s=null!==(i=null===(t=this.advertisement)||void 0===t?void 0:t.getVolume())&&void 0!==i?i:0;e&&s>0&&this.sendTop100Event("dockUnmutedAd")}onEnded(){-1!==this.percentViewSent&&this.sendPercentView(100),this.percentViewSent=-1,this.ended=!0}onTogglePlayPause(){this.sendBaseEvent("click:"+(this.core.activeContainer.isPlaying()?"play":"pause")),this.stopListening(this.core.activeContainer,o.s.CONTAINER_PLAY,this.onTogglePlayPause),this.stopListening(this.core.activeContainer,o.s.CONTAINER_PAUSE,this.onTogglePlayPause)}onPlayPauseControlClick(){const{activeContainer:e}=this.core;e&&(this.stopListening(e,o.s.CONTAINER_PLAY,this.onTogglePlayPause),this.stopListening(e,o.s.CONTAINER_PAUSE,this.onTogglePlayPause),this.listenTo(e,o.s.CONTAINER_PLAY,this.onTogglePlayPause),this.listenTo(e,o.s.CONTAINER_PAUSE,this.onTogglePlayPause))}onVolumeBarControlClick(){this.sendBaseEvent("click:volumebar")}onMuteControlClick(e){this.sendBaseEvent(`click:mute:${0===e}`)}onLevelSelectorControlClick(e){this.sendBaseEvent(`click:levelSelector:${e}`)}onSubtitleSelectorControlClick(e){this.sendBaseEvent(`click:subtitle:${e}`)}onFullscreenControlClick(e){this.sendBaseEvent("click:fullscreen"+(!0===e?":doubleclick":""))}onSuggestClick(){this.sendBaseEvent("click:suggest:"+(this.ended?"end":"pause"))}onShareControlClick(){this.sendBaseEvent("click:share")}onShareSocialNetworkClick(e){this.sendBaseEvent(`click:share:${e.network}`)}onShareEmbedClick(){this.sendBaseEvent("click:share:embed")}onShareLinkClick(){this.sendBaseEvent("click:share:link")}onWatchNextClick(){this.sendBaseEvent("click:watchNext")}onPromoButtonClick(){this.sendBaseEvent("click:promoButton")}onRateSelectorClick(e){this.sendBaseEvent(`click:rateSelector:${parseFloat(e)}`)}}E.PING_TIMEOUT=3e4,E.RECONNECT_TIMEOUT=1e3,E.ERROR_RECONNECT_TIMEOUT=3e3,E.BUFFERING_TIMEOUT=500,E.TOP100_ID="7356279",E.LIVE_PING_INTERVAL=6e4,E.LIVE_PING_TIMESTAMP_KEY="player_live_ping_timestamp",E.SOCKET_CONNECT_PROBABILITY=.2,E.USER_COOKIE_EXPIRES=31536e6,E.LOADING_ERRORS={[u.I.RECORD_NOT_FOUND.code]:"notFound",[u.I.RECORD_NOT_PUBLISHED.code]:"notPublished",[u.I.RECORD_NOT_PROCESSED.code]:"notProcessed",[u.I.RECORD_ACCESS_DENIED_SITE.code]:"accessDeniedSite",[u.I.RECORD_ACCESS_DENIED_COUNTRY.code]:"accessDeniedCountry",[u.I.ACCESS_RESTRICTED.code]:"accessRestricted",[u.I.UNKNOWN_ERROR.code]:"unknownError",[u.I.NOT_RESPOND.code]:"unknownError",[u.I.TIMEOUT.code]:"unknownError",[u.I.INVALID_RESPONSE.code]:"unknownError"},E.needConnectToSocket=Math.random()<E.SOCKET_CONNECT_PROBABILITY,E.ready=!1,E.isRenderSent=!1,E.isInitialAutoPlaySent=!1,E.isStartingPlaySent=!1},2633:(e,t,i)=>{"use strict";i.d(t,{x:()=>s});const s=e=>"number"==typeof e?e:"string"==typeof e&&e.length?/^\d+$/.test(e)?Number(e):e:void 0},2706:e=>{e.exports=""},2717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var i=function(){function e(e){this.start=Date.now(),this.labelMap={},e.start&&(this.start=e.start),e.labelMap&&(this.labelMap=e.labelMap),this.histogram=e.histogram}return e.prototype.observeDuration=function(){var e=Date.now()-this.start;this.histogram.observe(e/1e3,this.labelMap)},e}();t.Timer=i},2737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertSamplesToText=t.hashLabelMap=t.isValidLabels=t.isValidCollectorName=void 0,t.isValidCollectorName=function(e){return!!e&&/[a-zA-Z_:][a-zA-Z0-9_:]*/.test(e)},t.isValidLabels=function(e){return e.every((function(e){return/[a-zA-Z_][a-zA-Z0-9_]*/.test(e)}))},t.hashLabelMap=function(e){var t=Object.keys(e),i="";return t.length>0&&(i=(t=t.sort()).map((function(t){return"".concat(t,":").concat(e[t])})).join("|")),i},t.convertSamplesToText=function(e){for(var t=[],i=0,s=e;i<s.length;i++){var n=s[i],r=Object.entries(n.labels).map((function(e){var t=e[0],i=e[1];return"".concat(t,'="').concat(i,'"')})),o=r.length>0?"".concat(n.name,"{").concat(r,"} ").concat(n.value,"\n"):"".concat(n.name," ").concat(n.value,"\n");t.push(o)}return t}},2996:e=>{var t=function(){var e,t,i,s,n,r,o=[],a=o.concat,l=o.filter,d=o.slice,c=window.document,h={},u={},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,A=/([A-Z])/g,E=["val","css","html","text","data","width","height","offset"],y=c.createElement("table"),T=c.createElement("tr"),b={tr:c.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:T,th:T,"*":c.createElement("div")},S=/complete|loaded|interactive/,_=/^[\w-]*$/,C={},R=C.toString,L={},I=c.createElement("div"),k={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},w=Array.isArray||function(e){return e instanceof Array};function P(e){return null==e?String(e):C[R.call(e)]||"object"}function O(e){return"function"==P(e)}function D(e){return null!=e&&e==e.window}function N(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==P(e)}function x(e){return M(e)&&!D(e)&&Object.getPrototypeOf(e)==Object.prototype}function B(e){var t=!!e&&"length"in e&&e.length,s=i.type(e);return"function"!=s&&!D(e)&&("array"==s||0===t||"number"==typeof t&&t>0&&t-1 in e)}function F(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(e){return e in u?u[e]:u[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function $(e,t){return"number"!=typeof t||f[F(e)]?t:t+"px"}function V(e){return"children"in e?d.call(e.children):i.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function G(e,t){var i,s=e?e.length:0;for(i=0;i<s;i++)this[i]=e[i];this.length=s,this.selector=t||""}function j(i,s,n){for(t in s)n&&(x(s[t])||w(s[t]))?(x(s[t])&&!x(i[t])&&(i[t]={}),w(s[t])&&!w(i[t])&&(i[t]=[]),j(i[t],s[t],n)):s[t]!==e&&(i[t]=s[t])}function K(e,t){return null==t?i(e):i(e).filter(t)}function H(e,t,i,s){return O(t)?t.call(e,i,s):t}function Y(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function W(t,i){var s=t.className||"",n=s&&s.baseVal!==e;if(i===e)return n?s.baseVal:s;n?s.baseVal=i:t.className=i}function z(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?i.parseJSON(e):e):e}catch(t){return e}}function q(e,t){t(e);for(var i=0,s=e.childNodes.length;i<s;i++)q(e.childNodes[i],t)}return L.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var s,n=e.parentNode,r=!n;return r&&(n=I).appendChild(e),s=~L.qsa(n,t).indexOf(e),r&&I.removeChild(e),s},n=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},r=function(e){return l.call(e,(function(t,i){return e.indexOf(t)==i}))},L.fragment=function(t,s,n){var r,o,a;return g.test(t)&&(r=i(c.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(m,"<$1></$2>")),s===e&&(s=p.test(t)&&RegExp.$1),s in b||(s="*"),(a=b[s]).innerHTML=""+t,r=i.each(d.call(a.childNodes),(function(){a.removeChild(this)}))),x(n)&&(o=i(r),i.each(n,(function(e,t){E.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),r},L.Z=function(e,t){return new G(e,t)},L.isZ=function(e){return e instanceof L.Z},L.init=function(t,s){var n,r;if(!t)return L.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&p.test(t))n=L.fragment(t,RegExp.$1,s),t=null;else{if(s!==e)return i(s).find(t);n=L.qsa(c,t)}else{if(O(t))return i(c).ready(t);if(L.isZ(t))return t;if(w(t))r=t,n=l.call(r,(function(e){return null!=e}));else if(M(t))n=[t],t=null;else if(p.test(t))n=L.fragment(t.trim(),RegExp.$1,s),t=null;else{if(s!==e)return i(s).find(t);n=L.qsa(c,t)}}return L.Z(n,t)},(i=function(e,t){return L.init(e,t)}).extend=function(e){var t,i=d.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach((function(i){j(e,i,t)})),e},L.qsa=function(e,t){var i,s="#"==t[0],n=!s&&"."==t[0],r=s||n?t.slice(1):t,o=_.test(r);return e.getElementById&&o&&s?(i=e.getElementById(r))?[i]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:d.call(o&&!s&&e.getElementsByClassName?n?e.getElementsByClassName(r):e.getElementsByTagName(t):e.querySelectorAll(t))},i.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},i.type=P,i.isFunction=O,i.isWindow=D,i.isArray=w,i.isPlainObject=x,i.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},i.isNumeric=function(e){var t=Number(e),i=typeof e;return null!=e&&"boolean"!=i&&("string"!=i||e.length)&&!isNaN(t)&&isFinite(t)||!1},i.inArray=function(e,t,i){return o.indexOf.call(t,e,i)},i.camelCase=n,i.trim=function(e){return null==e?"":String.prototype.trim.call(e)},i.uuid=0,i.support={},i.expr={},i.noop=function(){},i.map=function(e,t){var s,n,r,o,a=[];if(B(e))for(n=0;n<e.length;n++)null!=(s=t(e[n],n))&&a.push(s);else for(r in e)null!=(s=t(e[r],r))&&a.push(s);return(o=a).length>0?i.fn.concat.apply([],o):o},i.each=function(e,t){var i,s;if(B(e)){for(i=0;i<e.length;i++)if(!1===t.call(e[i],i,e[i]))return e}else for(s in e)if(!1===t.call(e[s],s,e[s]))return e;return e},i.grep=function(e,t){return l.call(e,t)},window.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){C["[object "+t+"]"]=t.toLowerCase()})),i.fn={constructor:L.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,i=[];for(e=0;e<arguments.length;e++)t=arguments[e],i[e]=L.isZ(t)?t.toArray():t;return a.apply(L.isZ(this)?this.toArray():this,i)},map:function(e){return i(i.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return i(d.apply(this,arguments))},ready:function(e){return S.test(c.readyState)&&c.body?e(i):c.addEventListener("DOMContentLoaded",(function(){e(i)}),!1),this},get:function(t){return t===e?d.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,i){return!1!==e.call(t,i,t)})),this},filter:function(e){return O(e)?this.not(this.not(e)):i(l.call(this,(function(t){return L.matches(t,e)})))},add:function(e,t){return i(r(this.concat(i(e,t))))},is:function(e){return this.length>0&&L.matches(this[0],e)},not:function(t){var s=[];if(O(t)&&t.call!==e)this.each((function(e){t.call(this,e)||s.push(this)}));else{var n="string"==typeof t?this.filter(t):B(t)&&O(t.item)?d.call(t):i(t);this.forEach((function(e){n.indexOf(e)<0&&s.push(e)}))}return i(s)},has:function(e){return this.filter((function(){return M(e)?i.contains(this,e):i(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:i(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:i(e)},find:function(e){var t=this;return e?"object"==typeof e?i(e).filter((function(){var e=this;return o.some.call(t,(function(t){return i.contains(t,e)}))})):1==this.length?i(L.qsa(this[0],e)):this.map((function(){return L.qsa(this,e)})):i()},closest:function(e,t){var s=[],n="object"==typeof e&&i(e);return this.each((function(i,r){for(;r&&!(n?n.indexOf(r)>=0:L.matches(r,e));)r=r!==t&&!N(r)&&r.parentNode;r&&s.indexOf(r)<0&&s.push(r)})),i(s)},parents:function(e){for(var t=[],s=this;s.length>0;)s=i.map(s,(function(e){if((e=e.parentNode)&&!N(e)&&t.indexOf(e)<0)return t.push(e),e}));return K(t,e)},parent:function(e){return K(r(this.pluck("parentNode")),e)},children:function(e){return K(this.map((function(){return V(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||d.call(this.childNodes)}))},siblings:function(e){return K(this.map((function(e,t){return l.call(V(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return i.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,h[e]||(t=c.createElement(e),c.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),h[e]=i),h[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=O(e);if(this[0]&&!t)var s=i(e).get(0),n=s.parentNode||this.length>1;return this.each((function(r){i(this).wrapAll(t?e.call(this,r):n?s.cloneNode(!0):s)}))},wrapAll:function(e){if(this[0]){var t;for(i(this[0]).before(e=i(e));(t=e.children()).length;)e=t.first();i(e).append(this)}return this},wrapInner:function(e){var t=O(e);return this.each((function(s){var n=i(this),r=n.contents(),o=t?e.call(this,s):e;r.length?r.wrapAll(o):n.append(o)}))},unwrap:function(){return this.parent().each((function(){i(this).replaceWith(i(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var s=i(this);(t===e?"none"==s.css("display"):t)?s.show():s.hide()}))},prev:function(e){return i(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return i(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var s=this.innerHTML;i(this).empty().append(H(this,e,t,s))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var i=H(this,e,t,this.textContent);this.textContent=null==i?"":""+i})):0 in this?this.pluck("textContent").join(""):null},attr:function(i,s){var n;return"string"!=typeof i||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(i))for(t in i)Y(this,t,i[t]);else Y(this,i,H(this,s,e,this.getAttribute(i)))})):0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(i))?n:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){Y(this,e)}),this)}))},prop:function(e,t){return e=k[e]||e,1 in arguments?this.each((function(i){this[e]=H(this,t,i,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=k[e]||e,this.each((function(){delete this[e]}))},data:function(t,i){var s="data-"+t.replace(A,"-$1").toLowerCase(),n=1 in arguments?this.attr(s,i):this.attr(s);return null!==n?z(n):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=H(this,e,t,this.value)}))):this[0]&&(this[0].multiple?i(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var s=i(this),n=H(this,e,t,s.offset()),r=s.offsetParent().offset(),o={top:n.top-r.top,left:n.left-r.left};"static"==s.css("position")&&(o.position="relative"),s.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!i.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,s){if(arguments.length<2){var r=this[0];if("string"==typeof e){if(!r)return;return r.style[n(e)]||getComputedStyle(r,"").getPropertyValue(e)}if(w(e)){if(!r)return;var o={},a=getComputedStyle(r,"");return i.each(e,(function(e,t){o[t]=r.style[n(t)]||a.getPropertyValue(t)})),o}}var l="";if("string"==P(e))s||0===s?l=F(e)+":"+$(e,s):this.each((function(){this.style.removeProperty(F(e))}));else for(t in e)e[t]||0===e[t]?l+=F(t)+":"+$(t,e[t])+";":this.each((function(){this.style.removeProperty(F(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(i(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(W(e))}),U(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){s=[];var n=W(this);H(this,e,t,n).split(/\s+/g).forEach((function(e){i(this).hasClass(e)||s.push(e)}),this),s.length&&W(this,n+(n?" ":"")+s.join(" "))}})):this},removeClass:function(t){return this.each((function(i){if("className"in this){if(t===e)return W(this,"");s=W(this),H(this,t,i,s).split(/\s+/g).forEach((function(e){s=s.replace(U(e)," ")})),W(this,s.trim())}}))},toggleClass:function(t,s){return t?this.each((function(n){var r=i(this);H(this,t,n,W(this)).split(/\s+/g).forEach((function(t){(s===e?!r.hasClass(t):s)?r.addClass(t):r.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var i="scrollTop"in this[0];return t===e?i?this[0].scrollTop:this[0].pageYOffset:this.each(i?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var i="scrollLeft"in this[0];return t===e?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),s=this.offset(),n=v.test(t[0].nodeName)?{top:0,left:0}:t.offset();return s.top-=parseFloat(i(e).css("margin-top"))||0,s.left-=parseFloat(i(e).css("margin-left"))||0,n.top+=parseFloat(i(t[0]).css("border-top-width"))||0,n.left+=parseFloat(i(t[0]).css("border-left-width"))||0,{top:s.top-n.top,left:s.left-n.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||c.body;e&&!v.test(e.nodeName)&&"static"==i(e).css("position");)e=e.offsetParent;return e}))}},i.fn.detach=i.fn.remove,["width","height"].forEach((function(t){var s=t.replace(/./,(function(e){return e[0].toUpperCase()}));i.fn[t]=function(n){var r,o=this[0];return n===e?D(o)?o["inner"+s]:N(o)?o.documentElement["scroll"+s]:(r=this.offset())&&r[t]:this.each((function(e){(o=i(this)).css(t,H(this,n,e,o[t]()))}))}})),["after","prepend","before","append"].forEach((function(t,s){var n=s%2;i.fn[t]=function(){var t,r,o=i.map(arguments,(function(s){var n=[];return"array"==(t=P(s))?(s.forEach((function(t){return t.nodeType!==e?n.push(t):i.zepto.isZ(t)?n=n.concat(t.get()):void(n=n.concat(L.fragment(t)))})),n):"object"==t||null==s?s:L.fragment(s)})),a=this.length>1;return o.length<1?this:this.each((function(e,t){r=n?t:t.parentNode,t=0==s?t.nextSibling:1==s?t.firstChild:2==s?t:null;var l=i.contains(c.documentElement,r);o.forEach((function(e){if(a)e=e.cloneNode(!0);else if(!r)return i(e).remove();r.insertBefore(e,t),l&&q(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},i.fn[n?t+"To":"insert"+(s?"Before":"After")]=function(e){return i(e)[t](this),this}})),L.Z.prototype=G.prototype=i.fn,L.uniq=r,L.deserializeValue=z,i.zepto=L,i}();window.Zepto=t,void 0===window.$&&(window.$=t),function(e){var t,i,s=+new Date,n=window.document,r=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,l="application/json",d="text/html",c=/^\s*$/,h=n.createElement("a");function u(t,i,s,r){if(t.global)return function(t,i,s){var n=e.Event(i);return e(t).trigger(n,s),!n.isDefaultPrevented()}(i||n,s,r)}function f(e,t){var i=t.context;if(!1===t.beforeSend.call(i,e,t)||!1===u(t,i,"ajaxBeforeSend",[e,t]))return!1;u(t,i,"ajaxSend",[e,t])}function p(e,t,i,s){var n=i.context,r="success";i.success.call(n,e,r,t),s&&s.resolveWith(n,[e,r,t]),u(i,n,"ajaxSuccess",[t,i,e]),m(r,t,i)}function g(e,t,i,s,n){var r=s.context;s.error.call(r,i,t,e),n&&n.rejectWith(r,[i,t,e]),u(s,r,"ajaxError",[i,s,e||t]),m(t,i,s)}function m(t,i,s){var n=s.context;s.complete.call(n,i,t),u(s,n,"ajaxComplete",[i,s]),function(t){t.global&&! --e.active&&u(t,null,"ajaxStop")}(s)}function v(){}function A(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function E(t,i,s,n){return e.isFunction(i)&&(n=s,s=i,i=void 0),e.isFunction(s)||(n=s,s=void 0),{url:t,data:i,success:s,dataType:n}}h.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,i){if(!("type"in t))return e.ajax(t);var r,o,a=t.jsonpCallback,l=(e.isFunction(a)?a():a)||"Zepto"+s++,d=n.createElement("script"),c=window[l],h=function(t){e(d).triggerHandler("error",t||"abort")},u={abort:h};return i&&i.promise(u),e(d).on("load error",(function(s,n){clearTimeout(o),e(d).off().remove(),"error"!=s.type&&r?p(r[0],u,t,i):g(null,n||"error",u,t,i),window[l]=c,r&&e.isFunction(c)&&c(r[0]),c=r=void 0})),!1===f(u,t)?(h("abort"),u):(window[l]=function(){r=arguments},d.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),n.head.appendChild(d),t.timeout>0&&(o=setTimeout((function(){h("timeout")}),t.timeout)),u)},e.ajaxSettings={type:"GET",beforeSend:v,success:v,error:v,complete:v,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:d,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:v},e.ajax=function(s){var r,m,E=e.extend({},s||{}),y=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===E[t]&&(E[t]=e.ajaxSettings[t]);!function(t){t.global&&0==e.active++&&u(t,null,"ajaxStart")}(E),E.crossDomain||((r=n.createElement("a")).href=E.url,r.href=r.href,E.crossDomain=h.protocol+"//"+h.host!=r.protocol+"//"+r.host),E.url||(E.url=window.location.toString()),(m=E.url.indexOf("#"))>-1&&(E.url=E.url.slice(0,m)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=A(t.url,t.data),t.data=void 0)}(E);var T=E.dataType,b=/\?.+=\?/.test(E.url);if(b&&(T="jsonp"),!1!==E.cache&&(s&&!0===s.cache||"script"!=T&&"jsonp"!=T)||(E.url=A(E.url,"_="+Date.now())),"jsonp"==T)return b||(E.url=A(E.url,E.jsonp?E.jsonp+"=?":!1===E.jsonp?"":"callback=?")),e.ajaxJSONP(E,y);var S,_=E.accepts[T],C={},R=function(e,t){C[e.toLowerCase()]=[e,t]},L=/^([\w-]+:)\/\//.test(E.url)?RegExp.$1:window.location.protocol,I=E.xhr(),k=I.setRequestHeader;if(y&&y.promise(I),E.crossDomain||R("X-Requested-With","XMLHttpRequest"),R("Accept",_||"*/*"),(_=E.mimeType||_)&&(_.indexOf(",")>-1&&(_=_.split(",",2)[0]),I.overrideMimeType&&I.overrideMimeType(_)),(E.contentType||!1!==E.contentType&&E.data&&"GET"!=E.type.toUpperCase())&&R("Content-Type",E.contentType||"application/x-www-form-urlencoded"),E.headers)for(i in E.headers)R(i,E.headers[i]);if(I.setRequestHeader=R,I.onreadystatechange=function(){if(4==I.readyState){I.onreadystatechange=v,clearTimeout(S);var t,i=!1;if(I.status>=200&&I.status<300||304==I.status||0==I.status&&"file:"==L){if(T=T||function(e){return e&&(e=e.split(";",2)[0]),e&&(e==d?"html":e==l?"json":o.test(e)?"script":a.test(e)&&"xml")||"text"}(E.mimeType||I.getResponseHeader("content-type")),"arraybuffer"==I.responseType||"blob"==I.responseType)t=I.response;else{t=I.responseText;try{t=function(e,t,i){if(i.dataFilter==v)return e;var s=i.context;return i.dataFilter.call(s,e,t)}(t,T,E),"script"==T?(0,eval)(t):"xml"==T?t=I.responseXML:"json"==T&&(t=c.test(t)?null:e.parseJSON(t))}catch(e){i=e}if(i)return g(i,"parsererror",I,E,y)}p(t,I,E,y)}else g(I.statusText||null,I.status?"error":"abort",I,E,y)}},!1===f(I,E))return I.abort(),g(null,"abort",I,E,y),I;var w=!("async"in E)||E.async;if(I.open(E.type,E.url,w,E.username,E.password),E.xhrFields)for(i in E.xhrFields)I[i]=E.xhrFields[i];for(i in C)k.apply(I,C[i]);return E.timeout>0&&(S=setTimeout((function(){I.onreadystatechange=v,I.abort(),g(null,"timeout",I,E,y)}),E.timeout)),I.send(E.data?E.data:null),I},e.get=function(){return e.ajax(E.apply(null,arguments))},e.post=function(){var t=E.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=E.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,i,s){if(!this.length)return this;var n,o=this,a=t.split(/\s/),l=E(t,i,s),d=l.success;return a.length>1&&(l.url=a[0],n=a[1]),l.success=function(t){o.html(n?e("<div>").html(t.replace(r,"")).find(n):t),d&&d.apply(o,arguments)},e.ajax(l),this};var y=encodeURIComponent;function T(t,i,s,n){var r,o=e.isArray(i),a=e.isPlainObject(i);e.each(i,(function(i,l){r=e.type(l),n&&(i=s?n:n+"["+(a||"object"==r||"array"==r?i:"")+"]"),!n&&o?t.add(l.name,l.value):"array"==r||!s&&"object"==r?T(t,l,s,i):t.add(i,l)}))}e.param=function(t,i){var s=[];return s.add=function(t,i){e.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(y(t)+"="+y(i))},T(s,t,i),s.join("&").replace(/%20/g,"+")}}(t),function(e){e.Callbacks=function(t){t=e.extend({},t);var i,s,n,r,o,a,l=[],d=!t.once&&[],c=function(e){for(i=t.memory&&e,s=!0,a=r||0,r=0,o=l.length,n=!0;l&&a<o;++a)if(!1===l[a].apply(e[0],e[1])&&t.stopOnFalse){i=!1;break}n=!1,l&&(d?d.length&&c(d.shift()):i?l.length=0:h.disable())},h={add:function(){if(l){var s=l.length,a=function(i){e.each(i,(function(e,i){"function"==typeof i?t.unique&&h.has(i)||l.push(i):i&&i.length&&"string"!=typeof i&&a(i)}))};a(arguments),n?o=l.length:i&&(r=s,c(i))}return this},remove:function(){return l&&e.each(arguments,(function(t,i){for(var s;(s=e.inArray(i,l,s))>-1;)l.splice(s,1),n&&(s<=o&&--o,s<=a&&--a)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=d=i=void 0,this},disabled:function(){return!l},lock:function(){return d=void 0,i||h.disable(),this},locked:function(){return!d},fireWith:function(e,t){return!l||s&&!d||(t=[e,(t=t||[]).slice?t.slice():t],n?d.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments)},fired:function(){return!!s}};return h}}(t),function(e){var t=Array.prototype.slice;function i(t){var s=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return i((function(i){e.each(s,(function(s,n){var a=e.isFunction(t[s])&&t[s];o[n[1]]((function(){var t=a&&a.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(i.resolve).fail(i.reject).progress(i.notify);else{var s=this===r?i.promise():this,o=a?[t]:arguments;i[n[0]+"With"](s,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,r):r}},o={};return e.each(s,(function(e,t){var i=t[2],a=t[3];r[t[1]]=i.add,a&&i.add((function(){n=a}),s[1^e][2].disable,s[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?r:this,arguments),this},o[t[0]+"With"]=i.fireWith})),r.promise(o),t&&t.call(o,o),o}e.when=function(s){var n,r,o,a=t.call(arguments),l=a.length,d=0,c=1!==l||s&&e.isFunction(s.promise)?l:0,h=1===c?s:i(),u=function(e,i,s){return function(r){i[e]=this,s[e]=arguments.length>1?t.call(arguments):r,s===n?h.notifyWith(i,s):--c||h.resolveWith(i,s)}};if(l>1)for(n=new Array(l),r=new Array(l),o=new Array(l);d<l;++d)a[d]&&e.isFunction(a[d].promise)?a[d].promise().done(u(d,o,a)).fail(h.reject).progress(u(d,r,n)):--c;return c||h.resolveWith(o,a),h.promise()},e.Deferred=i}(t),function(e){var t,i=1,s=Array.prototype.slice,n=e.isFunction,r=function(e){return"string"==typeof e},o={},a={},l="onfocusin"in window,d={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function h(e){return e._zid||(e._zid=i++)}function u(e,t,i,s){if((t=f(t)).ns)var n=(r=t.ns,new RegExp("(?:^| )"+r.replace(" "," .* ?")+"(?: |$)"));var r;return(o[h(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||n.test(e.ns))&&(!i||h(e.fn)===h(i))&&(!s||e.sel==s)}))}function f(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e,t){return e.del&&!l&&e.e in d||!!t}function g(e){return c[e]||l&&d[e]||e}function m(i,s,n,r,a,l,d){var u=h(i),m=o[u]||(o[u]=[]);s.split(/\s/).forEach((function(s){if("ready"==s)return e(document).ready(n);var o=f(s);o.fn=n,o.sel=a,o.e in c&&(n=function(t){var i=t.relatedTarget;if(!i||i!==this&&!e.contains(this,i))return o.fn.apply(this,arguments)}),o.del=l;var h=l||n;o.proxy=function(e){if(!(e=b(e)).isImmediatePropagationStopped()){e.data=r;var s=h.apply(i,e._args==t?[e]:[e].concat(e._args));return!1===s&&(e.preventDefault(),e.stopPropagation()),s}},o.i=m.length,m.push(o),"addEventListener"in i&&i.addEventListener(g(o.e),o.proxy,p(o,d))}))}function v(e,t,i,s,n){var r=h(e);(t||"").split(/\s/).forEach((function(t){u(e,t,i,s).forEach((function(t){delete o[r][t.i],"removeEventListener"in e&&e.removeEventListener(g(t.e),t.proxy,p(t,n))}))}))}a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",e.event={add:m,remove:v},e.proxy=function(t,i){var o=2 in arguments&&s.call(arguments,2);if(n(t)){var a=function(){return t.apply(i,o?o.concat(s.call(arguments)):arguments)};return a._zid=h(t),a}if(r(i))return o?(o.unshift(t[i],t),e.proxy.apply(null,o)):e.proxy(t[i],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,i){return this.on(e,t,i)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,i,s){return this.on(e,t,i,s,1)};var A=function(){return!0},E=function(){return!1},y=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function b(i,s){return!s&&i.isDefaultPrevented||(s||(s=i),e.each(T,(function(e,t){var n=s[e];i[e]=function(){return this[t]=A,n&&n.apply(s,arguments)},i[t]=E})),i.timeStamp||(i.timeStamp=Date.now()),(s.defaultPrevented!==t?s.defaultPrevented:"returnValue"in s?!1===s.returnValue:s.getPreventDefault&&s.getPreventDefault())&&(i.isDefaultPrevented=A)),i}function S(e){var i,s={originalEvent:e};for(i in e)y.test(i)||e[i]===t||(s[i]=e[i]);return b(s,e)}e.fn.delegate=function(e,t,i){return this.on(t,e,i)},e.fn.undelegate=function(e,t,i){return this.off(t,e,i)},e.fn.live=function(t,i){return e(document.body).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(document.body).undelegate(this.selector,t,i),this},e.fn.on=function(i,o,a,l,d){var c,h,u=this;return i&&!r(i)?(e.each(i,(function(e,t){u.on(e,o,a,t,d)})),u):(r(o)||n(l)||!1===l||(l=a,a=o,o=t),l!==t&&!1!==a||(l=a,a=t),!1===l&&(l=E),u.each((function(t,n){d&&(c=function(e){return v(n,e.type,l),l.apply(this,arguments)}),o&&(h=function(t){var i,r=e(t.target).closest(o,n).get(0);if(r&&r!==n)return i=e.extend(S(t),{currentTarget:r,liveFired:n}),(c||l).apply(r,[i].concat(s.call(arguments,1)))}),m(n,i,l,a,o,h||c)})))},e.fn.off=function(i,s,o){var a=this;return i&&!r(i)?(e.each(i,(function(e,t){a.off(e,s,t)})),a):(r(s)||n(o)||!1===o||(o=s,s=t),!1===o&&(o=E),a.each((function(){v(this,i,o,s)})))},e.fn.trigger=function(t,i){return(t=r(t)||e.isPlainObject(t)?e.Event(t):b(t))._args=i,this.each((function(){t.type in d&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)}))},e.fn.triggerHandler=function(t,i){var s,n;return this.each((function(o,a){(s=S(r(t)?e.Event(t):t))._args=i,s.target=a,e.each(u(a,t.type||t),(function(e,t){if(n=t.proxy(s),s.isImmediatePropagationStopped())return!1}))})),n},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){r(e)||(e=(t=e).type);var i=document.createEvent(a[e]||"Events"),s=!0;if(t)for(var n in t)"bubbles"==n?s=!!t[n]:i[n]=t[n];return i.initEvent(e,s,!0),b(i)}}(t),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,i){try{return e(t,i)}catch(e){return null}}}}(),function(e){var t=e.zepto,i=t.qsa,s=t.matches;function n(t){return!(!(t=e(t)).width()&&!t.height())&&"none"!==t.css("display")}var r=e.expr[":"]={visible:function(){if(n(this))return this},hidden:function(){if(!n(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,i){if(e===i)return this},contains:function(t,i,s){if(e(this).text().indexOf(s)>-1)return this},has:function(e,i,s){if(t.qsa(this,s).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),a=/^\s*>/,l="Zepto"+ +new Date;function d(e,t){e=e.replace(/=#\]/g,'="#"]');var i,s,n=o.exec(e);if(n&&n[2]in r&&(i=r[n[2]],s=n[3],e=n[1],s)){var a=Number(s);s=isNaN(a)?s.replace(/^["']|["']$/g,""):a}return t(e,i,s)}t.qsa=function(s,n){return d(n,(function(r,o,d){try{var c;!r&&o?r="*":a.test(r)&&(c=e(s).addClass(l),r="."+l+" "+r);var h=i(s,r)}catch(e){throw console.error("error performing selector: %o",n),e}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(h,(function(e,t){return o.call(e,t,h,d)}))):h}))},t.matches=function(e,t){return d(t,(function(t,i,n){return(!t||s(e,t))&&(!i||i.call(e,null,n)===e)}))}}(t),e.exports=t},3249:e=>{e.exports=""},3271:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Collector=void 0;var s=i(9716),n=i(2737),r=function(){function e(e){if(this.registry=s.defaultRegistry,this.labels=[],e.registry&&(this.registry=e.registry),!(0,n.isValidCollectorName)(e.name))throw new Error("Collector name is invalid, it MUST follow regex /[a-zA-Z_:][a-zA-Z0-9_:]*/");if(this.name=e.name,e.labels){if(!(0,n.isValidLabels)(e.labels))throw new Error("Labels may contain invalid name, it MUST follow regex /[a-zA-Z_][a-zA-Z0-9_]*/");this.labels=e.labels}this.help=e.help,e.registry&&(this.registry=e.registry),this.registry.register(this)}return e.prototype.collect=function(){return[]},e.prototype.reset=function(){},e}();t.Collector=r},4674:e=>{e.exports=""},4774:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1354),n=i.n(s),r=i(6314),o=i.n(r)()(n());o.push([e.id,"body{margin:0;padding:0;background-color:#000}","",{version:3,sources:["webpack://./src/widgets/player/iframe/styles.scss"],names:[],mappings:"AAAA,KACE,QAAA,CACA,SAAA,CACA,qBAAA",sourcesContent:["body {\n  margin: 0;\n  padding: 0;\n  background-color: black;\n}\n"],sourceRoot:""}]),o.locals={};const a=o},4785:e=>{e.exports=""},4975:function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Gauge=void 0;var r=i(3271),o=i(2737),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="gauge",t.gaugeValueMap={},t}return n(t,e),t.prototype.set=function(e,t){if(!Number.isFinite(e))throw new Error("Invalid Counter value: ".concat(e));var i=t?(0,o.hashLabelMap)(t):"",s=this.gaugeValueMap[i];s?s.value=e:(s={value:e,labelMap:t},this.gaugeValueMap[i]=s)},t.prototype.inc=function(e,t){if(void 0===e&&(e=1),!Number.isFinite(e))throw new Error("Invalid Counter value: ".concat(e));var i=t?(0,o.hashLabelMap)(t):"",s=this.gaugeValueMap[i];s?s.value+=e:(s={value:e,labelMap:t},this.gaugeValueMap[i]=s)},t.prototype.dec=function(e,t){if(void 0===e&&(e=1),!Number.isFinite(e))throw new Error("Invalid Counter value: ".concat(e));var i=t?(0,o.hashLabelMap)(t):"",s=this.gaugeValueMap[i];s?s.value-=e:(s={value:-e,labelMap:t},this.gaugeValueMap[i]=s)},t.prototype.setToCurrentTime=function(e){this.set(Date.now()/1e3,e)},t.prototype.reset=function(){this.gaugeValueMap={}},t.prototype.collect=function(){for(var e,t=[],i=0,s=Object.values(this.gaugeValueMap);i<s.length;i++){var n=s[i];t.push({value:n.value,labels:null!==(e=n.labelMap)&&void 0!==e?e:{},name:this.name})}return t},t}(r.Collector);t.Gauge=a},5008:(e,t,i)=>{"use strict";i.d(t,{L:()=>s});var s=function(e,t){void 0===t&&(t={});var i=t.retries,s=void 0===i?3:i,r=t.timeout,o=void 0===r?500:r,a=t.shouldRetry,l=void 0===a?function(){return!0}:a,d=t.signal,c=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.apply(void 0,t).catch((function(e){if(--s<1||!l(e))throw e;return n(o,d).then((function(){return c.apply(void 0,t)}))}))};return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.apply(void 0,e)}},n=function(e,t){return new Promise((function(i,s){var n=window.setTimeout(i,e);null==t||t.addEventListener("abort",(function(){n&&clearTimeout(n),s(new DOMException("The user aborted a timeout.","AbortError"))}))}))}},5056:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},5072:e=>{"use strict";var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var r={},o=[],a=0;a<e.length;a++){var l=e[a],d=s.base?l[0]+s.base:l[0],c=r[d]||0,h="".concat(d," ").concat(c);r[d]=c+1;var u=i(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(f);else{var p=n(f,s);s.byIndex=a,t.splice(a,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function n(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,n){var r=s(e=e||[],n=n||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var a=i(r[o]);t[a].references--}for(var l=s(e,n),d=0;d<r.length;d++){var c=i(r[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=l}}},5166:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Plugin:()=>d,Viewport:()=>d});var s,n=i(9371),r=i(181),o=i.n(r),a=i(6121);const l=Symbol("onVisibleAreaChanged");class d extends n.rV{constructor(){super(...arguments),this.isFullscreen=!1,this.documentHidden=document.hidden,this.onFullscreenChange=o()((e=>{e||(this.isFullscreen=!1)}),d.FULLSCREEN_THROTTLE_TIMOUT),this.onDockingDisabled=o()((async()=>{if(this.getVisibleArea){const e=await this.getVisibleArea();this[l](e,!0)}}),d.DOCKING_DEBOUNCE_TIMEOUT),this.onVisibilityChanged=()=>{this.checkVisibilityChange()},this.checkVisibilityChange=async(e=!1)=>{if(this.getVisibleArea){const t=await this.getVisibleArea();this[l](t,e)}},this[s]=(e,t=!1)=>{const{parentElement:i}=this.options,s=document.hidden||!(null==i?void 0:i.offsetHeight)?0:e.height/i.offsetHeight,n=!this.isFullscreen&&(s!==this.visibleHeight||document.hidden!==this.documentHidden||t);this.documentHidden=document.hidden,n&&(this.trigger(a.s.VIEWPORT_VISIBLE_AREA_CHANGED,s),this.visibleHeight=s)}}get name(){return"viewport"}get supportedVersion(){return{min:"0.5.0"}}get provider(){return this.core.options.provider}get canPlay(){var e;return(null===(e=this.core.activePlayback)||void 0===e?void 0:e.getPlaybackType())!==n.YZ.NO_OP}get getVisibleArea(){var e,t,i,s;return null!==(i=null===(t=null===(e=this.provider)||void 0===e?void 0:e.params)||void 0===t?void 0:t.getVisibleArea)&&void 0!==i?i:null===(s=this.provider)||void 0===s?void 0:s.getVisibleArea}get subscribeVisibleAreaChange(){var e,t,i,s;return null!==(i=null===(t=null===(e=this.provider)||void 0===e?void 0:e.params)||void 0===t?void 0:t.subscribeVisibleAreaChange)&&void 0!==i?i:null===(s=this.provider)||void 0===s?void 0:s.subscribeVisibleAreaChange}bindEvents(){this.listenToOnce(this.core,a.s.CORE_READY,this.onReady),this.listenTo(this.core,a.s.CORE_FULLSCREEN,this.onFullscreenChange),this.listenTo(this.core,a.s.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange);const e=this.core.getPlugin("mediaControl"),t=this.core.getPlugin("docking");e&&this.listenTo(e,a.s.MEDIACONTROL_FULLSCREEN,this.onRequestFullscreen),t&&this.listenTo(t,a.s.DOCKING_CHANGED,this.onDockingChanged)}stopListening(){return document.removeEventListener("visibilitychange",this.onVisibilityChanged),this.unsubscribeVisibleAreaChange(),super.stopListening()}onActiveContainerChange(){this.stopListening(),this.bindEvents(),this.onVisibilityChanged()}async onReady(){var e;this.canPlay&&this.provider&&(null===(e=this.provider.mediator)||void 0===e||e.once("disableDocking",this.onDockingDisabled),d.ready?this.onVisibilityChanged():(this.provider.once("widgetShown",this.onVisibilityChanged),d.ready=!0),document.addEventListener("visibilitychange",this.onVisibilityChanged),this.subscribeVisibleAreaChange&&(this.unsubscribeVisibleAreaChange=await this.subscribeVisibleAreaChange(this[l])))}onRequestFullscreen(){this.isFullscreen=!0}onDockingChanged(e){e?(this.trigger(a.s.VIEWPORT_VISIBLE_AREA_CHANGED,1),this.visibleHeight=1):this.checkVisibilityChange(!0)}unsubscribeVisibleAreaChange(){}}s=l,d.FULLSCREEN_THROTTLE_TIMOUT=500,d.DOCKING_DEBOUNCE_TIMEOUT=200,d.ready=!1},5250:(e,t,i)=>{"use strict";i.d(t,{R:()=>s,T:()=>n});const s=e=>{try{return document.cookie.split(";").reduce(((t,i)=>{if(null==t){const[t,...s]=i.trim().split("=");if(t===e)return s.join("=")}return t}),null)}catch(e){return null}},n=(e,t,i={})=>{try{let s=`${e}=${t}`;i.domain&&(s+=`; domain=${i.domain}`),i.path&&(s+=`; path=${i.path}`),i.expires&&(s+=`; expires=${i.expires}`),i.sameSite&&(s+=`; SameSite=${i.sameSite}`),i.secure&&(s+="; Secure"),document.cookie=s}catch(e){}}},5505:e=>{e.exports=""},5542:(e,t,i)=>{"use strict";i.d(t,{MK:()=>n,fz:()=>s,k0:()=>r}),i(8220),i(105),(0,i(711).setMutationParams)({childList:!0,subtree:!0,attributes:!0});const s=(e,t)=>{const i=document.createElement("style");return i.type="text/css",i.textContent=e,t&&i.setAttribute("data-scope",t),document.head.appendChild(i)},n=async e=>{try{const t=await fetch(e);return await t.text()}catch(e){return""}},r=e=>new Promise(((t,i)=>{const s=document.createElement("script");s.src=e,s.async=!0,s.type="text/javascript",s.onload=()=>{t(s)},s.onerror=()=>{i(new Error(`script not loaded: ${e}`))},document.body.appendChild(s)}))},5705:(e,t,i)=>{"use strict";i.d(t,{gD:()=>n,N6:()=>y,dZ:()=>L,MH:()=>q});var s=i(9371);class n extends s.df{get name(){return"click_to_pause"}get supportedVersion(){return{min:"0.5.0"}}get config(){return this.container.options.clickToPauseConfig||{}}constructor(e){super(e)}bindEvents(){this.listenTo(this.container,s.sV.CONTAINER_CLICK,this.click),this.listenTo(this.container,s.sV.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}click(){const e=this.config.onClickPayload;(this.container.getPlaybackType()!==s.YZ.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause(e):this.container.play(e))}settingsUpdate(){const e=this.container.getPlaybackType()!==s.YZ.LIVE||this.container.isDvrEnabled();if(e===this.pointerEnabled)return;const t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}}i(2706);var r=i(5072),o=i.n(r),a=i(7825),l=i.n(a),d=i(7659),c=i.n(d),h=i(5056),u=i.n(h),f=i(540),p=i.n(f),g=i(1113),m=i.n(g),v=i(6434),A={};A.styleTagTransform=m(),A.setAttributes=u(),A.insert=c().bind(null,"head"),A.domAPI=l(),A.insertStyleElement=p(),o()(v.A,A),v.A&&v.A.locals&&v.A.locals,s.DI;var E={};E.styleTagTransform=m(),E.setAttributes=u(),E.insert=c().bind(null,"head"),E.domAPI=l(),E.insertStyleElement=p(),o()(v.A,E),v.A&&v.A.locals&&v.A.locals,s.DI;class y extends s.rV{get name(){return"end_video"}get supportedVersion(){return{min:"0.5.0"}}bindEvents(){this.listenTo(this.core,s.sV.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);const e=this.core.activeContainer;e&&(this.listenTo(e,s.sV.CONTAINER_ENDED,this.ended),this.listenTo(e,s.sV.CONTAINER_STOP,this.ended))}containerChanged(){this.stopListening(),this.bindEvents()}ended(){(void 0===this.core.options.exitFullscreenOnEnd||this.core.options.exitFullscreenOnEnd)&&this.core.isFullscreen()&&this.core.toggleFullscreen()}}i(317);var T={};T.styleTagTransform=m(),T.setAttributes=u(),T.insert=c().bind(null,"head"),T.domAPI=l(),T.insertStyleElement=p(),o()(v.A,T),v.A&&v.A.locals&&v.A.locals,s.DI;var b=i(5806),S=i.n(b),_=i(4785),C=i.n(_);const R=(0,s.$)('link[rel="shortcut icon"]');class L extends s.rV{get name(){return"favicon"}get supportedVersion(){return{min:"0.5.0"}}get oldIcon(){return R}constructor(e){super(e),this._container=null,this.configure()}configure(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,s.sV.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,s.sV.CORE_OPTIONS_CHANGE,this.configure))}bindEvents(){this.listenTo(this.core,s.sV.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,s.sV.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()}containerChanged(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,s.sV.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,s.sV.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,s.sV.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,s.sV.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,s.sV.CONTAINER_ERROR,this.resetIcon),this.resetIcon()}disable(){super.disable(),this.resetIcon()}destroy(){super.destroy(),this.resetIcon()}createIcon(e){const t=(0,s.$)("<canvas/>");t[0].width=16,t[0].height=16;const i=t[0].getContext("2d");i.fillStyle="#000";const n=(0,s.$)(e).find("path").attr("d"),r=new Path2D(n);i.fill(r);const o=(0,s.$)('<link rel="shortcut icon" type="image/png"/>');return o.attr("href",t[0].toDataURL("image/png")),o}setPlayIcon(){this.playIcon||(this.playIcon=this.createIcon(S())),this.changeIcon(this.playIcon)}setPauseIcon(){this.pauseIcon||(this.pauseIcon=this.createIcon(C())),this.changeIcon(this.pauseIcon)}resetIcon(){(0,s.$)('link[rel="shortcut icon"]').remove(),(0,s.$)("head").append(this.oldIcon)}changeIcon(e){e&&((0,s.$)('link[rel="shortcut icon"]').remove(),(0,s.$)("head").append(e))}}s.df;var I=function(e){this.element=e||window.document,this.initialize()};I.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},I.KEY_CODES_BY_NAME={},function(){for(var e in I.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(I.KEY_NAMES_BY_CODE,e)&&(I.KEY_CODES_BY_NAME[I.KEY_NAMES_BY_CODE[e]]=+e)}(),I.MODIFIERS=["shift","ctrl","alt"],I.registerEvent=document.addEventListener?function(e,t,i){e.addEventListener(t,i,!1)}:document.attachEvent?function(e,t,i){e.attachEvent("on"+t,i)}:void 0,I.unregisterEvent=document.removeEventListener?function(e,t,i){e.removeEventListener(t,i,!1)}:document.detachEvent?function(e,t,i){e.detachEvent("on"+t,i)}:void 0,I.stringContains=function(e,t){return-1!==e.indexOf(t)},I.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},I.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},I.isString=function(e){return I.stringContains(Object.prototype.toString.call(e),"String")},I.arrayIncludes=Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},I.extractModifiers=function(e){var t,i;for(t=[],i=0;i<I.MODIFIERS.length;i++)I.stringContains(e,I.MODIFIERS[i])&&t.push(I.MODIFIERS[i]);return t},I.extractKey=function(e){var t,i;for(t=I.neatString(e).split(" "),i=0;i<t.length;i++)if(!I.arrayIncludes(I.MODIFIERS,t[i]))return t[i]},I.modifiersAndKey=function(e){var t,i;return I.stringContains(e,"any")?I.neatString(e).split(" ").slice(0,2).join(" "):(t=I.extractModifiers(e),(i=I.extractKey(e))&&!I.arrayIncludes(I.MODIFIERS,i)&&t.push(i),t.join(" "))},I.keyName=function(e){return I.KEY_NAMES_BY_CODE[e+""]},I.keyCode=function(e){return+I.KEY_CODES_BY_NAME[e]},I.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<I.MODIFIERS.length;e++)this.lastModifiers[I.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),I.registerEvent(this.element,"keydown",this.downHandler),I.registerEvent(this.element,"keyup",this.upHandler),I.registerEvent(window,"unload",(function e(){I.unregisterEvent(t.element,"keydown",t.downHandler),I.unregisterEvent(t.element,"keyup",t.upHandler),I.unregisterEvent(window,"unload",e)}))},I.prototype.handler=function(e){var t=this;return function(i){var s,n,r;for(i=i||window.event,t.lastKeyCode=i.keyCode,s=0;s<I.MODIFIERS.length;s++)t.lastModifiers[I.MODIFIERS[s]]=i[I.MODIFIERS[s]+"Key"];for(I.arrayIncludes(I.MODIFIERS,I.keyName(t.lastKeyCode))&&(t.lastModifiers[I.keyName(t.lastKeyCode)]=!0),n=t["keys"+I.capitalize(e)],s=0;s<n.any.length;s++)!1===n.any[s](i)&&i.preventDefault&&i.preventDefault();if(n[r=t.lastModifiersAndKey()])for(s=0;s<n[r].length;s++)!1===n[r][s](i)&&i.preventDefault&&i.preventDefault()}},I.prototype.registerKeys=function(e,t,i){var s,n,r=this["keys"+I.capitalize(e)];for(I.isString(t)&&(t=[t]),s=0;s<t.length;s++)n=t[s],r[n=I.modifiersAndKey(n+"")]?r[n].push(i):r[n]=[i];return this},I.prototype.unregisterKeys=function(e,t,i){var s,n,r,o=this["keys"+I.capitalize(e)];for(I.isString(t)&&(t=[t]),s=0;s<t.length;s++)if(r=t[s],r=I.modifiersAndKey(r+""),null===i)delete o[r];else if(o[r])for(n=0;n<o[r].length;n++)if(String(o[r][n])===String(i)){o[r].splice(n,1);break}return this},I.prototype.off=function(e){return this.unregisterKeys("down",e,null)},I.prototype.delegate=function(e,t,i){return null!==i||void 0!==i?this.registerKeys(e,t,i):this.unregisterKeys(e,t,i)},I.prototype.down=function(e,t){return this.delegate("down",e,t)},I.prototype.up=function(e,t){return this.delegate("up",e,t)},I.prototype.lastKey=function(e){return e?this.lastModifiers[e]:I.keyName(this.lastKeyCode)},I.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<I.MODIFIERS.length;t++)this.lastKey(I.MODIFIERS[t])&&e.push(I.MODIFIERS[t]);return I.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};const k=I;var w={};w.styleTagTransform=m(),w.setAttributes=u(),w.insert=c().bind(null,"head"),w.domAPI=l(),w.insertStyleElement=p(),o()(v.A,w);const P=v.A&&v.A.locals?v.A.locals:void 0;var O=i(4674),D=i.n(O),N=i(3249),M=i.n(N),x=i(8135),B=i.n(x),F=i(6157),U=i.n(F),$=i(5505),V=i.n($),G=i(9275),j=i.n(G);const{Config:K,Fullscreen:H,formatTime:Y,extend:W,removeArrayItem:z}=s.Aq;class q extends s.DI{get name(){return"media_control"}get supportedVersion(){return{min:"0.5.0"}}get disabled(){let e=this.container&&this.container.getPlaybackType()===s.YZ.NO_OP;return this.userDisabled||e}get container(){return this.core&&this.core.activeContainer}get playback(){return this.core&&this.core.activePlayback}get attributes(){return{class:"media-control","data-media-control":""}}get events(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}get template(){return(0,s.vs)('<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n <%  }; %>\n <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n <% } %>\n    </div>\n <% }; %>\n <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n <% renderContent(name); %>\n      </div>\n <% }; %>\n <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n <% }; %>\n <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n <% }; %>\n <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n <% render(settings.default); %>\n  </div>\n <% } %>\n <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n <% render(settings.left); %>\n  </div>\n <% } %>\n <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n <% render(settings.right); %>\n  </div>\n <% } %>\n</div>\n')}get volume(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}get muted(){return 0===this.volume}constructor(e){super(e),this.persistConfig=this.options.persistConfig,this.currentPositionValue=null,this.currentDurationValue=null,this.keepVisible=!1,this.fullScreenOnVideoTagSupported=null,this.setInitialVolume(),this.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},this.kibo=new k(this.options.focusElement),this.bindKeyEvents(),this.container?s.$.isEmptyObject(this.container.settings)||(this.settings=s.$.extend({},this.container.settings)):this.settings={},this.userDisabled=!1,(this.container&&this.container.mediaControlDisabled||this.options.chromeless)&&this.disable(),this.stopDragHandler=e=>this.stopDrag(e),this.updateDragHandler=e=>this.updateDrag(e),(0,s.$)(document).bind("mouseup",this.stopDragHandler),(0,s.$)(document).bind("mousemove",this.updateDragHandler)}getExternalInterface(){return{setVolume:this.setVolume,getVolume:()=>this.volume}}bindEvents(){this.stopListening(),this.listenTo(this.core,s.sV.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,s.sV.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,s.sV.CORE_MOUSE_LEAVE,(()=>this.hide(this.options.hideMediaControlDelay))),this.listenTo(this.core,s.sV.CORE_FULLSCREEN,this.show),this.listenTo(this.core,s.sV.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,s.sV.CORE_RESIZE,this.playerResize),this.bindContainerEvents()}bindContainerEvents(){this.container&&(this.listenTo(this.container,s.sV.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,s.sV.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,s.sV.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,s.sV.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,s.sV.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,s.sV.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,s.sV.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,s.sV.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,s.sV.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,s.sV.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,s.sV.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,s.sV.CONTAINER_ENDED,this.ended),this.listenTo(this.container,s.sV.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,s.sV.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),"video"===this.container.playback.el.nodeName.toLowerCase()&&this.listenToOnce(this.container,s.sV.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))}disable(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()}enable(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())}play(){this.container&&this.container.play()}pause(){this.container&&this.container.pause()}stop(){this.container&&this.container.stop()}setInitialVolume(){const e=this.persistConfig?K.restore("volume"):100,t=this.container&&this.container.options||this.options;this.setVolume(t.mute?0:e,!0)}onVolumeChanged(){this.updateVolumeUI()}onLoadedMetadataOnVideoTag(){let e=this.playback&&this.playback.el;!H.fullscreenEnabled()&&e.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())}updateVolumeUI(){if(!this.rendered)return;this.$volumeBarContainer.find(".bar-fill-2").css({});const e=this.$volumeBarContainer.width(),t=this.$volumeBarBackground.width(),i=(e-t)/2,s=t*this.volume/100+i;this.$volumeBarFill.css({width:`${this.volume}%`}),this.$volumeBarScrubber.css({left:s}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");const n=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,n).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(B()),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(M()),this.applyButtonStyle(this.$volumeIcon)}changeTogglePlay(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(C()),this.$playStopToggle.append(D()),this.trigger(s.sV.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(S()),this.$playStopToggle.append(S()),this.trigger(s.sV.MEDIACONTROL_NOTPLAYING),s.Pw.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)}mousemoveOnSeekBar(e){if(this.settings.seekEnabled){const t=e.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.trigger(s.sV.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}mouseleaveOnSeekBar(e){this.trigger(s.sV.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}onVolumeClick(e){this.setVolume(this.getVolumeFromUIEvent(e))}mousemoveOnVolumeBar(e){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(e))}playerResize(e){this.$fullscreenToggle.html("");let t=this.core.isFullscreen()?V():U();this.$fullscreenToggle.append(t),this.applyButtonStyle(this.$fullscreenToggle),0!==this.$el.find(".media-control").length&&this.$el.removeClass("w320"),(e.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")}togglePlayPause(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1}togglePlayStop(){this.container.isPlaying()?this.container.stop():this.container.play()}startSeekDrag(e){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),e&&e.preventDefault())}startVolumeDrag(e){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),e&&e.preventDefault()}stopDrag(e){this.draggingSeekBar&&this.seek(e),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1}updateDrag(e){if(this.draggingSeekBar){e.preventDefault();let t=(e.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;t=Math.min(100,Math.max(t,0)),this.setSeekPercentage(t)}else this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}getVolumeFromUIEvent(e){return(e.pageX-this.$volumeBarContainer.offset().left)/this.$volumeBarContainer.width()*100}toggleMute(){this.setVolume(this.muted?100:0)}setVolume(e,t=!1){e=Math.min(100,Math.max(e,0)),this.intendedVolume=e,this.persistConfig&&!t&&K.persist("volume",e);const i=()=>{this.container&&this.container.isReady?this.container.setVolume(e):this.listenToOnce(this.container,s.sV.CONTAINER_READY,(()=>{this.container.setVolume(e)}))};this.container?i():this.listenToOnce(this,s.sV.MEDIACONTROL_CONTAINERCHANGED,(()=>i()))}toggleFullscreen(){this.trigger(s.sV.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()}onActiveContainerChanged(){this.fullScreenOnVideoTagSupported=null,this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(s.sV.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(s.sV.MEDIACONTROL_CONTAINERCHANGED)}showVolumeBar(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")}hideVolumeBar(e=400){this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout((()=>this.hideVolumeBar()),e):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((()=>this.$volumeBarContainer.addClass("volume-bar-hide")),e)))}ended(){this.changeTogglePlay()}updateProgressBar(e){const t=e.start/e.total*100,i=e.current/e.total*100;this.$seekBarLoaded.css({left:`${t}%`,width:i-t+"%"})}onTimeUpdate(e){if(this.draggingSeekBar)return;const t=e.current<0?e.total:e.current;this.currentPositionValue=t,this.currentDurationValue=e.total,this.renderSeekBar()}renderSeekBar(){if(null===this.currentPositionValue||null===this.currentDurationValue)return;this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==s.YZ.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);const e=Y(this.currentPositionValue),t=Y(this.currentDurationValue);e!==this.displayedPosition&&(this.$position.text(e),this.displayedPosition=e),t!==this.displayedDuration&&(this.$duration.text(t),this.displayedDuration=t)}seek(e){if(!this.settings.seekEnabled)return;let t=(e.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return t=Math.min(100,Math.max(t,0)),this.container&&this.container.seekPercentage(t),this.setSeekPercentage(t),!1}setKeepVisible(){this.keepVisible=!0}resetKeepVisible(){this.keepVisible=!1}setUserKeepVisible(){this.userKeepVisible=!0}resetUserKeepVisible(){this.userKeepVisible=!1}isVisible(){return!this.$el.hasClass("media-control-hide")}show(e){if(this.disabled)return;let t=e&&e.clientX!==this.lastMouseX&&e.clientY!==this.lastMouseY;(!e||t||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(s.sV.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(s.sV.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout((()=>this.hide()),2e3),e&&(this.lastMouseX=e.clientX,this.lastMouseY=e.clientY)),this.updateCursorStyle(!0)}hide(e=0){if(!this.isVisible())return;const t=e||2e3;if(clearTimeout(this.hideId),!this.disabled&&!1===this.options.hideMediaControl)return;let i=this.userKeepVisible||this.keepVisible,n=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(e||i||n))this.hideId=setTimeout((()=>this.hide()),t);else{this.trigger(s.sV.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(s.sV.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);const e=!1;this.updateCursorStyle(e)}}updateCursorStyle(e){e?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")}settingsUpdate(){const e=this.getSettings();!e||this.fullScreenOnVideoTagSupported||H.fullscreenEnabled()||(e.default&&z(e.default,"fullscreen"),e.left&&z(e.left,"fullscreen"),e.right&&z(e.right,"fullscreen")),JSON.stringify(this.settings)!==JSON.stringify(e)&&(this.settings=e,this.render())}getSettings(){return s.$.extend(!0,{},this.container&&this.container.settings)}highDefinitionUpdate(e){this.isHD=e;const t=e?"addClass":"removeClass";this.$hdIndicator[t]("enabled")}createCachedElements(){const e=this.$el.find(".media-control-layer");this.$duration=e.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=e.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=e.find("button.media-control-button[data-playpause]"),this.$playStopToggle=e.find("button.media-control-button[data-playstop]"),this.$position=e.find(".media-control-indicator[data-position]"),this.$seekBarContainer=e.find(".bar-container[data-seekbar]"),this.$seekBarHover=e.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=e.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=e.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=e.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=e.find(".bar-container[data-volume]"),this.$volumeContainer=e.find(".drawer-container[data-volume]"),this.$volumeIcon=e.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()}resetIndicators(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()}initializeIcons(){const e=this.$el.find(".media-control-layer");e.find("button.media-control-button[data-play]").append(S()),e.find("button.media-control-button[data-pause]").append(C()),e.find("button.media-control-button[data-stop]").append(D()),this.$playPauseToggle.append(S()),this.$playStopToggle.append(S()),this.$volumeIcon.append(M()),this.$fullscreenToggle.append(U()),this.$hdIndicator.append(j())}setSeekPercentage(e){e=Math.max(Math.min(e,100),0),this.displayedSeekBarPercentage!==e&&(this.displayedSeekBarPercentage=e,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:`${e}%`}),this.$seekBarScrubber.css({left:`${e}%`}))}seekRelative(e){if(!this.settings.seekEnabled)return;const t=this.container.getCurrentTime(),i=this.container.getDuration();let s=Math.min(Math.max(t+e,0),i);s=Math.min(100*s/i,100),this.container.seekPercentage(s)}bindKeyAndShow(e,t){this.kibo.down(e,(()=>(this.show(),t())))}bindKeyEvents(){s.Pw.isMobile||this.options.disableKeyboardShortcuts||(this.unbindKeyEvents(),this.kibo=new k(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",(()=>this.togglePlayPause())),this.bindKeyAndShow("left",(()=>this.seekRelative(-5))),this.bindKeyAndShow("right",(()=>this.seekRelative(5))),this.bindKeyAndShow("shift left",(()=>this.seekRelative(-10))),this.bindKeyAndShow("shift right",(()=>this.seekRelative(10))),this.bindKeyAndShow("shift ctrl left",(()=>this.seekRelative(-15))),this.bindKeyAndShow("shift ctrl right",(()=>this.seekRelative(15))),["1","2","3","4","5","6","7","8","9","0"].forEach((e=>{this.bindKeyAndShow(e,(()=>{this.settings.seekEnabled&&this.container&&this.container.seekPercentage(10*e)}))})))}unbindKeyEvents(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))}parseColors(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;const e=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",e),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}}applyButtonStyle(e){this.buttonsColor&&e&&(0,s.$)(e).find("svg path").css("fill",this.buttonsColor)}destroy(){(0,s.$)(document).unbind("mouseup",this.stopDragHandler),(0,s.$)(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),super.destroy()}configure(e){this.options.chromeless||e.source||e.sources?this.disable():this.enable(),this.trigger(s.sV.MEDIACONTROL_OPTIONS_CHANGE)}render(){const e=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings}));const t=s.WM.getStyleFor(P,{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout((()=>this.hide()),e),this.disabled&&this.hide()),s.Pw.isSafari&&s.Pw.isMobile&&(s.Pw.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");let i=0;return this.displayedSeekBarPercentage&&(i=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(i),setTimeout((()=>{!this.settings.seekEnabled&&this.$seekBarContainer.addClass("seek-disabled"),!s.Pw.isMobile&&!this.options.disableKeyboardShortcuts&&this.bindKeyEvents(),this.playerResize({width:this.options.width,height:this.options.height}),this.hideVolumeBar(0)}),0),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(s.sV.MEDIACONTROL_RENDERED),this}}q.extend=function(e){return W(q,e)};var X={};X.styleTagTransform=m(),X.setAttributes=u(),X.insert=c().bind(null,"head"),X.domAPI=l(),X.insertStyleElement=p(),o()(v.A,X),v.A&&v.A.locals&&v.A.locals,s.rt;var Q={};Q.styleTagTransform=m(),Q.setAttributes=u(),Q.insert=c().bind(null,"head"),Q.domAPI=l(),Q.insertStyleElement=p(),o()(v.A,Q),v.A&&v.A.locals&&v.A.locals;const{formatTime:Z}=s.Aq;s.DI;var J={};J.styleTagTransform=m(),J.setAttributes=u(),J.insert=c().bind(null,"head"),J.domAPI=l(),J.insertStyleElement=p(),o()(v.A,J),v.A&&v.A.locals&&v.A.locals,s.rt,s.df;var ee={};ee.styleTagTransform=m(),ee.setAttributes=u(),ee.insert=c().bind(null,"head"),ee.domAPI=l(),ee.insertStyleElement=p(),o()(v.A,ee),v.A&&v.A.locals&&v.A.locals,s.rt},5806:e=>{e.exports=""},5842:function(e,t,i){"use strict";var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var i,s,n,r,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(o=0)),o;)try{if(i=1,s&&(n=2&a[0]?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],s=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PushGateway=void 0;var o=i(9716),a={method:"POST"},l=function(){function e(e){this.registry=o.defaultRegistry,this.fetchOptions=a,e.registry&&(this.registry=e.registry),e.fetchOptions&&(this.fetchOptions=s(s({},this.fetchOptions),e.fetchOptions)),this.url=e.url}return e.prototype.push=function(e){var t,i;return void 0===e&&(e={}),n(this,void 0,void 0,(function(){var n,o,a,l,d;return r(this,(function(r){return n="",o="",e.job&&(n="/job/".concat(e.job)),e.group&&e.group.forEach((function(e){var t=e[0],i=e[1];o+="/".concat(t,"/").concat(i)})),a="".concat(this.url).concat(n).concat(o),l=this.registry.expose(),d=(null===(t=e.fetchOptions)||void 0===t?void 0:t.method)||this.fetchOptions.method,l?[2,fetch(a,s(s(s({},this.fetchOptions),e.fetchOptions),{method:d,headers:s(s({"Content-Type":"text/plain; version=0.0.4"},this.fetchOptions.headers),null===(i=e.fetchOptions)||void 0===i?void 0:i.headers),body:l}))]:[2]}))}))},e}();t.PushGateway=l},5858:(e,t,i)=>{var s="Expected a function",n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,d="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,c="object"==typeof self&&self&&self.Object===Object&&self,h=d||c||Function("return this")(),u=Object.prototype.toString,f=Math.max,p=Math.min,g=function(){return h.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var i=o.test(e);return i||a.test(e)?l(e.slice(2),i?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError(s);return m(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),function(e,t,i){var n,r,o,a,l,d,c=0,h=!1,u=!1,A=!0;if("function"!=typeof e)throw new TypeError(s);function E(t){var i=n,s=r;return n=r=void 0,c=t,a=e.apply(s,i)}function y(e){var i=e-d;return void 0===d||i>=t||i<0||u&&e-c>=o}function T(){var e=g();if(y(e))return b(e);l=setTimeout(T,function(e){var i=t-(e-d);return u?p(i,o-(e-c)):i}(e))}function b(e){return l=void 0,A&&n?E(e):(n=r=void 0,a)}function S(){var e=g(),i=y(e);if(n=arguments,r=this,d=e,i){if(void 0===l)return function(e){return c=e,l=setTimeout(T,t),h?E(e):a}(d);if(u)return l=setTimeout(T,t),E(d)}return void 0===l&&(l=setTimeout(T,t)),a}return t=v(t)||0,m(i)&&(h=!!i.leading,o=(u="maxWait"in i)?f(v(i.maxWait)||0,t):o,A="trailing"in i?!!i.trailing:A),S.cancel=function(){void 0!==l&&clearTimeout(l),c=0,n=d=r=l=void 0},S.flush=function(){return void 0===l?a:b(g())},S}(e,t,{leading:n,maxWait:t,trailing:r})}},6105:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(i(8009)),n=r(i(7007));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),o=new n.default;return o.setMaxListeners(0),r.connectedWindow=window.opener||window.parent,r.consumer=r.facade=Object.assign(o,s),r.sendMessage({type:"initialize",args:[r.consumer],waitResponse:!0}).then((function(e){var t=e.response.result,i=e.id;r.provider=t[0],r.sendMessage({type:"response",responseToId:i}),r.emit("ready",r.provider)})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(s.default);t.default=o},6121:(e,t,i)=>{"use strict";i.d(t,{s:()=>n});var s=i(9371);class n extends s.sV{get name(){return"Events"}}n.PLAYER_DOCK="dock",n.PLAYBACK_LOADEDDATA="playback:loadeddata",n.MEDIACONTROL_MENU_CLICK="mediacontrol:menu:click",n.MEDIACONTROL_SHARE="mediacontrol:share",n.MEDIACONTROL_PLAYBACKRATE_CHANGED="mediacontrol:playbackrate:changed",n.MEDIACONTROL_SUBTITLE_CHANGED="mediacontrol:subtitle:changed",n.MEDIACONTROL_PLAYPAUSE_CLICK="mediacontrol:playpause:click",n.MEDIACONTROL_VOLUME_CLICK="mediacontrol:volume:click",n.MEDIACONTROL_VOLUME_MOUSEDOWN="mediacontrol:volume:mousedown",n.MEDIACONTROL_MUTE_CLICK="mediacontrol:mute:click",n.MEDIACONTROL_SEEK_START="mediacontrol:seek:start",n.MEDIACONTROL_SEEK="mediacontrol:seek",n.MEDIACONTROL_SEEK_END="mediacontrol:seek:end",n.MEDIACONTROL_LEVEL_SELECTOR_CLICK="mediacontrol:level:selector:click",n.MEDIACONTROL_FULLSCREEN_CLICK="mediacontrol:fullscreen:click",n.ADPLAYBACK_READY="adplayback:ready",n.ADPLAYBACK_LOADED="adplayback:loaded",n.ADPLAYBACK_STARTED="adplayback:started",n.ADPLAYBACK_IMPRESSION="adplayback:impression",n.ADPLAYBACK_PROGRESS="adplayback:progress",n.ADPLAYBACK_PAUSED="adplayback:paused",n.ADPLAYBACK_RESUMED="adplayback:resumed",n.ADPLAYBACK_COMPLETE="adplayback:complete",n.ADPLAYBACK_ENDED="adplayback:ended",n.ADPLAYBACK_CLICK="adplayback:click",n.ADPLAYBACK_VOLUME_CHANGE="adplayback:volume:change",n.ADPLAYBACK_SKIPPED="adplayback:skipped",n.ADPLAYBACK_USER_CLOSE="adplayback:user:close",n.ADPLAYBACK_CONTENT_RESUME_REQUESTED="adplayback:content:resume:requested",n.ADPLAYBACK_ERROR="adplayback:error",n.ADPLAYBACK_WARNING="adplayback:warning",n.ADVERTISEMENT_READY="advertisement:ready",n.ADVERTISEMENT_LOADING="advertisement:loading",n.ADVERTISEMENT_LOADED="advertisement:loaded",n.ADVERTISEMENT_STARTED="advertisement:started",n.ADVERTISEMENT_IMPRESSION="advertisement:impression",n.ADVERTISEMENT_PROGRESS="advertisement:progress",n.ADVERTISEMENT_VIEWABLE="advertisement:viewable",n.ADVERTISEMENT_NOTVIEWABLE="advertisement:notviewable",n.ADVERTISEMENT_PAUSED="advertisement:paused",n.ADVERTISEMENT_COMPLETE="advertisement:complete",n.ADVERTISEMENT_RESUMED="advertisement:resumed",n.ADVERTISEMENT_ENDED="advertisement:ended",n.ADVERTISEMENT_CLICK="advertisement:click",n.ADVERTISEMENT_ERROR="advertisement:error",n.ADVERTISEMENT_WARNING="advertisement:warning",n.ADVERTISEMENT_INTERACTION_PLAYING="advertisement:interaction:playing",n.ADVERTISEMENT_CONTENT_RESUME_REQUESTED="advertisement:content:resume:requested",n.ADVERTISEMENT_TIME_TO_PREROLL="advertisement:timeremaintimetopreroll",n.MULTIPLAYER_RENDERED="multiplayer:rendered",n.MULTIPLAYER_SUGGEST_LOADED="multiplayer:suggest:loaded",n.MULTIPLAYER_SUGGEST_IMPRESSION="multiplayer:suggest:impression",n.MULTIPLAYER_SUGGEST_CLICK="multiplayer:suggest:click",n.MULTIPLAYER_SUGGEST_TIMEOUT="multiplayer:suggest:timeout",n.MULTIPLAYER_SUGGEST_ERROR="multiplayer:suggest:error",n.LIKES_LIKE="likes:like",n.LIKES_DISLIKE="likes:dislike",n.SUGGEST_RENDERED="suggest:rendered",n.SUGGEST_LOADED="suggest:loaded",n.SUGGEST_SHOW="suggest:show",n.SUGGEST_CLICK="suggest:click",n.SUGGEST_CLOSE="suggest:close",n.SUGGEST_ERROR="suggest:error",n.LEVEL_SELECTOR_RENDERED="level-selector:rendered",n.SHARE_SOCIALNETWORK="share:socialnetwork",n.SHARE_CLOSE="share:close",n.SHARE_OPEN="share:open",n.SHARE_EMBED="share:embed",n.SHARE_LINK="share:link",n.SETTINGS_MENU_CLOSE="settingsmenu:close",n.SETTINGS_MENU_RATE_SELECTOR_CLICK="settingsmenu:rate:selector:click",n.SETTINGS_MENU_LEVEL_SELECTOR_CLICK="settingsmenu:level:selector:click",n.SETTINGS_MENU_SUBTITLE_SELECTOR_CLICK="settingsmenu:subtitle:selector:click",n.DOCKING_CHANGED="docking:changed",n.AI_AD_ITEM_RENDER=" aiad:item:render",n.AI_AD_ITEM_OPEN="aiad:item:open",n.AI_AD_ITEM_CLICK="aiad:item:click",n.WATCH_NEXT_CLICK="watchnext:click",n.PROMO_BUTTON_CLICK="promobutton:click",n.VIEWPORT_VISIBLE_AREA_CHANGED="viewport:visible:area:changed",n.OPTIONS_LOADER_LOADING="options:loader:loading",n.OPTIONS_LOADER_LOADED="options:loader:loaded",n.OPTIONS_LOADER_ERROR="options:loader:error",n.OPTIONS_LOADER_SPEEDTEST="options:loader:speedtest",n.POSTER_SHOW="poster:show",n.POSTER_HIDE="poster:hide",Object.defineProperty(n,"VIEWPORT_VISIBLE_AREA_CHANGED",{writable:!1,configurable:!1})},6157:e=>{e.exports=""},6243:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Plugin:()=>r,Poster:()=>r});var s=i(9371),n=i(6121);class r extends s.DI{constructor(){super(...arguments),this.hasStartedPlaying=!1}get name(){return"poster"}get supportedVersion(){return{min:"0.5.0"}}get attributes(){return{class:"eplayer-poster","data-poster":""}}get isLive(){var e;return(null===(e=this.core.activeContainer)||void 0===e?void 0:e.getPlaybackType())===s.YZ.LIVE}get shouldRender(){var e,t;return"html_img"!==(null===(e=this.core.activePlayback)||void 0===e?void 0:e.name)&&((null===(t=this.core.activePlayback)||void 0===t?void 0:t.getPlaybackType())!==s.YZ.NO_OP||!!this.options.handledLiveErrorCode)}get advertisement(){return this.core.getPlugin("advertisement")}bindEvents(){this.listenTo(this.core,n.s.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange);const{advertisement:e}=this;e&&(this.listenTo(e,n.s.ADVERTISEMENT_LOADED,this.onAdLoaded),this.listenTo(e,n.s.ADVERTISEMENT_STARTED,this.onPlay),this.listenTo(e,n.s.ADVERTISEMENT_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested));const{activeContainer:t}=this.core;t&&(this.listenTo(t,n.s.CONTAINER_STOP,this.onStop),this.listenTo(t,n.s.CONTAINER_PLAY,this.onPlay),this.listenTo(t,n.s.CONTAINER_SEEK,this.onSeek),this.listenTo(t,n.s.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(t,n.s.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(t,n.s.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(t,n.s.CONTAINER_ERROR,this.onError),this.listenTo(t,n.s.CONTAINER_ENDED,this.onEnded))}onError(e){e.level===s.Mk.Levels.FATAL&&(this.hasStartedPlaying=!1)}stopListening(){return clearTimeout(this.adLoadingTimeout),super.stopListening()}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onAdLoaded(){this.adLoadingTimeout=window.setTimeout((()=>this.onPlay()),r.AD_LOADING_TIMEOUT)}onPlay(){this.hasStartedPlaying=!0,this.update(),clearTimeout(this.adLoadingTimeout)}onSeek(){this.isLive&&!this.hasStartedPlaying||this.onPlay()}onStop(){this.hasStartedPlaying=!1,this.update()}onEnded(){const{replayTimeout:e,replay:t}=this.core.options;t&&0===e||window.setTimeout((()=>{this.onStop()}),r.END_TIMEOUT)}onAdContentResumeRequested(e){("postRoll"===e.blockType||"postRollMobile"===e.blockType)&&this.onStop()}shouldHideOnPlay(){var e;return!(null===(e=this.core.activeContainer)||void 0===e?void 0:e.playback.isAudioOnly)}update(){this.shouldRender&&this.updatePoster()}updatePoster(){this.hasStartedPlaying?this.hidePoster():this.showPoster()}showPoster(){this.$el.show(),this.trigger(n.s.POSTER_SHOW)}hidePoster(){this.shouldHideOnPlay()&&(this.$el.hide(),this.trigger(n.s.POSTER_HIDE))}render(){var e;if(!this.shouldRender)return this;const{poster:t}=this.options;if("string"==typeof t||"object"==typeof t&&void 0===t.custom){const e="string"==typeof t?t:t.url;this.$el.css({backgroundImage:`url(${e})`,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"})}else t&&this.$el.css({background:t.custom,backgroundColor:"transparent"});return null===(e=this.core.activeContainer)||void 0===e||e.$el.append(this.el),this.update(),this}}r.AD_LOADING_TIMEOUT=500,r.END_TIMEOUT=10},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,n,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);s&&o[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},6413:(e,t,i)=>{"use strict";i.d(t,{hD:()=>hs,Cp:()=>fs,NA:()=>us});const s="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function n(e){return e&&e.Math==Math?e:void 0}const r="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof i.g&&n(i.g)||function(){return this}()||{};function o(){return r}function a(e,t,i){const s=i||r,n=s.__SENTRY__=s.__SENTRY__||{};return n[e]||(n[e]=t())}const l=["debug","info","warn","error","log","assert","trace"],d={};function c(e){if(!("console"in r))return e();const t=r.console,i={},s=Object.keys(d);s.forEach((e=>{const s=d[e];i[e]=t[e],t[e]=s}));try{return e()}finally{s.forEach((e=>{t[e]=i[e]}))}}const h=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return s?l.forEach((i=>{t[i]=(...t)=>{e&&c((()=>{r.console[i](`Sentry Logger [${i}]:`,...t)}))}})):l.forEach((e=>{t[e]=()=>{}})),t}(),u=Object.prototype.toString;function f(e){switch(u.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return S(e,Error)}}function p(e,t){return u.call(e)===`[object ${t}]`}function g(e){return p(e,"ErrorEvent")}function m(e){return p(e,"DOMError")}function v(e){return p(e,"String")}function A(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function E(e){return null===e||A(e)||"object"!=typeof e&&"function"!=typeof e}function y(e){return p(e,"Object")}function T(e){return"undefined"!=typeof Event&&S(e,Event)}function b(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function S(e,t){try{return e instanceof t}catch(e){return!1}}function _(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const C=o();function R(e,t={}){if(!e)return"<unknown>";try{let i=e;const s=5,n=[];let r=0,o=0;const a=" > ",l=a.length;let d;const c=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||80;for(;i&&r++<s&&(d=L(i,c),!("html"===d||r>1&&o+n.length*l+d.length>=h));)n.push(d),o+=d.length,i=i.parentNode;return n.reverse().join(a)}catch(e){return"<unknown>"}}function L(e,t){const i=e,s=[];let n,r,o,a,l;if(!i||!i.tagName)return"";if(C.HTMLElement&&i instanceof HTMLElement&&i.dataset&&i.dataset.sentryComponent)return i.dataset.sentryComponent;s.push(i.tagName.toLowerCase());const d=t&&t.length?t.filter((e=>i.getAttribute(e))).map((e=>[e,i.getAttribute(e)])):null;if(d&&d.length)d.forEach((e=>{s.push(`[${e[0]}="${e[1]}"]`)}));else if(i.id&&s.push(`#${i.id}`),n=i.className,n&&v(n))for(r=n.split(/\s+/),l=0;l<r.length;l++)s.push(`.${r[l]}`);const c=["aria-label","type","name","title","alt"];for(l=0;l<c.length;l++)o=c[l],a=i.getAttribute(o),a&&s.push(`[${o}="${a}"]`);return s.join("")}function I(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function k(e,t){if(!Array.isArray(e))return"";const i=[];for(let t=0;t<e.length;t++){const s=e[t];try{_(s)?i.push("[VueViewModel]"):i.push(String(s))}catch(e){i.push("[value cannot be serialized]")}}return i.join(t)}function w(e,t=[],i=!1){return t.some((t=>function(e,t,i=!1){return!!v(e)&&(p(t,"RegExp")?t.test(e):!!v(t)&&(i?e===t:e.includes(t)))}(e,t,i)))}function P(e,t,i){if(!(t in e))return;const s=e[t],n=i(s);"function"==typeof n&&D(n,s),e[t]=n}function O(e,t,i){try{Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0})}catch(i){s&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function D(e,t){try{const i=t.prototype||{};e.prototype=t.prototype=i,O(e,"__sentry_original__",t)}catch(e){}}function N(e){return e.__sentry_original__}function M(e){if(f(e))return{message:e.message,name:e.name,stack:e.stack,...B(e)};if(T(e)){const t={type:e.type,target:x(e.target),currentTarget:x(e.currentTarget),...B(e)};return"undefined"!=typeof CustomEvent&&S(e,CustomEvent)&&(t.detail=e.detail),t}return e}function x(e){try{return"undefined"!=typeof Element&&S(e,Element)?R(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function B(e){if("object"==typeof e&&null!==e){const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}return{}}function F(e){return U(e,new Map)}function U(e,t){if(function(e){if(!y(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const i=t.get(e);if(void 0!==i)return i;const s={};t.set(e,s);for(const i of Object.keys(e))void 0!==e[i]&&(s[i]=U(e[i],t));return s}if(Array.isArray(e)){const i=t.get(e);if(void 0!==i)return i;const s=[];return t.set(e,s),e.forEach((e=>{s.push(U(e,t))})),s}return e}function $(){const e=r,t=e.crypto||e.msCrypto;let i=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(i=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&i())>>e/4).toString(16)))}function V(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function G(e){const{message:t,event_id:i}=e;if(t)return t;const s=V(e);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||i||"<unknown>":i||"<unknown>"}function j(e,t,i){const s=e.exception=e.exception||{},n=s.values=s.values||[],r=n[0]=n[0]||{};r.value||(r.value=t||""),r.type||(r.type=i||"Error")}function K(e,t){const i=V(e);if(!i)return;const s=i.mechanism;if(i.mechanism={type:"generic",handled:!0,...s,...t},t&&"data"in t){const e={...s&&s.data,...t.data};i.mechanism.data=e}}function H(e){if(e&&e.__sentry_captured__)return!0;try{O(e,"__sentry_captured__",!0)}catch(e){}return!1}function Y(e){return Array.isArray(e)?e:[e]}const W="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var z;function q(e){return new Q((t=>{t(e)}))}function X(e){return new Q(((t,i)=>{i(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(z||(z={}));class Q{constructor(e){Q.prototype.__init.call(this),Q.prototype.__init2.call(this),Q.prototype.__init3.call(this),Q.prototype.__init4.call(this),this._state=z.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Q(((i,s)=>{this._handlers.push([!1,t=>{if(e)try{i(e(t))}catch(e){s(e)}else i(t)},e=>{if(t)try{i(t(e))}catch(e){s(e)}else s(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Q(((t,i)=>{let s,n;return this.then((t=>{n=!1,s=t,e&&e()}),(t=>{n=!0,s=t,e&&e()})).then((()=>{n?i(s):t(s)}))}))}__init(){this._resolve=e=>{this._setResult(z.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(z.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===z.PENDING&&(b(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===z.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===z.RESOLVED&&e[1](this._value),this._state===z.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Z(){return a("globalEventProcessors",(()=>[]))}function J(e){Z().push(e)}function ee(e,t,i,s=0){return new Q(((n,r)=>{const o=e[s];if(null===t||"function"!=typeof o)n(t);else{const a=o({...t},i);W&&o.id&&null===a&&h.log(`Event processor "${o.id}" dropped event`),b(a)?a.then((t=>ee(e,t,i,s+1).then(n))).then(null,r):ee(e,a,i,s+1).then(n).then(null,r)}}))}function te(){return Date.now()/1e3}const ie=function(){const{performance:e}=r;if(!e||!e.now)return te;const t=Date.now()-e.now(),i=null==e.timeOrigin?t:e.timeOrigin;return()=>(i+e.now())/1e3}();let se;(()=>{const{performance:e}=r;if(!e||!e.now)return void(se="none");const t=36e5,i=e.now(),s=Date.now(),n=e.timeOrigin?Math.abs(e.timeOrigin+i-s):t,o=n<t,a=e.timing&&e.timing.navigationStart,l="number"==typeof a?Math.abs(a+i-s):t;o||l<t?n<=l?(se="timeOrigin",e.timeOrigin):se="navigationStart":se="dateNow"})();const ne="production";function re(e){const t=ie(),i={sid:$(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return F({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(i)};return e&&oe(i,e),i}function oe(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ie(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:$()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ae(e,t){let i={};t?i={status:t}:"ok"===e.status&&(i={status:"exited"}),oe(e,i)}const le=/\(error: (.*)\)/,de=/captureMessage|captureException/;function ce(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,i=0)=>{const s=[],n=e.split("\n");for(let e=i;e<n.length;e++){const i=n[e];if(i.length>1024)continue;const r=le.test(i)?i.replace(le,"$1"):i;if(!r.match(/\S*Error: /)){for(const e of t){const t=e(r);if(t){s.push(t);break}}if(s.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),de.test(t[t.length-1].function||"")&&(t.pop(),de.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(s)}}const he="<anonymous>";function ue(e){try{return e&&"function"==typeof e&&e.name||he}catch(e){return he}}function fe(e,t=100,i=1/0){try{return ge("",e,t,i)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function pe(e,t=3,i=102400){const s=fe(e,t);return n=s,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(n))>i?pe(e,t-1,i):s;var n}function ge(e,t,s=1/0,n=1/0,r=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(i){if(e)return!!t.has(i)||(t.add(i),!1);for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return t.push(i),!1},function(i){if(e)t.delete(i);else for(let e=0;e<t.length;e++)if(t[e]===i){t.splice(e,1);break}}]}()){const[o,a]=r;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(l=t)||l==l))return t;var l;const d=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==i.g&&t===i.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(_(t))return"[VueViewModel]";if(function(e){return y(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${ue(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const s=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!d.startsWith("[object "))return d;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:s;if(0===c)return d.replace("object ","");if(o(t))return"[Circular ~]";const h=t;if(h&&"function"==typeof h.toJSON)try{return ge("",h.toJSON(),c-1,n,r)}catch(e){}const u=Array.isArray(t)?[]:{};let f=0;const p=M(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(f>=n){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=ge(e,t,c-1,n,r),f++}return a(t),u}function me(e){const{spanId:t,traceId:i}=e.spanContext(),{data:s,op:n,parent_span_id:r,status:o,tags:a,origin:l}=ve(e);return F({data:s,op:n,parent_span_id:r,span_id:t,status:o,tags:a,trace_id:i,origin:l})}function ve(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}const Ae=new WeakMap;const Ee=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function ye(e,t){return He().captureException(e,function(e){if(e)return function(e){return e instanceof Be||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Ee.includes(e)))}(e)?{captureContext:e}:e}(t))}function Te(e,t){return He().captureEvent(e,t)}function be(e){He().configureScope(e)}function Se(e,t){He().addBreadcrumb(e,t)}function _e(){return He().getClient()}function Ce(){return He().getScope()}function Re(e){const t=_e(),i=Ye(),s=Ce(),{release:n,environment:o=ne}=t&&t.getOptions()||{},{userAgent:a}=r.navigator||{},l=re({release:n,environment:o,user:s.getUser()||i.getUser(),...a&&{userAgent:a},...e}),d=i.getSession();return d&&"ok"===d.status&&oe(d,{status:"exited"}),Le(),i.setSession(l),s.setSession(l),l}function Le(){const e=Ye(),t=Ce(),i=t.getSession()||e.getSession();i&&ae(i),Ie(),e.setSession(),t.setSession()}function Ie(){const e=Ye(),t=Ce(),i=_e(),s=t.getSession()||e.getSession();s&&i&&i.captureSession&&i.captureSession(s)}function ke(e=!1){e?Le():Ie()}function we(e){return e.transaction}function Pe(e,t,i){const s=t.getOptions(),{publicKey:n}=t.getDsn()||{},{segment:r}=i&&i.getUser()||{},o=F({environment:s.environment||ne,release:s.release,user_segment:r,public_key:n,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function Oe(e){const t=_e();if(!t)return{};const i=Pe(ve(e).trace_id||"",t,Ce()),s=we(e);if(!s)return i;const n=s&&s._frozenDynamicSamplingContext;if(n)return n;const{sampleRate:r,source:o}=s.metadata;null!=r&&(i.sample_rate=`${r}`);const a=ve(s);return o&&"url"!==o&&(i.transaction=a.description),i.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}(s)),t.emit&&t.emit("createDsc",i),i}function De(e,t){const{fingerprint:i,span:s,breadcrumbs:n,sdkProcessingMetadata:r}=t;!function(e,t){const{extra:i,tags:s,user:n,contexts:r,level:o,transactionName:a}=t,l=F(i);l&&Object.keys(l).length&&(e.extra={...l,...e.extra});const d=F(s);d&&Object.keys(d).length&&(e.tags={...d,...e.tags});const c=F(n);c&&Object.keys(c).length&&(e.user={...c,...e.user});const h=F(r);h&&Object.keys(h).length&&(e.contexts={...h,...e.contexts}),o&&(e.level=o),a&&(e.transaction=a)}(e,t),s&&function(e,t){e.contexts={trace:me(t),...e.contexts};const i=we(t);if(i){e.sdkProcessingMetadata={dynamicSamplingContext:Oe(t),...e.sdkProcessingMetadata};const s=ve(i).description;s&&(e.tags={transaction:s,...e.tags})}}(e,s),function(e,t){e.fingerprint=e.fingerprint?Y(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,i),function(e,t){const i=[...e.breadcrumbs||[],...t];e.breadcrumbs=i.length?i:void 0}(e,n),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,r)}function Ne(e,t){const{extra:i,tags:s,user:n,contexts:r,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:d,eventProcessors:c,attachments:h,propagationContext:u,transactionName:f,span:p}=t;Me(e,"extra",i),Me(e,"tags",s),Me(e,"user",n),Me(e,"contexts",r),Me(e,"sdkProcessingMetadata",a),o&&(e.level=o),f&&(e.transactionName=f),p&&(e.span=p),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),c.length&&(e.eventProcessors=[...e.eventProcessors,...c]),h.length&&(e.attachments=[...e.attachments,...h]),e.propagationContext={...e.propagationContext,...u}}function Me(e,t,i){if(i&&Object.keys(i).length){e[t]={...e[t]};for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[t][s]=i[s])}}let xe;class Be{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Fe()}static clone(e){return e?e.clone():new Be}clone(){const e=new Be;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&oe(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof Be){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(y(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Fe(),this}addBreadcrumb(e,t){const i="number"==typeof t?t:100;if(i<=0)return this;const s={timestamp:te(),...e},n=this._breadcrumbs;return n.push(s),this._breadcrumbs=n.length>i?n.slice(-i):n,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:i,_tags:s,_extra:n,_user:r,_level:o,_fingerprint:a,_eventProcessors:l,_propagationContext:d,_sdkProcessingMetadata:c,_transactionName:h,_span:u}=this;return{breadcrumbs:e,attachments:t,contexts:i,tags:s,extra:n,user:r,level:o,fingerprint:a||[],eventProcessors:l,propagationContext:d,sdkProcessingMetadata:c,transactionName:h,span:u}}applyToEvent(e,t={},i=[]){return De(e,this.getScopeData()),ee([...i,...Z(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const i=t&&t.event_id?t.event_id:$();if(!this._client)return h.warn("No client configured on scope - will not capture exception!"),i;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...t,event_id:i},this),i}captureMessage(e,t,i){const s=i&&i.event_id?i.event_id:$();if(!this._client)return h.warn("No client configured on scope - will not capture message!"),s;const n=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:n,...i,event_id:s},this),s}captureEvent(e,t){const i=t&&t.event_id?t.event_id:$();return this._client?(this._client.captureEvent(e,{...t,event_id:i},this),i):(h.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function Fe(){return{traceId:$(),spanId:$().substring(16)}}const Ue="7.120.3",$e=parseFloat(Ue),Ve=100;class Ge{constructor(e,t,i,s=$e){let n,r;this._version=s,t?n=t:(n=new Be,n.setClient(e)),i?r=i:(r=new Be,r.setClient(e)),this._stack=[{scope:n}],e&&this.bindClient(e),this._isolationScope=r}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();let i;try{i=e(t)}catch(e){throw this.popScope(),e}return b(i)?i.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const i=this._lastEventId=t&&t.event_id?t.event_id:$(),s=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:s,...t,event_id:i}),i}captureMessage(e,t,i){const s=this._lastEventId=i&&i.event_id?i.event_id:$(),n=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:n,...i,event_id:s}),s}captureEvent(e,t){const i=t&&t.event_id?t.event_id:$();return e.type||(this._lastEventId=i),this.getScope().captureEvent(e,{...t,event_id:i}),i}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:i,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:n=null,maxBreadcrumbs:r=Ve}=s.getOptions&&s.getOptions()||{};if(r<=0)return;const o={timestamp:te(),...e},a=n?c((()=>n(o,t))):o;null!==a&&(s.emit&&s.emit("beforeAddBreadcrumb",a,t),i.addBreadcrumb(a,r))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:i}=this.getStackTop();i&&e(t)}run(e){const t=Ke(this);try{e(this)}finally{Ke(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return W&&h.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const i=this._callExtensionMethod("startTransaction",e,t);return W&&!i&&(this.getClient()?h.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):h.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),i}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&ae(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:i}=this.getStackTop(),{release:s,environment:n=ne}=i&&i.getOptions()||{},{userAgent:o}=r.navigator||{},a=re({release:s,environment:n,user:t.getUser(),...o&&{userAgent:o},...e}),l=t.getSession&&t.getSession();return l&&"ok"===l.status&&oe(l,{status:"exited"}),this.endSession(),t.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),i=e.getSession();i&&t&&t.captureSession&&t.captureSession(i)}_callExtensionMethod(e,...t){const i=je().__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);W&&h.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function je(){return r.__SENTRY__=r.__SENTRY__||{extensions:{},hub:void 0},r}function Ke(e){const t=je(),i=We(t);return ze(t,e),i}function He(){const e=je();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=je()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!We(e).isOlderThan($e)||ze(e,new Ge),We(e);var t}(e)}function Ye(){return He().getIsolationScope()}function We(e){return a("hub",(()=>new Ge),e)}function ze(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const qe=[];function Xe(e){const t=e.defaultIntegrations||[],i=e.integrations;let s;t.forEach((e=>{e.isDefaultInstance=!0})),s=Array.isArray(i)?[...t,...i]:"function"==typeof i?Y(i(t)):t;const n=function(e){const t={};return e.forEach((e=>{const{name:i}=e,s=t[i];s&&!s.isDefaultInstance&&e.isDefaultInstance||(t[i]=e)})),Object.keys(t).map((e=>t[e]))}(s),r=function(e){for(let t=0;t<e.length;t++)if(!0==("Debug"===e[t].name))return t;return-1}(n);if(-1!==r){const[e]=n.splice(r,1);n.push(e)}return n}function Qe(e,t){for(const i of t)i&&i.afterAllSetup&&i.afterAllSetup(e)}function Ze(e,t,i){if(i[t.name])W&&h.log(`Integration skipped because it was already installed: ${t.name}`);else{if(i[t.name]=t,-1===qe.indexOf(t.name)&&(t.setupOnce(J,He),qe.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const i=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,s)=>i(t,s,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const i=t.processEvent.bind(t),s=Object.assign(((t,s)=>i(t,s,e)),{id:t.name});e.addEventProcessor(s)}W&&h.log(`Integration installed: ${t.name}`)}}function Je(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}const et=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],tt=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],it="InboundFilters",st=(e={})=>({name:it,setupOnce(){},processEvent(t,i,s){const n=s.getOptions(),r=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:et],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:tt],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,n);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(W&&h.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${G(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let i;e.message&&t.push(e.message);try{i=e.exception.values[e.exception.values.length-1]}catch(e){}return i&&i.value&&(t.push(i.value),i.type&&t.push(`${i.type}: ${i.value}`)),W&&0===t.length&&h.error(`Could not extract message for event ${G(e)}`),t}(e).some((e=>w(e,t)))}(e,t.ignoreErrors)?(W&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${G(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const i=e.transaction;return!!i&&w(i,t)}(e,t.ignoreTransactions)?(W&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${G(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const i=nt(e);return!!i&&w(i,t)}(e,t.denyUrls)?(W&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${G(e)}.\nUrl: ${nt(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const i=nt(e);return!i||w(i,t)}(e,t.allowUrls)&&(W&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${G(e)}.\nUrl: ${nt(e)}`),!0)}(t,r)?null:t}});function nt(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const i=e[t];if(i&&"<anonymous>"!==i.filename&&"[native code]"!==i.filename)return i.filename||null}return null}(t):null}catch(t){return W&&h.error(`Cannot extract url for event ${G(e)}`),null}}let rt;Je(it,st);const ot="FunctionToString",at=new WeakMap,lt=()=>({name:ot,setupOnce(){rt=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=N(this),i=at.has(_e())&&void 0!==t?t:this;return rt.apply(i,e)}}catch(e){}},setup(e){at.set(e,!0)}});Je(ot,lt);const dt=o();function ct(){if(!("fetch"in dt))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function ht(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const ut=o(),ft={},pt={};function gt(e,t){ft[e]=ft[e]||[],ft[e].push(t)}function mt(e,t){pt[e]||(t(),pt[e]=!0)}function vt(e,t){const i=e&&ft[e];if(i)for(const n of i)try{n(t)}catch(t){s&&h.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${ue(n)}\nError:`,t)}}const At=r;let Et;function yt(e){const t="history";gt(t,e),mt(t,Tt)}function Tt(){if(!function(){const e=ut.chrome,t=e&&e.app&&e.app.runtime,i="history"in ut&&!!ut.history.pushState&&!!ut.history.replaceState;return!t&&i}())return;const e=At.onpopstate;function t(e){return function(...t){const i=t.length>2?t[2]:void 0;if(i){const e=Et,t=String(i);Et=t,vt("history",{from:e,to:t})}return e.apply(this,t)}}At.onpopstate=function(...t){const i=At.location.href,s=Et;if(Et=i,vt("history",{from:s,to:i}),e)try{return e.apply(this,t)}catch(e){}},P(At.history,"pushState",t),P(At.history,"replaceState",t)}const bt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function St(e,t=!1){const{host:i,path:s,pass:n,port:r,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&n?`:${n}`:""}@${i}${r?`:${r}`:""}/${s?`${s}/`:s}${o}`}function _t(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Ct(e,t=[]){return[e,t]}function Rt(e,t){const[i,s]=e;return[i,[...s,t]]}function Lt(e,t){const i=e[1];for(const e of i)if(t(e,e[0].type))return!0;return!1}function It(e,t){return(t||new TextEncoder).encode(e)}function kt(e,t){const[i,s]=e;let n=JSON.stringify(i);function r(e){"string"==typeof n?n="string"==typeof e?n+e:[It(n,t),e]:n.push("string"==typeof e?It(e,t):e)}for(const e of s){const[t,i]=e;if(r(`\n${JSON.stringify(t)}\n`),"string"==typeof i||i instanceof Uint8Array)r(i);else{let e;try{e=JSON.stringify(i)}catch(t){e=JSON.stringify(fe(i))}r(e)}}return"string"==typeof n?n:function(e){const t=e.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(t);let s=0;for(const t of e)i.set(t,s),s+=t.length;return i}(n)}function wt(e,t){const i="string"==typeof e.data?It(e.data,t):e.data;return[F({type:"attachment",length:i.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),i]}const Pt={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Ot(e){return Pt[e]}function Dt(e){if(!e||!e.sdk)return;const{name:t,version:i}=e.sdk;return{name:t,version:i}}class Nt extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Mt(e,t={}){const i="string"==typeof t?t:t.tunnel,s="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return i||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",i=e.port?`:${e.port}`:"";return`${t}//${e.host}${i}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return i={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(i).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(i[e])}`)).join("&");var i}(e,s)}`}const xt="Not capturing exception because it's already been captured.";class Bt{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=bt.exec(e);if(!t)return void c((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[i,s,n="",r,o="",a]=t.slice(1);let l="",d=a;const h=d.split("/");if(h.length>1&&(l=h.slice(0,-1).join("/"),d=h.pop()),d){const e=d.match(/^\d+/);e&&(d=e[0])}return _t({host:r,pass:n,path:l,projectId:d,port:o,protocol:i,publicKey:s})}(e):_t(e);if(t&&function(e){if(!s)return!0;const{port:t,projectId:i,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(h.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(i.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(h.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(t))return t}(e.dsn):W&&h.warn("No DSN provided, client will not send events."),this._dsn){const t=Mt(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,i){if(H(e))return void(W&&h.log(xt));let s=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,i))).then((e=>{s=e}))),s}captureMessage(e,t,i,s){let n=i&&i.event_id;const r=A(e)?e:String(e),o=E(e)?this.eventFromMessage(r,t,i):this.eventFromException(e,i);return this._process(o.then((e=>this._captureEvent(e,i,s))).then((e=>{n=e}))),n}captureEvent(e,t,i){if(t&&t.originalException&&H(t.originalException))return void(W&&h.log(xt));let s=t&&t.event_id;const n=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,n||i).then((e=>{s=e}))),s}captureSession(e){"string"!=typeof e.release?W&&h.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),oe(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((i=>t.flush(e).then((e=>i&&e))))):q(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return W&&h.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];Ze(this,e,this._integrations),t||Qe(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let i=function(e,t,i,s){const n=Dt(i),r=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,i&&i.sdk);const o=function(e,t,i,s){const n=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!i&&s&&{dsn:St(s)},...n&&{trace:F({...n})}}}(e,n,s,t);return delete e.sdkProcessingMetadata,Ct(o,[[{type:r},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])i=Rt(i,wt(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(i);s&&s.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,i,s){const n=Dt(i);return Ct({sent_at:(new Date).toISOString(),...n&&{sdk:n},...!!s&&t&&{dsn:St(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,i){if(this._options.sendClientReports){const s="number"==typeof i?i:1,n=`${e}:${t}`;W&&h.log(`Recording outcome: "${n}"${s>1?` (${s} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+s}}captureAggregateMetrics(e){W&&h.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=function(e,t,i,s){const n={sent_at:(new Date).toISOString()};i&&i.sdk&&(n.sdk={name:i.sdk.name,version:i.sdk.version}),s&&t&&(n.dsn=St(t));const r=function(e){const t=function(e){let t="";for(const i of e){const e=Object.entries(i.tags),s=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${i.name}@${i.unit}:${i.metric}|${i.metricType}${s}|T${i.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Ct(n,[r])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const i={};return t.forEach((t=>{t&&Ze(e,t,i)})),i}(this,e),Qe(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let i=!1,s=!1;const n=t.exception&&t.exception.values;if(n){s=!0;for(const e of n){const t=e.mechanism;if(t&&!1===t.handled){i=!0;break}}}const r="ok"===e.status;(r&&0===e.errors||r&&i)&&(oe(e,{...i&&{status:"crashed"},errors:e.errors||Number(s||i)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Q((t=>{let i=0;const s=setInterval((()=>{0==this._numProcessing?(clearInterval(s),t(!0)):(i+=1,e&&i>=e&&(clearInterval(s),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,i,s=Ye()){const n=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),function(e,t,i,s,n,o){const{normalizeDepth:a=3,normalizeMaxBreadth:l=1e3}=e,d={...t,event_id:t.event_id||i.event_id||$(),timestamp:t.timestamp||te()},c=i.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:i,release:s,dist:n,maxValueLength:r=250}=t;"environment"in e||(e.environment="environment"in t?i:ne),void 0===e.release&&void 0!==s&&(e.release=s),void 0===e.dist&&void 0!==n&&(e.dist=n),e.message&&(e.message=I(e.message,r));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=I(o.value,r));const a=e.request;a&&a.url&&(a.url=I(a.url,r))}(d,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(d,c),void 0===t.type&&function(e,t){const i=r._sentryDebugIds;if(!i)return;let s;const n=Ae.get(t);n?s=n:(s=new Map,Ae.set(t,s));const o=Object.keys(i).reduce(((e,n)=>{let r;const o=s.get(n);o?r=o:(r=t(n),s.set(n,r));for(let t=r.length-1;t>=0;t--){const s=r[t];if(s.filename){e[s.filename]=i[n];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(d,e.stackParser);const h=function(e,t){if(!t)return e;const i=e?e.clone():new Be;return i.update(t),i}(s,i.captureContext);i.mechanism&&K(d,i.mechanism);const u=n&&n.getEventProcessors?n.getEventProcessors():[],f=(xe||(xe=new Be),xe).getScopeData();o&&Ne(f,o.getScopeData()),h&&Ne(f,h.getScopeData());const p=[...i.attachments||[],...f.attachments];return p.length&&(i.attachments=p),De(d,f),ee([...u,...Z(),...f.eventProcessors],d,i).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const i=e.debug_meta.images;Object.keys(t).forEach((e=>{i.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof a&&a>0?function(e,t,i){if(!e)return null;const s={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:fe(e.data,t,i)}})))},...e.user&&{user:fe(e.user,t,i)},...e.contexts&&{contexts:fe(e.contexts,t,i)},...e.extra&&{extra:fe(e.extra,t,i)}};return e.contexts&&e.contexts.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=fe(e.contexts.trace.data,t,i))),e.spans&&(s.spans=e.spans.map((e=>{const s=ve(e).data;return s&&(e.data=fe(s,t,i)),e}))),s}(e,a,l):e)))}(n,e,t,i,this,s).then((e=>{if(null===e)return e;const t={...s.getPropagationContext(),...i?i.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:s,spanId:n,parentSpanId:r,dsc:o}=t;e.contexts={trace:{trace_id:s,span_id:n,parent_span_id:r},...e.contexts};const a=o||Pe(s,this,i);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},i){return this._processEvent(e,t,i).then((e=>e.event_id),(e=>{if(W){const t=e;"log"===t.logLevel?h.log(t.message):h.warn(t)}}))}_processEvent(e,t,i){const s=this.getOptions(),{sampleRate:n}=s,r=Ut(e),o=Ft(e),a=e.type||"error",l=`before send for type \`${a}\``;if(o&&"number"==typeof n&&Math.random()>n)return this.recordDroppedEvent("sample_rate","error",e),X(new Nt(`Discarding event because it's not included in the random sample (sampling rate = ${n})`,"log"));const d="replay_event"===a?"replay":a,c=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,i,c).then((i=>{if(null===i)throw this.recordDroppedEvent("event_processor",d,e),new Nt("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return i;const n=function(e,t,i){const{beforeSend:s,beforeSendTransaction:n}=e;if(Ft(t)&&s)return s(t,i);if(Ut(t)&&n){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return n(t,i)}return t}(s,i,t);return function(e,t){const i=`${t} must return \`null\` or a valid event.`;if(b(e))return e.then((e=>{if(!y(e)&&null!==e)throw new Nt(i);return e}),(e=>{throw new Nt(`${t} rejected with ${e}`)}));if(!y(e)&&null!==e)throw new Nt(i);return e}(n,l)})).then((s=>{if(null===s){if(this.recordDroppedEvent("before_send",d,e),r){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new Nt(`${l} returned \`null\`, will not send event.`,"log")}const n=i&&i.getSession();if(!r&&n&&this._updateSessionFromEvent(n,s),r){const e=(s.sdkProcessingMetadata&&s.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const o=s.transaction_info;if(r&&o&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...o,source:e}}return this.sendEvent(s,t),s})).then(null,(e=>{if(e instanceof Nt)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Nt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{W&&h.error("Error while sending event:",e)}));W&&h.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[i,s]=t.split(":");return{reason:i,category:s,quantity:e[t]}}))}}function Ft(e){return void 0===e.type}function Ut(e){return"transaction"===e.type}const $t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Vt(e,t){const i=jt(e,t),s={type:t&&t.name,value:Ht(t)};return i.length&&(s.stacktrace={frames:i}),void 0===s.type&&""===s.value&&(s.value="Unrecoverable error caught"),s}function Gt(e,t){return{exception:{values:[Vt(e,t)]}}}function jt(e,t){const i=t.stacktrace||t.stack||"",s=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Kt.test(e.message))return 1}return 0}(t);try{return e(i,s)}catch(e){}return[]}const Kt=/Minified React error #\d+;/i;function Ht(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Yt(e,t,i,s,n){let r;if(g(t)&&t.error)return Gt(e,t.error);if(m(t)||p(t,"DOMException")){const n=t;if("stack"in t)r=Gt(e,t);else{const t=n.name||(m(n)?"DOMError":"DOMException"),o=n.message?`${t}: ${n.message}`:t;r=Wt(e,o,i,s),j(r,o)}return"code"in n&&(r.tags={...r.tags,"DOMException.code":`${n.code}`}),r}return f(t)?Gt(e,t):y(t)||T(t)?(r=function(e,t,i,s){const n=_e(),r=n&&n.getOptions().normalizeDepth,o={exception:{values:[{type:T(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:zt(t,{isUnhandledRejection:s})}]},extra:{__serialized__:pe(t,r)}};if(i){const t=jt(e,i);t.length&&(o.exception.values[0].stacktrace={frames:t})}return o}(e,t,i,n),K(r,{synthetic:!0}),r):(r=Wt(e,t,i,s),j(r,`${t}`,void 0),K(r,{synthetic:!0}),r)}function Wt(e,t,i,s){const n={};if(s&&i){const s=jt(e,i);s.length&&(n.exception={values:[{value:t,stacktrace:{frames:s}}]})}if(A(t)){const{__sentry_template_string__:e,__sentry_template_values__:i}=t;return n.logentry={message:e,params:i},n}return n.message=t,n}function zt(e,{isUnhandledRejection:t}){const i=function(e,t=40){const i=Object.keys(M(e));if(i.sort(),!i.length)return"[object has no keys]";if(i[0].length>=t)return I(i[0],t);for(let e=i.length;e>0;e--){const s=i.slice(0,e).join(", ");if(!(s.length>t))return e===i.length?s:I(s,t)}return""}(e),s=t?"promise rejection":"exception";return g(e)?`Event \`ErrorEvent\` captured as ${s} with message \`${e.message}\``:T(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${s}`:`Object captured as ${s} with keys: ${i}`}const qt=r;let Xt=0;function Qt(){return Xt>0}function Zt(e,t={},i){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(N(e))return e}catch(t){return e}const s=function(){const s=Array.prototype.slice.call(arguments);try{i&&"function"==typeof i&&i.apply(this,arguments);const n=s.map((e=>Zt(e,t)));return e.apply(this,n)}catch(e){throw Xt++,setTimeout((()=>{Xt--})),function(...e){const t=He();if(2===e.length){const[i,s]=e;return i?t.withScope((()=>(t.getStackTop().scope=i,s(i)))):t.withScope(s)}t.withScope(e[0])}((i=>{i.addEventProcessor((e=>(t.mechanism&&(j(e,void 0,void 0),K(e,t.mechanism)),e.extra={...e.extra,arguments:s},e))),ye(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])}catch(e){}D(s,e),O(e,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get:()=>e.name})}catch(e){}return s}class Jt extends Bt{constructor(e){!function(e,t,i=[t],s="npm"){const n=e._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${t}`,packages:i.map((e=>({name:`${s}:@sentry/${e}`,version:Ue}))),version:Ue}),e._metadata=n}(e,"browser",["browser"],qt.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&qt.document&&qt.document.addEventListener("visibilitychange",(()=>{"hidden"===qt.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,i,s){const n=Yt(e,t,i&&i.syntheticException||void 0,s);return K(n),n.level="error",i&&i.event_id&&(n.event_id=i.event_id),q(n)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",i){return function(e,t,i="info",s,n){const r=Wt(e,t,s&&s.syntheticException||void 0,n);return r.level=i,s&&s.event_id&&(r.event_id=s.event_id),q(r)}(this._options.stackParser,e,t,i,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void($t&&h.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:i,dsn:s}){const n={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!i&&!!s&&{dsn:St(s)}},r=function(e){return[{type:"user_report"},e]}(e);return Ct(n,[r])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,i){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,i)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void($t&&h.log("No outcomes to send"));if(!this._dsn)return void($t&&h.log("No dsn provided, will not send outcomes"));$t&&h.log("Sending outcomes:",e);const t=(i=e,Ct((s=this._options.tunnel&&St(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:te(),discarded_events:i}]]));var i,s;this._sendEnvelope(t)}}function ei(){"console"in r&&l.forEach((function(e){e in r.console&&P(r.console,e,(function(t){return d[e]=t,function(...t){vt("console",{args:t,level:e});const i=d[e];i&&i.apply(r.console,t)}}))}))}const ti=r;let ii,si,ni;function ri(){if(!ti.document)return;const e=vt.bind(null,"dom"),t=oi(e,!0);ti.document.addEventListener("click",t,!1),ti.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const i=ti[t]&&ti[t].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(P(i,"addEventListener",(function(t){return function(i,s,n){if("click"===i||"keypress"==i)try{const s=this,r=s.__sentry_instrumentation_handlers__=s.__sentry_instrumentation_handlers__||{},o=r[i]=r[i]||{refCount:0};if(!o.handler){const s=oi(e);o.handler=s,t.call(this,i,s,n)}o.refCount++}catch(e){}return t.call(this,i,s,n)}})),P(i,"removeEventListener",(function(e){return function(t,i,s){if("click"===t||"keypress"==t)try{const i=this,n=i.__sentry_instrumentation_handlers__||{},r=n[t];r&&(r.refCount--,r.refCount<=0&&(e.call(this,t,r.handler,s),r.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete i.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,i,s)}})))}))}function oi(e,t=!1){return i=>{if(!i||i._sentryCaptured)return;const s=function(e){try{return e.target}catch(e){return null}}(i);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(i.type,s))return;O(i,"_sentryCaptured",!0),s&&!s._sentryId&&O(s,"_sentryId",$());const n="keypress"===i.type?"input":i.type;(function(e){if(e.type!==si)return!1;try{if(!e.target||e.target._sentryId!==ni)return!1}catch(e){}return!0})(i)||(e({event:i,name:n,global:t}),si=i.type,ni=s?s._sentryId:void 0),clearTimeout(ii),ii=ti.setTimeout((()=>{ni=void 0,si=void 0}),1e3)}}const ai=r,li="__sentry_xhr_v3__";function di(){if(!ai.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;P(e,"open",(function(e){return function(...t){const i=Date.now(),s=v(t[0])?t[0].toUpperCase():void 0,n=function(e){if(v(e))return e;try{return e.toString()}catch(e){}}(t[1]);if(!s||!n)return e.apply(this,t);this[li]={method:s,url:n,request_headers:{}},"POST"===s&&n.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const r=()=>{const e=this[li];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}vt("xhr",{args:[s,n],endTimestamp:Date.now(),startTimestamp:i,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?P(this,"onreadystatechange",(function(e){return function(...t){return r(),e.apply(this,t)}})):this.addEventListener("readystatechange",r),P(this,"setRequestHeader",(function(e){return function(...t){const[i,s]=t,n=this[li];return n&&v(i)&&v(s)&&(n.request_headers[i.toLowerCase()]=s),e.apply(this,t)}})),e.apply(this,t)}})),P(e,"send",(function(e){return function(...t){const i=this[li];return i?(void 0!==t[0]&&(i.body=t[0]),vt("xhr",{args:[i.method,i.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)):e.apply(this,t)}}))}function ci(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!ct())return!1;if(ht(dt.fetch))return!0;let e=!1;const t=dt.document;if(t&&"function"==typeof t.createElement)try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),i.contentWindow&&i.contentWindow.fetch&&(e=ht(i.contentWindow.fetch)),t.head.removeChild(i)}catch(e){s&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&P(r,"fetch",(function(e){return function(...t){const{method:i,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,i]=e;return{url:ui(t),method:hi(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:ui(t),method:hi(t,"method")?String(t.method).toUpperCase():"GET"}}(t),n={args:t,fetchData:{method:i,url:s},startTimestamp:Date.now()};return vt("fetch",{...n}),e.apply(r,t).then((e=>(vt("fetch",{...n,endTimestamp:Date.now(),response:e}),e)),(e=>{throw vt("fetch",{...n,endTimestamp:Date.now(),error:e}),e}))}}))}function hi(e,t){return!!e&&"object"==typeof e&&!!e[t]}function ui(e){return"string"==typeof e?e:e?hi(e,"url")?e.url:e.toString?e.toString():"":""}const fi=["fatal","error","warning","log","info","debug"];function pi(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const i=t[6]||"",s=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:i,hash:s,relative:t[5]+i+s}}const gi="Breadcrumbs",mi=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:gi,setupOnce(){},setup(e){var i;t.console&&function(e){const t="console";gt(t,e),mt(t,ei)}(function(e){return function(t){if(_e()!==e)return;const i={category:"console",data:{arguments:t.args,logger:"console"},level:(s=t.level,"warn"===s?"warning":fi.includes(s)?s:"log"),message:k(t.args," ")};var s;if("assert"===t.level){if(!1!==t.args[0])return;i.message=`Assertion failed: ${k(t.args.slice(1)," ")||"console.assert"}`,i.data.arguments=t.args.slice(1)}Se(i,{input:t.args,level:t.level})}}(e)),t.dom&&(i=function(e,t){return function(i){if(_e()!==e)return;let s,n,r="object"==typeof t?t.serializeAttribute:void 0,o="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;o&&o>1024&&($t&&h.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=1024),"string"==typeof r&&(r=[r]);try{const e=i.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;s=R(t,{keyAttrs:r,maxStringLength:o}),n=function(e){if(!C.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}(t)}catch(e){s="<unknown>"}if(0===s.length)return;const a={category:`ui.${i.name}`,message:s};n&&(a.data={"ui.component_name":n}),Se(a,{event:i.event,name:i.name,global:i.global})}}(e,t.dom),gt("dom",i),mt("dom",ri)),t.xhr&&function(e){gt("xhr",e),mt("xhr",di)}(function(e){return function(t){if(_e()!==e)return;const{startTimestamp:i,endTimestamp:s}=t,n=t.xhr[li];if(!i||!s||!n)return;const{method:r,url:o,status_code:a,body:l}=n;Se({category:"xhr",data:{method:r,url:o,status_code:a},type:"http"},{xhr:t.xhr,input:l,startTimestamp:i,endTimestamp:s})}}(e)),t.fetch&&function(e){const t="fetch";gt(t,e),mt(t,ci)}(function(e){return function(t){if(_e()!==e)return;const{startTimestamp:i,endTimestamp:s}=t;if(s&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)Se({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:i,endTimestamp:s});else{const e=t.response;Se({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:i,endTimestamp:s})}}}(e)),t.history&&yt(function(e){return function(t){if(_e()!==e)return;let i=t.from,s=t.to;const n=pi(qt.location.href);let r=i?pi(i):void 0;const o=pi(s);r&&r.path||(r=n),n.protocol===o.protocol&&n.host===o.host&&(s=o.relative),n.protocol===r.protocol&&n.host===r.host&&(i=r.relative),Se({category:"navigation",data:{from:i,to:s}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){_e()===e&&Se({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:G(t)},{event:t})}}(e))}}};Je(gi,mi);const vi="Dedupe",Ai=()=>{let e;return{name:vi,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){return!!t&&(!!function(e,t){const i=e.message,s=t.message;return!(!i&&!s)&&(!(i&&!s||!i&&s)&&(i===s&&(!!yi(e,t)&&!!Ei(e,t))))}(e,t)||!!function(e,t){const i=Ti(t),s=Ti(e);return!(!i||!s)&&(i.type===s.type&&i.value===s.value&&(!!yi(e,t)&&!!Ei(e,t)))}(e,t))}(t,e))return $t&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function Ei(e,t){let i=bi(e),s=bi(t);if(!i&&!s)return!0;if(i&&!s||!i&&s)return!1;if(s.length!==i.length)return!1;for(let e=0;e<s.length;e++){const t=s[e],n=i[e];if(t.filename!==n.filename||t.lineno!==n.lineno||t.colno!==n.colno||t.function!==n.function)return!1}return!0}function yi(e,t){let i=e.fingerprint,s=t.fingerprint;if(!i&&!s)return!0;if(i&&!s||!i&&s)return!1;try{return!(i.join("")!==s.join(""))}catch(e){return!1}}function Ti(e){return e.exception&&e.exception.values&&e.exception.values[0]}function bi(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Je(vi,Ai);let Si=null;function _i(){Si=r.onerror,r.onerror=function(e,t,i,s,n){return vt("error",{column:s,error:n,line:i,msg:e,url:t}),!(!Si||Si.__SENTRY_LOADER__)&&Si.apply(this,arguments)},r.onerror.__SENTRY_INSTRUMENTED__=!0}let Ci=null;function Ri(){Ci=r.onunhandledrejection,r.onunhandledrejection=function(e){return vt("unhandledrejection",e),!(Ci&&!Ci.__SENTRY_LOADER__)||Ci.apply(this,arguments)},r.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Li="GlobalHandlers",Ii=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Li,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){!function(){const t="error";gt(t,(t=>{const{stackParser:i,attachStacktrace:s}=Pi();if(_e()!==e||Qt())return;const{msg:n,url:r,line:o,column:a,error:l}=t,d=void 0===l&&v(n)?function(e,t,i,s){const n=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let r=g(e)?e.message:e,o="Error";const a=r.match(n);a&&(o=a[1],r=a[2]);return ki({exception:{values:[{type:o,value:r}]}},t,i,s)}(n,r,o,a):ki(Yt(i,l||n,void 0,s,!1),r,o,a);d.level="error",Te(d,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})),mt(t,_i)}()}(e),wi("onerror")),t.onunhandledrejection&&(function(e){!function(){const t="unhandledrejection";gt(t,(t=>{const{stackParser:i,attachStacktrace:s}=Pi();if(_e()!==e||Qt())return;const n=function(e){if(E(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),r=E(n)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(n)}`}]}}:Yt(i,n,void 0,s,!0);r.level="error",Te(r,{originalException:n,mechanism:{handled:!1,type:"onunhandledrejection"}})})),mt(t,Ri)}()}(e),wi("onunhandledrejection"))}}};function ki(e,t,i,s){const n=e.exception=e.exception||{},r=n.values=n.values||[],o=r[0]=r[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],d=isNaN(parseInt(s,10))?void 0:s,c=isNaN(parseInt(i,10))?void 0:i,h=v(t)&&t.length>0?t:function(){try{return C.document.location.href}catch(e){return""}}();return 0===l.length&&l.push({colno:d,filename:h,function:"?",in_app:!0,lineno:c}),e}function wi(e){$t&&h.log(`Global Handler attached: ${e}`)}function Pi(){const e=_e();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}Je(Li,Ii);const Oi="HttpContext",Di=()=>({name:Oi,setupOnce(){},preprocessEvent(e){if(!qt.navigator&&!qt.location&&!qt.document)return;const t=e.request&&e.request.url||qt.location&&qt.location.href,{referrer:i}=qt.document||{},{userAgent:s}=qt.navigator||{},n={...e.request&&e.request.headers,...i&&{Referer:i},...s&&{"User-Agent":s}},r={...e.request,...t&&{url:t},headers:n};e.request=r}});function Ni(e,t,i=250,s,n,r,o){if(!(r.exception&&r.exception.values&&o&&S(o.originalException,Error)))return;const a=r.exception.values.length>0?r.exception.values[r.exception.values.length-1]:void 0;var l,d;a&&(r.exception.values=(l=Mi(e,t,n,o.originalException,s,r.exception.values,a,0),d=i,l.map((e=>(e.value&&(e.value=I(e.value,d)),e)))))}function Mi(e,t,i,s,n,r,o,a){if(r.length>=i+1)return r;let l=[...r];if(S(s[n],Error)){xi(o,a);const r=e(t,s[n]),d=l.length;Bi(r,n,d,a),l=Mi(e,t,i,s[n],n,[r,...l],r,d)}return Array.isArray(s.errors)&&s.errors.forEach(((s,r)=>{if(S(s,Error)){xi(o,a);const d=e(t,s),c=l.length;Bi(d,`errors[${r}]`,c,a),l=Mi(e,t,i,s,n,[d,...l],d,c)}})),l}function xi(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Bi(e,t,i,s){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:i,parent_id:s}}Je(Oi,Di);const Fi="LinkedErrors",Ui=(e={})=>{const t=e.limit||5,i=e.key||"cause";return{name:Fi,setupOnce(){},preprocessEvent(e,s,n){const r=n.getOptions();Ni(Vt,r.stackParser,r.maxValueLength,i,t,e,s)}}},$i=(Je(Fi,Ui),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"]),Vi="TryCatch",Gi=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Vi,setupOnce(){t.setTimeout&&P(qt,"setTimeout",ji),t.setInterval&&P(qt,"setInterval",ji),t.requestAnimationFrame&&P(qt,"requestAnimationFrame",Ki),t.XMLHttpRequest&&"XMLHttpRequest"in qt&&P(XMLHttpRequest.prototype,"send",Hi);const e=t.eventTarget;e&&(Array.isArray(e)?e:$i).forEach(Yi)}}};function ji(e){return function(...t){const i=t[0];return t[0]=Zt(i,{mechanism:{data:{function:ue(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Ki(e){return function(t){return e.apply(this,[Zt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:ue(e)},handled:!1,type:"instrument"}})])}}function Hi(e){return function(...t){const i=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in i&&"function"==typeof i[e]&&P(i,e,(function(t){const i={mechanism:{data:{function:e,handler:ue(t)},handled:!1,type:"instrument"}},s=N(t);return s&&(i.mechanism.data.handler=ue(s)),Zt(t,i)}))})),e.apply(this,t)}}function Yi(e){const t=qt,i=t[e]&&t[e].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(P(i,"addEventListener",(function(t){return function(i,s,n){try{"function"==typeof s.handleEvent&&(s.handleEvent=Zt(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ue(s),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[i,Zt(s,{mechanism:{data:{function:"addEventListener",handler:ue(s),target:e},handled:!1,type:"instrument"}}),n])}})),P(i,"removeEventListener",(function(e){return function(t,i,s){const n=i;try{const i=n&&n.__sentry_wrapped__;i&&e.call(this,t,i,s)}catch(e){}return e.call(this,t,n,s)}})))}Je(Vi,Gi);const Wi="?";function zi(e,t,i,s){const n={filename:e,function:t,in_app:!0};return void 0!==i&&(n.lineno=i),void 0!==s&&(n.colno=s),n}const qi=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Xi=/\((\S*)(?::(\d+))(?::(\d+))\)/,Qi=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Zi=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ji=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,es=ce([30,e=>{const t=qi.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Xi.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,i]=ts(t[1]||Wi,t[2]);return zi(i,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Qi.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Zi.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],i=t[1]||Wi;return[i,e]=ts(i,e),zi(e,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Ji.exec(e);return t?zi(t[2],t[1]||Wi,+t[3],t[4]?+t[4]:void 0):void 0}]),ts=(e,t)=>{const i=-1!==e.indexOf("safari-extension"),s=-1!==e.indexOf("safari-web-extension");return i||s?[-1!==e.indexOf("@")?e.split("@")[0]:Wi,i?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function is(e,t,i=function(e){const t=[];function i(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(s){if(!(void 0===e||t.length<e))return X(new Nt("Not adding Promise because buffer limit was reached."));const n=s();return-1===t.indexOf(n)&&t.push(n),n.then((()=>i(n))).then(null,(()=>i(n).then(null,(()=>{})))),n},drain:function(e){return new Q(((i,s)=>{let n=t.length;if(!n)return i(!0);const r=setTimeout((()=>{e&&e>0&&i(!1)}),e);t.forEach((e=>{q(e).then((()=>{--n||(clearTimeout(r),i(!0))}),s)}))}))}}}(e.bufferSize||30)){let s={};function n(n){const r=[];if(Lt(n,((t,i)=>{const n=Ot(i);if(function(e,t,i=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>i}(s,n)){const s=ss(t,i);e.recordDroppedEvent("ratelimit_backoff",n,s)}else r.push(t)})),0===r.length)return q();const o=Ct(n[0],r),a=t=>{Lt(o,((i,s)=>{const n=ss(i,s);e.recordDroppedEvent(t,Ot(s),n)}))};return i.add((()=>t({body:kt(o,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&W&&h.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),s=function(e,{statusCode:t,headers:i},s=Date.now()){const n={...e},r=i&&i["x-sentry-rate-limits"],o=i&&i["retry-after"];if(r)for(const e of r.trim().split(",")){const[t,i,,,r]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(i)for(const e of i.split(";"))"metric_bucket"===e&&r&&!r.split(";").includes("custom")||(n[e]=s+a);else n.all=s+a}else o?n.all=s+function(e,t=Date.now()){const i=parseInt(`${e}`,10);if(!isNaN(i))return 1e3*i;const s=Date.parse(`${e}`);return isNaN(s)?6e4:s-t}(o,s):429===t&&(n.all=s+6e4);return n}(s,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Nt)return W&&h.error("Skipped sending event because buffer is full."),a("queue_overflow"),q();throw e}))}return n.__sentry__baseTransport__=!0,{send:n,flush:e=>i.drain(e)}}function ss(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let ns;function rs(e,t=function(){if(ns)return ns;if(ht(qt.fetch))return ns=qt.fetch.bind(qt);const e=qt.document;let t=qt.fetch;if(e&&"function"==typeof e.createElement)try{const i=e.createElement("iframe");i.hidden=!0,e.head.appendChild(i);const s=i.contentWindow;s&&s.fetch&&(t=s.fetch),e.head.removeChild(i)}catch(e){$t&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return ns=t.bind(qt)}()){let i=0,s=0;return is(e,(function(n){const r=n.body.length;i+=r,s++;const o={body:n.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:i<=6e4&&s<15,...e.fetchOptions};try{return t(e.url,o).then((e=>(i-=r,s--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return ns=void 0,i-=r,s--,X(e)}}))}function os(e){return is(e,(function(t){return new Q(((i,s)=>{const n=new XMLHttpRequest;n.onerror=s,n.onreadystatechange=()=>{4===n.readyState&&i({statusCode:n.status,headers:{"x-sentry-rate-limits":n.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":n.getResponseHeader("Retry-After")}})},n.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&n.setRequestHeader(t,e.headers[t]);n.send(t.body)}))}))}const as=[st(),lt(),Gi(),mi(),Ii(),Ui(),Ai(),Di()];function ls(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=[...as]),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),qt.SENTRY_RELEASE&&qt.SENTRY_RELEASE.id&&(e.release=qt.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(i=e.stackParser||es,Array.isArray(i)?ce(...i):i),integrations:Xe(e),transport:e.transport||(ct()?rs:os)};var i;(function(e,t){!0===t.debug&&(W?h.enable():c((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Ce().update(t.initialScope);const i=new e(t);!function(e){const t=He().getStackTop();t.client=e,t.scope.setClient(e)}(i),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(i)})(Jt,t),e.autoSessionTracking&&(void 0!==qt.document?(Re({ignoreDuration:!0}),ke(),yt((({from:e,to:t})=>{void 0!==e&&e!==t&&(Re({ignoreDuration:!0}),ke())}))):$t&&h.warn("Session tracking in non-browser environment with @sentry/browser is not supported."))}var ds=i(9836),cs=i(377);const hs=()=>{(0,cs.yz)()||(ls({dsn:"https://558bae3cf10b7200a2fe24e5b94d3768@sentry-saas.rambler-co.ru/18",environment:"production",release:"1.146.0",sampleRate:.05,allowUrls:[new RegExp("https://vp.rambler.ru"),new RegExp("https://api.vp.rambler.ru")],ignoreErrors:[/AbortError/,/NetworkError/,/Failed to fetch/,/Resource blocked/,/need session/,/invalid login/,/rate limit exceed/,/api does not respond/,/webkit.messageHandlers/,/ResizeObserver loop limit/,/Timeout waiting for event/,/execute code from a freed script/]}),be((e=>{e.setTag("logger","player"),e.setTag("git_commit","f0ab10434d7b135457739dd053c7cfc98089cbe3")})))},us=(e,t)=>{(0,cs.yz)()||be((i=>{i.setTag(e,t)}))},fs=(e,t={})=>{(0,cs._o)()&&ds.t.error("captureException",e,t),(0,cs.yz)()||ye(e,(i=>{"errorCode"in t&&i.setTag("errorCode",t.errorCode),"code"in e&&i.setExtra("code",e.code);for(const e in t)t.hasOwnProperty(e)&&i.setExtra(e,t[e]);return i}))}},6434:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1354),n=i.n(s),r=i(6314),o=i.n(r)()(n());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),o.locals={};const a=o},6653:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AdErrorCode:()=>Vs,Advertisement:()=>kn,Plugin:()=>kn});var s={};i.r(s),i.d(s,{rambler:()=>on,universal:()=>an});var n={};i.r(n),i.d(n,{rambler:()=>hn,universal:()=>un});var r,o=i(9371),a=i(9200),l=i(6121),d=i(1724),c=i(1162);!function(e){e[e.VAST_XML_PARSING_ERROR=100]="VAST_XML_PARSING_ERROR",e[e.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",e[e.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",e[e.VAST_UNEXPECTED_AD_TYPE=200]="VAST_UNEXPECTED_AD_TYPE",e[e.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",e[e.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",e[e.VAST_UNEXPECTED_MEDIA_FILE=203]="VAST_UNEXPECTED_MEDIA_FILE",e[e.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",e[e.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",e[e.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",e[e.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",e[e.VIDEO_PLAY_ERROR=400]="VIDEO_PLAY_ERROR",e[e.VAST_MEDIA_FILE_NOT_FOUND=401]="VAST_MEDIA_FILE_NOT_FOUND",e[e.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",e[e.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",e[e.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",e[e.VAST_NONLINEAR_PLAYING_FAILED=500]="VAST_NONLINEAR_PLAYING_FAILED",e[e.VAST_NONLINEAR_DIMENSIONS_ERROR=501]="VAST_NONLINEAR_DIMENSIONS_ERROR",e[e.VAST_NONLINEAR_LOADING_FAILED=502]="VAST_NONLINEAR_LOADING_FAILED",e[e.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",e[e.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",e[e.VPAID_ERROR=901]="VPAID_ERROR"}(r||(r={}));const h=e=>Object.values(r).includes(e),u="complete",f="clickThrough",p="error",g="firstQuartile",m="impression",v="viewable",A="notViewable",E="viewUndetermined",y="midpoint",T="mute",b="pause",S="playerCollapse",_="exitFullscreen",C="playerExpand",R="fullscreen",L="progress",I="resume",k="rewind",w="skip",P="start",O="thirdQuartile",D="unmute",N="iconClick",M="iconView",x="closeLinear",B="creativeView",F={clickThrough:f,closeLinear:x,complete:u,creativeView:B,error:p,exitFullscreen:_,firstQuartile:g,fullscreen:R,iconClick:N,iconView:M,impression:m,midpoint:y,mute:T,notViewable:A,otherAdInteraction:"otherAdInteraction",pause:b,playerCollapse:S,playerExpand:C,progress:L,resume:I,rewind:k,skip:w,start:P,thirdQuartile:O,timeSpentViewing:"timeSpentViewing",unmute:D,viewable:v,viewUndetermined:E},U="acceptInvitation",V="adCollapse",G="close",j={acceptInvitation:U,adCollapse:V,close:G};var K,H=i(617);!function(e){e.CDATA="cdata",e.DOCUMENT="document",e.ELEMENT="element",e.TEXT="text"}(K||(K={}));const Y={1:K.ELEMENT,3:K.TEXT,4:K.TEXT},W={9:K.DOCUMENT},z=e=>{const t=(e=>{var t;const i=null!==(t=Y[e.nodeType])&&void 0!==t?t:W[e.nodeType];if(!i)throw new Error("Unsupported element type");return i})(e),i={type:t};if(e instanceof Element){const t=(e=>0===e.attributes.length?void 0:Object.fromEntries(Array.from(e.attributes).map((e=>{var t;return[e.nodeName,null!==(t=e.nodeValue)&&void 0!==t?t:void 0]}))))(e);t&&(i.attributes=t),i.name=e.nodeName.toLowerCase()}else(e instanceof Text||e instanceof CDATASection)&&(i.text=(e=>{var t;return null===(t=e.nodeValue)||void 0===t?void 0:t.replace("<![CDATA[","").replace("]]>","").trim()})(e));const s=(e=>{var t,i;if(!e.hasChildNodes())return;const s=Array.from(e.childNodes).filter((e=>Object.keys(Y).map(Number).includes(e.nodeType))),n=[];for(const e of s){const s=z(e);e instanceof Text&&!((null!==(i=null===(t=s.text)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>0)||n.push(s)}return n})(e);return s&&(i.elements=s),i},q=e=>{var t;return null!==(t=e.elements)&&void 0!==t?t:[]},X=(e,t)=>q(e).find((({name:e=""})=>e.toUpperCase()===t.toUpperCase())),Q=(e,t)=>"string"==typeof t?((e,t)=>q(e).filter((({name:e=""})=>e.toUpperCase()===t.toUpperCase())))(e,t):q(e),Z=e=>q(e)[0],J=e=>{const t=e&&Z(e);return t&&t.text},ee=e=>{var t;return null!==(t=e.attributes)&&void 0!==t?t:{}},te=(e,t)=>ee(e)[t],ie=new DOMParser,se=e=>{if("string"==typeof e){const t=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,i=e.match(t);if(i){const[,e,t,s,,n]=i,r=60*Number(e)*60*1e3+60*Number(t)*1e3+1e3*Number(s)+(n?Number(n):0);if(!isNaN(r))return r}}},ne=e=>(e=>/^\d+(\.\d+)?%$/g.test(e))(e)?e:se(e),re=e=>X(e,"linear"),oe=e=>{const t=Z(e),i=t&&X(t,"creatives");return i&&Q(i).find(re)},ae=e=>{const{event:t,offset:i}=ee(e),s=J(e);return{event:t,offset:i&&ne(i),uri:s}},le=(e,t)=>{const i=e&&oe(e),s=i&&X(i,"Linear"),n=s&&X(s,"TrackingEvents"),r=n&&Q(n,"Tracking");if(r&&r.length>0){const e=r.map(ae);if(!t)return e;const i=e.filter((({event:e})=>e===t));if(i.length>0)return i}},de=e=>{const t=`${e}`.match(/\d+/g);return Number((null==t?void 0:t[0])||"")},ce=e=>/\d+/.test(e)?de(e):e,he=e=>{const t=e&&oe(e),i=t&&X(t,"linear"),s=i&&X(i,"Icons"),n=s&&Q(s,"Icon");if(n&&n.length>0)return n.map((e=>Object.assign(Object.assign(Object.assign(Object.assign({},(e=>{const{duration:t,height:i,offset:s,program:n,pxratio:r,width:o,xPosition:a="right",yPosition:l="top"}=ee(e);return{duration:t&&se(t)||void 0,height:i&&de(i)||void 0,offset:s&&se(s)||void 0,program:n,pxratio:r&&parseInt(r,10)||void 0,width:o&&de(o)||void 0,xPosition:a&&ce(a),yPosition:l&&ce(l)}})(e)),(e=>{const t=X(e,"StaticResource"),i=X(e,"HTMLResource"),s=X(e,"IFrameResource");return t?{staticResource:J(t)}:i?{htmlResource:J(i)}:s?{iFrameResource:J(s)}:{staticResource:J(e)}})(e)),(e=>{const t=Q(e,"IconViewTracking").map((e=>J(e))).filter(Boolean);return 0===t.length?{}:{iconViewTracking:t}})(e)),(e=>{const t=X(e,"IconClicks"),i=t&&X(t,"IconClickThrough"),s=t&&Q(t,"IconClickTracking").map((e=>J(e))).filter(Boolean);return{iconClickThrough:i&&J(i),iconClickTracking:s&&s.length>0?s:void 0}})(e))))},ue=e=>"string"==typeof e?"true"===e:Boolean(e),fe=(e,t)=>{const i=te(e,"sequence"),s=te(t,"sequence"),n=i&&parseInt(i,10),r=s&&parseInt(s,10);return"string"!=typeof n||"string"!=typeof r?0:n<r?-1:n>r?1:0},pe=e=>{const t=e&&X(e,"VAST"),i=t&&Q(t,"Ad");return i&&i.length>0?i:[]},ge=e=>{const t=te(e,"sequence"),i=t&&parseInt(t,10);if("number"==typeof i&&!isNaN(i))return i},me=e=>Boolean(ge(e)),ve=e=>{const t=pe(e);return Array.isArray(t)&&t.filter(me).length>1},Ae=e=>Boolean(X(e||{},"Wrapper")),Ee=e=>Boolean(X(e||{},"Inline")),ye=e=>{const t=X(e,"Wrapper"),i=t&&X(t,"VastAdTagUri");return i&&J(i)},Te=e=>{const t=e&&Z(e),i=t&&X(t,"ViewableImpression"),s=i&&Q(i,"Viewable");if(s&&s.length>0)return s.map((e=>{var t;return null!==(t=J(e))&&void 0!==t?t:""})).filter(Boolean)},be=e=>{const t=e&&oe(e),i=t&&X(t,"UniversalAdId"),s=i&&J(i),n=t&&X(t,"Linear"),r=n&&X(n,"MediaFiles"),o=r&&Q(r,"MediaFile");if(o&&o.length>0)return o.map((e=>{const t=J(e),{apiFramework:i,bitrate:n,codec:r,delivery:o,height:a,id:l,maintainAspectRatio:d,maxBitrate:c,minBitrate:h,scalable:u,type:f,width:p}=ee(e);return{apiFramework:i,bitrate:n,codec:r,delivery:o,height:a,id:l,maintainAspectRatio:d,maxBitrate:c,minBitrate:h,scalable:u,src:t,type:f,universalAdId:s,width:p}}))},Se=e=>{let t=(e=>{const t=e&&oe(e),i=t&&X(t,"Linear"),s=i&&X(i,"MediaFiles"),n=s&&Q(s,"InteractiveCreativeFile");if(n&&n.length>0)return n.map((e=>{const{apiFramework:t,type:i}=ee(e);return{apiFramework:t,src:J(e),type:i}}))})(e);if(t)return t;const i=be(e);return i&&(t=i.filter((({apiFramework:e=""})=>"vpaid"===(null==e?void 0:e.toLowerCase()))).map((({apiFramework:e,src:t,type:i})=>({apiFramework:e,src:t,type:i}))),t.length>0)?t:void 0},_e=e=>{const t=e&&oe(e),i=t&&X(t,"Linear");return i&&X(i,"VideoClicks")},Ce=e=>{const t=_e(e),i=t&&X(t,"ClickThrough");return i&&J(i)},Re=e=>{const t=e&&oe(e),i=t&&X(t,"Linear"),s=i&&te(i,"skipoffset");return s&&ne(s)},Le=e=>{const t=(e=>{const t=/<Linear([\s\S]*)<\/Linear/gm.exec(e);return null==t?void 0:t[1]})(e),i=t&&(e=>{const t=/<AdParameters[\s\w="]*>([\s\S]*)<\/AdParameters>/gm.exec(e);return null==t?void 0:t[1].replace(/[\n\s]*<!\[CDATA\[[\n\s]*/,"").replace(/[\n\s]*\]\]>[\n\s]*$/,"").replace(/\]\]\]\]><!\[CDATA\[>/,"]]>").trim()})(t),s=!!t&&(e=>{const t=/<AdParameters[\s]*xmlEncoded="(.*?)">/gim.exec(e);return"true"===(null==t?void 0:t[1])})(t);return{AdParameters:i,xmlEncoded:s}},Ie=(e,t)=>{const i=new Image;return i.src=((e,t={})=>{let i=e;const s=(e=>{const t={};return Object.keys(e).forEach((i=>{const{[i]:s}=e;t[i.toUpperCase()]=s})),t})(t);return s.CACHEBUSTING||(s.CACHEBUSTING=Math.round(1e10*Math.random())),s.TIMESTAMP||(s.TIMESTAMP=(new Date).toISOString()),Object.keys(s).forEach((e=>{const t=encodeURIComponent(s[e]);i=i.replace(new RegExp(`\\[${e}\\]`,"gm"),t)})),i})(e,t),i},ke=(e,{errorCode:t,tracker:i=Ie})=>{e.forEach((({ad:e,parsedXML:s})=>{const n=e&&(e=>{const t=e&&Z(e),i=t&&Q(t,"Error");if(i&&i.length>0)return i.map((e=>{var t;return null!==(t=J(e))&&void 0!==t?t:""})).filter(Boolean)})(e)||(e=>{const t=e&&X(e,"VAST"),i=t&&Q(t,"Error");if(i&&i.length>0)return i.map((e=>{var t;return null!==(t=J(e))&&void 0!==t?t:""})).filter(Boolean)})(s);null==n||n.forEach((e=>e&&i(e,{errorCode:t})))}))},we=e=>(t,{data:i={},tracker:s=Ie})=>{t.forEach((({ad:t})=>{const n=t&&e(t);n&&(n&&"string"==typeof n?s(n,i):Array.isArray(n)&&n.map((({uri:e})=>e&&s(e,i))))}))},Pe=(...e)=>t=>{const i=[];return e.length>0&&e.forEach((e=>{const s=e(t);Array.isArray(s)&&s.length>0&&i.push(...s.map((e=>({uri:e}))))})),i},Oe=e=>t=>le(t,e),De={[f]:we(Pe((e=>{const t=e&&_e(e),i=t&&Q(t,"ClickTracking");if(i&&i.length>0)return i.map((e=>{var t;return null!==(t=J(e))&&void 0!==t?t:""})).filter(Boolean)}),(e=>{const t=_e(e),i=t&&Q(t,"CustomClick");if(i&&i.length>0)return i.map((e=>{var t;return null!==(t=J(e))&&void 0!==t?t:""})).filter(Boolean)}))),[x]:we(Oe(x)),[u]:we(Oe(u)),[B]:we(Oe(B)),[p]:ke,[_]:we(Oe(_)),[g]:we(Oe(g)),[R]:we(Oe(R)),[N]:(e,{data:t={},tracker:i=Ie})=>{const{iconClickTracking:s}=t;if(Array.isArray(s))for(const e of s)i(e,Object.assign({},t))},[M]:(e,{data:t={},tracker:i=Ie})=>{const{iconViewTracking:s}=t;if(Array.isArray(s))for(const e of s)i(e,Object.assign({},t))},[m]:we(Pe((e=>{const t=e&&Z(e),i=t&&Q(t,"Impression");if(i&&i.length>0)return i.map((e=>{var t;return null!==(t=J(e))&&void 0!==t?t:""})).filter(Boolean)}))),[y]:we(Oe(y)),[T]:we(Oe(T)),[A]:we(Pe((e=>{const t=e&&Z(e),i=t&&X(t,"ViewableImpression"),s=i&&Q(i,"NotViewable");if(s&&s.length>0)return s.map((e=>{var t;return null!==(t=J(e))&&void 0!==t?t:""})).filter(Boolean)}))),[b]:we(Oe(b)),[S]:we(Oe(S)),[C]:we(Oe(C)),[L]:(e,{data:t={},tracker:i=Ie})=>{const{progressUri:s}=t;s&&i(s,Object.assign({},t))},[I]:we(Oe(I)),[k]:we(Oe(k)),[w]:we(Oe(w)),[P]:we(Oe(P)),[O]:we(Oe(O)),[D]:we(Oe(D)),[v]:we(Pe(Te)),[E]:we(Pe((e=>{const t=e&&Z(e),i=t&&X(t,"ViewableImpression"),s=i&&Q(i,"ViewUndetermined");if(s&&s.length>0)return s.map((e=>{var t;return null!==(t=J(e))&&void 0!==t?t:""})).filter(Boolean)})))},Ne=e=>t=>((e,t)=>{const i=e&&oe(e),s=i&&X(i,"NonLinearAds"),n=s&&X(s,"TrackingEvents"),r=n&&Q(n,"Tracking");if(r&&r.length>0){const e=r.map((e=>{const{event:t}=ee(e);return{event:t,uri:J(e)}}));if(!t)return e;const i=e.filter((({event:e})=>e===t));if(i.length>0)return i}})(t,e),Me={[U]:we(Ne(U)),[V]:we(Ne(V)),[G]:we(Ne(G))},xe=e=>e.contentDocument||e.contentWindow&&e.contentWindow.document,Be="srcdoc"in document.createElement("iframe"),Fe=()=>{const e=document.createElement("iframe");return e.setAttribute("sandbox","allow-forms allow-popups allow-scripts allow-same-origin"),e.setAttribute("loading","eager"),e.style.margin="0",e.style.padding="0",e.style.border="none",e.style.width="0",e.style.height="0",e.style.position="absolute",e};var Ue;const $e=(()=>{let e=-1;return()=>"videoAdContainer_"+ ++e})(),Ve=Symbol("hidden");class Ge{constructor(e,t){if(this[Ue]={destroyed:!1,id:$e(),iframe:void 0,readyPromise:void 0},!(e instanceof Element))throw new TypeError("placeholder is not an Element");this.element=(()=>{const e=document.createElement("div");return e.classList.add("mol-video-ad-container"),e.style.width="100%",e.style.height="100%",e})(),this.isOriginalVideoElement=Boolean(t),t?this.videoElement=t:(this.videoElement=((e=document)=>{const t=e.createElement("video");return t.style.width="100%",t.style.height="100%",t})(),this.element.appendChild(this.videoElement)),e.appendChild(this.element)}async addScript(e,t={}){var i;if(this.isDestroyed())throw new Error("VideoAdContainer has been destroyed");let{iframe:s}=this[Ve];s||(s=await((e,t)=>new Promise(((i,s)=>{const n=((e,t)=>`<!DOCTYPE html>\n<html>\n  <head><meta charset='UTF-8'></head>\n  <body style='margin:0;padding:0'>\n  <script type='text/javascript'>window.parent.postMessage('${e}_ready', '${t}');<\/script>\n  </body>\n</html>`)(t,(()=>{const{origin:e,protocol:t,hostname:i,port:s}=window.location;return e||`${t}//${i}${s?`:${s}`:""}`})());let r=Fe();try{r.src="about:blank",e.appendChild(r);const t=xe(r);if(!t)throw new TypeError("iframe content document is not a Document");t.write(n)}catch(t){e.removeChild(r),Be?(r=Fe(),r.src="about:srcdoc",r.srcdoc=n,e.appendChild(r)):s(t)}const o=({data:e})=>{e===`${t}_ready`&&(window.removeEventListener("message",o),i(r))};window.addEventListener("message",o,!1)})))(this.element,this[Ve].id),this[Ve].iframe=s,this.executionContext=s.contentWindow);const n=null===(i=xe(s))||void 0===i?void 0:i.body;return((e,{async:t=!1,defer:i=!1,type:s,placeholder:n}={})=>{if(!e)throw new TypeError('Missing required "src" parameter');return new Promise(((r,o)=>{const a=document.createElement("script");let l=n;a.type=null!=s?s:"text/javascript",a.async=t,a.defer=i,a.onerror=()=>o(new URIError(`The script ${e} is not accessible.`)),a.onload=()=>r(a),l||(l=document.currentScript?document.currentScript.parentNode:document.head),a.src=e,null==l||l.appendChild(a)}))})(e,Object.assign({placeholder:n},t))}addSlot(e,t){if(this.isDestroyed())throw new Error("VideoAdContainer has been destroyed");this.slotElement||(this.slotElement=((e,t,i)=>{const s=document.createElement("DIV");return Object.assign(s.style,{border:"0px",cursor:"pointer",height:`${i}px`,left:"0px",margin:"0px",padding:"0px",position:"absolute",top:"0px",width:`${t}px`}),e.appendChild(s),s})(this.element,e,t))}destroy(){const e=new Promise((e=>{setTimeout((()=>{var t;null===(t=this.element.parentNode)||void 0===t||t.removeChild(this.element),e()}),1e3)}));return this.element.style.zIndex="-9999",this[Ve].destroyed=!0,e}isDestroyed(){return this[Ve].destroyed}}Ue=Ve;const je={"3gp":"video/3gpp",avi:"video/x-msvideo",flv:"video/x-flv",m3u8:"application/x-mpegURL",m4v:"video/mp4",mov:"video/quicktime",mp4:"video/mp4",mpd:"application/dash+xml",ogv:"video/ogg",ts:"video/MP2T",webm:"video/webm",wmv:"video/x-ms-wmv"},Ke=(e,t)=>{const{src:i,type:s}=t;return e.canPlayType(s||(e=>{const t=e.match(/\.([^./?]+)(\?[^/]+)?$/i),i=t&&t[1];return i&&je[i]||`video/${i}`})(i||""))},He=e=>{const t=Number(e.width)||0,i=Number(e.height)||0;return{aspectRatio:i?Math.floor(t/i*10)/10:0,height:i,width:t}},Ye=(e,t)=>{const[i]=((e,t)=>{const i=He(t);return e.slice(0).sort(((e,t)=>{const s=He(e),n=He(t),r=Math.abs(i.width-s.width),o=Math.abs(i.width-n.width);return Math.abs(i.aspectRatio-s.aspectRatio)-Math.abs(i.aspectRatio-n.aspectRatio)||r-o}))})(e,t);return i},We=(e,t,{getMediaFile:i=Ye})=>{const{element:s,videoElement:n}=t,r=s.getBoundingClientRect(),o=be(e),a=null==o?void 0:o.filter((e=>Ke(n,e)));return a&&i(a,r)},ze=(e,t,i)=>{const s=(...n)=>(e.removeEventListener(t,s),i(...n));return e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}},{progress:qe}=F,Xe=(e,t)=>(...i)=>{try{e(...i)}catch(e){null==t||t.error(e)}},{fullscreen:Qe,exitFullscreen:Ze,playerCollapse:Je,playerExpand:et}=F,{pause:tt,resume:it}=F,{rewind:st}=F,{skip:nt}=F,rt=()=>{const e=document.createElement("button");return e.classList.add("mol-vast-skip-control"),e.type="button",e.innerHTML="skip",e.style.position="absolute",e.style.bottom="15px",e.style.right="15px",e},{error:ot}=F,at="volumeChanged",lt="finish",dt="adProgress",{complete:ct,firstQuartile:ht,midpoint:ut,start:ft,thirdQuartile:pt}=F,gt=(e,t)=>100*e/t,mt=(e,t)=>gt(e,t)>=99,{mute:vt,unmute:At}=F,Et=e=>e.muted||0===e.volume,{impression:yt,creativeView:Tt}=F,bt=(e,t)=>{let i=String(e);for(;i.length<t;)i=`0${i}`;return i},St=e=>{const t=Math.floor(e/36e5),i=Math.floor(e/6e4%60),s=Math.floor(e/1e3%60),n=e%1e3;return`${bt(t,2)}:${bt(i,2)}:${bt(s,2)}.${bt(n,3)}`},{progress:_t}=F,Ct=e=>1e3*e,Rt=({offset:e,uri:t})=>{const i="number"==typeof e||Boolean(e&&(e=>/^\d+(\.\d+)?%$/g.test(e)&&!isNaN(parseFloat(e)))(e)),s="string"==typeof t&&t.length>0;return i&&s},Lt=(e,t)=>"number"==typeof e?e:parseFloat(e)/100*t,{clickThrough:It}=F,kt=()=>{const e=document.createElement("a");return e.classList.add("mol-vast-clickthrough"),e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0",e.style.top="0",e},wt=[({videoElement:e,element:t},i,{clickThroughUrl:s,pauseOnAdClick:n=!0,createClickControl:r=kt}={})=>{const o=t||e.parentNode,a=r(),l=!document.body.contains(a);return l&&o.appendChild(a),s&&a instanceof HTMLAnchorElement&&(a.href=s,a.target="_blank"),a.onclick=t=>{t.stopPropagation(),e.paused&&n?(t.preventDefault(),e.play()):(n&&e.pause(),i(It))},()=>{l&&o.removeChild(a)}},({videoElement:e},t)=>{const i=()=>{var i;const s=null!==(i=e.error)&&void 0!==i?i:void 0;s&&Object.defineProperty(s,"code",{get:()=>r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE}),t(ot,s)};return e.addEventListener("error",i),()=>{e.removeEventListener("error",i)}},({videoElement:e},t)=>{const i=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];let s=!1;const n=()=>{(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null)===e?(s=!0,t(et),t(Qe)):s&&(s=!1,t(Je),t(Ze))};for(const e of i)document.addEventListener(e,n);return()=>{for(const e of i)document.removeEventListener(e,n)}},({videoElement:e},t)=>{let i=!1;const s=()=>{const{currentTime:n}=e;!i&&n>0&&(i=!0,t(yt),t(Tt),e.removeEventListener("timeupdate",s))};return e.addEventListener("timeupdate",s),()=>{e.removeEventListener("timeupdate",s)}},({videoElement:e},t)=>{let i=!1,s=!0;const n=()=>{i?s&&(s=!1,t(it)):(i=!0,s=!1)},r=()=>{s||(s=!0,t(tt))};return e.addEventListener("play",n),e.addEventListener("pause",r),()=>{e.removeEventListener("play",n),e.removeEventListener("pause",r)}},({videoElement:e},t,{progressEvents:i=[]}={})=>{const{duration:s}=e,n=Ct(s);let r=0,o=Ct(e.currentTime),a=i.filter(Rt).map((({offset:e,uri:t})=>({offset:Lt(e,n),uri:t})));const l=()=>{const{currentTime:i}=e,s=Math.abs(i-o);r+=Ct(s),o=i;const{stillPending:n,toCall:d}=a.reduce(((e,t)=>{const{offset:i}=t;return"number"==typeof i&&r>=i?e.toCall.push(t):e.stillPending.push(t),e}),{stillPending:[],toCall:[]});a=n,d.forEach((({uri:e})=>{t(_t,{contentplayhead:St(r),progressUri:e})})),0===a.length&&e.removeEventListener("timeupdate",l)};return a.length>0&&e.addEventListener("timeupdate",l),()=>{e.removeEventListener("timeupdate",l)}},({videoElement:e},t)=>{let{currentTime:i}=e;const s=()=>{const s=e.currentTime-i;s<0&&Math.abs(s)>=1&&t(st),i=e.currentTime};return e.addEventListener("timeupdate",s),()=>{e.removeEventListener("timeupdate",s)}},(e,t,{skipoffset:i,createSkipControl:s=rt}={})=>{if(!i)return()=>null;let n;const{videoElement:r,element:o}=e,a=()=>{const e=1e3*r.currentTime;!n&&"number"==typeof i&&e>=i&&(n=s(),n.onclick=e=>{var i;return null===(i=e.stopPropagation)||void 0===i||i.call(e),t(nt),!1},o.appendChild(n),r.removeEventListener("timeupdate",a))};return r.addEventListener("timeupdate",a),()=>{r.removeEventListener("timeupdate",a),n&&o.removeChild(n)}},({videoElement:e},t)=>{let i=!1,s=!1,n=!1,r=!1,o=!1;const a={start:{isFired:e=>!i&&e>0,callback:()=>{i=!0,t(ft)}},firstQuartile:{isFired:(e,t)=>!s&&((e,t)=>gt(e,t)>=25)(e,t),callback:()=>{s=!0,t(ht)}},midpoint:{isFired:(e,t)=>!n&&((e,t)=>gt(e,t)>=50)(e,t),callback:()=>{n=!0,t(ut)}},thirdQuartile:{isFired:(e,t)=>!r&&((e,t)=>gt(e,t)>=75)(e,t),callback:()=>{r=!0,t(pt)}},complete:{isFired:(e,t)=>!o&&mt(e,t),callback:()=>{o=!0,t(ct)}}},l=()=>{const{duration:i}=e,{currentTime:s}=e;for(const e in a)if(a[e].isFired(s,i)){a[e].callback();break}t(dt)},d=()=>{const{duration:i}=e,{currentTime:s}=e;!o&&mt(s,i)&&(o=!0,t(ct)),e.removeEventListener("ended",d),e.removeEventListener("timeupdate",l)};return e.addEventListener("timeupdate",l),e.addEventListener("ended",d),()=>{e.removeEventListener("timeupdate",l),e.removeEventListener("ended",d)}},({videoElement:e},t)=>{let i=Et(e);const s=()=>{t(at),i&&!Et(e)?t(At):!i&&Et(e)&&t(vt),i=Et(e)};return e.addEventListener("volumechange",s),()=>{e.removeEventListener("volumechange",s)}}];class Pt extends Error{constructor(e){super(e),this.name="AdUnitError",Object.setPrototypeOf(this,Pt.prototype)}}var Ot=i(181),Dt=i.n(Ot);const Nt=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,Mt=()=>{},xt=["style","clientWidth","clientHeight"],Bt=Symbol("mutationHandlers"),Ft=Symbol("mutationObserver"),Ut=Symbol("resizeHandlers"),$t=Symbol("resizeElement"),Vt=(e,t,{threshold:i=20}={})=>{((e,t)=>{if(!(e instanceof Element))throw new TypeError("Target is not an Element node");if(!(t instanceof Function))throw new TypeError("Callback is not a function")})(e,t);const s=({style:e,clientHeight:t,clientWidth:i})=>[e.width,e.height,i,t].join(".");let n=s(e);const r=Dt()((()=>{const i=s(e);i!==n&&(n=i,t())}),i),o=Nt?((e,t)=>{var i;if(!e[Bt]){e[Bt]=[];const t=()=>{var t;null===(t=e[Bt])||void 0===t||t.forEach((e=>e()))};e[Ft]=((e,t)=>{const i=new Nt((e=>{for(let i=0;i<e.length;i++){const{attributeName:s}=e[i];s&&xt.includes(s)&&t()}}));return i.observe(e,{attributes:!0,characterData:!1,childList:!0}),i})(e,t)}return null===(i=e[Bt])||void 0===i||i.push(t),()=>{var i,s,n;e[Bt]=null===(i=e[Bt])||void 0===i?void 0:i.filter((e=>e!==t)),0===(null===(s=e[Bt])||void 0===s?void 0:s.length)&&(null===(n=e[Ft])||void 0===n||n.disconnect(),delete e[Bt],delete e[Ft])}})(e,r):Mt,a=((e,t)=>{var i;if(!e[Ut]){e[Ut]=[];const t=()=>{var t;null===(t=e[Ut])||void 0===t||t.forEach((e=>e()))};e[$t]=(e=>{const t=document.createElement("iframe");return t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; border: 0; overflow: hidden; pointer-events: none; z-index: -1;"),t.setAttribute("type","text/html"),t.setAttribute("loading","eager"),t.onload=()=>{t.contentWindow&&t.contentWindow.addEventListener("resize",e)},t.src="about:blank",t})(t),"static"===getComputedStyle(e).position&&(e.style.position="relative"),e.appendChild(e[$t])}return null===(i=e[Ut])||void 0===i||i.push(t),()=>{var i,s;e[Ut]=null===(i=e[Ut])||void 0===i?void 0:i.filter((e=>e!==t)),0===(null===(s=e[Ut])||void 0===s?void 0:s.length)&&(e.removeChild(e[$t]),delete e[Ut],delete e[$t])}})(e,r);return()=>{o(),a()}},{IntersectionObserver:Gt}=window,jt=()=>{},Kt=Symbol("intersectionHandlers"),Ht=Symbol("intersectionObserver");let Yt=[],Wt=[];const zt=(e,t,{threshold:i=100,viewabilityOffset:s=.4}={})=>{if(((e,t)=>{if(!(e instanceof Element))throw new TypeError("Target is not an Element node");if(!(t instanceof Function))throw new TypeError("Callback is not a function")})(e,t),!Gt)return t(void 0),jt;let n=!1;const r=Dt()((i=>{i.forEach((i=>{if(i.target===e){const e=!document.hidden&&i.intersectionRatio>s;e!==n&&(n=e,t(e))}})),Wt=i}),i),o=((e,t)=>{var i,s;if(!e[Kt]){e[Kt]=[];const t=(t,i)=>{var s;null===(s=e[Kt])||void 0===s||s.forEach((e=>e(t,i)))},s={root:null,rootMargin:"0px",threshold:[...new Array(11)].map(((e,t)=>t/10))};e[Ht]=new Gt(t,s),null===(i=e[Ht])||void 0===i||i.observe(e)}return null===(s=e[Kt])||void 0===s||s.push(t),()=>{var i,s,n;e[Kt]=null===(i=e[Kt])||void 0===i?void 0:i.filter((e=>e!==t)),0===(null===(s=e[Kt])||void 0===s?void 0:s.length)&&(null===(n=e[Ht])||void 0===n||n.disconnect(),delete e[Kt],delete e[Ht])}})(e,r),a=((e,t)=>{const i=()=>{Yt&&Yt.forEach((e=>e()))};return Yt.push(t),1===Yt.length&&document.addEventListener("visibilitychange",i),()=>{Yt=Yt.filter((e=>e!==t)),0===Yt.length&&document.removeEventListener("visibilitychange",i)}})(0,(()=>r(Wt)));return()=>{o(),a()}};class qt{constructor(e){this.events={},this.logger=e||console}on(e,t){const{events:i}=this;return(i[e]||(i[e]=[])).push(t),this}removeListener(e,t){const{events:i}=this,s=i[e]||(i[e]=[]);return i[e]=s.filter((e=>e!==t&&e._!==t)),this}removeAllListeners(e){return e?delete this.events[e]:this.events={},this}once(e,t){const i=(...s)=>{this.removeListener(e,i),t(...s)};return i._=t,this.on(e,i)}emit(e,...t){const{events:i}=this,s=i[e]||(i[e]=[]),n=s.length>0;return s.forEach((e=>{try{e(...t)}catch(e){e instanceof Error&&this.logger.error(e,e.stack)}})),n}}const Xt=({staticResource:e,htmlResource:t,iFrameResource:i}={})=>e||t||i||void 0,Qt="UNKNOWN",Zt=e=>1===e.length?e[0]:(e=>{const t=window.devicePixelRatio||0;return e.slice(0).sort(((e,i)=>Math.abs(t-(e.pxratio||0))-Math.abs(t-(i.pxratio||0))))})(e)[0],Jt=e=>{const t=e.map((({ad:e})=>e)).filter(Boolean).reduce(((e,t)=>[...e,...he(t)||[]]),[]);if(t.length>0){const e=(e=>((e,t)=>{const i={};return e.filter((e=>{const s=t(e);return!(!s||i.hasOwnProperty(s)||(i[s]=!0,0))}))})(e,Xt))(t);return(e=>{const t=(e=>e.reduce(((e,t)=>{var i,s;const n=null!==(i=t.program)&&void 0!==i?i:Qt;return null!==(s=e[n])&&void 0!==s||(e[n]=[]),e[n].push(t),e}),{}))(e);return Object.keys(t).reduce(((e,i)=>i===Qt?[...e,...t[Qt]]:[...e,Zt(t[i])]),[])})(e)}},ei=(e,t)=>{let i,s,n=!0;const r=new Promise(((e,t)=>{i=e,s=t})),o=ze(e,t,((...e)=>{n=!1,i(e)}));return{cancel:()=>{n&&(n=!1,o(),s(new Error("waitFor was canceled")))},promise:r}};class ti extends Error{constructor(e){super(e),this.name="FetchError",Object.setPrototypeOf(this,ti.prototype)}}const ii=document.createElement("div"),si=()=>{},ni=(e,{document:t,placeholder:i})=>new Promise(((s,n)=>{try{const r=((e,t)=>{const{staticResource:i,htmlResource:s,iFrameResource:n}=t;return i?((e,{document:t,data:i})=>{const{height:s,width:n}=i,r=t.createElement("img");return n&&(r.width=n),s&&(r.height=s),r.src=e,r})(i,{data:t,document:e}):s?((e,{document:t,data:i})=>{const{height:s,width:n}=i,r=t.createElement("div");return n&&(r.style.width=`${n}px`),s&&(r.style.height=`${s}px`),(async e=>{const t=await fetch(e),i=t.headers.get("Content-Type");if(t.status>=400){const e=new ti(t.statusText);throw e.response=t,e}if(!i||!(e=>{const t=e.toLowerCase();return["text/plain","text/html"].some((e=>t.includes(e)))})(i)){const e=new ti(`fetchHtml error, invalid Content-Type ${i}`);throw e.response=t,e}return t.text()})(e).then((e=>{r.innerHTML=e,r.dispatchEvent(new CustomEvent("load"))})).catch((()=>{r.dispatchEvent(new CustomEvent("error"))})),r})(s,{data:t,document:e}):n?((e,{document:t,data:i})=>{const{height:s,width:n}=i,r=t.createElement("iframe");return r.setAttribute("sandbox","allow-forms allow-popups allow-scripts"),r.setAttribute("loading","eager"),n&&(r.width=n.toString()),s&&(r.height=s.toString()),r.src=e,r.frameBorder="0",r.style.border="none",r})(n,{data:t,document:e}):ii})(t,e),o=ei(r,"error"),a=ei(r,"load"),l=()=>{i.contains(r)&&(i.removeChild(r),r.style.zIndex="0")};o.promise.then((()=>{a.cancel(),l(),n(new Error("Error loading resource"))})).catch(si),a.promise.then((()=>{o.cancel(),l(),s(r)})).catch(si),r.style.zIndex="-9999",i.appendChild(r)}catch(e){n(e)}})),ri=({height:e,width:t})=>e*t,oi=({left:e,width:t})=>e+t,ai=({left:e})=>e,li=({top:e})=>e,di=({top:e,height:t})=>e+t,ci=(e,t)=>{const i=((e,t)=>{const{drawnIcons:i,placeholder:s}=t,n=ri(s.getBoundingClientRect());return ri(e)+i.reduce(((e,t)=>{const{width:i,height:s}=t;return i&&s?e+ri({width:i,height:s}):e}),0)<=.35*n})(e,t),s=((e,{placeholder:t})=>{const i=t.getBoundingClientRect();return e.left>=0&&e.left+e.width<=i.width&&e.top>=0&&e.top+e.height<=i.height})(e,t),n=((e,{drawnIcons:t})=>!t.some((t=>((e,t)=>ai(e)<=oi(t)&&oi(e)>=ai(t)&&di(e)>=li(t)&&li(e)<=di(t))(e,t))))(e,t);return i&&s&&n},hi=()=>{},ui=async(e,{onIconClick:t,videoAdContainer:i,logger:s=console})=>{const{element:n,videoElement:r}=i,o=[],{iconsToShow:a,otherIcons:l}=e.reduce(((e,t)=>(((e,t)=>{const i=1e3*t.currentTime,s=1e3*t.duration,n="string"==typeof e.offset?parseInt(e.offset,10):e.offset||0,r=e.duration||s;return n<=i&&i-n<=r})(t,r)?e.iconsToShow.push(t):e.otherIcons.push(t),e)),{iconsToShow:[],otherIcons:[]});return l.forEach((({element:e})=>{var t;null===(t=null==e?void 0:e.parentNode)||void 0===t||t.removeChild(e)})),await a.reduce((async(e,i)=>{try{await e;const s=await(async(e,t)=>{var i;const{placeholder:s}=t,n=await(async(e,t)=>{if(!e.element){const i=await ni(e,t);(i instanceof HTMLIFrameElement||i instanceof HTMLImageElement)&&(i.width="100%",i.height="100%"),i.style.height="100%",i.style.width="100%",e.element=((e,t,{onIconClick:i=hi}={})=>{const s=document.createElement("a");return t.iconClickThrough&&(s.href=t.iconClickThrough,s.target="_blank"),t.iFrameResource&&(e.style.pointerEvents="none"),s.onclick=e=>{void 0!==Event.prototype.stopPropagation&&e.stopPropagation(),i(t)},s.appendChild(e),s})(i,e,t)}return e.element})(e,t),r=((e,t,{drawnIcons:i,placeholder:s})=>{const{signature:n}=e,r=t.getBoundingClientRect(),o=s.getBoundingClientRect(),a=e.width||r.width,l=e.height||r.height,d=e.xPosition||"right",c=e.yPosition||"top";let h,u;if((e=>!["left","right"].includes(String(e).toLowerCase()))(d))h=d;else{const e=i.filter((e=>e.xPosition===d&&e.yPosition===c));h=((e,t,i,s)=>{const n=i.reduce(((e,t)=>e+(t.width?t.width+1:0)),0);return"left"===e?n:s-n-t})(d,a,e,o.width)}var f,p,g;(e=>!["top","bottom"].includes(String(e).toLowerCase()))(c)?u=c:(f=c,p=l,g=o.height,u="top"===f?0:g-p);const m=`${h}-${u}_${a}x${l}`;return Object.assign(e,{height:l,left:h,signature:m,top:u,updated:n!==m,width:a})})(e,n,t);if(!ci(r,t))throw null===(i=n.parentNode)||void 0===i||i.removeChild(n),new Error("Icon can't be rendered");return n.parentNode&&!r.updated||s.appendChild(((e,t)=>{const{height:i,width:s,left:n,top:r,yPosition:o}=t;return e.style.position="absolute",e.style.left=`${n}px`,"bottom"===o?e.style.bottom="0":e.style.top=`${r}px`,e.style.height=`${i}px`,e.style.width=`${s}px`,e})(n,r)),r})(i,{document,drawnIcons:o,onIconClick:t,placeholder:n});o.push(s)}catch(e){s.log(e)}}),Promise.resolve()),o};const fi=Symbol("firstRenderPending"),pi=()=>{},gi=(e,t)=>{var{videoAdContainer:i,onIconView:s=pi,onIconClick:n=pi}=t,r=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(t,["videoAdContainer","onIconView","onIconClick"]);const{videoElement:o,element:a}=i;return e.forEach((e=>{e[fi]=!0})),{drawIcons:async()=>{const t=await ui(e,Object.assign({onIconClick:n,videoAdContainer:i},r));a.dispatchEvent(new CustomEvent("iconsDrawn")),t.forEach((e=>{e[fi]&&(s(e),e[fi]=!1)}))},hasPendingIconRedraws:()=>((e,t)=>{const i=1e3*t.currentTime,s=1e3*t.duration,n=e.filter((e=>!e.offset||e.offset<i)),r=e.filter((e=>e.duration&&e.duration<s));return n.length>0||r.length>0})(e,o),removeIcons:()=>(e=>e.filter((({element:e})=>Boolean(null==e?void 0:e.parentNode))).forEach((({element:e})=>{var t;return null===(t=null==e?void 0:e.parentNode)||void 0===t?void 0:t.removeChild(e)})))(e)}},mi=(e,t)=>{const{screen:i}=window;return e+100>i.width&&t+100>i.height?"fullscreen":e<400?"thumbnail":"normal"};var vi,Ai;const{start:Ei,viewable:yi,notViewable:Ti,viewUndetermined:bi,iconClick:Si,iconView:_i}=F,Ci=Symbol("_private"),Ri=Symbol("_protected");class Li extends qt{constructor(e,t,{viewability:i=!1,responsive:s=!1,logger:n=console,pauseOnAdClick:r=!0}={}){super(n),this[vi]={addIcons:()=>{if(!this.icons)return;const{drawIcons:e,hasPendingIconRedraws:t,removeIcons:i}=gi(this.icons,{logger:this.logger,onIconClick:e=>this.emit(Si,{adUnit:this,data:e,type:Si}),onIconView:e=>this.emit(_i,{adUnit:this,data:e,type:_i}),videoAdContainer:this.videoAdContainer});this[Ri].drawIcons=e,this[Ri].removeIcons=i,this[Ri].hasPendingIconRedraws=t,this[Ri].onFinishCallbacks.push(i)},setupViewableImpression:()=>{let e;const t=zt(this.videoAdContainer.element,(t=>{this.isFinished()||this[Ri].viewable||("boolean"==typeof t?t?e=window.setTimeout(this[Ci].handleViewableImpression,2e3,yi):clearTimeout(e):this[Ci].handleViewableImpression(bi))}),{viewabilityOffset:.5});this[Ri].onFinishCallbacks.push((()=>{t(),clearTimeout(e),this[Ri].viewable||this[Ci].handleViewableImpression(Ti)}))},handleViewableImpression:e=>{this[Ri].viewable=Boolean(e),this.emit(e,{adUnit:this,type:e})},setupViewability:()=>{const e=zt(this.videoAdContainer.element,(e=>{this.isFinished()||"boolean"==typeof e&&(e?this.resume():this.pause())}));this[Ri].onFinishCallbacks.push(e)},setupResponsive:()=>{const{element:e}=this.videoAdContainer;this[Ri].size={height:e.clientHeight,viewmode:mi(e.clientWidth,e.clientHeight),width:e.clientWidth};const t=Vt(e,(()=>{if(this.isFinished())return;const t=this[Ri].size,i=e.clientHeight,s=e.clientWidth;i===(null==t?void 0:t.height)&&s===(null==t?void 0:t.width)||this.resize(s,i,mi(s,i))}));this[Ri].onFinishCallbacks.push(t)}},this[Ai]={finished:!1,started:!1,viewable:!1,onErrorCallbacks:[],onFinishCallbacks:[],finish:()=>{this.isFinished()||(this[Ri].finished=!0,this[Ri].onFinishCallbacks.forEach((e=>e())),this.emit(lt,{adUnit:this,type:lt}))},throwIfCalled:()=>{throw new Error("VideoAdUnit method must be implemented on child class")},throwIfFinished:()=>{if(this.isFinished())throw new Error("VideoAdUnit is finished")}},this.vastChain=e,this.videoAdContainer=t,this.icons=Jt(e),this.pauseOnAdClick=r,this[Ri].onFinishCallbacks.push((e=>{let t=0,i=0;const s=()=>{e.duration-t>3&&(e.pause(),e.play(),e.currentTime=t)},n=()=>{const{currentTime:s}=e;Math.abs(s-t)>3?(i+=1,i>=2&&e.pause(),e.currentTime=t):t=s};return e.addEventListener("timeupdate",n),e.addEventListener("ended",s),()=>{e.removeEventListener("timeupdate",n),e.removeEventListener("ended",s)}})(this.videoAdContainer.videoElement)),this[Ci].addIcons(),e.some((({ad:e})=>e&&Te(e)))&&this.once(Ei,this[Ci].setupViewableImpression),i&&this.once(Ei,this[Ci].setupViewability),s&&this.once(Ei,this[Ci].setupResponsive)}start(){this[Ri].throwIfCalled()}resume(){this[Ri].throwIfCalled()}pause(){this[Ri].throwIfCalled()}skip(){this[Ri].throwIfCalled()}setVolume(e){this[Ri].throwIfCalled()}getVolume(){this[Ri].throwIfCalled()}cancel(){this[Ri].throwIfCalled()}duration(){this[Ri].throwIfCalled()}paused(){this[Ri].throwIfCalled()}currentTime(){this[Ri].throwIfCalled()}onFinish(e){if("function"!=typeof e)throw new TypeError("Expected a callback function");this[Ri].onFinishCallbacks.push(Xe(e,this.logger))}onError(e){if("function"!=typeof e)throw new TypeError("Expected a callback function");this[Ri].onErrorCallbacks.push(Xe(e,this.logger))}isFinished(){return this[Ri].finished}isStarted(){return this[Ri].started}async resize(e,t,i){var s,n,r,o;this[Ri].size={height:t,viewmode:i,width:e},this.isStarted()&&!this.isFinished()&&this.icons&&(await(null===(n=(s=this[Ri]).removeIcons)||void 0===n?void 0:n.call(s)),await(null===(o=(r=this[Ri]).drawIcons)||void 0===o?void 0:o.call(r)))}}var Ii;vi=Ci,Ai=Ri;const{complete:ki,error:wi,skip:Pi}=F,Oi=Symbol("_private");class Di extends Li{constructor(e,t,i={}){super(e,t,i),this[Ii]={handleMetric:(e,t)=>{var i;switch(e){case ki:this[Ri].finish();break;case wi:t instanceof Error&&(this.error=t,this.errorCode=(null===(i=this.error)||void 0===i?void 0:i.code)&&h(this.error.code)?this.error.code:r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE),this[Ri].onErrorCallbacks.forEach((e=>e(this.error,{adUnit:this,vastChain:this.vastChain}))),this[Ri].finish();break;case Pi:this.cancel()}this.emit(e,{adUnit:this,data:t,type:e})},drawIcons:async()=>{var e,t,i,s;if(!this.isFinished()&&(await(null===(t=(e=this[Ri]).drawIcons)||void 0===t?void 0:t.call(e)),(null===(s=(i=this[Ri]).hasPendingIconRedraws)||void 0===s?void 0:s.call(i))&&!this.isFinished())){const{videoElement:e}=this.videoAdContainer;ze(e,"timeupdate",this[Oi].drawIcons)}}},this.type="VAST";const{onFinishCallbacks:s}=this[Ri],{handleMetric:n}=this[Oi];this.hooks=i.hooks||{};const o=(({vastChain:e,videoAdContainer:t,hooks:i,pauseOnAdClick:s},n)=>{const[{ad:r}]=e,o=r&&Re(r),a=r&&Ce(r),l=(e=>e.map((({ad:e})=>e)).reduce(((e,t)=>[...e,...t&&le(t,qe)||[]]),[]).map((({offset:e,uri:t})=>({offset:e,uri:t}))))(e),d=Object.assign({clickThroughUrl:a,pauseOnAdClick:s,progressEvents:l,skipoffset:o},i),c=wt.map((e=>Xe(e(t,n,d))));return()=>c.forEach((e=>e()))})({hooks:this.hooks,pauseOnAdClick:this.pauseOnAdClick,vastChain:this.vastChain,videoAdContainer:this.videoAdContainer},n);s.push(o)}async start(){if(this[Ri].throwIfFinished(),this.isStarted())throw new Pt("VastAdUnit already started");const e=this.vastChain[0].ad,{videoElement:t}=this.videoAdContainer,i=e&&We(e,this.videoAdContainer,this.hooks);if(i)this.icons&&await this[Oi].drawIcons(),(null==i?void 0:i.src)&&(t.src=i.src,this.assetUri=i.src),t.play();else{const e=new Pt("Can't find a suitable media to play");e.code=r.VAST_LINEAR_ASSET_MISMATCH,this[Oi].handleMetric(wi,e)}this[Ri].started=!0}resume(){this.videoAdContainer.videoElement.play()}pause(){this.videoAdContainer.videoElement.pause()}skip(){const e=this.vastChain[0].ad,t=e&&Re(e),i=1e3*this.currentTime();"number"==typeof t&&i>=t&&this[Oi].handleMetric(Pi)}paused(){return this.videoAdContainer.videoElement.paused}setVolume(e){this.videoAdContainer.videoElement.volume=e}getVolume(){return this.videoAdContainer.videoElement.volume}cancel(){this[Ri].throwIfFinished(),this.videoAdContainer.videoElement.pause(),this[Ri].finish()}duration(){return this.isStarted()?this.videoAdContainer.videoElement.duration:0}currentTime(){return this.isStarted()?this.videoAdContainer.videoElement.currentTime:0}async resize(e,t,i){if(await super.resize(e,t,i),this.isStarted()&&!this.isFinished()){const e=this.vastChain[0].ad,{videoElement:t}=this.videoAdContainer,i=e&&We(e,this.videoAdContainer,this.hooks);i&&t.src!==i.src&&((e,t)=>{new Promise((i=>{const s={currentTime:e.currentTime,playing:!e.paused};s.playing&&e.pause(),t.src&&(e.src=t.src),e.load(),ze(e,"loadeddata",(()=>{e.currentTime=s.currentTime,s.playing&&e.play(),i()}))}))})(t,i)}}}Ii=Oi;const Ni=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],Mi=({type:e})=>Ni.some((t=>t===e)),xi="getAdIcons",Bi="AdLoaded",Fi="AdStarted",Ui="AdStopped",$i="AdSkipped",Vi="AdSizeChange",Gi="AdDurationChange",ji="AdRemainingTimeChange",Ki="AdVolumeChange",Hi="AdImpression",Yi="AdVideoStart",Wi="AdVideoFirstQuartile",zi="AdVideoMidpoint",qi="AdVideoThirdQuartile",Xi="AdVideoComplete",Qi="AdClickThru",Zi="AdUserAcceptInvitation",Ji="AdUserMinimize",es="AdUserClose",ts="AdPaused",is="AdPlaying",ss="AdError",ns=[Bi,Fi,Ui,$i,"AdSkippableStateChange",Vi,"AdLinearChange",Gi,"AdExpandedChange",ji,Ki,Hi,Yi,Wi,zi,qi,Xi,Qi,"AdInteraction",Zi,Ji,es,ts,is,"AdLog",ss],rs=(e,t,i)=>new Promise(((s,n)=>{let r;const o=()=>{"number"==typeof i&&window.clearTimeout(r),e.unsubscribe(o,t),s()};"number"==typeof i&&(r=window.setTimeout((()=>{e.unsubscribe(o,t),n(new Error(`Timeout waiting for event '${t}'`))}),i)),e.subscribe(o,t)})),os=(e,t,i,...s)=>{const n=rs(e,i,5e3),r=e[t];return null==r||r.apply(e,s),n},as=e=>{const t=e.split(".");return parseInt(t[0],10)};var ls;const{complete:ds,mute:cs,unmute:hs,skip:us,start:fs,firstQuartile:ps,pause:gs,resume:ms,impression:vs,midpoint:As,thirdQuartile:Es,clickThrough:ys,error:Ts,closeLinear:bs,creativeView:Ss}=F,_s=ns.filter((e=>e!==Bi)),Cs=Symbol("_private");class Rs extends Li{constructor(e,t,i={}){super(e,t,i),this[ls]={evtHandler:{[Qi]:(e,t,i)=>{i&&this[Cs].handleClickThrough(e),this.emit(ys,{adUnit:this,type:ys})},[Gi]:()=>{this.emit(dt,{adUnit:this,type:dt})},[ss]:e=>{this.error=(e=>{const t=e instanceof Error?e:new Pt("VPAID general error");return t.code&&h(t.code)||(t.code=r.VPAID_ERROR),t})(e),this.errorCode=this.error.code,this[Ri].onErrorCallbacks.forEach((e=>e(this.error,{adUnit:this,vastChain:this.vastChain}))),this[Ri].finish(),this.emit(Ts,{adUnit:this,type:Ts})},[Hi]:()=>{this[Cs].videoStart||this[Cs].handleVpaidEvent(Yi),this.emit(vs,{adUnit:this,type:vs})},[ts]:()=>{this[Cs].paused=!0,this.emit(gs,{adUnit:this,type:gs})},[is]:()=>{this[Cs].paused=!1,this.emit(ms,{adUnit:this,type:ms})},[ji]:()=>{this.emit(dt,{adUnit:this,type:dt})},[$i]:()=>{this.cancel(),this.emit(us,{adUnit:this,type:us})},[Fi]:()=>{this.emit(Ss,{adUnit:this,type:Ss})},[Ui]:()=>{this.emit(Ui,{adUnit:this,type:Ui}),this[Ri].finish()},[Zi]:()=>{this.emit(U,{adUnit:this,type:U})},[es]:()=>{this.emit(bs,{adUnit:this,type:bs}),this[Ri].finish()},[Ji]:()=>{this.emit(V,{adUnit:this,type:V})},[Xi]:()=>{this.emit(ds,{adUnit:this,type:ds})},[Wi]:()=>{this.emit(ps,{adUnit:this,type:ps})},[zi]:()=>{this.emit(As,{adUnit:this,type:As})},[Yi]:()=>{this[Cs].videoStart||(this[Cs].videoStart=!0,this[Cs].paused=!1,this.emit(fs,{adUnit:this,type:fs}))},[qi]:()=>{this.emit(Es,{adUnit:this,type:Es})},[Ki]:()=>{const e=this.getVolume();this.emit(at,{adUnit:this,type:at}),0!==e||this[Cs].muted||(this[Cs].muted=!0,this.emit(cs,{adUnit:this,type:cs})),e>0&&this[Cs].muted&&(this[Cs].muted=!1,this.emit(hs,{adUnit:this,type:hs}))}},handleVpaidEvent:(e,...t)=>{const i=this[Cs].evtHandler[e];i&&i(...t),this.emit(e,{adUnit:this,type:e})},handleClickThrough:e=>{if(this.paused()&&this.pauseOnAdClick)return void this.resume();const t=this.vastChain[0].ad,i="string"==typeof e&&e.length>0?e:t&&Ce(t);this.pauseOnAdClick&&this.pause(),i&&window.open(i,"_blank")},getIcons:()=>{var e;if(null===(e=this.creativeAd)||void 0===e?void 0:e[xi])try{this.creativeAd[xi]()||delete this.icons}catch(e){delete this.icons}},drawIcons:async()=>{var e,t,i,s;this.isFinished()||(await(null===(t=(e=this[Ri]).drawIcons)||void 0===t?void 0:t.call(e)),(null===(s=(i=this[Ri]).hasPendingIconRedraws)||void 0===s?void 0:s.call(i))&&!this.isFinished()&&setTimeout(this[Cs].drawIcons,500))},muted:!1,paused:!0},this.type="VPAID",this[Cs].loadCreativePromise=(async(e,t)=>{const i=(e[0].ad&&Se(e[0].ad)||[]).find(Mi);if(!i||!i.src)throw new TypeError("VastChain does not contain a supported vpaid creative");const{src:s,type:n}=i;return await t.addScript(s,{type:n}),t.executionContext.getVPAIDAd()})(e,t)}async start(){if(this[Ri].throwIfFinished(),this.isStarted())throw new Error("VpaidAdUnit already started");try{this.creativeAd=await this[Cs].loadCreativePromise;const e=rs(this.creativeAd,Bi);for(const e of _s)this.creativeAd.subscribe(this[Cs].handleVpaidEvent.bind(this,e),e);if(this[Cs].getIcons(),((e,t)=>{const i=e.handshakeVersion(t);if(!((e,t)=>{const i=as(t);return!(i<1)&&i<=as(e)})(t,i))throw new Error(`Creative Version '${i}' not supported`)})(this.creativeAd,"2.0"),((e,t,i)=>{const{width:s,height:n}=t.element.getBoundingClientRect(),r=mi(s,n),o=Le(i[0].XML);t.addSlot(s,n);const a={slot:t.slotElement,videoSlot:t.videoElement,videoSlotCanAutoPlay:t.isOriginalVideoElement};e.initAd(s,n,r,-1,o,a)})(this.creativeAd,this.videoAdContainer,this.vastChain),await e,this.videoAdContainer.isDestroyed())return;try{const{videoElement:e}=this.videoAdContainer;e.muted?(this[Cs].muted=!0,this.setVolume(0)):this.setVolume(e.volume),await os(this.creativeAd,"startAd",Fi),this.icons&&await this[Cs].drawIcons(),this[Ri].started=!0}catch(e){this.cancel()}}catch(e){throw this[Cs].handleVpaidEvent(ss,e),e}}resume(){var e;null===(e=this.creativeAd)||void 0===e||e.resumeAd()}pause(){var e;null===(e=this.creativeAd)||void 0===e||e.pauseAd()}skip(){var e;null===(e=this.creativeAd)||void 0===e||e.skipAd()}paused(){return this.isFinished()||this[Cs].paused}setVolume(e){var t;null===(t=this.creativeAd)||void 0===t||t.setAdVolume(e)}getVolume(){return this.creativeAd?this.creativeAd.getAdVolume():0}async cancel(){var e;this[Ri].throwIfFinished();try{const t=this.creativeAd&&rs(this.creativeAd,Ui,3e3);null===(e=this.creativeAd)||void 0===e||e.stopAd(),await t}catch(e){this[Ri].finish()}}duration(){if(!this.creativeAd)return 0;const e=this.creativeAd.getAdDuration();return e<0?0:e}currentTime(){if(!this.creativeAd)return 0;const e=this.creativeAd.getAdRemainingTime();return e<0?0:this.duration()-e}async resize(e,t,i){if(await super.resize(e,t,i),this.creativeAd){if(this.isStarted()&&!this.isFinished()){const i=this.videoAdContainer.slotElement;i&&(i.style.height=`${t}px`,i.style.width=`${e}px`)}return os(this.creativeAd,"resizeAd",Vi,e,t,i)}}}function Ls(e,t,i){const{tracker:s,type:n}=i,r="VPAID"===n?new Rs(e,t,i):new Di(e,t,i);return Object.values(F).forEach((t=>r.on(t,(t=>{const{type:i,data:n}=t,o={data:n,errorCode:r.errorCode,tracker:s};((e,t,{data:i,errorCode:s,tracker:n=Ie,logger:r=console})=>{const{[e]:o}=De;o?o(t,{data:Object.assign(Object.assign({},i),{errorCode:s}),errorCode:s,tracker:n}):r.error(`Event '${e}' cannot be tracked`)})(i,e,o)})))),Object.values(j).forEach((t=>r.on(t,(t=>{const i={data:t.data,tracker:s};((e,t,{data:i,tracker:s=Ie,logger:n=console})=>{const{[e]:r}=Me;r?r(t,{data:Object.assign({},i),tracker:s}):n.error(`Event '${e}' cannot be tracked`)})(t.type,e,i)})))),r}ls=Cs;class Is extends Error{constructor(e){super(e),this.name="VastError",Object.setPrototypeOf(this,Is.prototype)}}const ks=(e,{onAdReady:t})=>new Promise(((i,s)=>{const n=e=>()=>s(new Error(`Ad unit start rejected due to event '${e}'`));e.onError(s),e.on(P,(()=>i(e))),e.on(es,n(es)),e.on(x,n(x)),e.on(Ui,n(Ui)),t(e),e.start()})),ws=async(e,t,i)=>{((e,t)=>{if(!Array.isArray(e)||0===e.length)throw new TypeError("Invalid vastChain");if(!(t instanceof Ge))throw new TypeError("Invalid VideoAdContainer")})(e,t);try{return await((e,t,i)=>{const[{ad:s}]=e;if(!s||!Boolean(Se(s))){const e=new Is("No valid creative found in the passed VAST chain");throw e.code=r.VAST_MEDIA_FILE_NOT_FOUND,e}const n=Ls(e,t,Object.assign(Object.assign({},i),{type:"VPAID"}));return ks(n,i)})(e,t,i)}catch(s){const[{ad:n}]=e;if(n&&((e,t)=>{const i=be(e);return!!i&&i.some((e=>Ke(t,e)))})(n,t.videoElement))return((e,t,i)=>{const s=Ls(e,t,Object.assign(Object.assign({},i),{type:"VAST"}));return ks(s,i)})(e,t,i);throw s}};class Ps extends Error{constructor(e){super(e),this.name="FetchError",Object.setPrototypeOf(this,Ps.prototype)}}const Os=Symbol("requested"),Ds=e=>{e[Os]=!0},Ns=async(e,t,i=[])=>{var s;const n={requestTag:e};let o,a;try{const s=((e,t)=>{const[i]=e,s=Boolean(i)&&i.ad&&Ae(i.ad)&&i.ad?(e=>{const t=X(e,"Wrapper"),i={};if(t){const{allowMultipleAds:e,fallbackOnNoAd:s,followAdditionalWrappers:n}=ee(t);e&&(i.allowMultipleAds=ue(e)),s&&(i.fallbackOnNoAd=ue(s)),n&&(i.followAdditionalWrappers=ue(n))}return i})(i.ad):{};return Object.assign(Object.assign({},s),t)})(i,t);((e,{wrapperLimit:t=5})=>{if(e.length>t){const e=new Is("Wrapper Limit reached");throw e.code=r.VAST_TOO_MANY_REDIRECTS,e}})(i,s);let l=(async(e,t)=>{var i;let s;try{s=await(async(e,t={})=>{const i=Object.assign({credentials:"include"},t),s=await window.fetch(e,i);if(s.status>=400){const e=new Ps(s.statusText);throw e.response=s,e}return s})(e,t);const i=await s.text();return{response:s,XML:i}}catch(e){throw e.code=r.VAST_NONLINEAR_LOADING_FAILED,null!==(i=e.response)&&void 0!==i||(e.response=s),e}})(e,s);"number"==typeof s.timeout&&(a=s.timeout,o=Date.now(),l=Promise.race([l,new Promise(((e,t)=>{setTimeout((()=>{const e=new Is("RequestAd timeout");e.code=r.VAST_LOAD_TIMEOUT,t(e)}),a)}))]));const{response:d,XML:c}=await l;return n.response=d,n.XML=c,n.parsedXML=(e=>{try{return((e,t)=>{const i=e.parseFromString(t,"application/xml");return H.failOnParseError(i),z(i)})(ie,e)}catch(e){throw e.code=r.VAST_XML_PARSING_ERROR,e}})(n.XML),n.ad=(e=>{try{const t=(e=>{const t=pe(e);if(Array.isArray(t)&&t.length>0)return ve(e)?t.filter(me).sort(fe)[0]:t[0]})(e);if(t)return Ds(t),t;throw new Error("No Ad")}catch(e){throw e.code=r.VAST_NO_ADS_AFTER_WRAPPER,e}})(n.parsedXML),(({ad:e,parsedXML:t},{allowMultipleAds:i=!0,followAdditionalWrappers:s=!0})=>{if(!Ae(e)&&!Ee(e)){const e=new Is("Invalid VAST, ad contains neither Wrapper nor Inline");throw e.code=r.VAST_SCHEMA_VALIDATION_ERROR,e}if(ve(t)&&!i){const e=new Is("Multiple ads are not allowed");throw e.code=r.VAST_UNEXPECTED_MEDIA_FILE,e}if(Ae(e)&&!s){const e=new Is("To follow additional wrappers is not allowed");throw e.code=r.VAST_UNEXPECTED_AD_TYPE,e}})(n,s),Ae(n.ad)?(o&&a&&(a-=Date.now()-o),Ns(ye(n.ad),Object.assign(Object.assign({},s),{timeout:a}),[n,...i])):[n,...i]}catch(e){return h(e.code)||(e.code=r.UNKNOWN_ERROR),n.errorCode=e.code,n.error=e,null!==(s=n.response)&&void 0!==s||(n.response=e.response),[n,...i]}},Ms=(e,t)=>{(e=>{if(!Array.isArray(e))throw new TypeError("Invalid VAST chain");if(0===e.length)throw new Error("No next ad to request")})(e);const[i]=e,s=(({ad:e,parsedXML:t},{fallbackOnNoAd:i=!0,useAdBuffet:s=!1})=>{const n=pe(t).filter((e=>!(e=>Boolean(e[Os]))(e)));let r;if(ve(t))s&&(r=n.find((e=>!me(e)))),e&&!r&&(r=((e,t)=>{const i=(ge(e)||0)+1;return t.find((e=>ge(e)===i))})(e,n));else if(n.length>0&&i){const[e]=n;r=e}return r})(i,t);if(s){const n=[Object.assign(Object.assign({},i),{ad:s}),...e.slice(1)];return Ds(s),Ae(s)?Ns(ye(s),t,n):Promise.resolve(n)}return Ms(e.slice(1),t)};const xs=e=>(...t)=>{"function"==typeof e&&e(...t)},Bs=async(e,t,i)=>{var{isCanceled:s}=i,n=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(i,["isCanceled"]);let o,a,l;const{onAdStart:d,onError:c,onRunFinish:u}=n;try{if("number"==typeof n.timeout&&(a=Date.now()),o=await e(),s())return void u();if(n.timeout&&a){const e=Date.now();n.timeout-=e-a,a=e}if(((e,t)=>{var i;if(!e||0===e.length)throw new Error("Invalid VastChain");const[s]=e;if(!t.vpaidEnabled&&(e=>Boolean(e[0].ad&&Se(e[0].ad)))(e)){const e=new Is("VPAID ads are not supported by the current player");e.code=r.VAST_UNEXPECTED_AD_TYPE,s.errorCode=r.VAST_UNEXPECTED_AD_TYPE,s.error=e}if(s.error)throw s.error;"function"==typeof(null===(i=t.hooks)||void 0===i?void 0:i.validateVastResponse)&&t.hooks.validateVastResponse(e)})(o,n),l=await(async(e,t,i)=>{let s;try{const{timeout:n}=i;s=((e,t)=>{if(!e)throw new TypeError("placeholder is required");return new Ge(e,t)})(t,i.videoElement);let o=ws(e,s,i);if("number"==typeof n){let t,s=!1;const n=new Promise(((n,o)=>{t=window.setTimeout((()=>{const{tracker:t}=i;ke(e,{errorCode:r.VAST_MEDIA_LOAD_TIMEOUT,tracker:t}),s=!0,o(new Error("Timeout while starting the ad"))}),i.timeout)})),a=async()=>{const e=await o;return s?e.isStarted()&&e.cancel():clearTimeout(t),e};o=Promise.race([a(),n])}const a=await o;return a.onFinish((()=>{null==s||s.destroy()})),a}catch(e){throw null==s||s.destroy(),e}})(((e,{hooks:t})=>"function"==typeof(null==t?void 0:t.transformVastResponse)?t.transformVastResponse(e):e)(o,n),t,Object.assign({},n)),s())return l.cancel(),void u();l.onError(c),l.onFinish(u),d(l)}catch(e){if(((e,t,i)=>{var s;let n=(null===(s=null==t?void 0:t[0])||void 0===s?void 0:s.errorCode)||(null==e?void 0:e.code);t&&n&&(h(n)||(n=r.UNKNOWN_ERROR),ke(t,{errorCode:n,tracker:i}))})(e,o,n.tracker),c(e,{adUnit:l,vastChain:o}),!o||s())return void u();if(n.timeout&&a&&(n.timeout-=Date.now()-a),a&&n.timeout&&n.timeout<=0)return void u();Bs((()=>Ms(o,n)),t,Object.assign(Object.assign({},n),{isCanceled:s}))}},Fs=(e,t)=>{const i=e&&X(e,t);return i&&J(i)},Us=e=>{const[{ad:t}]=e,i=t&&(e=>{const t=Z(e);return t&&X(t,"Pricing")})(t);return i?{pricing:J(i),pricingCurrency:te(i,"currency"),pricingModel:te(i,"model")}:e.length>1?Us(e.slice(1)):{}},$s=e=>{const t=(e=>e.map((({ad:e})=>e&&te(e,"id"))).filter(Boolean))(e),i=(e=>e.map((({ad:e})=>e&&(e=>{const t=Z(e),i=t&&X(t,"AdSystem");return i&&J(i)})(e))).filter(Boolean))(e),s=(e=>e.map((({ad:e})=>e&&oe(e))).filter(Boolean))(e),n=(e=>e.map((e=>e&&te(e,"id"))).filter(Boolean))(s),r=(e=>e.map((e=>e&&te(e,"adId"))).filter(Boolean))(s),[{ad:o,parsedXML:a,XML:l}]=e,{pricing:d,pricingCurrency:c,pricingModel:h}=Us(e),{category:u,categoryAuthority:f}=(e=>{const t=e&&X(e,"InLine"),i=t&&X(t,"Category");return i?{category:J(i),categoryAuthority:te(i,"authority")}:{}})(o),p=(e=>e&&Z(e))(o),g=(e=>e&&oe(e))(o),m=(e=>e&&X(e,"Linear"))(g),v=(e=>e&&Fs(e,"AdServingId"))(p),A=(e=>{const t=e&&X(e,"VAST");return t?te(t,"version"):"unknown"})(a),E=(e=>e&&Fs(e,"Advertiser"))(p),y=(e=>e&&Fs(e,"AdTitle"))(p),T=(e=>e&&Fs(e,"Description"))(p),b=(e=>e&&Fs(e,"Duration"))(m),S=(e=>e?se(e):void 0)(b);let _,C,R,L,I,k,w,P,O,D,N,M,x=[],B=[],F=[],U=[],$=[];if(Ee(o)){[_,...x]=t,[C,...B]=i,[R,...F]=n,[L,...U]=r,I=o&&Ce(o),k=l?Le(l):void 0;const e=(e=>e&&X(e,"UniversalAdId"))(g);w=e&&J(e),P=e&&te(e,"idRegistry"),$=o&&be(o)||[],O=Boolean(o&&Se(o)),N=m&&te(m,"skipoffset"),M=N?se(N):void 0,D=Boolean(N)}else Ae(e[0].ad)&&(x=t,B=i,F=n,U=r);return{adId:_,adServingId:v,adSystem:C,adTitle:y,advertiser:E,adWrapperCreativeAdIds:U,adWrapperCreativeIds:F,adWrapperIds:x,adWrapperSystems:B,category:u,categoryAuthority:f,clickThroughUrl:I,creativeAdId:L,creativeData:k,creativeId:R,description:T,duration:b,durationInMs:S,mediaFiles:$,pricing:d,pricingCurrency:c,pricingModel:h,skipOffset:N,skipOffsetInMs:M,skippable:D,universalAdId:w,universalAdIdRegistry:P,vastVersion:A,vpaid:O}},Vs=Object.assign(Object.assign({},r),{VAST_UNEXPECTED_AD_SOURCE:299});class Gs{constructor(e){var t;this.clickElement="container",Object.assign(this,null!==(t=Gs.CHANNELS[e])&&void 0!==t?t:Gs.CHANNELS.unknown)}}Gs.CHANNELS={uchannelrussia:{allowBlock:!0,showBlockNumber:!1,maxBlockLength:1/0,reloadFailedAdTag:!0,getNextAdBlockSources:!1},rvtest:{clickElement:o.Pw.isMobile?"button":"container"},championat:{middleRollStartTime:2,clickElement:o.Pw.isMobile?"button":"container"},unknown:{reloadFailedAdTag:!1}};var js=i(5542),Ks=i(377),Hs=i(2452);class Ys{static getDeviceName(){return o.Pw.isAndroid?"1":o.Pw.isiOS?"0":""}static getDeviceType(){var e,t;const{isMobile:i,userAgent:s,os:n}=o.Pw;return"iPhone"===n.name||"iPod"===n.name?"1":"iPad"===n.name?"2":"Android"===n.name&&(null===(e=window.screen)||void 0===e?void 0:e.width)<=1280?"3":"Android"===n.name?"4":"Windows Phone"===n.name?"5":~s.indexOf("tizen")&&(null===(t=window.screen)||void 0===t?void 0:t.width)<=1280?"7":~s.indexOf("tizen")?"8":i?"15":~s.indexOf("SmartTV")?~s.indexOf("NetCast")||~s.indexOf("LG")?"9":~s.indexOf("Samsung")||~s.indexOf("X11")?"10":~s.indexOf("Philips")?"11":~s.indexOf("Sony")?"12":"14":"16"}static getBrowserName(){const{isMobile:e,userAgent:t,data:i,os:s}=o.Pw;if(~t.indexOf("YaBrowser")&&(i.name="YaBrowser"),~t.indexOf("OPR")&&(i.name="Opera"),~t.indexOf("Edg")&&(i.name="Edge"),e){if("YaBrowser"===i.name)return"6";if("Edge"===i.group||"Edge"===i.name)return"22";if("Opera"===i.group||"Opera"===i.name)return"24";if("Chrome Mobile"===i.name||"Chrome"===i.group)return"7";if("Android Browser"===i.name)return"20";if("Explorer"===i.group)return"21";if("Firefox"===i.group)return"23";if("Safari"===i.group&&"iPad"===s.name)return"25";if("Safari"===i.group&&"iPhone"===s.name)return"26"}else{if("Explorer"===i.group)return"1";if("YaBrowser"===i.name)return"6";if("Edge"===i.group||"Edge"===i.name)return"2";if("Opera"===i.group||"Opera"===i.name)return"9";if("Firefox"===i.group)return"3";if("Netscape"===i.group)return"4";if("Safari"===i.group)return"5";if("Chrome"===i.group)return"7";if("Mozilla"===i.group)return"8"}return"27"}static getScreenSize({width:e=640,minWidth:t=0}){const i=e<t?t:e;return i<400?"5":i<640?"0":i<960?"1":i<1280?"2":i>=1280?"3":"4"}}const Ws=(e,t)=>{var i;return e.url=t?null===(i=e.url)||void 0===i?void 0:i.replace(/puid3=\d+/g,`puid3=${t}`):e.url,e};let zs;const qs=(e,t)=>{if(!t.sspJparams)return e;try{const i=(0,Hs.al)(e),s=JSON.parse(i.jparams),n=t.sspJparams,{puid6:r}=n,o=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(n,["puid6"]),a=JSON.stringify(Object.assign(Object.assign(Object.assign({},s),o),r&&{section:r}));return(0,Hs.JT)(e,{jparams:a})}catch(t){return e}},Xs=async(e,t)=>{var i;const s=qs(e.replace(/^\/\//,"https://"),t),{provider:n,sspUserId:r,sspUserIdScope:o}=t;zs||(zs=await(null===(i=null==n?void 0:n.getFingerPrintUserId)||void 0===i?void 0:i.call(n)));const a=Object.assign(Object.assign(Object.assign({videoplayer:"@rambler-vp/player",videoplayerver:"1.146.0",outstreamvideo:0},zs?{fpruid:zs}:{}),r?{publisher_uid:r}:{}),o?{publisher_uid_scope:o}:{});return(0,Hs.JT)(s,a)},Qs=480,Zs=(e,t=0)=>o.Pw.isMobile||Number(e.width)>=Qs||t>2?e:{width:Qs,height:Number(e.height)*Qs/Number(e.width)},Js=[{name:"ssp.rambler.ru",allowBlock:!1,reloadFailedAdTag:!0,showRemainingTimeToEnd:!0,addUrlParams:Xs,getSize:Zs},{name:"(ad.mail.ru|(adfox.ru|yandex.ru/ads/adfox)/378150)",allowBlock:void 0,showBlockNumber:!0,maxBlockLength:2,reloadFailedAdTag:!0,showRemainingTimeToEnd:!0,addUrlParams:qs,getSize:Zs,getNextAdBlockSources:Ws},{name:"(adfox.ru|yandex.ru/ads/adfox).*(eid1=6806|puid30=6806)",allowBlock:!0,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e),getNextAdBlockSources(e,t){const i=Ws(e,t);return i.url=i.url.replace(/eid1=6806/g,"eid1=10620").replace(/puid6=1/g,"puid6=2").replace(/puid30=6806/g,"puid30=10620"),i}},{name:"(adfox.ru|yandex.ru/ads/adfox).*(eid1=11761|puid30=11761|puid6=2)",allowBlock:!0,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e),getNextAdBlockSources(e,t){const i=Ws(e,t);return i.url=i.url.replace(/eid1=6806/g,"eid1=10620").replace(/puid6=1/g,"puid6=2").replace(/puid30=6806/g,"puid30=10620"),i}},{name:"(adfox.ru|yandex.ru/ads/adfox).*(eid1=6798|puid30=6798)",allowBlock:!0,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e),getNextAdBlockSources(e,t){const i=Ws(e,t);return i.url=i.url.replace(/eid1=6806/g,"eid1=10620").replace(/puid6=1/g,"puid6=2").replace(/puid30=6806/g,"puid30=10620"),i}},{name:"(adfox.ru|yandex.ru/ads/adfox)",allowBlock:!1,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e)},{name:"muz-tv.ru",allowBlock:!1,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e)}];class en extends o.bI{static async preload(e){}static destroy(){}static canPlay(...e){return!0}static getAdPlaybackSources(e,t){const{referrer:i="",width:s}=t;if("VAST"===e.provider&&e.url){const t=new Date,n=i?(0,Hs.al)(i):{},r=encodeURIComponent(i.substring(0,en.MAX_REFERRER_LENGTH)),a=e.url.match(/(ssp\.rambler\.ru|ad\.mail)/)?Qs:0;e.url=e.url.replace(/\[pr\]/g,o.Aq.uniqueId("")).replace(/\[random\]/g,o.Aq.uniqueId("")).replace(/\[date\]/g,t.getDate().toString()).replace(/\[day\]/g,t.getDay().toString()).replace(/\[hours\]/g,t.getHours().toString()).replace(/\[device\]/g,Ys.getDeviceName()).replace(/\[all_device\]/g,Ys.getDeviceType()).replace(/\[gpmd_browser\]/g,Ys.getBrowserName()).replace(/\[dimensions\]/g,Ys.getScreenSize({width:s,minWidth:a})).replace(/\[referer\]/g,r).replace(/\[fullscreen\]/g,"1").replace(/\[arg_(.*?)\]/gi,((e,t)=>n[t]?`${t}=${n[t]}`:"")).replace(/\[var_(.*?)\]/gi,((e,t)=>n[t]?`${n[t]}`:""))}return e}get playerError(){return this.core.playerError}constructor(e,t){super(e),this.createError=o.yF.createError.bind(this),this.core=t}}en.MAX_REFERRER_LENGTH=250;class tn extends en{constructor(){super(...arguments),this.currentTime=0,this.onAdStarted=e=>{this.trigger(l.s.ADPLAYBACK_STARTED,this.sources)},this.onAdImpression=e=>{this.trigger(l.s.ADPLAYBACK_IMPRESSION,this.sources)},this.onAdPaused=e=>{this.trigger(l.s.ADPLAYBACK_PAUSED,this.sources)},this.onAdResumed=e=>{this.trigger(l.s.ADPLAYBACK_RESUMED,this.sources)},this.onAdComplete=e=>{this.trigger(l.s.ADPLAYBACK_COMPLETE,this.sources)},this.onAdUserClose=e=>{this.trigger(l.s.ADPLAYBACK_USER_CLOSE,this.sources)},this.onAdVolumeChange=e=>{this.trigger(l.s.ADPLAYBACK_VOLUME_CHANGE,this.sources)},this.onAdContentResumeRequested=e=>{this.trigger(l.s.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.sources)},this.onAdError=e=>{const t=e.getError(),i=t.getErrorCode(),s=i===this.ima.AdError.ErrorCode.VIDEO_PLAY_ERROR||i===this.ima.AdError.ErrorCode.FAILED_TO_REQUEST_ADS||i===this.ima.AdError.ErrorCode.VAST_ASSET_MISMATCH||i===this.ima.AdError.ErrorCode.VAST_LINEAR_ASSET_MISMATCH||i===this.ima.AdError.ErrorCode.VAST_NONLINEAR_ASSET_MISMATCH||i===this.ima.AdError.ErrorCode.VAST_ASSET_NOT_FOUND||i===this.ima.AdError.ErrorCode.NONLINEAR_DIMENSIONS_ERROR||i===this.ima.AdError.ErrorCode.COMPANION_REQUIRED_ERROR||i===this.ima.AdError.ErrorCode.UNKNOWN_ERROR||i===this.ima.AdError.ErrorCode.AUTOPLAY_DISALLOWED,n=this.createError({code:`${null!=i?i:c.n4}`,description:t.getMessage(),level:o.Mk.Levels.WARN,raw:Object.assign(Object.assign({},this.sources),{canRefetch:s,code:i})});this.trigger(l.s.ADPLAYBACK_ERROR,n)}}static canPlay(e){var t;return!!(null===(t=window.google)||void 0===t?void 0:t.ima)&&"VAST"===e.provider&&!!e.url}static async preload(e){var t,i;if(!(null===(t=window.google)||void 0===t?void 0:t.ima))return null!==(i=tn.preloadPromise)&&void 0!==i||(tn.preloadPromise=(async()=>{var e,t,i,s;try{await(0,js.k0)(`//imasdk.googleapis.com/js/sdkloader/${(0,Ks._o)()?"ima3_debug":"ima3"}.js`),null===(e=window.google)||void 0===e||e.ima.settings.setPlayerType("@rambler-vp/player"),null===(t=window.google)||void 0===t||t.ima.settings.setPlayerVersion("1.146.0"),null===(i=window.google)||void 0===i||i.ima.settings.setLocale(o.Aq.getBrowserLanguage()),null===(s=window.google)||void 0===s||s.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE)}catch(e){delete tn.preloadPromise}})()),await tn.preloadPromise}static destroy(){var e;null===(e=tn.adDisplayContainer)||void 0===e||e.destroy(),delete tn.adDisplayContainer}get adDisplayContainer(){return tn.adDisplayContainer}set adDisplayContainer(e){tn.adDisplayContainer=e}get allowBlock(){return!1}get reloadFailedAdTag(){return!1}get name(){return"imaPlayback"}get ima(){var e;return null===(e=window.google)||void 0===e?void 0:e.ima}async load(e){var t;e.url=e.url.replace(/\[sessionid\]/g,o.Aq.uniqueId("")),e.url.match("ssp.rambler.ru")&&(e.url=null!==(t=await Xs(e.url,this.core.options))&&void 0!==t?t:e.url),this.sources=e,this.createAdDisplayContainer(),this.createAdsRequest(),await this.loadAdsManager(),this.initAdsManager()}createAdDisplayContainer(){if(!this.adDisplayContainer){const{containerElement:e,videoElement:t,clickTrackingElement:i}=this.options;this.adDisplayContainer=new this.ima.AdDisplayContainer(e,t,i),this.adDisplayContainer.initialize()}}createAdsRequest(){const{videoElement:e,muted:t}=this.options;this.adsRequest=new this.ima.AdsRequest,this.adsRequest.adTagUrl=this.sources.url,this.adsRequest.vastLoadTimeout=tn.VAST_LOAD_TIMEOUT,this.adsRequest.linearAdSlotWidth=e.offsetWidth,this.adsRequest.linearAdSlotHeight=e.offsetHeight,this.adsRequest.nonLinearAdSlotWidth=e.offsetWidth,this.adsRequest.nonLinearAdSlotHeight=e.offsetHeight,this.adsRequest.setAdWillAutoPlay(!0),this.adsRequest.setAdWillPlayMuted(t)}async loadAdsManager(){let e;try{this.adsLoader=new this.ima.AdsLoader(this.adDisplayContainer),e=await new Promise(((e,t)=>{this.adsLoader.addEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e),this.adsLoader.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,t),this.adsLoader.requestAds(this.adsRequest)}))}catch(e){return void this.onAdError(e)}const t=new this.ima.AdsRenderingSettings;t.loadVideoTimeout=tn.LOAD_VIDEO_TIMEOUT,t.restoreCustomPlaybackStateOnAdBreakComplete=!1,this.adsManager=e.getAdsManager(this.options.videoElement,t),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOADED,(e=>this.onAdLoaded(e))),this.adsManager.addEventListener(this.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested),this.adsManager.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.addEventListener(this.ima.AdEvent.Type.STARTED,this.onAdStarted),this.adsManager.addEventListener(this.ima.AdEvent.Type.IMPRESSION,this.onAdImpression),this.adsManager.addEventListener(this.ima.AdEvent.Type.AD_PROGRESS,(e=>this.onAdProgress(e))),this.adsManager.addEventListener(this.ima.AdEvent.Type.VOLUME_CHANGED,this.onAdVolumeChange),this.adsManager.addEventListener(this.ima.AdEvent.Type.VOLUME_MUTED,this.onAdVolumeChange),this.adsManager.addEventListener(this.ima.AdEvent.Type.PAUSED,this.onAdPaused),this.adsManager.addEventListener(this.ima.AdEvent.Type.RESUMED,this.onAdResumed),this.adsManager.addEventListener(this.ima.AdEvent.Type.COMPLETED,this.onAdComplete),this.adsManager.addEventListener(this.ima.AdEvent.Type.USER_CLOSE,this.onAdUserClose),this.adsManager.addEventListener(this.ima.AdEvent.Type.CLICK,(e=>this.onAdClick(e))),this.adsManager.addEventListener(this.ima.AdEvent.Type.SKIPPED,(e=>this.onAdSkipped(e)))}initAdsManager(){if(this.adsManager){const{videoElement:e}=this.options;this.adsManager.init(e.offsetWidth,e.offsetHeight,this.ima.ViewMode.NORMAL),this.trigger(l.s.ADPLAYBACK_READY,this.sources)}}onAdLoaded(e){this.ad=e.getAd(),this.trigger(l.s.ADPLAYBACK_LOADED,this.sources),this.isLinear()||this.options.videoElement.play()}onAdProgress(e){const{duration:t=0,currentTime:i=0}=e.getAdData();this.currentTime=i,this.trigger(l.s.ADPLAYBACK_PROGRESS,Object.assign(Object.assign({},this.sources),{current:i,total:t}))}onAdClick(e){this.trigger(l.s.ADPLAYBACK_CLICK,this.sources)}onAdSkipped(e){this.trigger(l.s.ADPLAYBACK_SKIPPED,this.sources)}start(){var e;null===(e=this.adsManager)||void 0===e||e.start()}pause(){var e;null===(e=this.adsManager)||void 0===e||e.pause()}resume(){var e;null===(e=this.adsManager)||void 0===e||e.resume()}skip(){var e,t,i,s;(null===(e=this.adsManager)||void 0===e?void 0:e.getAdSkippableState())?null===(t=this.adsManager)||void 0===t||t.skip():(null===(i=this.adsManager)||void 0===i||i.addEventListener(this.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(e=>this.onAdSkipped(e))),null===(s=this.adsManager)||void 0===s||s.stop())}setVolume(e){var t;null===(t=this.adsManager)||void 0===t||t.setVolume(e/100)}getVolume(){var e,t;return 100*(null!==(t=null===(e=this.adsManager)||void 0===e?void 0:e.getVolume())&&void 0!==t?t:0)}resize(e){var t;null===(t=this.adsManager)||void 0===t||t.resize(e.width,e.height,this.ima.ViewMode.NORMAL)}getDuration(){var e,t;return null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getDuration())&&void 0!==t?t:0}getCurrentTime(){return this.currentTime}isLinear(){var e,t;return null===(t=null===(e=this.ad)||void 0===e?void 0:e.isLinear())||void 0===t||t}getAdSystem(){var e,t;return null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getAdSystem())&&void 0!==t?t:c.n4}getAdType(){var e,t;const i=null===(t=null===(e=this.ad)||void 0===e?void 0:e.getApiFramework())||void 0===t?void 0:t.toLowerCase();return i?"vpaid"===i?"vpaid":"vast":"unknown"}destroy(){var e,t,i;null===(e=this.adsLoader)||void 0===e||e.contentComplete(),null===(t=this.adsLoader)||void 0===t||t.destroy(),null===(i=this.adsManager)||void 0===i||i.destroy()}}tn.VAST_LOAD_TIMEOUT=8e3,tn.LOAD_VIDEO_TIMEOUT=1e4,tn.adDisplayContainer=null;var sn=i(997),nn=i(6413),rn=i(5008);const on=(0,rn.L)((()=>i.e(5327).then(i.bind(i,5327)))),an=(0,rn.L)((()=>i.e(4929).then(i.bind(i,4929))));class ln extends en{constructor(){super(...arguments),this.currentTime=0,this.started=!1,this.destroyed=!1,this.isResizedAfter2s=!1,this.adSystem={},this.errors=[],this.extensions={startTime:0,skipTime:-1,skipTime2:-1,controls:!0,isClickable:!0,WOW:!1,Allowblock:!1,CustomTracking:{}},this.applyContainerClassNames=Dt()((()=>{var e,t;null===(t=null===(e=this.getContainerClassNames)||void 0===e?void 0:e.call(this,{height:this.core.el.offsetHeight}))||void 0===t||t.forEach((e=>{this.core.$el.toggleClass(...e)}))}),60),this.onAdLoaded=(e=[])=>(this.errors=[],this.vastChain=e,this.details=$s(e),this.parseExtensions(),this.parseSkipTimeOffset(),this.trigger(l.s.ADPLAYBACK_LOADED,Object.assign(Object.assign({},this.sources),{requestTags:e.map((e=>{var t;return null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.url}))})),this.trackURLs(this.customTracking.onVastLoad),this.hasMediaFiles||this.trackURLs(this.customTracking.onVastEmpty),this.subscribeOnSizeChanges(),e),this.onAdReady=e=>{var t;if(this.destroyed)return void(e.isFinished()||e.cancel());const{videoElement:i,muted:s}=this.options;null!=s&&(this.muted=i.muted,i.muted=s),this.muted&&(this.volume=i.volume,i.volume=0),this.ad=e,this.adSize&&this.adSize.width!==(null===(t=this.currentSize)||void 0===t?void 0:t.width)&&this.setAdElementsSize(this.adSize),this.ad.on("start",this.onAdStarted),this.ad.on("impression",this.onAdImpression),this.ad.on("volumeChanged",this.onAdVolumeChange),this.ad.on("pause",this.onAdPaused),this.ad.on("resume",this.onAdResumed),this.ad.on("closeLinear",this.onAdUserClose),this.ad.on("clickThrough",this.onAdClick),this.ad.on("skip",this.onAdSkipped),this.ad.on("complete",this.onAdComplete)},this.onAdStarted=()=>{this.adSize&&this.ad.resize(this.adSize.width,this.adSize.height,"normal"),this.started=!0,this.startAdProgressInterval(),this.trigger(l.s.ADPLAYBACK_STARTED,this.sources);const{$el:e,advertisement:t,controls:i,isWOW:s,isClickable:n,linkTxt:r,showRemainingTimeToEnd:o,skipTime2:a,i18n:d}=this;if((i||s)&&this.$panel.show(),!i||!t||!e)return;this.bindControlsEvents(),this.changeVolumeUI(this.getVolume()),this.$panelText.show(),this.$seekBar.show(),this.$volumeButton.show();const c=this.getDuration();let h;a>=0&&a<Math.floor(c)?h=a:o&&(h=c),null!=h&&(this.$skipTime.find("span").html(String(Math.ceil(h))),this.showPreview()),n&&(this.$acceptButton.show(),r&&this.$acceptButton.find("span").html(decodeURIComponent(r))),"object"==typeof i&&Object.keys(i).forEach((e=>{let t=null;"adlabel"===e?t=this.$acceptButton:"soundbtn"===e&&(t=this.$volumeButton),(null==t?void 0:t.length)&&t.toggle("0"!==i[e]&&"-1"!==i[e])}));const{allowBlock:u,blockCompleteCount:f,maxBlockLength:p,showBlockNumber:g}=t,m=u&&g&&f<p,v=f+1,A=isFinite(p)?p:1;let E;this.$blockCount.text([d.t("advertisement_block"),v,d.t("advertisement_block_of"),A].join(" ")),e.toggleClass(this.classNames.withSkip,null!=h).toggleClass(this.classNames.skipActive,0===a).toggleClass(this.classNames.withRemainTime,o).toggleClass(this.classNames.withBlockCount,m).toggleClass(this.classNames.withLabel,!m).toggleClass(this.classNames.hasMoreBlocks,v<A).toggleClass(this.classNames.timerDisabled,!1),E=m?`${d.t("advertisement_block_number")} ${f}`:this.$panelText.hasClass("eagleplayer-advertisement-old")?d.t("advertisement"):"",this.$panelText.html(E)},this.toggleMute=()=>{var e,t,i;const s=(null===(e=this.mediaControl)||void 0===e?void 0:e.muted)?ln.VOLUME:0;this.setVolume(s),this.changeVolumeUI(s),null===(t=this.mediaControl)||void 0===t||t.toggleMute(),null===(i=this.notifier)||void 0===i||i.showMessage(this.i18n.t(s?"unmuted":"muted"),this.classNames.volumeMessage)},this.onAdImpression=()=>{this.trigger(l.s.ADPLAYBACK_IMPRESSION,this.sources)},this.onAdProgress=()=>{var e,t,i,s,n;const r=null!==(e=this.ad.duration())&&void 0!==e?e:0,o=this.getDuration();let a=this.ad.currentTime();if(null==a||Number.isNaN(a)){const e=null===(i=null===(t=this.ad.videoAdContainer)||void 0===t?void 0:t.videoElement)||void 0===i?void 0:i.currentTime;"number"!=typeof e||Number.isNaN(e)||(a=e)}if(null===(s=this.$el)||void 0===s||s.toggleClass(this.classNames.timerDisabled,null==a||Number.isNaN(a)),null==a||Number.isNaN(a)||a===this.currentTime)return;a<0&&0===r&&o>0&&(a+=o,a<0&&(a=0)),this.currentTime=a,this.trigger(l.s.ADPLAYBACK_PROGRESS,Object.assign(Object.assign({},this.sources),{current:a,total:o})),a>2&&this.adSystem.getSize&&this.adSize&&this.currentSize&&!this.isResizedAfter2s&&(this.adSize.width!==this.currentSize.width&&(this.restoreAdElementsSize(),this.resize(this.currentSize)),this.isResizedAfter2s=!0);const{advertisement:h,controls:u,isWOW:f,showRemainingTimeToEnd:p,skipTime2:g}=this;if(o<=0||!u||!h)return;const{blockCompleteCount:m,maxBlockLength:v}=h,A=Math.min(a,o),E=g>=0&&g<=o?g:null,y=null!=E&&E>A?Math.ceil(E-A):null,T=Math.ceil(o-A);let b;if(this.$seekBar.css("width",A/o*100+"%"),m<v){const e=this.core.activeContainer.el.offsetWidth<c.Pn;if(T>0)if(null!=E||e){if(p){const t=e?T:(0,d.V1)(1e3*T);this.$panelText.html(`${t} сек.`)}}else b=T}if(null!=y?b=y:f?this.$panel.hide():null!=E&&this.$skipButton.removeClass("eagleplayer-advertisement-skip-button-disabled").show(),null!=b&&this.$skipButton.addClass("eagleplayer-advertisement-skip-button-disabled").show().find(".eagleplayer-advertisement-skip-timer").html(String(b)),null!=E||p){const e=null!=E?null!=y?y:0:T;this.$skipTime.find("span").html(String(e))}null===(n=this.$el)||void 0===n||n.toggleClass(this.classNames.skipActive,null!=E&&E<A)},this.onAdPaused=()=>{clearInterval(this.adProgressInterval),this.trigger(l.s.ADPLAYBACK_PAUSED,this.sources)},this.onAdResumed=()=>{this.startAdProgressInterval(),this.trigger(l.s.ADPLAYBACK_RESUMED,this.sources)},this.onAdUserClose=()=>{this.trigger(l.s.ADPLAYBACK_USER_CLOSE,this.sources)},this.onAdVolumeChange=()=>{this.trigger(l.s.ADPLAYBACK_VOLUME_CHANGE,this.sources)},this.onAdClick=()=>{this.trigger(l.s.ADPLAYBACK_CLICK,this.sources),this.trackURLs(this.addClick)},this.onAdSkipped=()=>{this.trigger(l.s.ADPLAYBACK_SKIPPED,this.sources)},this.onAdComplete=()=>{this.trigger(l.s.ADPLAYBACK_COMPLETE,this.sources)},this.onAdError=(e,t)=>{var i,s,n;const r=null!==(s=null===(i=t.vastChain)||void 0===i?void 0:i.map((e=>{var t;return null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.url})))&&void 0!==s?s:[],a=ln.REFETCH_ERRORS.includes(e.code),d=this.createError({code:`${null!==(n=e.code)&&void 0!==n?n:c.n4}`,description:e.message,level:o.Mk.Levels.WARN,raw:Object.assign(Object.assign({},this.sources),{requestTags:r,canRefetch:a,code:e.code})});"No next ad to request"!==e.message&&this.errors.unshift(d),this.trigger(l.s.ADPLAYBACK_WARNING,d)},this.onAdFinish=()=>{var e;if(this.destroyed)return;this.restoreDefaultVideoElement();const[t]=this.errors,i=!this.started&&ln.NOT_STARTED_ERRORS.includes(null===(e=null==t?void 0:t.raw)||void 0===e?void 0:e.code);if(this.vastChain&&i){const e=new Error("the vast ad was loaded but did not start"),i=this.vastChain.map((e=>{var t;return null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.url})),s={requestTags:i,XML:this.vastChain.slice(0,1).map((e=>null==e?void 0:e.XML))};if(t){const{raw:e}=t,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(t,["raw"]);s.vastError=Object.assign(Object.assign({},i),{raw:{index:null==e?void 0:e.index,mute:null==e?void 0:e.mute,type:null==e?void 0:e.type}})}(0,nn.Cp)(e,Object.assign(Object.assign({},s),{errorCode:s.vastError?String(s.vastError.code):c.n4}))}t?this.trigger(l.s.ADPLAYBACK_ERROR,t):this.trigger(l.s.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.sources)},this.getRectParams=e=>{const t=e.width||0,i=e.height||0;return{aspectRatio:i?Math.floor(t/i*10)/10:0,height:i,width:t}},this.getMediaFile=e=>{if(!this.embedSize)return;const t=this.getRectParams({width:Number(this.embedSize.width),height:Number(this.embedSize.height)});return e.slice(0).sort(((e,i)=>{const s=this.getRectParams({width:Number(e.width),height:Number(e.height)}),n=this.getRectParams({width:Number(i.width),height:Number(i.height)}),r=Math.abs(t.width-s.width),o=Math.abs(t.width-n.width);return Math.abs(t.aspectRatio-s.aspectRatio)-Math.abs(t.aspectRatio-n.aspectRatio)||r-o}))[0]},this.skip=()=>{var e,t;const{skipOffsetInMs:i}=this.details;this.trackURLs(this.skipAd),this.trackURLs(this.customTracking.onSkipAd),null!=i&&i>=0?null===(e=this.ad)||void 0===e||e.skip():null===(t=this.ad)||void 0===t||t.cancel()},this.setPreviewTimeout=()=>{this.clearPreviewTimeout(),this.previewTimeout=window.setTimeout(this.hidePreview.bind(this),ln.PREVIEW_DURATION)},this.clearPreviewTimeout=()=>{window.clearTimeout(this.previewTimeout)},this.showPreview=()=>{this.$preview.toggleClass(this.classNames.previewVisible,!0),this.setPreviewTimeout()},this.hidePreview=()=>{var e;null===(e=this.clearPreviewTimeout)||void 0===e||e.call(this),this.$preview.toggleClass(this.classNames.previewVisible,!1)}}static canPlay(e){return"VAST"===e.provider&&!!e.url&&!!Js.find((t=>{var i;return t.name&&(null===(i=e.url)||void 0===i?void 0:i.match(new RegExp(t.name)))}))}static async preload(e){var t,i;if(!e.advertisement)return;if(null!==(t=ln.loaded)&&void 0!==t||(ln.loaded=!0),ln.template)return;const n=null===(i=e.mediaControl)||void 0===i?void 0:i.skinName,r=n&&s[n]||on;if("function"!=typeof r)return;const{default:o,classNames:a,getContainerClassNames:l}=await r();o&&(ln.template=o),a&&(ln.classNames=a),ln.getContainerClassNames=l}get template(){return(0,o.vs)(ln.template)}get classNames(){return ln.classNames}get getContainerClassNames(){return ln.getContainerClassNames}get name(){return"vastPlayback"}get reloadFailedAdTag(){return this.adSystem.reloadFailedAdTag}get showRemainingTimeToEnd(){return Boolean(this.adSystem.showRemainingTimeToEnd)}get allowBlock(){var e;return null!==(e=this.adSystem.allowBlock)&&void 0!==e?e:!1===this.extensions.Allowblock&&this.extensions.Allowblock}get showBlockNumber(){return this.adSystem.showBlockNumber}get maxBlockLength(){return this.adSystem.maxBlockLength}get getNextAdBlockSources(){return this.adSystem.getNextAdBlockSources}get controls(){return this.extensions.controls}get isWOW(){return this.extensions.WOW}get isClickable(){return this.extensions.isClickable}get linkTxt(){var e;return null!==(e=this.extensions.linkTxt)&&void 0!==e?e:""}get skipTime(){return this.extensions.skipTime}get skipTime2(){return this.extensions.skipTime2}get customTracking(){return this.extensions.CustomTracking}get hasMediaFiles(){var e;return Boolean(null===(e=this.details.mediaFiles)||void 0===e?void 0:e.length)}get addClick(){var e;return null!==(e=this.extensions.addClick)&&void 0!==e?e:[]}get skipAd(){var e;return null!==(e=this.extensions.skipAd)&&void 0!==e?e:[]}get i18n(){return this.core.i18n}get mediaControl(){return this.core.getPlugin("mediaControl")}get notifier(){return this.core.getPlugin("notifier")}get advertisement(){return this.core.getPlugin("advertisement")}get docking(){return this.core.getPlugin("docking")}async load(e){var t,i,s,n,r,a,d,c,h;this.sources=Object.assign({},e),this.adSystem=null!==(t=Js.find((e=>e.name&&this.sources.url.match(new RegExp(e.name)))))&&void 0!==t?t:{},this.sources.url=e.url.replace(/\[sessionid\]/g,o.Aq.uniqueId("")),this.sources.url=null!==(n=await(null===(s=(i=this.adSystem).addUrlParams)||void 0===s?void 0:s.call(i,this.sources.url,this.core.options)))&&void 0!==n?n:this.sources.url,this.currentSize={width:this.options.videoElement.offsetWidth,height:this.options.videoElement.offsetHeight},this.adSize=null!==(d=null===(a=(r=this.adSystem).getSize)||void 0===a?void 0:a.call(r,this.currentSize))&&void 0!==d?d:this.currentSize,this.embedSize=null!==(h=null===(c=this.docking)||void 0===c?void 0:c.getEmbedSize())&&void 0!==h?h:this.currentSize,this.trigger(l.s.ADPLAYBACK_READY,this.sources)}bindControlsEvents(){var e,t,i,s,n;null===(e=this.$volumeButton)||void 0===e||e.on("click",this.toggleMute),null===(t=this.$skipButton)||void 0===t||t.on("click",this.skip),null===(i=this.$skip)||void 0===i||i.on("click",this.skip),null===(s=this.$showPreview)||void 0===s||s.on("click",this.showPreview),null===(n=this.$hidePreview)||void 0===n||n.on("click",this.hidePreview)}unbindControlsEvents(){var e,t,i,s,n;null===(e=this.$volumeButton)||void 0===e||e.off("click",this.toggleMute),null===(t=this.$skipButton)||void 0===t||t.off("click",this.skip),null===(i=this.$skip)||void 0===i||i.off("click",this.skip),null===(s=this.$showPreview)||void 0===s||s.off("click",this.showPreview),null===(n=this.$hidePreview)||void 0===n||n.off("click",this.hidePreview)}subscribeOnSizeChanges(){window.addEventListener("resize",this.applyContainerClassNames),window.addEventListener("orientationchange",this.applyContainerClassNames),this.applyContainerClassNames()}unsubscribeFromSizeChanges(){var e,t;window.removeEventListener("resize",this.applyContainerClassNames),window.removeEventListener("orientationchange",this.applyContainerClassNames),null===(t=null===(e=this.getContainerClassNames)||void 0===e?void 0:e.call(this,{height:this.core.el.offsetHeight}))||void 0===t||t.forEach((([e])=>{this.core.$el.toggleClass(e,!1)}))}changeVolumeUI(e){const{hasSound:t}=this.classNames;t?this.$volumeButton.toggleClass(t,e>0):(this.$volumeButton.find(".epvi-none").toggle(0===e),this.$volumeButton.find(".epvi-1").toggle(e>0),this.$volumeButton.find(".epvi-2").toggle(e>ln.VOLUME),this.$volumeButton.find(".epvi-3").toggle(e>2*ln.VOLUME))}startAdProgressInterval(){this.isLinear()&&(this.adProgressInterval=window.setInterval(this.onAdProgress,ln.PROGRESS_INTERVAL))}setAdElementsSize(e){var t;this.options.videoElement.style.width=`${e.width}px`,this.options.videoElement.style.height=`${e.height}px`,(null===(t=this.ad)||void 0===t?void 0:t.videoAdContainer)&&(this.ad.videoAdContainer.element.style.width=`${e.width}px`,this.ad.videoAdContainer.element.style.height=`${e.height}px`)}restoreAdElementsSize(){var e;this.restoreDefaultVideoElement(),(null===(e=this.ad)||void 0===e?void 0:e.videoAdContainer)&&(this.ad.videoAdContainer.element.style.width="100%",this.ad.videoAdContainer.element.style.height="100%")}restoreDefaultVideoElement(){var e,t;(null===(e=this.adSize)||void 0===e?void 0:e.width)!==(null===(t=this.currentSize)||void 0===t?void 0:t.width)&&(this.options.videoElement.style.width="100%",this.options.videoElement.style.height="100%"),null!=this.muted&&(this.options.videoElement.muted=this.muted),null!=this.volume&&(this.options.videoElement.volume=this.volume)}parseExtensions(){var e;const t=[...null!==(e=this.vastChain)&&void 0!==e?e:[]].reduce(((e,t)=>{var i,s,n,r,o,a;return[...e,...null!==(a=null===(o=null===(r=null===(n=null===(s=null===(i=null==t?void 0:t.ad)||void 0===i?void 0:i.elements)||void 0===s?void 0:s[0])||void 0===n?void 0:n.elements)||void 0===r?void 0:r.filter((e=>"extensions"===e.name))[0])||void 0===o?void 0:o.elements)&&void 0!==a?a:[]]}),[]);this.parseExtensionNodes(t)}parseExtensionNodes(e){var t,i,s;if(null==e?void 0:e.length)for(let n=0;n<e.length;n++){const r=e[n],o=null===(t=r.attributes)||void 0===t?void 0:t.type,a=r.elements,l=null===(s=null===(i=null==a?void 0:a[0])||void 0===i?void 0:i.text)||void 0===s?void 0:s.trim();"startTime"!==o&&"skipTime"!==o&&"skipTime2"!==o||!l||(this.extensions[o]=(0,d.Kh)(l)),"controls"===o&&l&&"0"===l&&(this.extensions.controls=!1),"controls"!==o||l||(this.extensions.controls={},this.parseControlNodes(a)),"isClickable"===o&&(this.extensions.isClickable="0"!==l),"WOW"!==o&&"Allowblock"!==o||(this.extensions[o]="1"===l),"CustomTracking"===o&&(this.extensions.CustomTracking={},this.parseCustomTrackingNodes(a)),"skipAd"!==o&&"addClick"!==o||!l||(this.extensions[o]=[l]),"linkTxt"===o&&l&&(this.extensions.linkTxt=l)}}parseControlNodes(e){var t,i,s,n;if(null==e?void 0:e.length)for(let r=0;r<e.length;r++){const o=e[r],a=null===(t=o.attributes)||void 0===t?void 0:t.id,l=null===(n=null===(s=null===(i=o.elements)||void 0===i?void 0:i[0])||void 0===s?void 0:s.text)||void 0===n?void 0:n.trim();a&&"layout"===o.name&&l&&(this.extensions.controls[a]=l)}}parseCustomTrackingNodes(e){var t,i,s,n,r,o;if(null==e?void 0:e.length)for(let a=0;a<e.length;a++){const l=e[a];let c=null===(t=l.attributes)||void 0===t?void 0:t.event;const h=null===(n=null===(s=null===(i=l.elements)||void 0===i?void 0:i[0])||void 0===s?void 0:s.text)||void 0===n?void 0:n.trim();if("Tracking"===l.name&&c&&h){if("progress"===c){const e=null===(r=l.attributes)||void 0===r?void 0:r.offset;if(!e)continue;c="%"===e.charAt(e.length-1)?`progress-${e}`:`progress-${Math.round((0,d.E9)(e))}`}Array.isArray(this.extensions.CustomTracking[c])||(this.extensions.CustomTracking[c]=[]),null===(o=this.extensions.CustomTracking[c])||void 0===o||o.push(h)}}}parseSkipTimeOffset(){var e,t,i;const{durationInMs:s,skipOffsetInMs:n}=this.details;(this.extensions.skipTime>=0||this.extensions.skipTime2>=0)&&(this.extensions=null!==(i=null===(t=(e=this.adSystem).getSkipTime)||void 0===t?void 0:t.call(e,this.extensions,s/1e3))&&void 0!==i?i:this.extensions),this.extensions.skipTime2<0&&null!=n&&n>=0&&(this.extensions.skipTime2=n/1e3)}trackURLs(e){var t;if(!e||0===e.length)return;const i={};if(this.isLinear()){const{mediaFiles:e,durationInMs:s}=this.details;(null===(t=e[0])||void 0===t?void 0:t.src)&&(i.ASSETURI=(0,Hs.rT)(e[0].src)),s&&(i.CONTENTPLAYHEAD=(0,Hs.rT)((0,d.V1)(s,{hours:!0,ms:!0})))}i.CACHEBUSTING=(0,sn.R)(Math.round(1e8*Math.random()).toString(),"0",8),i.TIMESTAMP=(0,Hs.rT)((new Date).toISOString()),i.RANDOM=i.random=i.CACHEBUSTING,e.forEach((e=>{if("string"!=typeof e)return;let t=e;for(const s in i)if(i.hasOwnProperty(s)){const n=i[s];t=e.replace(`[${s}]`,n).replace(`%%${s}%%`,n)}(new Image).src=t}),{})}createInvisibleElement(){const e=document.createElement("div");return e.style.position="absolute",e.style.width="0px",e.style.height="0px",e.style.display="none",e}start(){var e;const{advertisement:t}=this;if(this.destroyed||!t)return;this.render();const{containerElement:i,videoElement:s,clickTrackingElement:n}=this.options,r="button"===(null===(e=t.channel)||void 0===e?void 0:e.clickElement)&&this.$acceptButton.get(0)||n;((e,t,i)=>{var s,n,r;let o,a=!1;const l=xs(i.onAdStart),d=Object.assign(Object.assign({vpaidEnabled:!0},i),{onAdReady:xs(i.onAdReady),onAdStart:e=>{o=e,l(o)},onError:xs(i.onError),onRunFinish:xs(i.onRunFinish)});/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(null===(s=i.videoElement)||void 0===s?void 0:s.paused)&&(null===(n=i.videoElement)||void 0===n?void 0:n.canPlayType("application/vnd.apple.mpegurl"))&&(null===(r=i.videoElement)||void 0===r||r.load()),Bs((()=>Ns(e,d)),t,Object.assign(Object.assign({},d),{isCanceled:()=>a}))})(this.sources.url,i,{videoElement:s,responsive:!0,pauseOnAdClick:!1,timeout:ln.VAST_LOAD_TIMEOUT,onAdReady:this.onAdReady,onError:this.onAdError,onRunFinish:this.onAdFinish,hooks:{createSkipControl:this.createInvisibleElement,createClickControl:r&&(()=>r),getMediaFile:this.getMediaFile,transformVastResponse:this.onAdLoaded}})}pause(){var e,t;(null===(e=this.ad)||void 0===e?void 0:e.isStarted())&&(null===(t=this.ad)||void 0===t||t.pause())}resume(){var e,t;(null===(e=this.ad)||void 0===e?void 0:e.isStarted())&&(null===(t=this.ad)||void 0===t||t.resume())}setVolume(e){var t;null===(t=this.ad)||void 0===t||t.setVolume(e/100)}getVolume(){var e,t;return 100*(null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getVolume())&&void 0!==t?t:0)}resize(e){var t,i,s,n,r,o;if(!(null===(t=this.ad)||void 0===t?void 0:t.isFinished())){const t=null!==(n=null===(s=(i=this.adSystem).getSize)||void 0===s?void 0:s.call(i,e,this.currentTime))&&void 0!==n?n:e;this.currentTime<=2&&this.adSystem.getSize&&this.adSize&&this.currentSize&&(t.width!==e.width?this.setAdElementsSize(t):this.adSize.width!==this.currentSize.width&&this.restoreAdElementsSize()),this.currentSize=e,this.adSize=t,(null===(r=this.ad)||void 0===r?void 0:r.isStarted())&&(null===(o=this.ad)||void 0===o||o.resize(this.adSize.width,this.adSize.height,"normal"))}}getDuration(){var e,t;const i=this.isLinear()?(null===(e=this.ad)||void 0===e?void 0:e.duration())||this.details.durationInMs/1e3:null===(t=this.ad)||void 0===t?void 0:t.duration();return null!=i?i:0}getCurrentTime(){return this.currentTime}isLinear(){var e;return null!=(null===(e=this.details)||void 0===e?void 0:e.durationInMs)}getAdSystem(){var e,t;return null!==(t=null===(e=this.details)||void 0===e?void 0:e.adSystem)&&void 0!==t?t:c.n4}getAdType(){var e;return this.details?(null===(e=this.details)||void 0===e?void 0:e.vpaid)?"vpaid":"vast":"unknown"}destroy(){var e,t,i;clearInterval(this.adProgressInterval),this.destroyed=!0,(null===(e=this.ad)||void 0===e?void 0:e.isFinished())||null===(t=this.ad)||void 0===t||t.cancel(),this.hideControls(),this.unbindControlsEvents(),this.unsubscribeFromSizeChanges(),null===(i=this.$el)||void 0===i||i.remove(),delete this.$el}hideControls(){const{advertisement:e,$el:t}=this;e&&t&&(this.$panel.hide(),this.$panelText.hide(),this.hidePreview(),t.toggleClass(this.classNames.withSkip,!1).toggleClass(this.classNames.withRemainTime,!1).toggleClass(this.classNames.withBlockCount,!1).toggleClass(this.classNames.withLabel,!1),this.$skipButton.hide(),this.$acceptButton.hide(),this.$volumeButton.hide(),this.$seekBar.hide())}render(){var e;const{advertisement:t}=this;if(!this.core.$el.parents().length||this.$el||!t)return this;const{playList:i}=this.core.options;return this.$el=$(this.template({preview:(null==i?void 0:i.snapshot)||"none",title:null!==(e=null==i?void 0:i.title)&&void 0!==e?e:"",duration:i?(0,d.V1)(i.duration):"",i18n:["advertisement","advertisement_link","advertisement_after","advertisement_skip","advertisement_skip_timer","advertisement_watch","advertisement_watch_timer","advertisement_block","advertisement_block_of","unmute"].reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this.core.i18n.t(t)})),{})})),t.$el.append(this.$el),this.$panel=this.$el.find(".eagleplayer-advertisement-panel"),this.$panelText=this.$el.find(".eagleplayer-advertisement-panel-text"),this.$preview=this.$el.find("[data-ad-preview]"),this.$showPreview=this.$el.find("[data-ad-preview-show]"),this.$hidePreview=this.$el.find("[data-ad-preview-hide]"),this.$skip=this.$el.find("[data-ad-skip]"),this.$skipTime=this.$el.find("[data-ad-skip-time]"),this.$blockCount=this.$el.find("[data-ad-block-count]"),this.$skipButton=this.$el.find(".eagleplayer-advertisement-skip-button"),this.$acceptButton=this.$el.find("[data-ad-accept], .eagleplayer-advertisement-accept-button"),this.$volumeButton=this.$el.find("[data-ad-volume], .eagleplayer-advertisement-volume-button"),this.$seekBar=this.$el.find("[data-ad-seek], .eagleplayer-advertisement-seek-bar"),this.hideControls(),this}}ln.VAST_LOAD_TIMEOUT=3e4,ln.PREVIEW_DURATION=3e3,ln.VOLUME=10,ln.PROGRESS_INTERVAL=500,ln.loaded=!1,ln.template="",ln.classNames={},ln.REFETCH_ERRORS=[r.VAST_LINEAR_ASSET_MISMATCH,r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE,r.UNKNOWN_ERROR,r.VPAID_ERROR],ln.NOT_STARTED_ERRORS=[void 0,r.VAST_UNEXPECTED_AD_TYPE,r.VAST_UNEXPECTED_LINEARITY,r.VAST_UNEXPECTED_DURATION_ERROR,r.VAST_UNEXPECTED_MEDIA_FILE,r.VAST_WRAPPER_ERROR,r.VIDEO_PLAY_ERROR,r.VAST_MEDIA_FILE_NOT_FOUND,r.VAST_MEDIA_LOAD_TIMEOUT,r.VAST_LINEAR_ASSET_MISMATCH,r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE,r.VAST_NONLINEAR_PLAYING_FAILED,r.VAST_NONLINEAR_DIMENSIONS_ERROR,r.VAST_NONLINEAR_LOADING_FAILED,r.VAST_NONLINEAR_ASSET_MISMATCH,r.UNKNOWN_ERROR,r.VPAID_ERROR];class dn extends en{constructor(){super(...arguments),this.currentTime=0,this.allowBlock=!1,this.reloadFailedAdTag=!1,this.onAdStarted=()=>{this.trigger(l.s.ADPLAYBACK_IMPRESSION,this.sources),this.trigger(l.s.ADPLAYBACK_STARTED,this.sources),this.onAdProgress(),this.adProgressInterval=window.setInterval(this.onAdProgress,dn.PROGRESS_INTERVAL)},this.onAdProgress=()=>{var e;if("play"!==this.adPlaybackController.getAdPlayingState())return void delete this.diffStartTime;const t=this.getDuration(),i=Date.now()/1e3,s=i-(null!==(e=this.diffStartTime)&&void 0!==e?e:i),n=this.currentTime<0?0:Math.min(this.currentTime+s,t);this.diffStartTime=i,n!==this.currentTime&&(this.currentTime=n,this.trigger(l.s.ADPLAYBACK_PROGRESS,Object.assign(Object.assign({},this.sources),{current:n,total:t})))},this.onAdVolumeChange=()=>{this.trigger(l.s.ADPLAYBACK_VOLUME_CHANGE,this.sources)},this.onAdClick=()=>{this.trigger(l.s.ADPLAYBACK_CLICK,this.sources)},this.onAdSkipped=()=>{this.trigger(l.s.ADPLAYBACK_SKIPPED,this.sources)},this.onAdPodError=e=>{this.adPodError=Object.assign({},e)},this.onAdStopped=()=>{var e,t;const i="VPAIDLoadingError"===(null===(e=this.adPodError)||void 0===e?void 0:e.code)||"NO_AD_SECTION"===(null===(t=this.adPodError)||void 0===t?void 0:t.code);this.adPodError&&i?this.onAdError(this.adPodError):this.onAdContentResumeRequested()},this.onAdContentResumeRequested=()=>{this.trigger(l.s.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.sources)},this.onAdError=e=>{const t=e.code&&dn.ErrorCode[e.code],i=this.createError({code:`${null!=t?t:c.n4}`,description:e.message,level:o.Mk.Levels.WARN,raw:Object.assign(Object.assign({},this.sources),{code:t})});this.trigger(l.s.ADPLAYBACK_ERROR,i)}}static canPlay(e){var t;return!!(null===(t=window.ya)||void 0===t?void 0:t.videoAd)&&"YANDEX"===e.provider&&!!e.partnerId}static async preload(){var e,t;if(!(null===(e=window.ya)||void 0===e?void 0:e.videoAd))return null!==(t=dn.preloadPromise)&&void 0!==t||(dn.preloadPromise=(async()=>{try{await(0,js.k0)("https://yandex.ru/ads/system/adsdk.js")}catch(e){delete dn.preloadPromise}})()),await dn.preloadPromise}get name(){return"yandexPlayback"}async createLoader(e){const{AdLoader:t}=await window.ya.videoAd.loadModule("AdLoader"),{partnerId:i,category:s,impId:n}=e;return await t.create({partnerId:i,category:s,impId:n})}async load(e){this.sources=e;try{const t=await this.createLoader(e);this.adViewer=await t.loadAd();const{containerElement:i,videoElement:s}=this.options;this.adPlaybackController=this.adViewer.createPlaybackController(s,i),this.adPlaybackController.subscribe("AdStarted",this.onAdStarted),this.adPlaybackController.subscribe("AdVolumeChange",this.onAdVolumeChange),this.adPlaybackController.subscribe("AdClickThru",this.onAdClick),this.adPlaybackController.subscribe("AdPodSkipped",this.onAdSkipped),this.adPlaybackController.subscribe("AdPodError",this.onAdPodError),this.adPlaybackController.subscribe("AdStopped",this.onAdStopped),this.trigger(l.s.ADPLAYBACK_LOADED,this.sources),this.trigger(l.s.ADPLAYBACK_READY,this.sources)}catch(e){this.onAdError(e)}}static getAdPlaybackSources(e,t){const{blockType:i}=t;return"YANDEX"===e.provider&&("partnerId"in e&&(e.partnerId=Number(e.partnerId)),"category"in e&&(e.category=Number(e.category)),e.impId=Number(e.impId)||dn.IMPID[i]),super.getAdPlaybackSources(e,t)}start(){var e;null===(e=this.adPlaybackController)||void 0===e||e.playAd()}pause(){var e;null===(e=this.adPlaybackController)||void 0===e||e.pauseAd(),this.trigger(l.s.ADPLAYBACK_PAUSED,this.sources)}resume(){var e;null===(e=this.adPlaybackController)||void 0===e||e.resumeAd(),this.trigger(l.s.ADPLAYBACK_RESUMED,this.sources)}skip(){var e;null===(e=this.adPlaybackController)||void 0===e||e.skipAd()}setVolume(e){var t;null===(t=this.adPlaybackController)||void 0===t||t.setAdVolume(e/100)}getVolume(){var e,t;return 100*(null!==(t=null===(e=this.adPlaybackController)||void 0===e?void 0:e.getAdVolume())&&void 0!==t?t:0)}resize(e){}getDuration(){var e;return null===(e=this.adPlaybackController)||void 0===e?void 0:e.getAdDuration()}getCurrentTime(){return this.currentTime}isLinear(){return!0}getAdSystem(){return"Yandex"}getAdType(){return"unknown"}destroy(){var e;clearInterval(this.adProgressInterval),null===(e=this.adViewer)||void 0===e||e.destroy()}}dn.PROGRESS_INTERVAL=500,dn.IMPID={preRoll:1,preRollMobile:1,postRoll:2,postRollMobile:2,middleRoll:3,middleRollMobile:3,pauseRoll:3,pauseRollMobile:3,banner:4,bannerMobile:4,pauseBanner:3,pauseBannerMobile:3,pseudostreaming:3,pseudostreamingMobile:3},dn.ErrorCode={NO_AD_SECTION:r.VAST_NO_ADS_AFTER_WRAPPER,VIDEO_PLAY_REJECTED:r.VIDEO_PLAY_ERROR,VPAID_METHOD_CALL_ERROR:r.VPAID_ERROR,YANDEX_VPAID_METHOD_CALL_ERROR:r.VPAID_ERROR,YANDEX_VPAID_FRIENDLY_IFRAME_SECURITY_POLICY_VIOLATION:r.VPAID_ERROR,SLOT_SMALL_SIZE:r.VAST_UNEXPECTED_MEDIA_FILE,VPAID_START_TIMEOUT:r.VAST_MEDIA_LOAD_TIMEOUT,VPAIDPlayingError:r.VIDEO_PLAY_ERROR,VMAP_LOAD_TIMEOUT:r.VAST_LOAD_TIMEOUT,MEDIA_ERR_SRC_NOT_SUPPORTED:r.VAST_LINEAR_ASSET_MISMATCH,VPAIDLoadingError:r.VAST_MEDIA_LOAD_TIMEOUT,WRAPPER_LOAD_TIMEOUT:r.VAST_LOAD_TIMEOUT,MEDIA_ERR_DECODE_ON_START:r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE,WRAPPER_LOAD_ERROR:r.VAST_WRAPPER_ERROR,YANDEX_VAST_LOAD_TIMEOUT:r.VAST_LOAD_TIMEOUT,YANDEX_WRAPPER_LOAD_ERROR:r.VAST_WRAPPER_ERROR,YANDEX_WRAPPER_LOAD_TIMEOUT:r.VAST_LOAD_TIMEOUT,VIDEO_TIMEOUT:r.VAST_MEDIA_LOAD_TIMEOUT,YANDEX_NO_GET_VPAID_AD_FUNC:r.VPAID_ERROR,YANDEX_WRAPPER_MAX_COUNT_LIMIT:r.VAST_TOO_MANY_REDIRECTS,YANDEX_VPAID_FRIENDLY_IFRAME_UNHANDLED_GLOBAL_ERROR:r.VPAID_ERROR,MSE_VIDEO_ATTACH_FAIL:r.VIDEO_PLAY_ERROR};class cn extends dn{static canPlay(e){var t;return!!(null===(t=window.ya)||void 0===t?void 0:t.videoAd)&&"ADFOX"===e.provider&&!!e.url}get name(){return"adfoxPlayback"}async createLoader(e){const{AdLoader:t}=await window.ya.videoAd.loadModule("AdLoader"),{pathname:i}=new URL(e.url),{p1:s,p2:n}=(0,Hs.al)(e.url),r=null==i?void 0:i.split("/").find(Boolean);return await t.create({adFoxParameters:{ownerId:r,params:{p1:s,p2:n}}})}getAdSystem(){return"AdFox"}}const hn=(0,rn.L)((()=>i.e(7027).then(i.bind(i,7027)))),un=(0,rn.L)((()=>i.e(4671).then(i.bind(i,4671))));class fn extends tn{static async preload(e){var t;if(fn.loaded)return;fn.loaded=!0;const i=null===(t=e.mediaControl)||void 0===t?void 0:t.skinName,s=i&&n[i]||hn;await Promise.all([super.preload(e),s()])}static destroy(){var e;null===(e=fn.bannerDisplayContainer)||void 0===e||e.destroy(),delete fn.bannerDisplayContainer}get adDisplayContainer(){return fn.bannerDisplayContainer}set adDisplayContainer(e){fn.bannerDisplayContainer=e}get name(){return"overlayPlayback"}createAdDisplayContainer(){this.adDisplayContainer||(this.adDisplayContainer=new this.ima.AdDisplayContainer(this.options.containerElement),this.adDisplayContainer.initialize())}createAdsRequest(){const e=this.getSize(this.sources.url);this.adsRequest=new this.ima.AdsRequest,this.adsRequest.adTagUrl=this.sources.url,this.adsRequest.vastLoadTimeout=fn.VAST_LOAD_TIMEOUT,this.adsRequest.nonLinearAdSlotWidth=e.width,this.adsRequest.nonLinearAdSlotHeight=e.height,this.options.containerElement.style.height=`${e.height}px`,this.adsRequest.setAdWillAutoPlay(!0),this.adsRequest.setAdWillPlayMuted(this.options.muted)}async loadAdsManager(){let e;try{this.adsLoader=new this.ima.AdsLoader(this.adDisplayContainer),e=await new Promise(((e,t)=>{this.adsLoader.addEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e),this.adsLoader.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,t),this.adsLoader.requestAds(this.adsRequest)}))}catch(e){return void this.onAdError(e)}const t=new this.ima.AdsRenderingSettings;t.useStyledNonLinearAds=!0,t.loadVideoTimeout=fn.LOAD_VIDEO_TIMEOUT,t.restoreCustomPlaybackStateOnAdBreakComplete=!1,this.adsManager=e.getAdsManager(this.options.videoElement,t),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOADED,(e=>this.onAdLoaded(e))),this.adsManager.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.addEventListener(this.ima.AdEvent.Type.USER_CLOSE,this.onAdUserClose)}initAdsManager(){if(this.adsManager){const e=this.getSize(this.sources.url);this.adsManager.init(e.width,e.height,this.ima.ViewMode.NORMAL),this.trigger(l.s.ADPLAYBACK_READY,this.sources)}}getSize(e){const{offsetWidth:t}=this.options.videoElement,i=e.match(/sz=(\d+)x(\d+)/);let s,n;return i?(s=parseInt(i[1],10),n=parseInt(i[2],10),s>t&&(n=n*t/s,s=t)):(s=t,n=s<400?50:100,e.match("advarkads.com")&&(n=200),(e.match("ads.adfox.ru")||e.match("ssp.rambler.ru"))&&(n=s<400?55:105)),{width:s,height:n}}resize(){var e;const t=this.getSize(this.sources.url);this.options.containerElement.style.height=`${t.height}px`,null===(e=this.adsManager)||void 0===e||e.resize(t.width,t.height,this.ima.ViewMode.NORMAL)}destroy(){var e,t,i;null===(e=this.adsLoader)||void 0===e||e.contentComplete(),null===(t=this.adsLoader)||void 0===t||t.destroy(),null===(i=this.adsManager)||void 0===i||i.destroy()}}fn.bannerDisplayContainer=null,fn.loaded=!1;var pn=i(5072),gn=i.n(pn),mn=i(7825),vn=i.n(mn),An=i(7659),En=i.n(An),yn=i(5056),Tn=i.n(yn),bn=i(540),Sn=i.n(bn),_n=i(1113),Cn=i.n(_n),Rn=i(611),Ln={};Ln.styleTagTransform=Cn(),Ln.setAttributes=Tn(),Ln.insert=En().bind(null,"head"),Ln.domAPI=vn(),Ln.insertStyleElement=Sn(),gn()(Rn.A,Ln),Rn.A&&Rn.A.locals&&Rn.A.locals;const In=Symbol("onVisibleAreaChanged");class kn extends o.DI{constructor(){super(...arguments),this.viewability=!1,this.adSourcesLoadsCount=0,this._blockCompleteCount=0,this.lastRollStartTime=0,this.lastBannerStartTime=0,this.currentContainerTime=0,this.containerEnded=!1,this.playing=!1,this.rendered=!1,this.adSourcesIndex=0,this.bannerSourcesIndex=0,this.inStreamPlaybacks=[ln,dn,tn,cn],this.overlayPlaybacks=[fn,dn],this.skip=()=>{var e;null===(e=this.ad)||void 0===e||e.skip()},this.togglePause=()=>{this.pause(),this.trigger(l.s.ADVERTISEMENT_INTERACTION_PLAYING)},this.togglePlay=()=>{this.play(),this.trigger(l.s.ADVERTISEMENT_INTERACTION_PLAYING)}}static async preload(e){e.advertisement&&!kn.loaded&&(kn.loaded=!0,await Promise.all([tn.preload(e),fn.preload(e),dn.preload(),ln.preload(e)]))}get name(){return"advertisement"}get supportedVersion(){return{min:"0.5.0"}}get attributes(){return{class:"eagleplayer-advertisement",style:"width: 100%","data-advertisement":""}}get template(){return(0,o.vs)('<div class="eagleplayer-advertisement-container" data-ad-container></div>\n<a class="eagleplayer-advertisement-click-area" data-ad-click></a>\n')}get multiPlayer(){return this.core.getPlugin("multiplayer")}get mediaControl(){return this.core.getPlugin("mediaControl")}get viewport(){return this.core.getPlugin("viewport")}get params(){return this.core.options.advertisement}get getVisibleArea(){var e,t;const{provider:i}=this.core.options;return null!==(t=null===(e=null==i?void 0:i.params)||void 0===e?void 0:e.getVisibleArea)&&void 0!==t?t:null==i?void 0:i.getVisibleArea}get channel(){return this._channel}get allowBlock(){var e,t,i,s,n;return Boolean((null!==(s=null!==(t=null===(e=this.channel)||void 0===e?void 0:e.allowBlock)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.allowBlock)&&void 0!==s?s:this.params.allowBlock)&&this.currentBlockType&&(null===(n=this.params[this.currentBlockType])||void 0===n?void 0:n.enableBlock))}get showBlockNumber(){var e,t,i;return this.ad instanceof ln&&Boolean(null!==(t=null===(e=this.channel)||void 0===e?void 0:e.showBlockNumber)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.showBlockNumber)}get maxBlockLength(){var e,t,i,s;return this.ad instanceof ln?null!==(s=null!==(t=null===(e=this.channel)||void 0===e?void 0:e.maxBlockLength)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.maxBlockLength)&&void 0!==s?s:1/0:1}get blockCompleteCount(){return this._blockCompleteCount}get currentTime(){var e,t;return null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getCurrentTime())&&void 0!==t?t:0}get reloadFailedAdTag(){var e,t,i;return Boolean(null!==(t=null===(e=this.channel)||void 0===e?void 0:e.reloadFailedAdTag)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.reloadFailedAdTag)}get getNextAdBlockSources(){var e,t,i;return this.ad instanceof ln&&(null!==(t=null===(e=this.channel)||void 0===e?void 0:e.getNextAdBlockSources)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.getNextAdBlockSources)||void 0}get vodMiddleRollStartTime(){var e;const t=this.core.activePlayback.getDuration();return!this.lastRollStartTime&&(null===(e=this.channel)||void 0===e?void 0:e.middleRollStartTime)?this.channel.middleRollStartTime:t>600&&t<1620?540:t>=1620&&t<3600?900:t>=3600?1200:0}bindEvents(){const{activeContainer:e,activePlayback:t}=this.core;this.listenToOnce(this.core,l.s.CORE_READY,this.onReady),this.listenTo(this.core,l.s.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),this.listenTo(this.core,l.s.CORE_RESIZE,this.onResize),this.listenTo(this,l.s.ADVERTISEMENT_ENDED,this.onAdvertisementEnded),this.listenTo(this,l.s.ADVERTISEMENT_LOADING,this.hideBanner),this.mediaControl&&(this.listenTo(this.mediaControl,l.s.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,l.s.MEDIACONTROL_SHARE,this.onMediaControlShare)),e&&(this.listenTo(e,l.s.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(e,l.s.CONTAINER_PLAY,this.onPlay),this.listenTo(e,l.s.CONTAINER_PAUSE,this.onPause),this.listenToOnce(e,l.s.CONTAINER_ENDED,this.onEnded)),t&&!this.core.isReady&&this.listenToOnce(t,l.s.PLAYBACK_PLAY_INTENT,this.onInitialPlay),this.viewport&&this.listenTo(this.viewport,l.s.VIEWPORT_VISIBLE_AREA_CHANGED,this[In])}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onReady(){var e,t;const{activePlayback:i,activeContainer:s}=this.core;s&&i.getPlaybackType()!==o.YZ.NO_OP?(null!==(e=this._channel)&&void 0!==e||(this._channel=new Gs(null!==(t=this.core.options.channel)&&void 0!==t?t:c.n4)),this.prepareBlockTime(),this.prepareAdTemplate(),this.render(),this.trigger(l.s.ADVERTISEMENT_READY)):this.disable()}onResize(){var e,t;const{offsetWidth:i,offsetHeight:s}=this.core.el;null===(e=this.ad)||void 0===e||e.resize({width:i,height:s}),this.$el.css("height",s),null===(t=this.banner)||void 0===t||t.resize()}isPreRollWithStartTime(e){const t=["preRoll","preRollMobile"].includes(e),i=this.params[e];return t&&!!(null==i?void 0:i.start)&&(null==i?void 0:i.start)>0}onInitialPlay(){var e;const t=o.Pw.isMobile?"preRollMobile":"preRoll";(null===(e=this.params[t])||void 0===e?void 0:e.sources)&&!this.isPreRollWithStartTime(t)&&(this.core.activePlayback.pause(),this.startRoll(o.Pw.isMobile?"preRollMobile":"preRoll"))}onPlayAfterPause(){const e=o.Pw.isMobile?this.params.pauseRollMobile:this.params.pauseRoll;(null==e?void 0:e.sources)&&(this.core.activePlayback.pause(),this.startRoll(o.Pw.isMobile?"pauseRollMobile":"pauseRoll"))}onMediaControlShare(){const e=this.core.getPlugin("share"),{activeContainer:t}=this.core;e&&t&&(this.stopListening(t,l.s.CONTAINER_PAUSE,this.onPause),this.listenToOnce(e,l.s.SHARE_CLOSE,(()=>{this.listenTo(t,l.s.CONTAINER_PAUSE,this.onPause)})))}startPreRollWithStartTime(e){const{activePlayback:t}=this.core,i=o.Pw.isMobile?"preRollMobile":"preRoll",s=this.params[i];if((null==s?void 0:s.sources)&&(null==s?void 0:s.start)&&(null==s?void 0:s.start)>this.lastRollStartTime&&(null==s?void 0:s.start)){const n=s.start-e.current,r=n<0&&t.isPlaying();this.trigger(l.s.ADVERTISEMENT_TIME_TO_PREROLL,n),r&&(this.lastRollStartTime=e.current,this.startRoll(i))}}startMiddleRoll(e){const{activePlayback:t}=this.core,i=o.Pw.isMobile?this.params.middleRollMobile:this.params.middleRoll;if(!(null==i?void 0:i.sources))return;let s;if(t.getPlaybackType()===o.YZ.LIVE){const t=((null==i?void 0:i.refreshTime)||0)/1e3,n=((null==i?void 0:i.startupTime)||0)/1e3;s=n&&t&&(e.current>n&&n>this.lastRollStartTime||e.current>this.lastRollStartTime+t)}const n=this.vodMiddleRollStartTime,r=n&&e.current>this.lastRollStartTime+n;t.isPlaying()&&(s||r)&&(this.lastRollStartTime=e.current,this.startRoll(o.Pw.isMobile?"middleRollMobile":"middleRoll"))}startBannerRoll(e){var t;const{activePlayback:i}=this.core,s=o.Pw.isMobile?this.params.bannerMobile:this.params.banner;if(!Array.isArray(null==s?void 0:s.sources)||!(null===(t=s.sources)||void 0===t?void 0:t[0]))return;const n=((null==s?void 0:s.startupTime)||0)/1e3;if("YANDEX"===s.sources[0].provider)return void(!o.Pw.isMobile&&e.current>n&&this.startBanner());const r=((null==s?void 0:s.showTime)||0)/1e3,a=((null==s?void 0:s.refreshTime)||0)/1e3;if(i.isPlaying()&&n&&r&&(e.current>n&&n>this.lastBannerStartTime||a&&e.current>this.lastBannerStartTime+r+a))return this.lastBannerStartTime=e.current,void(this.$bannerContainer?this.showBanner():this.startBanner());n&&r&&e.current>this.lastBannerStartTime+r&&(a?this.hideBanner():this.closeBanner())}startPseudoStreaming(e){var t,i;const{activePlayback:s}=this.core,n=o.Pw.isMobile?this.params.pseudostreamingMobile:this.params.pseudostreaming;if(!(Array.isArray(null==n?void 0:n.sources)&&e.current>this.lastRollStartTime)||(null===(t=this.mediaControl)||void 0===t?void 0:t.$el.hasClass("eplayer-time-to-ad-visible"))||!(null==n?void 0:n.urlCallTime))return;const r=60*n.urlCallTime;let a,l;if(this.core.options.usePseudoStreaming){const t=null===(i=this.multiPlayer)||void 0===i?void 0:i.prevItemsDuration;null!=t&&(l=e.current+t/1e3,a=Math.ceil((kn.lastPseudoStreamingStartTime||1)/r)*r)}else a=Math.ceil((this.lastRollStartTime||1)/r)*r;s.isPlaying()&&null!=a&&(null!=l?l:e.current)>a&&(this.lastRollStartTime=e.current,null!=l&&(kn.lastPseudoStreamingStartTime=l),this.startRoll(o.Pw.isMobile?"pseudostreamingMobile":"pseudostreaming"))}onTimeUpdate(e){this.startPreRollWithStartTime(e),this.startMiddleRoll(e),this.startBannerRoll(e),this.startPseudoStreaming(e)}onPause(){const{activeContainer:e,activePlayback:t}=this.core;e.ended||(this.startRoll(o.Pw.isMobile?"pauseBannerMobile":"pauseBanner"),this.listenToOnce(t,l.s.PLAYBACK_PLAY_INTENT,this.onPlayAfterPause))}onPlay(){this.containerEnded=!1}onEnded(){this.containerEnded=!0;const{multiPlayer:e}=this;e&&!e.isMainRecord||this.startRoll(o.Pw.isMobile?"postRollMobile":"postRoll"),(null==e?void 0:e.isLastRecord)&&(kn.lastPseudoStreamingStartTime=0),this.lastRollStartTime=0}prepareBlockTime(){Object.entries(kn.BLOCK_TIME).forEach((([e,t])=>{var i;const s=this.params[e];s&&(null!==(i=s.blockTime)&&void 0!==i||(s.blockTime=t))}))}prepareAdTemplate(){const{el:e,options:t}=this.core,{referrer:i=""}=t;Object.keys(this.params).forEach((t=>{const s=this.params[t];s&&Array.isArray(null==s?void 0:s.sources)&&(s.sources=s.sources.map((s=>{const n=(["banner","banner_mobile"].includes(t)?this.overlayPlaybacks:this.inStreamPlaybacks).find((e=>e.canPlay(s)));return null==n?void 0:n.getAdPlaybackSources(s,{referrer:i,width:e.offsetWidth,blockType:t})})).filter(Boolean))}))}isPlaying(){return this.playing}hasAd(){return Boolean(this.currentBlockType)}getVolume(){var e,t;return null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getVolume())&&void 0!==t?t:0}async trackViewability(){if(this.getVisibleArea){const{height:e}=await this.getVisibleArea(),{parentElement:t}=this.core.options,i=t?e/t.offsetHeight:0;this[In](i)}}triggerAdEvent(e,t){var i,s,n;const r=null===(i=this.ad)||void 0===i?void 0:i.getAdSystem(),o=null===(s=this.ad)||void 0===s?void 0:s.getAdType();this.trigger(e,Object.assign(Object.assign({},t),{adSystem:r,adType:o,adPlayback:null===(n=this.ad)||void 0===n?void 0:n.name,blockType:this.currentBlockType,index:this.adSourcesIndex,requestCount:this.adSourcesLoadsCount}))}triggerBannerEvent(e,t){var i,s,n;const r=null===(i=this.banner)||void 0===i?void 0:i.getAdSystem(),a=null===(s=this.banner)||void 0===s?void 0:s.getAdType(),l=o.Pw.isMobile?"bannerMobile":"banner";this.trigger(e,Object.assign(Object.assign({},t),{adSystem:r,adType:a,adPlayback:null===(n=this.ad)||void 0===n?void 0:n.name,blockType:l,index:this.bannerSourcesIndex,requestCount:1}))}[In](e){if(this.playing&&!this.viewability){const t=!document.hidden&&e>=kn.MIN_VIEWABILITY_HEIGHT;!t&&this.viewabilityTimeout&&(clearTimeout(this.viewabilityTimeout),delete this.viewabilityTimeout),t&&!this.viewabilityTimeout&&(this.viewabilityTimeout=window.setTimeout((()=>this.onAdViewable()),kn.VIEWABILITY_TIMEOUT))}const{activeContainer:t}=this.core,{autoPlay:i,[a.gM]:s,minPlayingVisibleHeight:n=.5}=this.core.options;if(!this.playing&&t&&(i||s)){const i=!document.hidden&&(!s||e>=n);if(i===this.isVisible)return;i?this.listenTo(t,l.s.CONTAINER_PAUSE,this.onPause):this.stopListening(t,l.s.CONTAINER_PAUSE,this.onPause),this.isVisible=i}}startRoll(e){var t;if(!this.enabled||this.currentBlockType)return;const i=null===(t=this.params[e])||void 0===t?void 0:t.sources;Array.isArray(i)&&(null==i?void 0:i[0])&&(this.currentBlockType=e,this.requestAd(i[0]))}requestAd(e){var t,i,s;const{core:n}=this,{activeContainer:r}=n,a=this.inStreamPlaybacks.find((t=>t.canPlay(e)));if(this.currentContainerTime||(this.currentContainerTime=r.getCurrentTime()),this.currentContainerVolume=r.volume,this.adSourcesLoadsCount++,this.adSourcesIndex++,!a){const t=this.createError({code:`${Vs.VAST_UNEXPECTED_AD_SOURCE}`,description:"no ad playback found for such sources",level:o.Mk.Levels.WARN,raw:Object.assign(Object.assign({},e),{code:Vs.VAST_UNEXPECTED_AD_SOURCE})});return void this.onAdError(t)}this.hideControls(),this.currentBlockType&&this.isPreRollWithStartTime(this.currentBlockType)||"middleRoll"===this.currentBlockType||"middleRollMobile"===this.currentBlockType||"pseudostreaming"===this.currentBlockType||"pseudostreamingMobile"===this.currentBlockType||null===(t=null==r?void 0:r.getPlugin("click_to_pause"))||void 0===t||t.disable(),this.destroyAd();const d={muted:(null==e?void 0:e.mute)||(null===(i=this.mediaControl)||void 0===i?void 0:i.muted),containerElement:this.$adContainer.get(0),get videoElement(){return n.activePlayback.el},clickTrackingElement:this.$clickArea.get(0)};this.ad=new a(d,n),this.ad&&(this.listenToOnce(this.ad,l.s.ADPLAYBACK_READY,this.onAdReady),this.listenToOnce(this.ad,l.s.ADPLAYBACK_LOADED,this.onAdLoaded),this.listenToOnce(this.ad,l.s.ADPLAYBACK_STARTED,this.onAdStarted),this.listenToOnce(this.ad,l.s.ADPLAYBACK_IMPRESSION,this.onAdImpression),this.listenTo(this.ad,l.s.ADPLAYBACK_RESUMED,this.onAdResumed),this.listenTo(this.ad,l.s.ADPLAYBACK_PAUSED,this.onAdPaused),this.listenTo(this.ad,l.s.ADPLAYBACK_COMPLETE,this.onAdComplete),this.listenTo(this.ad,l.s.ADPLAYBACK_PROGRESS,this.onAdProgress),this.listenTo(this.ad,l.s.ADPLAYBACK_CLICK,this.onAdClick),this.listenTo(this.ad,l.s.ADPLAYBACK_WARNING,this.onAdWarning),this.listenToOnce(this.ad,l.s.ADPLAYBACK_ERROR,this.onAdError),this.listenToOnce(this.ad,l.s.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested)),this.triggerAdEvent(l.s.ADVERTISEMENT_LOADING,e),null===(s=this.ad)||void 0===s||s.load(e)}onAdReady(){var e;null===(e=this.ad)||void 0===e||e.start()}onAdLoaded(e){var t,i;const{activePlayback:s,activeContainer:n}=this.core;n.isPlaying()&&n.pause(),o.Pw.isMobile&&s.consent();const r=s;null===(t=r._hls)||void 0===t||t.destroy(),delete r._hls,this.triggerAdEvent(l.s.ADVERTISEMENT_LOADED,e),this.$el.css("height",n.el.offsetHeight).show(),this.addFadeIn(),null===(i=this.mediaControl)||void 0===i||i.disable(),n.stopListening()}onAdStarted(e){this.playing=!0,this.trackViewability(),this.setInitialVolume(),this.triggerAdEvent(l.s.ADVERTISEMENT_STARTED,e),this.ad instanceof ln&&this.$clickArea.show()}onAdImpression(e){this.triggerAdEvent(l.s.ADVERTISEMENT_IMPRESSION,e)}onAdResumed(e){this.playing=!0,this.triggerAdEvent(l.s.ADVERTISEMENT_RESUMED,e)}onAdViewable(){var e;this.triggerAdEvent(l.s.ADVERTISEMENT_VIEWABLE,null===(e=this.ad)||void 0===e?void 0:e.sources),this.viewability=!0}onAdPaused(e){this.playing=!1,this.triggerAdEvent(l.s.ADVERTISEMENT_PAUSED,e)}onAdComplete(e){this.playing=!1,this.triggerAdEvent(l.s.ADVERTISEMENT_COMPLETE,e)}onAdProgress(e){var t;const{total:i=0}=e;this.triggerAdEvent(l.s.ADVERTISEMENT_PROGRESS,e),!(i<=0)&&this.ad instanceof ln&&(null===(t=this.ad)||void 0===t||t.controls)}setInitialVolume(){var e,t,i;const s=(null===(t=null===(e=this.ad)||void 0===e?void 0:e.options)||void 0===t?void 0:t.muted)?0:kn.VOLUME;null===(i=this.ad)||void 0===i||i.setVolume(s)}onAdClick(e){if(this.triggerAdEvent(l.s.ADVERTISEMENT_CLICK,e),!(this.ad instanceof ln))return;const{controls:t,isWOW:i,isClickable:s}=this.ad;if(!t&&!i||!s)return;const n=()=>{document.hidden||(this.playing||this.play(),document.removeEventListener("visibilitychange",n))};document.addEventListener("visibilitychange",n),this.pause()}onAdWarning(e){var t;null!==(t=e.raw)&&void 0!==t||(e.raw={}),e.raw.blockType=this.currentBlockType,e.raw.index=this.adSourcesIndex,e.raw.requestCount=this.adSourcesLoadsCount,this.trigger(l.s.ADVERTISEMENT_WARNING,e)}onAdError(e){var t,i,s,n;if(null!==(t=e.raw)&&void 0!==t||(e.raw={}),e.raw.blockType=this.currentBlockType,e.raw.index=this.adSourcesIndex,e.raw.requestCount=this.adSourcesLoadsCount,e.raw.adPlayback=null===(i=this.ad)||void 0===i?void 0:i.name,e.raw.adType=null===(s=this.ad)||void 0===s?void 0:s.getAdType(),this.trigger(l.s.ADVERTISEMENT_ERROR,e),this.adSourcesLoadsCount<2&&this.reloadFailedAdTag&&e.raw.canRefetch)return void this.requestAd(e.raw);this.adSourcesLoadsCount=0;const r=this.currentBlockType&&(null===(n=this.params[this.currentBlockType])||void 0===n?void 0:n.sources),o=Array.isArray(r)&&r.slice(this.adSourcesIndex);Array.isArray(o)&&(null==o?void 0:o[0])&&this._blockCompleteCount<this.maxBlockLength?this.requestAd(o[0]):window.setTimeout((()=>this.requestResumeContent()),100)}onAdContentResumeRequested(e){this.triggerAdEvent(l.s.ADVERTISEMENT_ENDED,e),this.viewability||this.triggerAdEvent(l.s.ADVERTISEMENT_NOTVIEWABLE,e),this.requestResumeContent()}requestResumeContent(){var e,t,i,s,n,r,d,c,h,u,f;if(!this.currentBlockType)return;this.playing=!1,this.viewability=!1,clearTimeout(this.viewabilityTimeout),delete this.viewabilityTimeout;const p=this.currentBlockType&&(null===(e=this.params[this.currentBlockType])||void 0===e?void 0:e.sources),g=this.currentBlockType&&kn.PUID3[this.currentBlockType],m=this.ad instanceof ln&&(null===(t=this.ad)||void 0===t?void 0:t.sources)&&this.getNextAdBlockSources?this.getNextAdBlockSources(null===(i=this.ad)||void 0===i?void 0:i.sources,g):(null===(s=this.ad)||void 0===s?void 0:s.sources)&&Array.isArray(p)&&(null==p?void 0:p[this.adSourcesIndex]);if(this.allowBlock&&m&&++this._blockCompleteCount<this.maxBlockLength)return void this.requestAd(m);this.triggerAdEvent(l.s.ADVERTISEMENT_CONTENT_RESUME_REQUESTED,null===(n=this.ad)||void 0===n?void 0:n.sources);const v="pauseBanner"===this.currentBlockType||"pauseBannerMobile"===this.currentBlockType,A=["preRoll","preRollMobile"].includes(this.currentBlockType)&&(!(null===(r=this.params[this.currentBlockType])||void 0===r?void 0:r.hasOwnProperty("start"))||0===(null===(d=this.params[this.currentBlockType])||void 0===d?void 0:d.start)),{containerEnded:E}=this;if(this.$el.is(":visible")){E&&(this.currentContainerTime=0,delete this.currentContainerVolume);const{playback:e={},sources:t,[a.gM]:i,[a.yN]:s}=this.core.options;e.recycleVideo=o.Pw.isMobile;const n=!v&&!E,r={playback:e,sources:t,autoPlay:n};if(i?r[a.gM]=n:s&&(r[a.yN]=n),this.core.configure(r),v){const e=this.core.activePlayback;null===(c=null==e?void 0:e._setup)||void 0===c||c.call(e),this.listenToOnce(e,l.s.PLAYBACK_LOADEDMETADATA,this.restoreCurrentContainerTime),this.listenToOnce(e,l.s.PLAYBACK_PLAY_INTENT,this.onPlayAfterPause)}else E||this.listenToOnce(this.core.activeContainer,l.s.CONTAINER_PLAY,this.restoreCurrentContainerTime);this.$el.hide(),this.hideControls(),null===(h=this.mediaControl)||void 0===h||h.enable(),n&&o.Pw.isMobile&&this.core.activeContainer.play()}else this.currentContainerTime=0,delete this.currentContainerVolume,A&&this.core.activeContainer.settingsUpdate(),E||v||this.core.activeContainer.play();this.adSourcesIndex=0,this.adSourcesLoadsCount=0,this._blockCompleteCount=0,this.destroyAd(),null===(f=null===(u=this.core.activeContainer)||void 0===u?void 0:u.getPlugin("click_to_pause"))||void 0===f||f.enable(),(A||this.currentBlockType&&this.isPreRollWithStartTime(this.currentBlockType)||E)&&delete this.params[this.currentBlockType],delete this.currentBlockType}restoreCurrentContainerTime(){var e,t;this.currentContainerTime>0&&(null===(e=this.core.activeContainer)||void 0===e||e.seek(this.currentContainerTime),this.currentContainerTime=0),null!=this.currentContainerVolume&&(null===(t=this.mediaControl)||void 0===t||t.setVolume(this.currentContainerVolume,!0),delete this.currentContainerVolume)}createBannerContainer(e){const t="YANDEX"===e.provider&&"none";return(0,o.$)("<div />").addClass("eagleplayer-advertisement-banner eplayer-skin-component eplayer-skin-fullsize eplayer-skin-shiftable").attr("data-banner","").css({pointerEvents:t}).hide()}onAdvertisementEnded(e){["banner","bannerMobile"].includes(e.blockType)||this.showBanner()}showBanner(){var e;this.currentBlockType||null===(e=this.$bannerContainer)||void 0===e||e.show()}hideBanner(){var e;null===(e=this.$bannerContainer)||void 0===e||e.hide()}startBanner(){var e,t;if(!this.enabled||this.$bannerContainer)return;const i=o.Pw.isMobile?null===(e=this.params.bannerMobile)||void 0===e?void 0:e.sources:null===(t=this.params.banner)||void 0===t?void 0:t.sources;Array.isArray(i)&&(null==i?void 0:i[0])&&this.requestBanner(i[0])}requestBanner(e){var t,i,s;const n=this.overlayPlaybacks.find((t=>t.canPlay(e)));if(this.bannerSourcesIndex++,!n){const t=this.createError({code:`${Vs.VAST_UNEXPECTED_AD_SOURCE}`,description:"no ad playback found for such sources",level:o.Mk.Levels.WARN,raw:Object.assign(Object.assign({},e),{code:Vs.VAST_UNEXPECTED_AD_SOURCE})});return void this.onBannerError(t)}this.destroyBanner();const{core:r}=this;this.$bannerContainer||(this.$bannerContainer=this.createBannerContainer(e),"universal"===(null===(t=this.options.mediaControl)||void 0===t?void 0:t.skinName)?null===(i=this.mediaControl)||void 0===i||i.$el.append(this.$bannerContainer.get(0)):r.$el.prepend(this.$bannerContainer.get(0)));const a={muted:(null==e?void 0:e.mute)||(null===(s=this.mediaControl)||void 0===s?void 0:s.muted),containerElement:this.$bannerContainer.get(0),get videoElement(){return r.activePlayback.el}};this.banner=new n(a,r),this.listenToOnce(this.banner,l.s.ADPLAYBACK_READY,this.onBannerReady),this.listenToOnce(this.banner,l.s.ADPLAYBACK_LOADED,this.onBannerLoaded),this.listenToOnce(this.banner,l.s.ADPLAYBACK_ERROR,this.onBannerError),this.listenTo(this.banner,l.s.ADPLAYBACK_USER_CLOSE,this.hideBanner),this.triggerBannerEvent(l.s.ADVERTISEMENT_LOADING,e),this.banner.load(e)}onBannerReady(){var e;null===(e=this.banner)||void 0===e||e.start()}onBannerLoaded(e){this.triggerBannerEvent(l.s.ADVERTISEMENT_LOADED,e),this.showBanner()}onBannerError(e){var t,i,s,n;const r=o.Pw.isMobile?"bannerMobile":"banner";null!==(t=e.raw)&&void 0!==t||(e.raw={}),e.raw.blockType=r,e.raw.index=this.bannerSourcesIndex,e.raw.requestCount=1,e.raw.adPlayback=null===(i=this.ad)||void 0===i?void 0:i.name,e.raw.adType=null===(s=this.banner)||void 0===s?void 0:s.getAdType(),this.trigger(l.s.ADVERTISEMENT_ERROR,e);const a=null===(n=this.params[r])||void 0===n?void 0:n.sources,d=Array.isArray(a)&&a.slice(this.bannerSourcesIndex);Array.isArray(d)&&(null==d?void 0:d[0])?this.requestBanner(d[0]):this.closeBanner()}closeBanner(){var e,t;(null===(e=this.$bannerContainer)||void 0===e?void 0:e.is(":visible"))&&(this.hideBanner(),this.triggerBannerEvent(l.s.ADVERTISEMENT_ENDED,null===(t=this.banner)||void 0===t?void 0:t.sources)),this.bannerSourcesIndex=0,this.lastBannerStartTime=0,this.destroyBanner(),delete this.params[o.Pw.isMobile?"bannerMobile":"banner"]}pause(){var e;null===(e=this.ad)||void 0===e||e.pause()}play(){var e;null===(e=this.ad)||void 0===e||e.resume()}hideControls(){this.$clickArea.hide().css("pointer-events",""),this.$el.find("iframe").css("opacity","")}addFadeIn(){var e,t;const i=null===(t=null===(e=this.ad)||void 0===e?void 0:e.sources)||void 0===t?void 0:t.provider;"YANDEX"!==i&&"ADFOX"!==i&&this.currentBlockType&&this.isPreRollWithStartTime(this.currentBlockType)&&(0,o.$)(".eagleplayer-advertisement").parent(".eagleplayer-container").addClass("fade")}render(){var e;if(!this.core.$el.parents().length||this.rendered)return this;const{playList:t}=this.core.options;return this.$el.html(this.template({preview:(null==t?void 0:t.snapshot)||"none",title:null!==(e=null==t?void 0:t.title)&&void 0!==e?e:"",duration:t?(0,d.V1)(t.duration):""})),this.$adContainer=this.$el.find("[data-ad-container]"),this.$clickArea=this.$el.find("[data-ad-click]"),this.$el.hide(),this.hideControls(),this.rendered=!0,this.core.$el.prepend(this.el),this}destroyAd(){this.ad&&(this.stopListening(this.ad,l.s.ADPLAYBACK_READY,this.onAdReady),this.stopListening(this.ad,l.s.ADPLAYBACK_LOADED,this.onAdLoaded),this.stopListening(this.ad,l.s.ADPLAYBACK_STARTED,this.onAdStarted),this.stopListening(this.ad,l.s.ADPLAYBACK_IMPRESSION,this.onAdImpression),this.stopListening(this.ad,l.s.ADPLAYBACK_RESUMED,this.onAdResumed),this.stopListening(this.ad,l.s.ADPLAYBACK_PAUSED,this.onAdPaused),this.stopListening(this.ad,l.s.ADPLAYBACK_COMPLETE,this.onAdComplete),this.stopListening(this.ad,l.s.ADPLAYBACK_PROGRESS,this.onAdProgress),this.stopListening(this.ad,l.s.ADPLAYBACK_CLICK,this.onAdClick),this.stopListening(this.ad,l.s.ADPLAYBACK_WARNING,this.onAdWarning),this.stopListening(this.ad,l.s.ADPLAYBACK_ERROR,this.onAdError),this.stopListening(this.ad,l.s.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested),this.ad.destroy()),delete this.ad}destroyBanner(){this.banner&&(this.stopListening(this.banner,l.s.ADPLAYBACK_READY,this.onBannerReady),this.stopListening(this.banner,l.s.ADPLAYBACK_LOADED,this.onBannerLoaded),this.stopListening(this.banner,l.s.ADPLAYBACK_ERROR,this.onBannerError),this.stopListening(this.banner,l.s.ADPLAYBACK_USER_CLOSE,this.hideBanner),this.banner.destroy()),delete this.banner}stopListening(e,t,i){return i||clearTimeout(this.viewabilityTimeout),super.stopListening(e,t,i)}destroy(){var e;this.destroyAd(),this.destroyBanner(),this.inStreamPlaybacks.forEach((e=>e.destroy())),this.overlayPlaybacks.forEach((e=>e.destroy())),null===(e=this.$bannerContainer)||void 0===e||e.remove(),delete this.$bannerContainer,super.destroy()}}kn.VIEWABILITY_TIMEOUT=2e3,kn.MIN_VIEWABILITY_HEIGHT=.5,kn.PUID3={preRoll:6,preRollMobile:6,middleRoll:7,middleRollMobile:7,pauseRoll:void 0,pauseRollMobile:void 0,postRoll:15,postRollMobile:15,banner:void 0,bannerMobile:void 0,pauseBanner:void 0,pauseBannerMobile:void 0,pseudostreaming:7,pseudostreamingMobile:7},kn.BLOCK_TIME={preRoll:240,preRollMobile:240,middleRoll:900,middleRollMobile:900,postRoll:900,postRollMobile:900},kn.VOLUME=10,kn.loaded=!1,kn.lastPseudoStreamingStartTime=0},6682:(e,t,i)=>{"use strict";i.d(t,{E:()=>s});const s=(e,t={})=>{const{timeout:i}=t,s=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(t,["timeout"]);if(null!=i){const e=new AbortController;s.signal=e.signal,window.setTimeout((()=>e.abort()),i)}return fetch(e,s)}},7007:e=>{"use strict";var t,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(i,s){function n(i){e.removeListener(t,r),s(i)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",n),i([].slice.call(arguments))}g(e,t,r,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function d(e,t,i,s){var n,r,o,d;if(a(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),r=e._events),o=r[t]),void 0===o)o=r[t]=i,++e._eventsCount;else if("function"==typeof o?o=r[t]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(n=l(e))>0&&o.length>n&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,d=c,console&&console.warn&&console.warn(d)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,i){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=c.bind(s);return n.listener=i,s.wrapFn=n,n}function u(e,t,i){var s=e._events;if(void 0===s)return[];var n=s[t];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(n):p(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function p(e,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=e[s];return i}function g(e,t,i,s){if("function"==typeof e.on)s.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(r){s.once&&e.removeEventListener(t,n),i(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)s(l,this,t);else{var d=l.length,c=p(l,d);for(i=0;i<d;++i)s(c[i],this,t)}return!0},r.prototype.addListener=function(e,t){return d(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return d(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},r.prototype.removeListener=function(e,t){var i,s,n,r,o;if(a(t),void 0===(s=this._events))return this;if(void 0===(i=s[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===t||i[r].listener===t){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,n),1===i.length&&(s[e]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",e,o||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var n,r=Object.keys(i);for(s=0;s<r.length;++s)"removeListener"!==(n=r[s])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},r.prototype.listeners=function(e){return u(this,e,!0)},r.prototype.rawListeners=function(e){return u(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7083:e=>{var t=1/0,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,o=parseInt,a=Object.prototype.toString;function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return function(e,d){var c;if("function"!=typeof d)throw new TypeError("Expected a function");return e=function(e){var d=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(l(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=l(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var d=n.test(e);return d||r.test(e)?o(e.slice(2),d?2:8):s.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),c=d%1;return d==d?c?d-c:d:0}(e),function(){return--e>0&&(c=d.apply(this,arguments)),e<=1&&(d=void 0),c}}(2,e)}},7166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setScroll=s,t.getScroll=n,t.scrollToTop=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return new Promise((function(o){var a=n(e),l=0;t=Math.max(t,0),function n(){var d=(l+=1/60)/(r/1e3),c=d;if(d<1){i(n);var h=Math.round(a+(t-a)*c);s(e,h)}else s(e,t),o()}()}))};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)};function s(e,t){e===document.body||e===document.documentElement?window.scrollTo(0,t):e.scrollTop=t}function n(e){return e===document.body||e===document.documentElement?document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop}},7193:(e,t,i)=>{e=i.nmd(e);var s="__lodash_hash_undefined__",n=9007199254740991,r="[object Arguments]",o="[object Boolean]",a="[object Date]",l="[object Function]",d="[object GeneratorFunction]",c="[object Map]",h="[object Number]",u="[object Object]",f="[object Promise]",p="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",A="[object WeakMap]",E="[object ArrayBuffer]",y="[object DataView]",T="[object Float32Array]",b="[object Float64Array]",S="[object Int8Array]",_="[object Int16Array]",C="[object Int32Array]",R="[object Uint8Array]",L="[object Uint8ClampedArray]",I="[object Uint16Array]",k="[object Uint32Array]",w=/\w*$/,P=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,D={};D[r]=D["[object Array]"]=D[E]=D[y]=D[o]=D[a]=D[T]=D[b]=D[S]=D[_]=D[C]=D[c]=D[h]=D[u]=D[p]=D[g]=D[m]=D[v]=D[R]=D[L]=D[I]=D[k]=!0,D["[object Error]"]=D[l]=D[A]=!1;var N="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,M="object"==typeof self&&self&&self.Object===Object&&self,x=N||M||Function("return this")(),B=t&&!t.nodeType&&t,F=B&&e&&!e.nodeType&&e,U=F&&F.exports===B;function $(e,t){return e.set(t[0],t[1]),e}function V(e,t){return e.add(t),e}function G(e,t,i,s){var n=-1,r=e?e.length:0;for(s&&r&&(i=e[++n]);++n<r;)i=t(i,e[n],n,e);return i}function j(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function K(e){var t=-1,i=Array(e.size);return e.forEach((function(e,s){i[++t]=[s,e]})),i}function H(e,t){return function(i){return e(t(i))}}function Y(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}var W,z=Array.prototype,q=Function.prototype,X=Object.prototype,Q=x["__core-js_shared__"],Z=(W=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",J=q.toString,ee=X.hasOwnProperty,te=X.toString,ie=RegExp("^"+J.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=U?x.Buffer:void 0,ne=x.Symbol,re=x.Uint8Array,oe=H(Object.getPrototypeOf,Object),ae=Object.create,le=X.propertyIsEnumerable,de=z.splice,ce=Object.getOwnPropertySymbols,he=se?se.isBuffer:void 0,ue=H(Object.keys,Object),fe=xe(x,"DataView"),pe=xe(x,"Map"),ge=xe(x,"Promise"),me=xe(x,"Set"),ve=xe(x,"WeakMap"),Ae=xe(Object,"create"),Ee=Ve(fe),ye=Ve(pe),Te=Ve(ge),be=Ve(me),Se=Ve(ve),_e=ne?ne.prototype:void 0,Ce=_e?_e.valueOf:void 0;function Re(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}function Le(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}function Ie(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}function ke(e){this.__data__=new Le(e)}function we(e,t,i){var s=e[t];ee.call(e,t)&&Ge(s,i)&&(void 0!==i||t in e)||(e[t]=i)}function Pe(e,t){for(var i=e.length;i--;)if(Ge(e[i][0],t))return i;return-1}function Oe(e,t,i,s,n,f,A){var P;if(s&&(P=f?s(e,n,f,A):s(e)),void 0!==P)return P;if(!We(e))return e;var O=je(e);if(O){if(P=function(e){var t=e.length,i=e.constructor(t);return t&&"string"==typeof e[0]&&ee.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!t)return function(e,t){var i=-1,s=e.length;for(t||(t=Array(s));++i<s;)t[i]=e[i];return t}(e,P)}else{var N=Fe(e),M=N==l||N==d;if(He(e))return function(e,t){if(t)return e.slice();var i=new e.constructor(e.length);return e.copy(i),i}(e,t);if(N==u||N==r||M&&!f){if(j(e))return f?e:{};if(P=function(e){return"function"!=typeof e.constructor||$e(e)?{}:We(t=oe(e))?ae(t):{};var t}(M?{}:e),!t)return function(e,t){return Ne(e,Be(e),t)}(e,function(e,t){return e&&Ne(t,ze(t),e)}(P,e))}else{if(!D[N])return f?e:{};P=function(e,t,i,s){var n,r=e.constructor;switch(t){case E:return De(e);case o:case a:return new r(+e);case y:return function(e,t){var i=t?De(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,s);case T:case b:case S:case _:case C:case R:case L:case I:case k:return function(e,t){var i=t?De(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}(e,s);case c:return function(e,t,i){return G(t?i(K(e),!0):K(e),$,new e.constructor)}(e,s,i);case h:case m:return new r(e);case p:return function(e){var t=new e.constructor(e.source,w.exec(e));return t.lastIndex=e.lastIndex,t}(e);case g:return function(e,t,i){return G(t?i(Y(e),!0):Y(e),V,new e.constructor)}(e,s,i);case v:return n=e,Ce?Object(Ce.call(n)):{}}}(e,N,Oe,t)}}A||(A=new ke);var x=A.get(e);if(x)return x;if(A.set(e,P),!O)var B=i?function(e){return function(e,t,i){var s=t(e);return je(e)?s:function(e,t){for(var i=-1,s=t.length,n=e.length;++i<s;)e[n+i]=t[i];return e}(s,i(e))}(e,ze,Be)}(e):ze(e);return function(e,t){for(var i=-1,s=e?e.length:0;++i<s&&!1!==t(e[i],i););}(B||e,(function(n,r){B&&(n=e[r=n]),we(P,r,Oe(n,t,i,s,r,e,A))})),P}function De(e){var t=new e.constructor(e.byteLength);return new re(t).set(new re(e)),t}function Ne(e,t,i,s){i||(i={});for(var n=-1,r=t.length;++n<r;){var o=t[n],a=s?s(i[o],e[o],o,i,e):void 0;we(i,o,void 0===a?e[o]:a)}return i}function Me(e,t){var i,s,n=e.__data__;return("string"==(s=typeof(i=t))||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i)?n["string"==typeof t?"string":"hash"]:n.map}function xe(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!We(e)||(t=e,Z&&Z in t))&&(Ye(e)||j(e)?ie:P).test(Ve(e));var t}(i)?i:void 0}Re.prototype.clear=function(){this.__data__=Ae?Ae(null):{}},Re.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Re.prototype.get=function(e){var t=this.__data__;if(Ae){var i=t[e];return i===s?void 0:i}return ee.call(t,e)?t[e]:void 0},Re.prototype.has=function(e){var t=this.__data__;return Ae?void 0!==t[e]:ee.call(t,e)},Re.prototype.set=function(e,t){return this.__data__[e]=Ae&&void 0===t?s:t,this},Le.prototype.clear=function(){this.__data__=[]},Le.prototype.delete=function(e){var t=this.__data__,i=Pe(t,e);return!(i<0||(i==t.length-1?t.pop():de.call(t,i,1),0))},Le.prototype.get=function(e){var t=this.__data__,i=Pe(t,e);return i<0?void 0:t[i][1]},Le.prototype.has=function(e){return Pe(this.__data__,e)>-1},Le.prototype.set=function(e,t){var i=this.__data__,s=Pe(i,e);return s<0?i.push([e,t]):i[s][1]=t,this},Ie.prototype.clear=function(){this.__data__={hash:new Re,map:new(pe||Le),string:new Re}},Ie.prototype.delete=function(e){return Me(this,e).delete(e)},Ie.prototype.get=function(e){return Me(this,e).get(e)},Ie.prototype.has=function(e){return Me(this,e).has(e)},Ie.prototype.set=function(e,t){return Me(this,e).set(e,t),this},ke.prototype.clear=function(){this.__data__=new Le},ke.prototype.delete=function(e){return this.__data__.delete(e)},ke.prototype.get=function(e){return this.__data__.get(e)},ke.prototype.has=function(e){return this.__data__.has(e)},ke.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Le){var s=i.__data__;if(!pe||s.length<199)return s.push([e,t]),this;i=this.__data__=new Ie(s)}return i.set(e,t),this};var Be=ce?H(ce,Object):function(){return[]},Fe=function(e){return te.call(e)};function Ue(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&e<t}function $e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function Ve(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ge(e,t){return e===t||e!=e&&t!=t}(fe&&Fe(new fe(new ArrayBuffer(1)))!=y||pe&&Fe(new pe)!=c||ge&&Fe(ge.resolve())!=f||me&&Fe(new me)!=g||ve&&Fe(new ve)!=A)&&(Fe=function(e){var t=te.call(e),i=t==u?e.constructor:void 0,s=i?Ve(i):void 0;if(s)switch(s){case Ee:return y;case ye:return c;case Te:return f;case be:return g;case Se:return A}return t});var je=Array.isArray;function Ke(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!Ye(e)}var He=he||function(){return!1};function Ye(e){var t=We(e)?te.call(e):"";return t==l||t==d}function We(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ze(e){return Ke(e)?function(e,t){var i=je(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ke(e)}(e)&&ee.call(e,"callee")&&(!le.call(e,"callee")||te.call(e)==r)}(e)?function(e,t){for(var i=-1,s=Array(e);++i<e;)s[i]=t(i);return s}(e.length,String):[],s=i.length,n=!!s;for(var o in e)!t&&!ee.call(e,o)||n&&("length"==o||Ue(o,s))||i.push(o);return i}(e):function(e){if(!$e(e))return ue(e);var t=[];for(var i in Object(e))ee.call(e,i)&&"constructor"!=i&&t.push(i);return t}(e)}e.exports=function(e){return Oe(e,!0,!0)}},7204:(e,t,i)=>{"use strict";i.d(t,{D0:()=>g,EH:()=>c,Lt:()=>u,NB:()=>A,Q:()=>f,Uc:()=>h,VC:()=>T,WH:()=>m,XG:()=>v,_L:()=>l,bN:()=>p,t9:()=>d});var s=i(8952),n=i(9836),r=i(377);const o=["env","retention","service","app","deviceType","account"],a=["adPlayback","adType","adBlockType"],l=new s.Histogram({name:"player_loading_time",help:"Общее время загрузки плеера",buckets:[.1,.2,.3,.4,.5,.6,.7,1,2,5,10],labels:o}),d=new s.Histogram({name:"player_first_chunk_loading_time",help:"Время загрузки первого чанка",buckets:[.05,.1,.15,.2,.3,.4,.5,1,2,5,10],labels:[...o,"resolution"]}),c=new s.Histogram({name:"player_plugins_loading_time",help:"Время загрузки плагинов",buckets:[.05,.1,.15,.2,.3,.4,.5,1,2,5,10],labels:o}),h=new s.Histogram({name:"player_api_fetching_time",help:"Время запроса в API",buckets:[.05,.1,.15,.2,.3,.4,.5,1,2,5,10],labels:[...o,"endpoint"]}),u=new s.Counter({name:"player_buffering_delay",help:"Количество задержек буфферизации чанков более 500ms",labels:[...o,"resolution"]}),f=new s.Counter({name:"player_auto_play_error",help:"Количество ошибок автоплея (автоплей был включен, но не стартовал)",labels:[...o,"reason"]}),p=new s.Counter({name:"player_loading_error",help:"Количество ошибок при старте видео",labels:[...o,"errorCode"]}),g=new s.Counter({name:"player_ad_request",help:"Количество запросов рекламы",labels:[...o,...a]}),m=new s.Counter({name:"player_ad_start_error",help:"Количество ошибок при старте рекламы (реклама загрузилась, но не стартовала)",labels:[...o,...a,"adSystem","errorCode"]}),v=new s.Counter({name:"player_ad_viewability",help:"Видимость рекламы",labels:[...o,...a,"adSystem","visible"]}),A=e=>s.defaultRegistry.setDefaultLabels(e),E=new s.PushGateway({url:"https://atlas.rambler.ru/metrics",fetchOptions:{keepalive:!0,headers:{"X-Atlas-Ath":"Basic cm9vdDpva2FpWWlraWVnaDBhb3ZvbzVhaA=="}}});let y="";const T=async()=>{const e=s.defaultRegistry.expose();e!==y&&(y=e,(0,r._o)()&&n.t.debug("prometheus",e),(0,r.yz)()||(await E.push(),Object.values(s.defaultRegistry.collectors).forEach((e=>e.reset()))))}},7439:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1354),n=i.n(s),r=i(6314),o=i.n(r)()(n());o.push([e.id,"[data-html5-video]{position:absolute;height:100%;width:100%;display:block}","",{version:3,sources:["webpack://./node_modules/@clappr/core/src/playbacks/html5_video/public/style.scss"],names:[],mappings:"AAAA,mBACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,aAAA",sourcesContent:["[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block;\n}\n"],sourceRoot:""}]),o.locals={};const a=o},7546:(e,t,i)=>{"use strict";i.d(t,{QS:()=>n,Q_:()=>s,fx:()=>o});const s=Boolean(navigator.userAgent.match(new RegExp(`(${["googlebot/","Googlebot-Mobile","Googlebot-Image","Google favicon","Mediapartners-Google","bingbot","slurp","java","wget","curl","Commons-HttpClient","Python-urllib","libwww","httpunit","nutch","phpcrawl","msnbot","jyxobot","FAST-WebCrawler","FAST Enterprise Crawler","biglotron","teoma","convera","seekbot","gigablast","exabot","ngbot","ia_archiver","GingerCrawler","webmon","httrack","webcrawler","grub.org","UsineNouvelleCrawler","antibot","netresearchserver","speedy","fluffy","bibnum.bnf","findlink","msrbot","panscient","yacybot","AISearchBot","IOI","ips-agent","tagoobot","MJ12bot","dotbot","woriobot","yanga","buzzbot","mlbot","yandexbot","purebot","Linguee Bot","Voyager","CyberPatrol","voilabot","baiduspider","citeseerxbot","spbot","twengabot","postrank","turnitinbot","scribdbot","page2rss","sitebot","linkdex","Adidxbot","blekkobot","ezooms","dotbot","Mail.RU_Bot","discobot","heritrix","findthatfile","europarchive.org","NerdByNature.Bot","sistrix crawler","ahrefsbot","Aboundex","domaincrawle","wbsearchbot","summify","ccbot","edisterbot","seznambot","ec2linkfinder","gslfbot","aihitbot","intelium_bot","facebookexternalhit","yeti","RetrevoPageAnalyzer","lb-spider","sogou","lssbot","careerbot","wotbox","wocbot","ichiro","DuckDuckBot","lssrocketcrawler","drupact","webcompanycrawler","acoonbot","openindexspider","gnam gnam spider","web-archive-net.com.bot","backlinkcrawler","coccoc","integromedb","content crawler spider","toplistbot","seokicks-robot","it2media-domain-crawler","ip-web-crawler.com","siteexplorer.info","elisabot","proximic","changedetection","blexbot","arabot","WeSEE:Search","niki-bot","CrystalSemanticsBot","rogerbot","360Spider","psbot","InterfaxScanBot","Lipperhey SEO Service","CC Metadata Scaper","g00g1e.net","GrapeshotCrawler","urlappendbot","brainobot","fr-crawler","binlar","SimpleCrawler","Livelapbot","Twitterbot","cXensebot","smtbot","bnf.fr_bot","A6-Indexer","ADmantX","Facebot","Twitterbot","OrangeBot","memorybot","AdvBot","MegaIndex","SemanticScholarBot","ltx71","nerdybot","xovibot","BUbiNG","Qwantify","archive.org_bot","Applebot","TweetmemeBot","crawler4j","findxbot","SemrushBot","yoozBot","lipperhey","y!j-asr","Domain Re-Animator Bot","AddThis"].join("|")})`,"i"))),n="requestStorageAccess"in document&&"function"==typeof document.requestStorageAccess,r=["RVPCompat\\w+/[0-9.]+","Gazeta.Ru \\w+ Application"],o=()=>{const e=new RegExp(`(${r.join("|")})`,"i");return navigator.userAgent.match(e)?"webview":"browser"}},7659:e=>{"use strict";var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},8009:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],s=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(s=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);s=!0);}catch(e){n=!0,r=e}finally{try{!s&&a.return&&a.return()}finally{if(n)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i(8486),l=h(i(7007)),d=h(i(2522)),c=i(1582);function h(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.expectedOrigin=i,n.connectedWindow=s,n.functions={},n.contexts={},n.unpackedFunctions={},n.i=0,n.onMessage=n.onMessage.bind(n),n.subscribeEvents(),n.transportId=n.prepareTransportId(e),n.setMaxListeners(1/0),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"destroy",value:function(){this.unsubscribeEvents(),this.functions={},this.contexts={},this.unpackedFunctions={}}},{key:"generateId",value:function(){return++this.i}},{key:"subscribeEvents",value:function(){window.addEventListener("message",this.onMessage,!0)}},{key:"unsubscribeEvents",value:function(){window.removeEventListener("message",this.onMessage,!0)}},{key:"prepareTransportId",value:function(e){return"MAGIC_TRANSPORT:"+e}},{key:"pack",value:function(e){var t=this,i={},s=[];return(0,d.default)(e,(function(e,n,o,a,l){if(-1!==s.indexOf(e))return!1;if("function"==typeof e){var d=0===l?window:o,c="__"+t.transportId+":functionId",h=e[c];h||(h=t.generateId(),Object.defineProperty(e,c,{get:function(){return h}})),t.functions[h]||(t.functions[h]=function(t,i){return new Promise((function(s,n){try{Promise.resolve(e.apply(t,i)).then(s,n)}catch(e){n(e)}}))});var u="__"+t.transportId+":contextId",f=d[u];f||(f=t.generateId(),Object.defineProperty(d,u,{get:function(){return f}})),t.contexts[f]||(t.contexts[f]=d),i[a]=[h,f]}else"object"===(void 0===e?"undefined":r(e))&&s.push(e)})),i}},{key:"unpack",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(0,a.set)(e,i,this.unpackFunction(t[i]))}},{key:"unpackFunction",value:function(e){var t=this,i=n(e,2),s=i[0]+"|"+i[1];return this.unpackedFunctions[s]||(this.unpackedFunctions[s]=function(){for(var i=arguments.length,s=Array(i),n=0;n<i;n++)s[n]=arguments[n];return t.sendMessage({args:s,functionToInvoke:e,type:"invoke",waitResponse:!0}).then((function(e){return e.response.result}))}),this.unpackedFunctions[s]}},{key:"sendMessage",value:function(e){var t,i,n,r,o=e.type,a=e.args,l=void 0===a?[]:a,d=e.response,h=void 0===d?{}:d,u=e.responseToId,f=e.functionToInvoke,p=e.waitResponse,g=this.generateId(),m=(i={},n=this.transportId,r={id:g,type:o,args:l,responseToId:u,functionToInvoke:f,response:h,functions:s({},this.pack(l),this.pack(h)),ts:Date.now()},n in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i),v=[(0,c.stringify)(m)],A=this.expectedOrigin&&"*"!==this.expectedOrigin?this.expectedOrigin:"*";if(A&&v.push(A),(t=this.connectedWindow).postMessage.apply(t,v),p)return this.waitResponse(g)}},{key:"waitResponse",value:function(e){var t=this;return new Promise((function(i,s){t.once("response:"+e,(function(e){var t=e.response.error;t?s(t):i(e)}))}))}},{key:"checkOrigin",value:function(e){return!this.expectedOrigin||"*"===this.expectedOrigin||e===this.expectedOrigin}},{key:"onMessage",value:function(e){var t=e.data;if("string"==typeof t&&this.checkOrigin(e.origin)){try{t=(0,c.parse)(t)}catch(e){t={}}t[this.transportId]&&(this.connectedOrigin||(this.connectedOrigin=e.origin),this.handleMessage(t[this.transportId],e.source))}}},{key:"handleMessage",value:function(e,t){var i=e.type,s=e.args,n=e.functions,r=e.response;switch(i){case"invoke":this.unpack(s,n),this.handleInvoke(e);break;case"response":this.unpack(r,n),this.handleResponse(e);break;case"initialize":this.unpack(s,n),this.handleInitialize&&this.handleInitialize(e,t)}}},{key:"handleResponse",value:function(e){var t=e.responseToId;this.emit("response:"+t,e)}},{key:"handleInvoke",value:function(e){var t=this,i=e.functionToInvoke,s=e.args,r=e.id,o=n(i,2),a=o[0],l=o[1],d=this.functions[a],c=this.contexts[l];new Promise((function(e,t){try{Promise.resolve(d(c,s)).then(e,(function(e){throw t(e),e}))}catch(e){throw t(e),e}})).then((function(e){return t.sendMessage({type:"response",response:{result:e},responseToId:r})}),(function(e){return t.sendMessage({type:"response",response:{error:e},responseToId:r})}))}}]),t}(l.default);t.default=u},8081:(e,t,i)=>{"use strict";i.d(t,{$D:()=>f,DU:()=>p,Hn:()=>a,I:()=>c,_3:()=>h,o2:()=>u,zs:()=>g});var s=i(2136),n=i(6413),r=i(7204),o=i(6682);const a={ru:0,en:1,es:2,fr:3,de:4,ja:5,it:6,ko:7,zh:8,pt:9,other:10},l="https://api.vp.rambler.ru",d="/api/v3",c={UNKNOWN_ERROR:{code:"unknown_error",message:"unknown error"},RECORD_NOT_FOUND:{code:"video_not_found",message:"video not found"},RECORD_NOT_PUBLISHED:{code:"video_publish_finish",message:"publishing of video finished"},RECORD_NOT_PROCESSED:{code:"video_processing",message:"video is now processing"},RECORD_ACCESS_DENIED_SITE:{code:"access_denied",message:"access to this video is denied in your country or on this website"},RECORD_ACCESS_DENIED_COUNTRY:{code:"geo_access_denied",message:"video you requested cannot be played in your country"},TRANSLATION_NOT_FOUND:{code:"video_not_found",message:"video not found"},TRANSLATION_ACCESS_DENIED_SITE:{code:"access_denied",message:"access to this video is denied in your country or on this website"},TRANSLATION_ACCESS_DENIED_COUNTRY:{code:"geo_access_denied",message:"video you requested cannot be played in your country"},ACCESS_RESTRICTED:{code:"access_restricted",message:"you cannot watch this video"},NO_BROADCAST:{code:"no_broadcast",message:"no broadcast"},NO_SIGNAL:{code:"no_signal",message:"no signal"},NO_STREAM:{code:"no_stream",message:"no stream"},LIVE_FINISHED:{code:"live_finished",message:"live finished"},NO_CONNECTION:{code:"no_connection",message:"no connection"},ANNOUNCE:{code:"announce",message:""},TIMEOUT:{code:"timeout",message:"operation was aborted by timeout"},NOT_RESPOND:{code:"not_respond",message:"api does not respond"},INVALID_RESPONSE:{code:"invalid_response",message:"invalid response"},CACHE_NOT_READY:{code:"cache not ready",message:"cache not ready"}},h=async e=>{var t;const i={params:{referrer:e.referrer,accountCode:e.channel}},a=r.Uc.startTimer({endpoint:"/settings/getPlayerSettingsByAccount"});let h;try{const e=`${l}${d}/settings/getPlayerSettingsByAccount`,t=await(0,o.E)(e,{method:"post",credentials:"same-origin",timeout:1e4,body:JSON.stringify(i)});h=await t.json()}catch(e){if((0,n.Cp)(e,i),"AbortError"===e.name)throw new s.hD(c.TIMEOUT);throw new s.hD(c.NOT_RESPOND)}finally{a.observeDuration()}if((!h.success||!h.result)&&h.error){const{type:e,subtype:r,extra:o}=h.error,a=[e,r,o].filter(Boolean).join("_"),l=new s.hD(null!==(t=c[a])&&void 0!==t?t:c.UNKNOWN_ERROR);throw c[a]||(0,n.Cp)(l,Object.assign({},i)),l}if(!h.result){const e=new s.hD(c.INVALID_RESPONSE);throw(0,n.Cp)(e,i),e}return h.result},u=async e=>{var t;const{sessionId:i,channel:a,withCredentials:h}=e,u=!!i&&!!a,f=(({id:e,adTemplateId:t,playerTemplateId:i,multiplayerFilterId:s,suggestFilterId:n,pauseSuggestFilterId:r,suggestMobileFilterId:o,pauseSuggestMobileFilterId:a,referrer:l,sessionId:d,channel:c,checkReferrerCount:h},u)=>{const f={params:{referrer:l}};return"string"==typeof e?f.params.uuid=e:f.params.id=e,null!=t&&(f.params.adTemplateId=t),null!=i&&(f.params.playerTemplateId=i),null!=s&&(f.params.multiplayerFilterId=s),null!=n&&(f.params.suggestFilterId=n),null!=r&&(f.params.pauseSuggestFilterId=r),null!=o&&(f.params.suggestMobileFilterId=o),null!=a&&(f.params.pauseSuggestMobileFilterId=a),u&&(f.sessionId=d,f.params.account=c),h&&(f.params.checkReferrerCount=h),f})(e,u),p=(({id:e,live:t},i)=>{let s;return s=t?"string"==typeof e?"livestreams":"translations":"records",`/${s}/${i?"previewPlayerData":"getPlayerData"}`})(e,u),g=r.Uc.startTimer({endpoint:p});let m;try{let e=`${l}${d}${p}`;u||(e+=`?params=${encodeURIComponent(JSON.stringify(f.params))}`);const t=await(0,o.E)(e,Object.assign({method:u?"post":"get",credentials:h?"include":"same-origin",timeout:1e4},u&&{body:JSON.stringify(f)}));m=await t.json()}catch(e){throw(0,n.Cp)(e,f),new s.hD("AbortError"===e.name?c.TIMEOUT:c.NOT_RESPOND)}finally{g.observeDuration()}if((!m.success||!m.result)&&m.error){const{type:e,subtype:i,extra:r}=m.error,o=[e,i,r].filter(Boolean).join("_"),a=new s.hD(null!==(t=c[o])&&void 0!==t?t:c.UNKNOWN_ERROR);throw c[o]||(0,n.Cp)(a,Object.assign(Object.assign({},f),{type:e,subtype:i,extra:r})),a}if(!m.result){const e=new s.hD(c.INVALID_RESPONSE);throw(0,n.Cp)(e,f),e}return m.result},f=async e=>{try{const t=await(0,o.E)(e,{timeout:1e4});return await t.text()}catch(t){throw(0,n.Cp)(t,{url:e}),t}},p=async e=>{const t=`${l}${d}/subtitles/get`;try{const i=await(0,o.E)(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:e}),timeout:1e4}),n=await i.json();if(!n.result)throw new s.hD(c.INVALID_RESPONSE);return n.result}catch(i){throw(0,n.Cp)(i,{url:t,params:e}),i}},g=async e=>{const t=`${l}${d}/livestreams/getStatus`,i={id:e};try{const e=await(0,o.E)(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:i}),timeout:1e4}),n=await e.json();if(!n.result)throw new s.hD(c.INVALID_RESPONSE);return n.result}catch(e){throw(0,n.Cp)(e,{url:t,params:i}),e}}},8132:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(2039);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(s).default}});var n=i(6105);function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Consumer",{enumerable:!0,get:function(){return r(n).default}})},8135:e=>{e.exports=""},8220:e=>{"use strict";e.exports=function(e){var t,i=null,s=function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];var o;t=n,null===i&&(i=requestAnimationFrame((o=this,function(){i=null,e.apply(o,t)})))};return s.cancel=function(){cancelAnimationFrame(i),i=null},s}},8486:(e,t,i)=>{"use strict";var s=i(8997);function n(e){for(var t=e.split("."),i=[],s=0;s<t.length;s++){for(var n=t[s];"\\"===n[n.length-1]&&void 0!==t[s+1];)n=n.slice(0,-1)+".",n+=t[++s];i.push(n)}return i}e.exports.get=function(e,t){if(!s(e)||"string"!=typeof t)return e;for(var i=n(t),r=0;r<i.length;r++){var o=Object.getOwnPropertyDescriptor(e,i[r])||Object.getOwnPropertyDescriptor(Object.prototype,i[r]);if(o&&!o.enumerable)return;if(null==(e=e[i[r]])){if(r!==i.length-1)return;break}}return e},e.exports.set=function(e,t,i){if(s(e)&&"string"==typeof t)for(var r=n(t),o=0;o<r.length;o++){var a=r[o];s(e[a])||(e[a]={}),o===r.length-1&&(e[a]=i),e=e[a]}},e.exports.delete=function(e,t){if(s(e)&&"string"==typeof t)for(var i=n(t),r=0;r<i.length;r++){var o=i[r];if(r===i.length-1)return void delete e[o];e=e[o]}},e.exports.has=function(e,t){if(!s(e)||"string"!=typeof t)return!1;for(var i=n(t),r=0;r<i.length;r++)if(void 0===(e=e[i[r]]))return!1;return!0}},8522:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Mediascope:()=>d,Plugin:()=>d});var s=i(9371),n=i(7083),r=i.n(n),o=i(6121),a=i(7546),l=i(1162);class d extends s.rV{constructor(){super(...arguments),this.started=!1,this.stopped=!1,this.seekStarted=!1,this.adStarted=!1,this.adPaused=!1,this.currentGlobalLiveTime=0,this.currentLiveTime=0,this.onPageLeave=()=>{const{activeContainer:e}=this.core;!this.stopped&&this.getFTS()>0&&(this.stopListening(e,o.s.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.onStop()),this.adStarted&&this.onAdStop()}}get name(){return"mediascope"}get supportedVersion(){return{min:"0.5.0"}}get isLive(){var e;return this.core.options.live||(null===(e=this.core.activePlayback)||void 0===e?void 0:e.getPlaybackType())===s.YZ.LIVE}get provider(){return this.options.provider}get mediaControl(){return this.core.getPlugin("mediaControl")}get multiPlayer(){return this.core.getPlugin("multiplayer")}get suggest(){return this.core.getPlugin("suggest")}get watchNext(){return this.core.getPlugin("watchNext")}get advertisement(){return this.core.getPlugin("advertisement")}getFTS(){var e;const{activeContainer:t}=this.core,i=null!==(e=null==t?void 0:t.getCurrentTime())&&void 0!==e?e:0;return this.isLive?this.currentLiveTime:parseInt((1e3*i).toFixed())}sendMediascopeEvent(e,t=!1){var i,s;const{playList:n,channel:r,referrer:o}=this.core.options,a=null!==(i=null==n?void 0:n.uuid)&&void 0!==i?i:null==n?void 0:n.id;if(!a)return;const c="string"==typeof a?"uuid":"id",h={view:e,fts:t?this.getCurrentAdTime():this.getFTS(),cu_url:this.isLive?null!=o?o:"":`https://api.vp.rambler.ru/api/other/player/mediascope_export.html?${c}=${a}`,channel:`${null!=r?r:l.n4}`,referrer:null!=o?o:"",playerVersion:"1.146.0",cu_id:t?`adv_${a}`:a,live:this.isLive};null===(s=this.provider)||void 0===s||s.sendCustomVars(d.TOP100_ID,h)}setHeartbeatAdInterval(){var e;null!==(e=this.heartbeatAdInterval)&&void 0!==e||(this.heartbeatAdInterval=window.setInterval((()=>this.onAdHeartbeat()),d.HEARTBEAT_INTERVAL))}cleanHeartbeatAdInterval(){window.clearInterval(this.heartbeatAdInterval),delete this.heartbeatAdInterval}setHeartbeatInterval(){var e;null!==(e=this.heartbeatInterval)&&void 0!==e||(this.heartbeatInterval=window.setInterval((()=>this.heartbeat()),d.HEARTBEAT_INTERVAL))}cleanHeartbeatInterval(){window.clearInterval(this.heartbeatInterval),delete this.heartbeatInterval}onSeekInteractionEnd(){this.seekStarted=!1}onSeekInteractionStart(){var e;this.seekStarted=!0,(null===(e=this.core.activeContainer)||void 0===e?void 0:e.isPlaying())&&this.onStop()}getCurrentAdTime(){var e,t;return parseInt((1e3*(null!==(t=null===(e=this.advertisement)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0)).toFixed())}onAdStarted(){this.adStarted=!0,this.onPause(),this.onAdStart()}onAdStop(){this.cleanHeartbeatAdInterval(),this.sendMediascopeEvent(0,!0)}onAdPaused(){this.adPaused||(this.cleanHeartbeatAdInterval(),this.sendMediascopeEvent(3,!0),this.adPaused=!0)}onAdHeartbeat(){this.sendMediascopeEvent(2,!0)}onAdProgress(e){e.current>0&&this.adPaused&&(this.onAdStart(),this.adPaused=!1)}onAdStart(){this.sendMediascopeEvent(1,!0),this.setHeartbeatAdInterval()}onAdError(){this.adStarted&&(this.cleanHeartbeatAdInterval(),this.onAdStop())}onError(){var e;this.isLive&&this.getFTS()>0&&(null===(e=this.core.activeContainer)||void 0===e?void 0:e.isPlaying())&&!this.stopped&&this.onStop()}onStop(){this.cleanHeartbeatInterval(),this.started=!1,this.stopped=!0,this.sendMediascopeEvent(0)}onStart(){this.stopped=!1,this.setHeartbeatInterval(),this.sendMediascopeEvent(1)}heartbeat(){this.sendMediascopeEvent(2)}onPause(){const{activeContainer:e}=this.core;if(0!==this.getFTS()&&this.started){if(this.stopped=!1,e.ended)return void(this.started=!1);this.cleanHeartbeatInterval(),this.started=!1,this.sendMediascopeEvent(3)}}onPlay(){this.adStarted&&(this.adStarted=!1)}onTimeUpdate(){var e;const t=null===(e=this.core.activeContainer)||void 0===e?void 0:e.isPlaying();if(t&&this.isLive){const e=Date.now(),t=this.currentGlobalLiveTime||e;this.currentGlobalLiveTime=e,this.currentLiveTime+=this.currentGlobalLiveTime-t}this.seekStarted||t&&this.adStarted||t&&!this.started&&0!==this.getFTS()&&(this.onStart(),this.started=!0)}bindEvents(){const{activeContainer:e}=this.core;this.core.isReady||(this.onReady=r()(this.onReady)),this.listenToOnce(this.core,o.s.CORE_READY,this.onReady),this.listenTo(this.core,o.s.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),window.addEventListener("beforeunload",this.onPageLeave),e&&(this.listenTo(e,o.s.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(e,o.s.CONTAINER_PAUSE,this.onPause),this.listenTo(e,o.s.CONTAINER_ENDED,this.onStop),this.listenTo(e,o.s.CONTAINER_PLAY,this.onPlay),this.listenTo(e,o.s.CONTAINER_ERROR,this.onError)),this.mediaControl&&(this.listenTo(this.mediaControl,o.s.MEDIACONTROL_SEEK_START,this.onSeekInteractionStart),this.listenTo(this.mediaControl,o.s.MEDIACONTROL_SEEK_END,this.onSeekInteractionEnd)),this.advertisement&&(this.listenTo(this.advertisement,o.s.ADVERTISEMENT_STARTED,this.onAdStarted),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_ENDED,this.onAdStop),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_PAUSED,this.onAdPaused),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_PROGRESS,this.onAdProgress),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_ERROR,this.onAdError)),this.multiPlayer&&this.listenTo(this.multiPlayer,o.s.MULTIPLAYER_SUGGEST_CLICK,this.onStop),this.suggest&&this.listenTo(this.suggest,o.s.SUGGEST_CLICK,this.onStop),this.watchNext&&(this.listenTo(this.watchNext,o.s.WATCH_NEXT_CLICK,this.onStop),this.listenTo(this.mediaControl,o.s.WATCH_NEXT_CLICK,this.onStop))}stopListening(e,t,i){return i||(window.removeEventListener("beforeunload",this.onPageLeave),this.cleanHeartbeatInterval(),this.cleanHeartbeatAdInterval()),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onReady(){var e;if(!d.ready){const t=(0,a.fx)();null===(e=this.provider)||void 0===e||e.activateTop100({project:d.TOP100_ID,splits:[`env_${t}`]}),d.ready=!0}}}d.HEARTBEAT_INTERVAL=3e4,d.TOP100_ID="7643964",d.ready=!1},8644:(e,t,i)=>{"use strict";i.d(t,{HD:()=>l,Rv:()=>o,dA:()=>a});var s=i(997);const n=e=>{const t=(e=>{if(4!==e.length)return e;let t="#";for(let i=1;i<e.length;i++)t+=e.charAt(i)+e.charAt(i);return t})(e);return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]},r=e=>{if("#"===e.charAt(0))return r((e=>{const[t,i,s]=n(e);return`rgb(${t}, ${i}, ${s})`})(e));const t=e.replace(/\s/g,""),i=t.indexOf("(");if(-1===i)throw new Error(`The ${t} color was not parsed correctly,\n      because it has an unsupported format (color name or RGB %). This may cause issues in component rendering.`);return{type:t.substring(0,i),values:t.substring(i+1,t.length-1).split(",").map((e=>parseFloat(e)))}},o=(e,t)=>{const i=r(e);return"rgb"!==i.type&&"hsl"!==i.type||(i.type+="a"),i.values[3]=(e=>e<0?0:e>1?1:e)(t),(e=>{const{type:t}=e,i=e.values.map(((e,t)=>"number"==typeof e?e:t<3?parseInt(e,10):parseFloat(e)));let s;return s=t.indexOf("hsl")>-1?`${t}(${i[0]}, ${i[1]}%, ${i[2]}%`:`${t}(${i[0]}, ${i[1]}, ${i[2]}`,4===i.length?s+=`, ${i[3].toFixed(2)})`:s+=")",s})(i)},a=e=>{const t=e.toString(16);return"#"===t.charAt(0)?t:`#${(0,s.R)(t,"0",6)}`},l=e=>{const t=n(e);return(2126*t[0]+7152*t[1]+722*t[2])/1e4<128}},8814:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(1354),n=i.n(s),r=i(6314),o=i.n(r)()(n());o.push([e.id,"[data-no-op]{position:absolute;height:100%;width:100%;text-align:center}[data-no-op] p[data-no-op-msg]{position:absolute;text-align:center;font-size:25px;left:0;right:0;color:#fff;padding:10px;top:50%;transform:translateY(-50%);max-height:100%;overflow:auto}[data-no-op] canvas[data-no-op-canvas]{background-color:#777;height:100%;width:100%}","",{version:3,sources:["webpack://./node_modules/@clappr/core/src/playbacks/no_op/public/style.scss"],names:[],mappings:"AAAA,aACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CAGF,+BACE,iBAAA,CACA,iBAAA,CACA,cAAA,CACA,MAAA,CACA,OAAA,CACA,UAAA,CACA,YAAA,CAEA,OAAA,CACA,0BAAA,CACA,eAAA,CACA,aAAA,CAGF,uCACE,qBAAA,CACA,WAAA,CACA,UAAA",sourcesContent:["[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center;\n}\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto;\n}\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%;\n}\n"],sourceRoot:""}]),o.locals={};const a=o},8952:function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(3271),t),n(i(234),t),n(i(9716),t),n(i(2737),t),n(i(5842),t),n(i(2717),t),n(i(9712),t),n(i(4975),t)},8997:e=>{"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},9200:(e,t,i)=>{"use strict";i.d(t,{QT:()=>o,gM:()=>n,qg:()=>l,yN:()=>r});var s=i(2633);const n=Symbol("playInVisibleArea"),r=Symbol("unmuteInVisibleArea"),o=Symbol("playInVisiblePage"),a=e=>{switch(e){case"left-down":case"left-up":case"right-down":case"right-up":return e;default:return}},l=e=>{const t={id:(0,s.x)(e.id),initialId:(0,s.x)(e.initialId)};e.adTemplateId&&(t.adTemplateId=Number(e.adTemplateId)),e.playerTemplateId&&(t.playerTemplateId=Number(e.playerTemplateId)),e.multiplayerFilterId&&(t.multiplayerFilterId=Number(e.multiplayerFilterId)),e.suggestFilterId&&(t.suggestFilterId=Number(e.suggestFilterId)),e.pauseSuggestFilterId&&(t.pauseSuggestFilterId=Number(e.pauseSuggestFilterId)),e.suggestMobileFilterId&&(t.suggestMobileFilterId=Number(e.suggestMobileFilterId)),e.pauseSuggestMobileFilterId&&(t.pauseSuggestMobileFilterId=Number(e.pauseSuggestMobileFilterId)),e.suggestFilterShuffle&&(t.suggestFilterShuffle="false"!==e.suggestFilterShuffle),e.pauseSuggestFilterShuffle&&(t.pauseSuggestFilterShuffle="false"!==e.pauseSuggestFilterShuffle),e.showSuggestNames&&(t.showSuggestNames="false"!==e.showSuggestNames),e.live&&(t.live="false"!==e.live),e.withCredentials&&(t.withCredentials="false"!==e.withCredentials),e.preload&&(t.preload="false"!==e.preload),e.autoPlay&&(t[n]="scroll"===e.autoPlay,t[r]="scroll_mute"===e.autoPlay,t.autoPlay="true"===e.autoPlay),e.mute&&(t.mute="false"!==e.mute),e.volume&&(t.volume=Number(e.volume)),e.startPosition&&(t.startPosition=Number(e.startPosition));const{docking:i}=e;if(null!=i){let e="boolean"==typeof i?i:(e=>{switch(e){case"middle-down":case"middle-up":return e;default:return a(e)}})(i);null==e&&("false"===i?e=!1:"true"===i&&(e=!0)),t.docking=e}return e.dockingWidth&&(t.dockingWidth=Number(e.dockingWidth)),e.dockingOffset&&(t.dockingOffset=Number(e.dockingOffset)),e.dockingOffsetX&&(t.dockingOffsetX=Number(e.dockingOffsetX)),e.dockingOffsetY&&(t.dockingOffsetY=Number(e.dockingOffsetY)),e.dockingParentId&&(t.dockingParentId=e.dockingParentId),e.dockingDirection&&(t.dockingDirection=e.dockingDirection),e.dockingCloseDelay&&(t.dockingCloseDelay=Number(e.dockingCloseDelay)),e.aspectRatio&&(t.aspectRatio=Number(e.aspectRatio)),e.replay&&(t.replay="false"!==e.replay),e.replayTimeout&&(t.replayTimeout=Number(e.replayTimeout)),e.mediaControlVisible&&(t.mediaControlVisible="false"!==e.mediaControlVisible),e.playbackRate&&(t.playbackRate="false"!==e.playbackRate),e.unmute&&(t.unmute="false"!==e.unmute),e.showTitle&&(t.showTitle="false"!==e.showTitle),e.clickOnTitle&&(t.clickOnTitle="false"!==e.clickOnTitle),e.volumeVisible&&(t.volumeVisible="false"!==e.volumeVisible),e.viewerVisible&&(t.viewerVisible="false"!==e.viewerVisible),e.qualityVisible&&(t.qualityVisible="false"!==e.qualityVisible),e.fullscreenVisible&&(t.fullscreenVisible="false"!==e.fullscreenVisible),e.seekBarVisible&&(t.seekBarVisible="false"!==e.seekBarVisible),e.debug&&(t.debug="false"!==e.debug),e.sspJparams&&(t.sspJparams="string"==typeof e.sspJparams?JSON.parse(e.sspJparams):e.sspJparams),e.sspUserId&&(t.sspUserId=e.sspUserId),e.sspUserIdScope&&(t.sspUserIdScope=e.sspUserIdScope),e.referrer&&(t.referrer=e.referrer),e.authToken&&(t.authToken=e.authToken),e.authTokenVerifyUrl&&(t.authTokenVerifyUrl=e.authTokenVerifyUrl),"watermark"in e&&(t.watermark=e.watermark),e.watermarkPosition&&(t.watermarkPosition=a(e.watermarkPosition)),"likes"in e&&(t.likes="false"!==e.likes),"promoButtonImage"in e&&(t.promoButtonImage=e.promoButtonImage),"promoButtonClickUrl"in e&&(t.promoButtonClickUrl=e.promoButtonClickUrl),e.promoButtonPosition&&(t.promoButtonPosition=a(e.promoButtonPosition)),"promoButtonSize"in e&&(t.promoButtonSize=e.promoButtonSize),e.poster&&(t.poster=e.poster),e.minPlayingVisibleHeight&&(t.minPlayingVisibleHeight=Number(e.minPlayingVisibleHeight)),e.enforceStartWhenPlayingInParent&&(t.enforceStartWhenPlayingInParent="false"!==e.enforceStartWhenPlayingInParent),e.userId&&(t.userId=e.userId),e.sessionId&&(t.sessionId="false"!==e.sessionId),e.channel&&(t.channel=e.channel),e.height&&(t.height=Number(e.height)),e.shareEmbedCodes&&(t.shareEmbedCodes="false"!==e.shareEmbedCodes),e.shareSocialNetworks&&(t.shareSocialNetworks="false"!==e.shareSocialNetworks),e.multiplayerHidden&&(t.multiplayerHidden="false"!==e.multiplayerHidden),e.watchNext&&(t.watchNext="false"!==e.watchNext),e.threeSixtyViewer&&(t.threeSixtyViewer="false"!==e.threeSixtyViewer),e.multiplayerShuffle&&(t.multiplayerShuffle="false"!==e.multiplayerShuffle),"multiplayerTextColor"in e&&(t.multiplayerTextColor=e.multiplayerTextColor),"multiplayerColor"in e&&(t.multiplayerColor=e.multiplayerColor),"multiplayerBackgroundColor"in e&&(t.multiplayerBackgroundColor=e.multiplayerBackgroundColor),"multiplayerFontUrl"in e&&(t.multiplayerFontUrl=e.multiplayerFontUrl),e.mediaControlSkinName&&(t.mediaControlSkinName=e.mediaControlSkinName),"mediaControlTextColor"in e&&(t.mediaControlTextColor=e.mediaControlTextColor),"mediaControlHoverColor"in e&&(t.mediaControlHoverColor=e.mediaControlHoverColor),"mediaControlForegroundColor"in e&&(t.mediaControlForegroundColor=e.mediaControlForegroundColor),"mediaControlBackgroundColor"in e&&(t.mediaControlBackgroundColor=e.mediaControlBackgroundColor),"mediaControlFontUrl"in e&&(t.mediaControlFontUrl=e.mediaControlFontUrl),"amp"in e&&(t.amp=!0),"widgetId"in e&&(t.widgetId=e.widgetId),e.redirectToSuggestOnClick&&(t.redirectToSuggestOnClick="false"!==e.redirectToSuggestOnClick),e.videoBackdropColor&&(t.videoBackdropColor=e.videoBackdropColor),e.aiAd&&(t.aiAd="false"!==e.aiAd),e.yandexMetrikaVideoType&&(t.yandexMetrikaVideoType=e.yandexMetrikaVideoType),"false"===e.multiplayer&&(t.multiplayer=!1),"false"===e.suggest&&(t.suggest=!1),e.saveUserVolume&&(t.saveUserVolume="false"!==e.saveUserVolume),"false"===e.eventsReportLive&&(t.eventsReportLive=!1),"minDurationToShowAd"in e&&(t.minDurationToShowAd=Number(e.minDurationToShowAd)),t}},9275:e=>{e.exports=""},9371:(e,t,i)=>{"use strict";i.d(t,{$:()=>r(),bI:()=>V,Pw:()=>u,o2:()=>Re,df:()=>z,iJ:()=>Pe,Ut:()=>Oe,rV:()=>q,yF:()=>Y,sV:()=>U,ab:()=>Ke,aH:()=>xe,tG:()=>N,YZ:()=>W,Mk:()=>K,WM:()=>de,rt:()=>Q,DI:()=>X,Aq:()=>I,vs:()=>ae});const s={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="};var n=i(2996),r=i.n(n);const o=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],a=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],l={},d=function(e,t){let i=e.split(".",2);t.fullVersion=e,i[0]&&(t.majorVersion=parseInt(i[0])),i[1]&&(t.minorVersion=parseInt(i[1]))},c=function(e,t,i){let s="["==t.substr(0,1)?new RegExp(t,"g"):t;const n=e.split(s,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),i.fullVersion=e,n&&n[0]&&(i.majorVersion=parseInt(n[0])),n&&n[1]&&(i.minorVersion=parseInt(n[1]))},h=function(e){let t,i=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===i[1]){if(t=e.match(/\bOPR\/(\d+)/),null!=t)return{name:"Opera",version:parseInt(t[1])};if(t=e.match(/\bEdge\/(\d+)/),null!=t)return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(i.splice(1,1,"Android WebView"),i.splice(2,1,t[1]));return i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],{name:i[0],version:parseInt(i[1])}}(navigator.userAgent);l.isEdge=/Edg|EdgiOS|EdgA/i.test(navigator.userAgent),l.isChrome=/Chrome|CriOS/i.test(navigator.userAgent)&&!l.isEdge,l.isSafari=/Safari/i.test(navigator.userAgent)&&!l.isChrome&&!l.isEdge,l.isFirefox=/Firefox/i.test(navigator.userAgent),l.isLegacyIE=!!window.ActiveXObject,l.isIE=l.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),l.isIE11=/trident.*rv:11/i.test(navigator.userAgent),l.isChromecast=l.isChrome&&/CrKey/i.test(navigator.userAgent),l.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),l.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),l.isAndroid=/Android/i.test(navigator.userAgent),l.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),l.isWin8App=/MSAppHost/i.test(navigator.userAgent),l.isWiiU=/WiiU/i.test(navigator.userAgent),l.isPS4=/PlayStation 4/i.test(navigator.userAgent),l.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),l.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),l.name=h.name,l.version=h.version,l.userAgent=navigator.userAgent,l.data=function(){let e={},t=l.userAgent.toLowerCase();for(let i of o){let s=new RegExp(i.identifier.toLowerCase()).exec(t);if(null!=s&&s[1]){if(e.name=i.name,e.group=i.group,i.versionIdentifier){let s=new RegExp(i.versionIdentifier.toLowerCase()).exec(t);null!=s&&s[1]&&d(s[1],e)}else d(s[1],e);break}}return e}(),l.os=function(){let e={},t=l.userAgent.toLowerCase();for(let i of a){let s=new RegExp(i.identifier.toLowerCase()).exec(t);if(null!=s){if(e.name=i.name,e.group=i.group,i.version)c(i.version,i.versionSeparator?i.versionSeparator:".",e);else if(s[1])c(s[1],i.versionSeparator?i.versionSeparator:".",e);else if(i.versionIdentifier){let s=new RegExp(i.versionIdentifier.toLowerCase()).exec(t);null!=s&&s[1]&&c(s[1],i.versionSeparator?i.versionSeparator:".",e)}break}}return e}(),l.isWindows=/^Windows$/i.test(l.os.group),l.isMacOS=/^Mac OS$/i.test(l.os.group),l.isLinux=/^Linux$/i.test(l.os.group),l.viewport=function(){let e={};return e.width=r()(window).width(),e.height=r()(window).height(),e}(),l.device=function(e){let t=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(e);return t&&(t[1]||t[2])||""}(l.userAgent),void 0!==window.orientation&&function(){switch(window.orientation){case-90:case 90:l.viewport.orientation="landscape";break;default:l.viewport.orientation="portrait"}}();const u=l,f={},p=[],g=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),m=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function v(e,t){if(t)for(const i in t){const s=Object.getOwnPropertyDescriptor(t,i);s?Object.defineProperty(e,i,s):e[i]=t[i]}return e}function A(e,t){class i extends e{constructor(...e){super(...e),t.initialize&&t.initialize.apply(this,e)}}return v(i.prototype,t),i}const E={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"==typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(e=document){e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}};class y{static get params(){const e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}static get hashParams(){const e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}static parse(e){let t;const i=/\+/g,s=/([^&=]+)=?([^&]*)/g,n=e=>decodeURIComponent(e.replace(i," ")),r={};for(;t=s.exec(e);)r[n(t[1]).toLowerCase()]=n(t[2]);return r}}function T(e="t"){let t=0;const i=y.params[e]||y.hashParams[e]||"",s=i.match(/[0-9]+[hms]+/g)||[];if(s.length>0){const e={h:3600,m:60,s:1};s.forEach((function(i){if(i){const s=i[i.length-1],n=parseInt(i.slice(0,i.length-1),10);t+=n*e[s]}}))}else i&&(t=parseInt(i,10));return t}function b(e){return f[e]||(f[e]=0),e+ ++f[e]}function S(e){return e-parseFloat(e)+1>=0}function _(){return window.navigator&&window.navigator.language}function C(e,t){let i=(t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:s.mp4,element:null},t)).element?t.element:document.createElement(t.type);i.muted=t.muted,!0===t.muted&&i.setAttribute("muted","muted"),!0===t.inline&&i.setAttribute("playsinline","playsinline"),i.src=t.source;let n=i.play(),r=setTimeout((()=>{o(!1,new Error(`Timeout ${t.timeout} ms has been reached`))}),t.timeout),o=(t,i=null)=>{clearTimeout(r),e(t,i)};void 0!==n?n.then((()=>o(!0))).catch((e=>o(!1,e))):o(!0)}class R{static configure(e){this.options=r().extend(!0,this.options,e)}static create(e){return this.options.recycleVideo&&"video"===e&&p.length>0?p.shift():document.createElement(e)}static garbage(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(r()(e).children().remove(),Object.values(e.attributes).forEach((t=>e.removeAttribute(t.name))),p.push(e))}}R.options={recycleVideo:!1};class L{constructor(e=500){this.delay=e,this.lastTime=0}handle(e,t,i=!0){let s=(new Date).getTime(),n=s-this.lastTime;n<this.delay&&n>0&&(t(),i&&e.preventDefault()),this.lastTime=s}}const I={Config:class{static _defaultConfig(){return{volume:{value:100,parse:parseInt}}}static _defaultValueFor(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){return}}static _createKeyspace(e){return`clappr.${document.domain}.${e}`}static restore(e){return u.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}static persist(e,t){if(u.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}},Fullscreen:E,QueryString:y,DomRecycler:R,assign:v,extend:A,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;const i=(e=parseInt(e/1e3))%60,s=(e=parseInt(e/60))%60,n=(e=parseInt(e/60))%24,r=parseInt(e/24);let o="";return r&&r>0&&(o+=r+":",n<1&&(o+="00:")),(n&&n>0||t)&&(o+=("0"+n).slice(-2)+":"),o+=("0"+s).slice(-2)+":",o+=("0"+i).slice(-2),o.trim()},seekStringToSeconds:T,uniqueId:b,currentScriptUrl:function(){const e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""},isNumber:S,requestAnimationFrame:g,cancelAnimationFrame:m,getBrowserLanguage:_,now:function(){return window.performance&&window.performance.now?performance.now():Date.now()},removeArrayItem:function(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)},listContainsIgnoreCase:function(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((t=>e.toLowerCase()===t.toLowerCase()))},canAutoPlayMedia:C,Media:s,DoubleEventHandler:L},k="font-weight: bold; font-size: 13px;",w="color: #ff8000;"+k,P="color: #ff0000;"+k,O=["color: #0000ff;"+k,"color: #006600;"+k,w,P,P],D=["debug","info","warn","error","disabled"];class N{get level(){return this._level}set level(e){this._level=e}constructor(e=1,t=3){this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=e,this.previousLevel=this.level,this.offLevel=t}debug(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}info(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}warn(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}error(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}onOff(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+D[this.level],w)}log(e,t,i){if(this.EXCLUDE_LIST.indexOf(i[0])>=0)return;if(t<this.level)return;i||(i=e,e=null);const s=O[t];let n="";e&&(n="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+D[t]+"]"+n,s].concat(i))}}N.LEVEL_DEBUG=0,N.LEVEL_INFO=1,N.LEVEL_WARN=2,N.LEVEL_ERROR=3,N.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},N.setLevel=function(e){this.getInstance().level=e},N.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},N.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},N.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},N.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};const M=Array.prototype.slice,x=/\s+/,B=function(e,t,i,s){if(!i)return!0;if("object"==typeof i){for(const n in i)e[t].apply(e,[n,i[n]].concat(s));return!1}if(x.test(i)){const n=i.split(x);for(let i=0,r=n.length;i<r;i++)e[t].apply(e,[n[i]].concat(s));return!1}return!0},F=function(e,t,i,s){let n,r=-1;const o=e.length,a=t[0],l=t[1],d=t[2];!function c(){try{switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<o;)(n=e[r]).callback.call(n.ctx,a);return;case 2:for(;++r<o;)(n=e[r]).callback.call(n.ctx,a,l);return;case 3:for(;++r<o;)(n=e[r]).callback.call(n.ctx,a,l,d);return;default:for(;++r<o;)(n=e[r]).callback.apply(n.ctx,t);return}}catch(e){N.error.apply(N,[i,"error on event",s,"trigger","-",e]),c()}}()};class U{on(e,t,i){return B(this,"on",e,[t,i])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i,ctx:i||this}),this):this}once(e,t,i){let s;if(!B(this,"once",e,[t,i])||!t)return this;const n=()=>this.off(e,s);return s=function(){n(),t.apply(this,arguments)},this.on(e,s,i)}off(e,t,i){let s,n,r,o,a,l,d,c;if(!this._events||!B(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(o=e?[e]:Object.keys(this._events),a=0,l=o.length;a<l;a++)if(e=o[a],r=this._events[e],r){if(this._events[e]=s=[],t||i)for(d=0,c=r.length;d<c;d++)n=r[d],(t&&t!==n.callback&&t!==n.callback._callback||i&&i!==n.context)&&s.push(n);s.length||delete this._events[e]}return this}trigger(e){const t=this.name||this.constructor.name;if(N.debug.apply(N,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;const i=M.call(arguments,1);if(!B(this,"trigger",e,i))return this;const s=this._events[e],n=this._events.all;return s&&F(s,i,t,e),n&&F(n,arguments,t,e),this}stopListening(e,t,i){let s=this._listeningTo;if(!s)return this;const n=!t&&!i;i||"object"!=typeof t||(i=this),e&&((s={})[e._listenId]=e);for(const r in s)(e=s[r]).off(t,i,this),(n||0===Object.keys(e._events).length)&&delete this._listeningTo[r];return this}static register(e){U.Custom||(U.Custom={});let t="string"==typeof e&&e.toUpperCase().trim();t&&!U.Custom[t]?U.Custom[t]=t.toLowerCase().split("_").map(((e,t)=>0===t?e:e=e[0].toUpperCase()+e.slice(1))).join(""):N.error("Events","Error when register event: "+e)}static listAvailableCustomEvents(){return U.Custom||(U.Custom={}),Object.keys(U.Custom).filter((e=>"string"==typeof U.Custom[e]))}}const $={listenTo:"on",listenToOnce:"once"};Object.keys($).forEach((function(e){U.prototype[e]=function(t,i,s){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=b("l"))]=t,s||"object"!=typeof i||(s=this),t[$[e]](i,s,this),this}})),U.PLAYER_READY="ready",U.PLAYER_RESIZE="resize",U.PLAYER_FULLSCREEN="fullscreen",U.PLAYER_PLAY="play",U.PLAYER_PAUSE="pause",U.PLAYER_STOP="stop",U.PLAYER_ENDED="ended",U.PLAYER_SEEK="seek",U.PLAYER_ERROR="playererror",U.ERROR="error",U.PLAYER_TIMEUPDATE="timeupdate",U.PLAYER_VOLUMEUPDATE="volumeupdate",U.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",U.PLAYBACK_PROGRESS="playback:progress",U.PLAYBACK_TIMEUPDATE="playback:timeupdate",U.PLAYBACK_READY="playback:ready",U.PLAYBACK_BUFFERING="playback:buffering",U.PLAYBACK_BUFFERFULL="playback:bufferfull",U.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",U.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",U.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",U.PLAYBACK_BITRATE="playback:bitrate",U.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",U.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",U.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",U.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",U.PLAYBACK_DVR="playback:dvr",U.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",U.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",U.PLAYBACK_ENDED="playback:ended",U.PLAYBACK_PLAY_INTENT="playback:play:intent",U.PLAYBACK_PLAY="playback:play",U.PLAYBACK_PAUSE="playback:pause",U.PLAYBACK_SEEK="playback:seek",U.PLAYBACK_SEEKED="playback:seeked",U.PLAYBACK_STOP="playback:stop",U.PLAYBACK_ERROR="playback:error",U.PLAYBACK_STATS_ADD="playback:stats:add",U.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",U.PLAYBACK_LEVEL_SWITCH="playback:level:switch",U.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",U.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",U.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available",U.PLAYBACK_AUDIO_CHANGED="playback:audio:changed",U.CORE_CONTAINERS_CREATED="core:containers:created",U.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",U.CORE_OPTIONS_CHANGE="core:options:change",U.CORE_READY="core:ready",U.CORE_FULLSCREEN="core:fullscreen",U.CORE_RESIZE="core:resize",U.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",U.CORE_MOUSE_MOVE="core:mousemove",U.CORE_MOUSE_LEAVE="core:mouseleave",U.CONTAINER_PLAYBACKSTATE="container:playbackstate",U.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",U.CONTAINER_BITRATE="container:bitrate",U.CONTAINER_STATS_REPORT="container:stats:report",U.CONTAINER_DESTROYED="container:destroyed",U.CONTAINER_READY="container:ready",U.CONTAINER_RESIZE="container:resize",U.CONTAINER_ERROR="container:error",U.CONTAINER_LOADEDMETADATA="container:loadedmetadata",U.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",U.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",U.CONTAINER_AUDIO_AVAILABLE="container:audio:available",U.CONTAINER_AUDIO_CHANGED="container:audio:changed",U.CONTAINER_TIMEUPDATE="container:timeupdate",U.CONTAINER_PROGRESS="container:progress",U.CONTAINER_PLAY="container:play",U.CONTAINER_STOP="container:stop",U.CONTAINER_PAUSE="container:pause",U.CONTAINER_ENDED="container:ended",U.CONTAINER_CLICK="container:click",U.CONTAINER_DBLCLICK="container:dblclick",U.CONTAINER_CONTEXTMENU="container:contextmenu",U.CONTAINER_MOUSE_ENTER="container:mouseenter",U.CONTAINER_MOUSE_LEAVE="container:mouseleave",U.CONTAINER_MOUSE_UP="container:mouseup",U.CONTAINER_MOUSE_DOWN="container:mousedown",U.CONTAINER_SEEK="container:seek",U.CONTAINER_SEEKED="container:seeked",U.CONTAINER_VOLUME="container:volume",U.CONTAINER_FULLSCREEN="container:fullscreen",U.CONTAINER_STATE_BUFFERING="container:state:buffering",U.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",U.CONTAINER_SETTINGSUPDATE="container:settingsupdate",U.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",U.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",U.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",U.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",U.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",U.CONTAINER_STATS_ADD="container:stats:add",U.CONTAINER_OPTIONS_CHANGE="container:options:change",U.MEDIACONTROL_RENDERED="mediacontrol:rendered",U.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",U.MEDIACONTROL_SHOW="mediacontrol:show",U.MEDIACONTROL_HIDE="mediacontrol:hide",U.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",U.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",U.MEDIACONTROL_PLAYING="mediacontrol:playing",U.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",U.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",U.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";class V extends U{get options(){return this._options}constructor(e={}){super(e),this._options=e,this.uniqueId=b("o")}}const G=/^(\S+)\s*(.*)$/;class j extends V{get tagName(){return"div"}get events(){return{}}get attributes(){return{}}constructor(e){super(e),this.cid=b("c"),this._ensureElement(),this.delegateEvents()}$(e){return this.$el.find(e)}render(){return this}destroy(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}setElement(e,t){return this.$el&&this.undelegateEvents(),this.$el=r().zepto.isZ(e)?e:r()(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}delegateEvents(e){e||(e=this.events),this.undelegateEvents();for(const t in e){let i=e[t];if(i&&i.constructor!==Function&&(i=this[e[t]]),!i)continue;const s=t.match(G);let n=s[1],r=s[2];n+=".delegateEvents"+this.cid,""===r?this.$el.on(n,i.bind(this)):this.$el.on(n,r,i.bind(this))}return this}undelegateEvents(){return this.$el.off(".delegateEvents"+this.cid),this}_ensureElement(){if(this.el)this.setElement(this.el,!1);else{const e=r().extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);const t=r()(R.create(this.tagName)).attr(e);this.setElement(t,!1)}}}const K=class extends V{get name(){return"error"}static get Levels(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}constructor(e={},t){super(e),this.core=t}createError(e){this.core?this.core.trigger(U.ERROR,e):N.warn(this.name,"Core is not set. Error: ",e)}},H={createError(e,t={useCodePrefix:!0}){const i=this.constructor&&this.constructor.type||"",s=this.name||i,n=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,r=`${s}:${e&&e.code||"unknown"}`,o={description:"",level:K.Levels.FATAL,origin:s,scope:i,raw:{}},a=Object.assign({},o,e,{code:t.useCodePrefix?r:e.code});if(n&&a.level==K.Levels.FATAL&&!a.UI){const e={title:n.t("default_error_title"),message:n.t("default_error_message")};a.UI=e}return this.playerError?this.playerError.createError(a):N.warn(s,"PlayerError is not defined. Error: ",a),a}},Y=H;class W extends j{get isAudioOnly(){return!1}get isAdaptive(){return!1}get ended(){return!1}get i18n(){return this._i18n}get buffering(){return!1}constructor(e,t,i){super(e),this.settings={},this._i18n=t,this.playerError=i,this._consented=!1}consent(e){"function"==typeof e&&e()}play(){}pause(){}stop(){}seek(e){}seekPercentage(e){}getStartTimeOffset(){return 0}getDuration(){return 0}isPlaying(){return!1}get isReady(){return!1}get hasClosedCaptionsTracks(){return this.closedCaptionsTracks.length>0}get closedCaptionsTracks(){return[]}get closedCaptionsTrackId(){return-1}set closedCaptionsTrackId(e){}get audioTracks(){return[]}get currentAudioTrack(){return null}switchAudioTrack(e){}getPlaybackType(){return W.NO_OP}isHighDefinitionInUse(){return!1}mute(){}unmute(){}volume(e){}configure(e){this._options=r().extend(!0,this._options,e)}attemptAutoPlay(){this.canAutoPlay(((e,t)=>{e&&this.play()}))}canAutoPlay(e){e(!0,null)}}Object.assign(W.prototype,Y),W.extend=function(e){return A(W,e)},W.canPlay=(e,t)=>!1,W.VOD="vod",W.AOD="aod",W.LIVE="live",W.NO_OP="no_op",W.type="playback";class z extends V{get playerError(){return this.container.playerError}constructor(e){super(e.options),this.container=e,this.enabled=!0,this.bindEvents()}enable(){this.enabled||(this.bindEvents(),this.enabled=!0)}disable(){this.enabled&&(this.stopListening(),this.enabled=!1)}bindEvents(){}destroy(){this.stopListening()}}Object.assign(z.prototype,Y),z.extend=function(e){return A(z,e)},z.type="container";class q extends V{get playerError(){return this.core.playerError}constructor(e){super(e.options),this.core=e,this.enabled=!0,this.bindEvents()}bindEvents(){}enable(){this.enabled||(this.bindEvents(),this.enabled=!0)}disable(){this.enabled&&(this.stopListening(),this.enabled=!1)}getExternalInterface(){return{}}destroy(){this.stopListening()}}Object.assign(q.prototype,Y),q.extend=function(e){return A(q,e)},q.type="core";class X extends j{get playerError(){return this.core.playerError}constructor(e){super(e.options),this.core=e,this.enabled=!0,this.bindEvents(),this.render()}bindEvents(){}getExternalInterface(){return{}}enable(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}disable(){this.stopListening(),this.$el.hide(),this.enabled=!1}render(){return this}}Object.assign(X.prototype,Y),X.extend=function(e){return A(X,e)},X.type="core";class Q extends j{get playerError(){return this.container.playerError}constructor(e){super(e.options),this.container=e,this.enabled=!0,this.bindEvents()}enable(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}disable(){this.stopListening(),this.$el.hide(),this.enabled=!1}bindEvents(){}}Object.assign(Q.prototype,Y),Q.extend=function(e){return A(Q,e)},Q.type="container";var Z={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},J=/(.)^/,ee={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},te=/\\|'|\r|\n|\t|\u2028|\u2029/g,ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},se=new RegExp("[&<>\"']","g"),ne=function(e){return null===e?"":(""+e).replace(se,(function(e){return ie[e]}))},re=0,oe=function(e,t){var i,s=new RegExp([(Z.escape||J).source,(Z.interpolate||J).source,(Z.evaluate||J).source].join("|")+"|$","g"),n=0,r="__p+='";e.replace(s,(function(t,i,s,o,a){return r+=e.slice(n,a).replace(te,(function(e){return"\\"+ee[e]})),i&&(r+="'+\n((__t=("+i+"))==null?'':escapeExpr(__t))+\n'"),s&&(r+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\n__p+='"),n=a+t.length,t})),r+="';\n",Z.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n//# sourceURL=/microtemplates/source["+re+++"]";try{i=new Function(Z.variable||"obj","escapeExpr",r)}catch(e){throw e.source=r,e}if(t)return i(t,ne);var o=function(e){return i.call(this,e,ne)};return o.source="function("+(Z.variable||"obj")+"){\n"+r+"}",o};oe.settings=Z;const ae=oe,le={getStyleFor:function(e,t={baseUrl:""}){return r()('<style class="clappr-style"></style>').html(ae(e.toString())(t))}},de=le;var ce=i(5072),he=i.n(ce),ue=i(7825),fe=i.n(ue),pe=i(7659),ge=i.n(pe),me=i(5056),ve=i.n(me),Ae=i(540),Ee=i.n(Ae),ye=i(1113),Te=i.n(ye),be=i(6434),Se={};Se.styleTagTransform=Te(),Se.setAttributes=ve(),Se.insert=ge().bind(null,"head"),Se.domAPI=fe(),Se.insertStyleElement=Ee(),he()(be.A,Se);const _e=be.A&&be.A.locals?be.A.locals:void 0;class Ce extends j{get name(){return"Container"}get attributes(){return{class:"container","data-container":""}}get events(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}get ended(){return this.playback.ended}get buffering(){return this.playback.buffering}get i18n(){return this._i18n}get hasClosedCaptionsTracks(){return this.playback.hasClosedCaptionsTracks}get closedCaptionsTracks(){return this.playback.closedCaptionsTracks}get closedCaptionsTrackId(){return this.playback.closedCaptionsTrackId}set closedCaptionsTrackId(e){this.playback.closedCaptionsTrackId=e}get audioTracks(){return this.playback.audioTracks}get currentAudioTrack(){return this.playback.currentAudioTrack}constructor(e,t,i){super(e),this._i18n=t,this.currentTime=0,this.volume=100,this.playback=e.playback,this.playerError=i,this.settings=r().extend(!0,{},this.playback.settings),this.isReady=!1,this.mediaControlDisabled=!1,this.plugins=[this.playback],this.dblTapHandler=new L(500),this.clickTimer=null,this.clickDelay=200,this.actionsMetadata={},this.bindEvents()}bindEvents(){this.listenTo(this.playback,U.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,U.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,U.PLAYBACK_READY,this.ready),this.listenTo(this.playback,U.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,U.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,U.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,U.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,U.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,U.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,U.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,U.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,U.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,U.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,U.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,U.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,U.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,U.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,U.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,U.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,U.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,U.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,U.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),this.listenTo(this.playback,U.PLAYBACK_AUDIO_AVAILABLE,this.audioAvailable),this.listenTo(this.playback,U.PLAYBACK_AUDIO_CHANGED,this.audioChanged)}subtitleAvailable(){this.trigger(U.CONTAINER_SUBTITLE_AVAILABLE)}subtitleChanged(e){this.trigger(U.CONTAINER_SUBTITLE_CHANGED,e)}audioAvailable(e){this.trigger(U.CONTAINER_AUDIO_AVAILABLE,e)}audioChanged(e){this.trigger(U.CONTAINER_AUDIO_CHANGED,e)}playbackStateChanged(e){this.trigger(U.CONTAINER_PLAYBACKSTATE,e)}playbackDvrStateChanged(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(U.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}updateBitrate(e){this.trigger(U.CONTAINER_BITRATE,e)}statsReport(e){this.trigger(U.CONTAINER_STATS_REPORT,e)}getPlaybackType(){return this.playback.getPlaybackType()}isDvrEnabled(){return!!this.playback.dvrEnabled}isDvrInUse(){return!!this.dvrInUse}destroy(){this.disableResizeObserver(),this.trigger(U.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((e=>e.destroy())),this.$el.remove()}setStyle(e){this.$el.css(e)}animate(e,t){return this.$el.animate(e,t).promise()}ready(){this.isReady=!0,this.trigger(U.CONTAINER_READY,this.name)}isPlaying(){return this.playback.isPlaying()}getStartTimeOffset(){return this.playback.getStartTimeOffset()}getCurrentTime(){return this.currentTime}getDuration(){return this.playback.getDuration()}error(e){this.isReady||this.ready(),this.trigger(U.CONTAINER_ERROR,e,this.name)}loadedMetadata(e){this.trigger(U.CONTAINER_LOADEDMETADATA,e)}timeUpdated(e){this.currentTime=e.current,this.trigger(U.CONTAINER_TIMEUPDATE,e,this.name)}onProgress(...e){this.trigger(U.CONTAINER_PROGRESS,...e,this.name)}playing(){this.trigger(U.CONTAINER_PLAY,this.name,this.actionsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}paused(){this.trigger(U.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}stopped(){this.trigger(U.CONTAINER_STOP,this.actionsMetadata.stopEvent||{}),this.actionsMetadata.stopEvent={}}play(e={}){this.actionsMetadata.playEvent=e,this.playback.play(e)}stop(e={}){this.actionsMetadata.stopEvent=e,this.playback.stop(e),this.currentTime=0}switchAudioTrack(e){this.playback.switchAudioTrack(e)}pause(e={}){this.actionsMetadata.pauseEvent=e,this.playback.pause(e)}onEnded(){this.trigger(U.CONTAINER_ENDED,this,this.name),this.currentTime=0}clicked(){this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((()=>{this.clickTimer&&this.trigger(U.CONTAINER_CLICK,this,this.name)}),this.clickDelay))}cancelClicked(){clearTimeout(this.clickTimer),this.clickTimer=null}dblClicked(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(U.CONTAINER_DBLCLICK,this,this.name))}dblTap(e){this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(()=>{this.cancelClicked(),this.trigger(U.CONTAINER_DBLCLICK,this,this.name)}))}onContextMenu(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(U.CONTAINER_CONTEXTMENU,e,this.name)}seek(e){this.playback.seek(e)}onSeek(e){this.trigger(U.CONTAINER_SEEK,e,this.name)}onSeeked(){this.trigger(U.CONTAINER_SEEKED,this.name)}seekPercentage(e){const t=this.getDuration();if(e>=0&&e<=100){const i=t*(e/100);this.seek(i)}}setVolume(e){this.volume=parseFloat(e),this.trigger(U.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}fullscreen(){this.trigger(U.CONTAINER_FULLSCREEN,this.name)}onBuffering(){this.trigger(U.CONTAINER_STATE_BUFFERING,this.name)}bufferfull(){this.trigger(U.CONTAINER_STATE_BUFFERFULL,this.name)}addPlugin(e){this.plugins.push(e)}hasPlugin(e){return!!this.getPlugin(e)}getPlugin(e){return this.plugins.filter((t=>t.name===e))[0]}mouseEnter(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(U.CONTAINER_MOUSE_ENTER)}mouseLeave(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(U.CONTAINER_MOUSE_LEAVE)}mouseUp(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(U.CONTAINER_MOUSE_UP)}mouseDown(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(U.CONTAINER_MOUSE_DOWN)}settingsUpdate(){this.settings=this.playback.settings,this.trigger(U.CONTAINER_SETTINGSUPDATE)}highDefinitionUpdate(e){this.trigger(U.CONTAINER_HIGHDEFINITIONUPDATE,e)}isHighDefinitionInUse(){return this.playback.isHighDefinitionInUse()}disableMediaControl(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(U.CONTAINER_MEDIACONTROL_DISABLE))}enableMediaControl(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(U.CONTAINER_MEDIACONTROL_ENABLE))}updateStyle(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}enableResizeObserver(){this.disableResizeObserver(),this.resizeObserverInterval=setInterval((()=>this.checkResize()),500)}disableResizeObserver(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}checkResize(){const e={width:this.el.clientWidth,height:this.el.clientHeight},{width:t,height:i}=this.currentSize||{};(i!==e.height||t!==e.width)&&(this.currentSize=e,this.trigger(U.CONTAINER_RESIZE,e))}configure(e){this._options=r().extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(U.CONTAINER_OPTIONS_CHANGE)}render(){const e=de.getStyleFor(_e.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}Object.assign(Ce.prototype,Y);class Re extends V{get options(){return this._options}set options(e){this._options=e}constructor(e,t,i,s){super(e),this._i18n=i,this.loader=t,this.playerError=s}createContainers(){return r().Deferred((e=>{e.resolve(this.options.sources.map((e=>this.createContainer(e))))}))}findPlaybackPlugin(e,t){return this.loader.playbackPlugins.filter((i=>i.canPlay(e,t)))[0]}createContainer(e){let t=null,i=this.options.mimeType;"object"==typeof e?(t=e.source.toString(),e.mimeType&&(i=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);let s=Object.assign(Object.assign({},this.options),{src:t,mimeType:i});const n=this.findPlaybackPlugin(t,i),o=n?new n(s,this._i18n,this.playerError):new W;s=Object.assign(Object.assign({},s),{playback:o});const a=new Ce(s,this._i18n,this.playerError),l=r().Deferred();return l.promise(a),this.addContainerPlugins(a),this.listenToOnce(a,U.CONTAINER_READY,(()=>l.resolve(a))),a}addContainerPlugins(e){this.loader.containerPlugins.forEach((t=>{e.addPlugin(new t(e))}))}}var Le={};Le.styleTagTransform=Te(),Le.setAttributes=ve(),Le.insert=ge().bind(null,"head"),Le.domAPI=fe(),Le.insertStyleElement=Ee(),he()(be.A,Le);const Ie=be.A&&be.A.locals?be.A.locals:void 0;var ke={};ke.styleTagTransform=Te(),ke.setAttributes=ve(),ke.insert=ge().bind(null,"head"),ke.domAPI=fe(),ke.insertStyleElement=Ee(),he()(be.A,ke);const we=be.A&&be.A.locals?be.A.locals:void 0;class Pe extends j{get events(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}get attributes(){return{"data-player":"",tabindex:9999}}get isReady(){return!!this.ready}get i18n(){return this.getPlugin("strings")||{t:e=>e}}get mediaControl(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}get dummyMediaControl(){return this._dummyMediaControl||(this._dummyMediaControl=new X(this)),this._dummyMediaControl}get activeContainer(){return this._activeContainer}set activeContainer(e){this._activeContainer=e,this.trigger(U.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}get activePlayback(){return this.activeContainer&&this.activeContainer.playback}get activePlaybackEl(){if(this.activePlayback)return this.activePlayback.$el?this.activePlayback.$el.find("video")[0]:this.activePlayback.el}constructor(e){super(e),this.playerError=new K(e,this),this.configureDomRecycler(),this.firstResize=!0,this.plugins=[],this.containers=[],this._boundFullscreenHandler=()=>this.handleFullscreenChange(),r()(document).bind("fullscreenchange",this._boundFullscreenHandler),r()(document).bind("MSFullscreenChange",this._boundFullscreenHandler),r()(document).bind("mozfullscreenchange",this._boundFullscreenHandler),u.isMobile&&r()(window).bind("resize",(e=>{this.handleWindowResize(e)}))}configureDomRecycler(){let e=this.options&&this.options.playback&&this.options.playback.recycleVideo;R.configure({recycleVideo:e})}createContainers(e){this.defer=r().Deferred(),this.defer.promise(this),this.containerFactory=new Re(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}prepareContainers(){this.containerFactory.createContainers().then((e=>this.setupContainers(e))).then((e=>this.resolveOnContainersReady(e)))}updateSize(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}setFullscreen(){u.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:r()(window).width(),height:r()(window).height()})}setPlayerSize(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:r()(window).width(),height:r()(window).height()},this.resize(this.currentSize)}resize(e){S(e.height)||S(e.width)?(this.el.style.height=`${e.height}px`,this.el.style.width=`${e.width}px`):(this.el.style.height=`${e.height}`,this.el.style.width=`${e.width}`),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}enableResizeObserver(){this.disableResizeObserver(),this.resizeObserverInterval=setInterval((()=>{this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight})}),500)}triggerResize(e){(this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width)&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(U.CORE_RESIZE,e))}disableResizeObserver(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}resolveOnContainersReady(e){r().when.apply(r(),e).done((()=>{this.defer.resolve(this),this.ready=!0,this.trigger(U.CORE_READY)}))}addPlugin(e){this.plugins.push(e)}hasPlugin(e){return!!this.getPlugin(e)}getPlugin(e){return this.plugins.filter((t=>t.name===e))[0]}load(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((e=>e.destroy())),this.containerFactory.options=r().extend(!0,this.options,{sources:e}),this.prepareContainers()}destroy(){this.disableResizeObserver(),this.containers.forEach((e=>e.destroy())),this.plugins.forEach((e=>e.destroy())),this.$el.remove(),r()(document).unbind("fullscreenchange",this._boundFullscreenHandler),r()(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),r()(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}handleFullscreenChange(){this.trigger(U.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}handleWindowResize(e){const t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(U.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}removeContainer(e){this.stopListening(e),this.containers=this.containers.filter((t=>t!==e))}setupContainer(e){this.listenTo(e,U.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}setupContainers(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(U.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}renderContainers(){this.containers.forEach((e=>this.el.appendChild(e.render().el)))}createContainer(e,t){const i=this.containerFactory.createContainer(e,t);return this.setupContainer(i),this.el.appendChild(i.render().el),i}getCurrentContainer(){return this.activeContainer}getCurrentPlayback(){return this.activePlayback}getPlaybackType(){return this.activeContainer&&this.activeContainer.getPlaybackType()}isFullscreen(){const e=E.fullscreenElement();return e&&e===this.el||e&&e===this.activePlaybackEl||this.activePlaybackEl&&this.activePlaybackEl.webkitDisplayingFullscreen||!1}toggleFullscreen(){if(this.isFullscreen()){const e=u.isiOS?this.activePlaybackEl:document;E.cancelFullscreen(e),!u.isiOS&&this.$el.removeClass("fullscreen nocursor")}else{const e=u.isiOS?this.activePlaybackEl:this.el;if(!e)return;u.isSafari||u.isiOS?E.requestFullscreen(e):E.requestFullscreen(e).then((e=>e),(e=>setTimeout((()=>{if(!this.isFullscreen())throw new ReferenceError(e)}),600))),!u.isiOS&&this.$el.addClass("fullscreen")}}onMouseMove(e){this.trigger(U.CORE_MOUSE_MOVE,e)}onMouseLeave(e){this.trigger(U.CORE_MOUSE_LEAVE,e)}configure(e){this._options=r().extend(!0,this._options,e),this.configureDomRecycler();const t=e.source||e.sources;t&&this.load(t,e.mimeType||this.options.mimeType),this.trigger(U.CORE_OPTIONS_CHANGE,e),this.containers.forEach((e=>e.configure(this.options)))}appendToParent(){const e=de.getStyleFor(Ie.toString(),{baseUrl:this.options.baseUrl}),t=de.getStyleFor(we.toString(),{baseUrl:this.options.baseUrl});this.$el.append(e[0]),this.options.includeResetStyle&&this.$el.append(t[0]),(!this.$el.parent()||!this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}render(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();const e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}Object.assign(Pe.prototype,Y);class Oe extends V{get loader(){return this.player.loader}constructor(e){super(e.options),this.player=e}create(){return this.options.loader=this.loader,this.core=new Pe(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}addCorePlugins(){return this.loader.corePlugins.forEach((e=>{const t=new e(this.core);this.core.addPlugin(t),this.setupExternalInterface(t)})),this.core}setupExternalInterface(e){const t=e.getExternalInterface();for(const i in t)this.player[i]=t[i].bind(e)}}const De=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/;class Ne{static parse(e=""){const t=e.match(De)||[],[,i,s,n]=t;return void 0===i?null:new Ne(i,s,n)}constructor(e,t,i){this.major=parseInt(e||0,10),this.minor=parseInt(t||0,10),this.patch=parseInt(i||0,10)}compare(e){let t=this.major-e.major;return t=t||this.minor-e.minor,t=t||this.patch-e.patch,t}inc(e="patch"){return void 0!==this[e]&&(this[e]+=1),this}satisfies(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}toString(){return`${this.major}.${this.minor}.${this.patch}`}}const Me=(e,t)=>e&&t?Object.entries(e).filter((([,e])=>e.type===t)).reduce(((e,[t,i])=>(e[t]=i,e)),{}):{},xe=(()=>{const e={plugins:{},playbacks:[]},t="0.5.0";return class i{static get registeredPlaybacks(){return[...e.playbacks]}static get registeredPlugins(){const{plugins:t}=e;return{core:Me(t,"core"),container:Me(t,"container")}}static checkVersionSupport(e){const{supportedVersion:i,name:s}=e.prototype;if(!i||!i.min)return N.warn("Loader",`missing version information for ${s}`),!1;const n=i.max?Ne.parse(i.max):Ne.parse(i.min).inc("minor"),r=Ne.parse(i.min);return!!Ne.parse(t).satisfies(r,n)||(N.warn("Loader",`unsupported plugin ${s}: Clappr version ${t} does not match required range [${r},${n})`),!1)}static registerPlugin(t){if(!t||!t.prototype.name)return N.warn("Loader",`missing information to register plugin: ${t}`),!1;i.checkVersionSupport(t);const s=e.plugins;if(!s)return!1;const n=s[t.prototype.name];return n&&N.warn("Loader",`overriding plugin entry: ${t.prototype.name} - ${n}`),s[t.prototype.name]=t,!0}static registerPlayback(t){if(!t||!t.prototype.name)return!1;i.checkVersionSupport(t);let{playbacks:s}=e;const n=s.findIndex((e=>e.prototype.name===t.prototype.name));if(n>=0){const e=s[n];s.splice(n,1),N.warn("Loader",`overriding playback entry: ${e.name} - ${e}`)}return e.playbacks=[t,...s],!0}static unregisterPlugin(t){if(!t)return!1;const{plugins:i}=e;return!!i[t]&&(delete i[t],!0)}static unregisterPlayback(t){if(!t)return!1;let{playbacks:i}=e;const s=i.findIndex((e=>e.prototype.name===t));return!(s<0||(i.splice(s,1),e.playbacks=i,0))}static clearPlugins(){e.plugins={}}static clearPlaybacks(){e.playbacks=[]}constructor(t=[],s=0){this.playerId=s,this.playbackPlugins=[...e.playbacks];const{core:n,container:r}=i.registeredPlugins;this.containerPlugins=Object.values(r),this.corePlugins=Object.values(n),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}groupPluginsByType(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}removeDups(e,t=!1){const i=e.reduceRight(((e,i)=>(e[i.prototype.name]&&t||(e[i.prototype.name]&&delete e[i.prototype.name],e[i.prototype.name]=i),e)),Object.create(null)),s=[];for(let e in i)s.unshift(i[e]);return s}addExternalPlugins(e){const t="boolean"!=typeof e.loadExternalPluginsFirst||e.loadExternalPluginsFirst,s="boolean"!=typeof e.loadExternalPlaybacksFirst||e.loadExternalPlaybacksFirst;if((e=this.groupPluginsByType(e)).playback){const t=e.playback.filter((e=>(i.checkVersionSupport(e),!0)));this.playbackPlugins=s?this.removeDups(t.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(t),!0)}if(e.container){const s=e.container.filter((e=>(i.checkVersionSupport(e),!0)));this.containerPlugins=t?this.removeDups(s.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(s),!0)}if(e.core){const s=e.core.filter((e=>(i.checkVersionSupport(e),!0)));this.corePlugins=t?this.removeDups(s.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(s),!0)}}validateExternalPluginsType(e){["playback","container","core"].forEach((t=>{(e[t]||[]).forEach((e=>{const i="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(i)}))}))}}})();var Be=i(7439),Fe={};Fe.styleTagTransform=Te(),Fe.setAttributes=ve(),Fe.insert=ge().bind(null,"head"),Fe.domAPI=fe(),Fe.insertStyleElement=Ee(),he()(Be.A,Fe);const Ue=Be.A&&Be.A.locals?Be.A.locals:void 0,$e={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((e=>'video/mp4; codecs="'+e+', mp4a.40.2"')),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};$e.ogv=$e.ogg,$e["3gp"]=$e["3gpp"];const Ve={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},Ge=Object.keys(Ve).reduce(((e,t)=>[...e,...Ve[t]]),[]),je={code:"unknown",message:"unknown"};class Ke extends W{get name(){return"html5_video"}get supportedVersion(){return{min:"0.5.0"}}get tagName(){return this.isAudioOnly?"audio":"video"}get isAudioOnly(){const e=this.options.src;let t=Ke._mimeTypesForUrl(e,Ve,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||Ge.indexOf(t[0])>=0}get attributes(){return{"data-html5-video":""}}get events(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}get ended(){return this.el.ended}get buffering(){return this._isBuffering}get isLive(){return this.getPlaybackType()===W.LIVE}get dvrEnabled(){return this.getDuration()>=this._minDvrSize&&this.isLive}get minimumDVRSizeConfig(){return this.options.playback&&this.options.playback.minimumDvrSize}get isValidMinimumDVRSizeConfig(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}get sourceMedia(){return this._src}constructor(...e){super(...e),this._destroyed=!1,this._loadStarted=!1,this._isBuffering=!1,this._playheadMoving=!1,this._playheadMovingTimer=null,this._stopped=!1,this._ccTrackId=-1,this._setupSrc(this.options.src),this.options.playback||(this.options.playback=this.options||{}),this.options.playback.disableContextMenu=this.options.playback.disableContextMenu||this.options.disableVideoTagContextMenu,this._minDvrSize=this.isValidMinimumDVRSizeConfig?this.minimumDVRSizeConfig:60;const t=this.options.playback,i=t.preload||(u.isSafari?"auto":this.options.preload);let s;this.options.poster&&("string"==typeof this.options.poster?s=this.options.poster:"string"==typeof this.options.poster.url&&(s=this.options.poster.url)),r().extend(!0,this.el,{muted:this.options.mute,defaultMuted:this.options.mute,loop:this.options.loop,poster:s,preload:i||"metadata",crossOrigin:t.crossOrigin,"x-webkit-playsinline":t.playInline}),(t.controls||this.options.useVideoTagDefaultControls)&&this.$el.attr("controls",""),t.playInline&&this.$el.attr({playsinline:"playsinline"}),t.crossOrigin&&this.$el.attr({crossorigin:t.crossOrigin}),this.settings={default:["seekbar"]},this.settings.left=["playpause","position","duration"],this.settings.right=["fullscreen","volume","hd-indicator"],t.externalTracks&&this._setupExternalTracks(t.externalTracks),this.options.autoPlay&&this.attemptAutoPlay()}configure(e){super.configure(e),this.el.loop=!!e.loop}attemptAutoPlay(){this.canAutoPlay(((e,t)=>{t&&N.warn(this.name,"autoplay error.",{result:e,error:t}),e&&setTimeout((()=>!this._destroyed&&this.play()),0)}))}canAutoPlay(e){if(this.options.disableCanAutoPlay)return void e(!0,null);let t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};u.isMobile&&R.options.recycleVideo&&(t.element=this.el),C(e,t)}_setupExternalTracks(e){this._externalTracks=e.map((e=>({kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src})))}load(e){this._setupSrc(e)}_setupSrc(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}_onLoadedMetadata(e){this._handleBufferingEvents(),this.trigger(U.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();const t=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==W.LIVE&&t&&this._checkInitialSeek()}_onDurationChange(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}_updateSettings(){this.getPlaybackType()===W.VOD||this.getPlaybackType()===W.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(U.PLAYBACK_SETTINGSUPDATE)}isSeekEnabled(){return isFinite(this.getDuration())}getPlaybackType(){const e="audio"===this.tagName?W.AOD:W.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?W.LIVE:e}isHighDefinitionInUse(){return!1}consent(e){if(this.isPlaying()||this.el._consented)super.consent(e);else{let t=()=>{this.el.removeEventListener("loadedmetadata",t,!1),this.el.removeEventListener("error",t,!1),this.el._consented=!0,super.consent(e)};this.el.addEventListener("loadedmetadata",t,!1),this.el.addEventListener("error",t,!1),this.el.load()}}play(){this.trigger(U.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();let e=this.el.play();return e&&e.catch&&e.catch((e=>N.warn(this.name,"HTML5 play failed",e))),e}pause(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}stop(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(U.PLAYBACK_STOP)}volume(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}mute(){this.el.muted=!0}unmute(){this.el.muted=!1}isMuted(){return!0===this.el.muted||0===this.el.volume}isPlaying(){return!this.el.paused&&!this.el.ended}get isReady(){return this._isReadyState}_startPlayheadMovingChecks(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}_stopPlayheadMovingChecks(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}_determineIfPlayheadMoving(){const e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}_onWaiting(){this._loadStarted=!0,this._handleBufferingEvents()}_onLoadedData(){this._loadStarted=!0,this._handleBufferingEvents()}_onCanPlay(){this._handleBufferingEvents()}_onPlaying(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(U.PLAYBACK_PLAY)}_onPause(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(U.PLAYBACK_PAUSE)}_onSeeking(){this.trigger(U.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}_onSeeked(){this._handleBufferingEvents(),this.trigger(U.PLAYBACK_SEEKED)}_onEnded(){this._handleBufferingEvents(),this.trigger(U.PLAYBACK_ENDED,this.name)}_handleBufferingEvents(){const e=!this.el.ended&&!this.el.paused,t=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==t&&(this._isBuffering=t,t?this.trigger(U.PLAYBACK_BUFFERING,this.name):this.trigger(U.PLAYBACK_BUFFERFULL,this.name))}_onError(){const{code:e,message:t}=this.el.error||je,i=e===je.code,s=this.createError({code:e,description:t,raw:this.el.error,level:i?K.Levels.WARN:K.Levels.FATAL});i?N.warn(this.name,"HTML5 unknown error: ",s):this.trigger(U.PLAYBACK_ERROR,s)}destroy(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),super.destroy(),this.el.removeAttribute("src"),this.el.load(),this._src=null,R.garbage(this.el)}_updateDvr(e){this.trigger(U.PLAYBACK_DVR,e),this.trigger(U.PLAYBACK_STATS_ADD,{dvr:e})}seek(e){e<0&&(N.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currentTime=e}seekPercentage(e){const t=this.el.duration*(e/100);this.seek(t)}_checkInitialSeek(){const e=T();0!==e&&this.seek(e)}getCurrentTime(){return this.el.currentTime}getDuration(){if(this.isLive){if(this.el.seekable.length>0)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}_scheduleUpdateSettingsCheck(){this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout((()=>{this._updateSettings(),this._updateSettingsCheckInFlight=null}),1e3))}_onTimeUpdate(){const e=this.isLive?this.getDuration():this.el.duration;this.trigger(U.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}_onProgress(){if(!this.el.buffered.length)return;let e=[],t=0;for(let i=0;i<this.el.buffered.length;i++)e=[...e,{start:this.el.buffered.start(i),end:this.el.buffered.end(i)}],this.el.currentTime>=e[i].start&&this.el.currentTime<=e[i].end&&(t=i);const i={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(U.PLAYBACK_PROGRESS,i,e)}_typeFor(e){let t=Ke._mimeTypesForUrl(e,$e,this.options.mimeType);return 0===t.length&&(t=Ke._mimeTypesForUrl(e,Ve,this.options.mimeType)),(t[0]||"").split(";")[0]}_ready(){this._isReadyState||(this._isReadyState=!0,this.trigger(U.PLAYBACK_READY,this.name))}_checkForClosedCaptions(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(U.PLAYBACK_SUBTITLE_AVAILABLE);const e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}_handleTextTrackChange(){let e=this.closedCaptionsTracks.find((e=>"showing"===e.track.mode))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(U.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}get isHTML5Video(){return this.name===Ke.prototype.name}get closedCaptionsTracks(){let e=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((e=>"subtitles"===e.kind||"captions"===e.kind)).map((t=>({id:e++,name:t.label,track:t})))}get closedCaptionsTrackId(){return this._ccTrackId}set closedCaptionsTrackId(e){if(!S(e))return;let t,i=this.closedCaptionsTracks;if(-1!==e){if(t=i.find((t=>t.id===e)),!t)return;if("showing"===t.track.mode)return}i.filter((e=>"hidden"!==e.track.mode)).forEach((e=>e.track.mode="hidden")),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(U.PLAYBACK_SUBTITLE_CHANGED,{id:e})}get template(){return ae('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>" />\n<% }; %>\n')}render(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(()=>!1)),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();const e=de.getStyleFor(Ue.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}}Ke._mimeTypesForUrl=function(e,t,i){const s=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1];let n=i||s&&t[s.toLowerCase()]||[];return n.constructor===Array?n:[n]},Ke._canPlay=function(e,t,i,s){let n=Ke._mimeTypesForUrl(i,t,s);const r=document.createElement(e);return!!n.filter((e=>!!r.canPlayType(e).replace(/no/,"")))[0]},Ke.canPlay=function(e,t){return Ke._canPlay("audio",Ve,e,t)||Ke._canPlay("video",$e,e,t)};var He=i(8814),Ye={};Ye.styleTagTransform=Te(),Ye.setAttributes=ve(),Ye.insert=ge().bind(null,"head"),Ye.domAPI=fe(),Ye.insertStyleElement=Ee(),he()(He.A,Ye);const We=He.A&&He.A.locals?He.A.locals:void 0;(class extends W{get name(){return"no_op"}get supportedVersion(){return{min:"0.5.0"}}get template(){return ae("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%><p>\n")}get attributes(){return{"data-no-op":""}}constructor(...e){super(...e),this._noiseFrameNum=-1}render(){const e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=de.getStyleFor(We.toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(U.PLAYBACK_READY,this.name);const i=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&i||this._animate(),this}_noise(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,this._noiseFrameNum)return;const e=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);let t;try{t=new Uint32Array(e.data.buffer)}catch(i){t=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);const s=e.data;for(let e=0;e<s.length;e++)t[e]=s[e]}const i=t.length,s=6*Math.random()+4;let n=0,r=0;for(let e=0;e<i;)n<0&&(n=s*Math.random(),r=255*Math.pow(Math.random(),.4)<<24),n-=1,t[e++]=r;this.context.putImageData(e,0,0)}_loop(){this._stop||(this._noise(),this._animationHandle=g((()=>this._loop())))}destroy(){this._animationHandle&&(m(this._animationHandle),this._stop=!0)}_animate(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}).canPlay=e=>!0,xe.registerPlugin(class extends q{get name(){return"strings"}get supportedVersion(){return{min:"0.5.0"}}constructor(e){super(e),this._initializeMessages()}t(e){const t=this._language(),i=this._messages.en;return(t&&this._messages[t]||i)[e]||i[e]||e}_language(){return this.core.options.language||_()}_initializeMessages(){this._messages=r().extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurück zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterstützt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproducción de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este vídeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el vídeo.",default_error_message:"Se ha producido un problema al cargar el vídeo."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},bg:{live:"на живо",back_to_live:"Върни на живо",disabled:"Изключено",playback_not_supported:"Вашият браузър не поддържа възпроизвеждането на това видео. Моля, пробвайте с друг браузър.",default_error_title:"Видеото не може да се възпроизведе.",default_error_message:"Възникна проблем при зареждането на видеото."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."},zh:{live:"直播",back_to_live:"返回直播",disabled:"已禁用",playback_not_supported:"您的浏览器不支持该视频的播放。请尝试使用另一个浏览器。",default_error_title:"无法播放视频。",default_error_message:"在尝试加载视频时出现了问题。"}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar,this._messages["zh-CN"]=this._messages.zh}}),xe.registerPlugin(class extends q{get name(){return"sources"}get supportedVersion(){return{min:"0.5.0"}}bindEvents(){this.listenTo(this.core,U.CORE_CONTAINERS_CREATED,this.onContainersCreated)}onContainersCreated(){const e=this.core.containers.filter((e=>"no_op"!==e.playback.name))[0]||this.core.containers[0];e&&this.core.containers.forEach((t=>{t!==e&&t.destroy()}))}})},9712:function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=void 0;var r=i(3271),o=i(2737),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="counter",t.counterValueMap={},t}return n(t,e),t.prototype.inc=function(e,t){if(void 0===e&&(e=1),!Number.isFinite(e))throw new Error("Invalid Counter value: ".concat(e));var i=t?(0,o.hashLabelMap)(t):"",s=this.counterValueMap[i];s?s.value+=e:(s={value:e,labelMap:t},this.counterValueMap[i]=s)},t.prototype.reset=function(){this.counterValueMap={}},t.prototype.collect=function(){for(var e,t=[],i=0,s=Object.values(this.counterValueMap);i<s.length;i++){var n=s[i];t.push({value:n.value,labels:null!==(e=n.labelMap)&&void 0!==e?e:{},name:this.name})}return t},t}(r.Collector);t.Counter=a},9716:function(e,t,i){"use strict";var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultRegistry=t.CollectorRegistry=void 0;var n=i(2737),r=function(){function e(){this.collectors={},this.defaultLabelMap={}}return e.prototype.register=function(e){if(this.collectors[e.name])throw new Error("Collector already registered: ".concat(e.name));this.collectors[e.name]=e},e.prototype.unregister=function(e){this.collectors[e]&&delete this.collectors[e]},e.prototype.setDefaultLabels=function(e){this.defaultLabelMap=e},e.prototype.expose=function(){for(var e=Object.values(this.collectors),t=Object.keys(this.defaultLabelMap),i=[],r=0,o=e;r<o.length;r++){var a=o[r],l=a.collect();if(l.length>0){var d="# HELP ".concat(a.name," ").concat(a.help,"\n"),c="# TYPE ".concat(a.name," ").concat(a.type,"\n");if(t.length>0)for(var h=0,u=l;h<u.length;h++){var f=u[h];f.labels=s(s({},this.defaultLabelMap),f.labels)}i.push(d,c),i.push.apply(i,(0,n.convertSamplesToText)(l))}}return i.join("")},e.prototype.reset=function(){this.collectors={},this.defaultLabelMap={}},e}();t.CollectorRegistry=r,t.defaultRegistry=new r},9749:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Plugin:()=>c,Prometheus:()=>c});var s=i(9371),n=i(7204),r=i(377),o=i(6121),a=i(8081),l=i(6653),d=i(1162);class c extends s.rV{constructor(){super(...arguments),this.started=!1,this.adStarted=!1,this.stopMetricsPush=()=>{clearInterval(c.pushInterval),delete c.pushInterval,(0,n.VC)()},this.onBufferfull=()=>{this.bufferingStartTime&&(Date.now()-this.bufferingStartTime>c.BUFFERING_TIMEOUT&&n.Lt.inc(1,{resolution:this.resolution}),delete this.bufferingStartTime)}}get name(){return"prometheus"}get supportedVersion(){return{min:"0.5.0"}}get provider(){return this.options.provider}get advertisement(){return this.core.getPlugin("advertisement")}get resolution(){var e;const{activePlayback:t}=this.core,i=t.el.offsetWidth<t.el.offsetHeight?"vert-":"",s=null===(e=this.currentLevel)||void 0===e?void 0:e.level.height;return null!=s?`${i}${s}p`:d.n4}get env(){return(0,r.yz)()?"dev":(0,r.zD)()?"stage":"prod"}bindEvents(){this.listenToOnce(this.core,o.s.CORE_READY,this.onReady),this.listenTo(this.core,o.s.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,o.s.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),window.addEventListener("beforeunload",this.stopMetricsPush);const{optionsLoader:e,activeContainer:t,activePlayback:i}=this.core;e&&this.listenTo(e,o.s.OPTIONS_LOADER_ERROR,this.onLoadingError),t&&(this.listenTo(t,o.s.CONTAINER_PLAY,this.onPlay),this.listenTo(t,o.s.CONTAINER_ERROR,this.onError)),i&&(this.listenTo(i,o.s.PLAYBACK_PLAY_INTENT,this.onPlayIntent),this.listenTo(i,o.s.PLAYBACK_LOADEDMETADATA,this.onLoadedMetadata),this.listenTo(i,o.s.PLAYBACK_LEVEL_SWITCH,this.onLevelSwitch),this.listenTo(i,o.s.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(i,o.s.PLAYBACK_BUFFERFULL,this.onBufferfull)),this.advertisement&&(this.listenTo(this.advertisement,o.s.ADVERTISEMENT_LOADING,this.onAdLoading),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_STARTED,this.onAdStarted),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_VIEWABLE,this.onAdViewable),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_NOTVIEWABLE,this.onAdNotViewable),this.listenTo(this.advertisement,o.s.ADVERTISEMENT_ERROR,this.onAdError))}stopListening(e,t,i){return i||window.removeEventListener("beforeunload",this.stopMetricsPush),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onReady(){this.setDefaultLabels(),this.onLoaded(),this.onOptionsChange(),this.startMetricsPush()}setDefaultLabels(){const{channel:e}=this.core.options;(0,n.NB)({env:this.env,retention:"annual",service:"videoplatform",app:"player",deviceType:s.Pw.isMobile?"mobile":"desktop",account:null!=e?e:d.n4})}startMetricsPush(){c.pushInterval||(c.pushInterval=window.setInterval(n.VC,c.METRICS_PUSH_INTERVAL))}async onLoaded(){var e;const{channel:t}=this.core.options;if(!c.readySent&&t){const t=await(null===(e=this.provider)||void 0===e?void 0:e.getStartTime());n._L.observe((Date.now()-t)/1e3),c.readySent=!0}}onOptionsChange(){const{autoPlayPolicy:e}=this.core.options;e&&!c.autoPlaySent&&(c.AUTO_PLAY_ERRORS.includes(e)&&n.Q.inc(1,{reason:null!=e?e:d.n4}),c.autoPlaySent=!0)}onPlayIntent(){this.playStartTime=Date.now()}onLoadedMetadata(){var e,t;if(null==this.firstChunkLoadingTime&&this.playStartTime){this.firstChunkLoadingTime=Date.now()-this.playStartTime;const i=null!==(t=null===(e=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===e?void 0:e.call(performance,"resource"))&&void 0!==t?t:[],s=i.length>0&&i.filter((({name:e})=>e.includes("seg-1"))).map((({duration:e,fetchStart:t,responseEnd:i})=>Math.round(e||i-t))),r=Array.isArray(s)&&s.length>0?s[s.length-1]:this.firstChunkLoadingTime;n.t9.observe(r/1e3,{resolution:this.resolution})}}onLevelSwitch(e){const{activePlayback:t}=this.core,[i]=t.levels.filter((t=>t.id===(null==e?void 0:e.level)));this.currentLevel=i}onLoadingError(e){var t;e.level===s.Mk.Levels.FATAL&&((null==e?void 0:e.code)&&c.LOADING_ERRORS.includes(e.code)&&n.bN.inc(1,{errorCode:null!==(t=e.code)&&void 0!==t?t:d.n4}),this.stopMetricsPush())}onPlay(){this.started=!0}onBuffering(){var e;(null===(e=this.core.activeContainer)||void 0===e?void 0:e.getCurrentTime())>0&&(this.bufferingStartTime=Date.now())}onError(e){var t;e.level===s.Mk.Levels.FATAL&&(this.started||n.bN.inc(1,{errorCode:null!==(t=e.code)&&void 0!==t?t:d.n4}),this.stopMetricsPush())}onAdLoading(e){n.D0.inc(1,{adPlayback:e.adPlayback,adType:e.adType,adBlockType:e.blockType}),this.adStarted=!1,delete this.playStartTime}onAdStarted(){this.adStarted=!0}onAdViewable(e){var t;n.XG.inc(1,{adPlayback:e.adPlayback,adType:e.adType,adBlockType:e.blockType,adSystem:null!==(t=e.adSystem)&&void 0!==t?t:d.n4,visible:"1"})}onAdNotViewable(e){var t;n.XG.inc(1,{adPlayback:e.adPlayback,adType:e.adType,adBlockType:e.blockType,adSystem:null!==(t=e.adSystem)&&void 0!==t?t:d.n4,visible:"0"})}onAdError(e){var t,i,s,r,o,a,l;!this.adStarted&&c.AD_NOT_STARTED_ERRORS.includes(null===(t=null==e?void 0:e.raw)||void 0===t?void 0:t.code)&&n.WH.inc(1,{adPlayback:null===(i=null==e?void 0:e.raw)||void 0===i?void 0:i.adPlayback,adType:null===(s=null==e?void 0:e.raw)||void 0===s?void 0:s.adType,adBlockType:null===(r=null==e?void 0:e.raw)||void 0===r?void 0:r.blockType,adSystem:null!==(a=null===(o=null==e?void 0:e.raw)||void 0===o?void 0:o.adSystem)&&void 0!==a?a:d.n4,errorCode:null!==(l=null==e?void 0:e.code)&&void 0!==l?l:d.n4})}}c.BUFFERING_TIMEOUT=500,c.METRICS_PUSH_INTERVAL=3e4,c.LOADING_ERRORS=[a.I.UNKNOWN_ERROR.code,a.I.NOT_RESPOND.code,a.I.TIMEOUT.code,a.I.INVALID_RESPONSE.code],c.AUTO_PLAY_ERRORS=["notAllowed","notAllowedForSearchBot"],c.AD_NOT_STARTED_ERRORS=[void 0,l.AdErrorCode.VAST_UNEXPECTED_AD_TYPE,l.AdErrorCode.VAST_UNEXPECTED_LINEARITY,l.AdErrorCode.VAST_UNEXPECTED_DURATION_ERROR,l.AdErrorCode.VAST_UNEXPECTED_MEDIA_FILE,l.AdErrorCode.VAST_UNEXPECTED_AD_SOURCE,l.AdErrorCode.VAST_WRAPPER_ERROR,l.AdErrorCode.VIDEO_PLAY_ERROR,l.AdErrorCode.VAST_MEDIA_FILE_NOT_FOUND,l.AdErrorCode.VAST_MEDIA_LOAD_TIMEOUT,l.AdErrorCode.VAST_LINEAR_ASSET_MISMATCH,l.AdErrorCode.VAST_PROBLEM_DISPLAYING_MEDIA_FILE,l.AdErrorCode.VAST_NONLINEAR_PLAYING_FAILED,l.AdErrorCode.VAST_NONLINEAR_DIMENSIONS_ERROR,l.AdErrorCode.VAST_NONLINEAR_LOADING_FAILED,l.AdErrorCode.VAST_NONLINEAR_ASSET_MISMATCH,l.AdErrorCode.UNKNOWN_ERROR,l.AdErrorCode.VPAID_ERROR],c.readySent=!1,c.autoPlaySent=!1},9836:(e,t,i)=>{"use strict";i.d(t,{Q:()=>a,t:()=>s.tG});var s=i(9371),n=i(377),r=i(6121);const o=[r.s.CORE_MOUSE_MOVE,r.s.CORE_MOUSE_LEAVE,r.s.CONTAINER_MOUSE_ENTER,r.s.CONTAINER_MOUSE_LEAVE,r.s.CONTAINER_MEDIACONTROL_SHOW,r.s.MEDIACONTROL_SHOW,r.s.MEDIACONTROL_MOUSEMOVE_SEEKBAR,r.s.MEDIACONTROL_MOUSELEAVE_SEEKBAR,r.s.ADVERTISEMENT_PROGRESS],a=()=>{(0,n._o)()&&(s.tG.setLevel(-1),s.tG.getInstance().EXCLUDE_LIST.push(...o),s.tG.debug("RamblerPlayer","1.146.0"))}},9987:(e,t,i)=>{"use strict";i.d(t,{ez:()=>c,gD:()=>o,n_:()=>a,yP:()=>h});var s=i(377),n=i(5542);const r="color: #0000ff; font-weight: bold; font-size: 13px;",o=(e,t)=>{var i;if((0,s._o)()&&console.log("%c[debug][init]",r,e,t),!(0,s.yz)()){if(!window.ym)try{n=window,o=document,a="script",n[l="ym"]=n[l]||function(){(n[l].a=n[l].a||[]).push(arguments)},n[l].l=1*new Date,d=o.createElement(a),c=o.getElementsByTagName(a)[0],d.async=1,d.src="https://mc.yandex.ru/metrika/tag.js",c.parentNode.insertBefore(d,c)}catch(e){}var n,o,a,l,d,c;null===(i=window.ym)||void 0===i||i.call(window,e,"init",t)}},a=(e,t,i)=>{var n;(0,s._o)()&&console.log("%c[debug][reachGoal]",r,t,i),(0,s.yz)()||null===(n=window.ym)||void 0===n||n.call(window,e,"reachGoal",...[t,i].filter(Boolean))};let l=null;const d={},c=(e={})=>{if((0,s._o)()&&console.log("%c[debug][top100]",r,e.project),(0,s.yz)())return;const{project:t}=e;d.hasOwnProperty(t)||(d[t]=(async()=>{try{if(!window.top100){l||(l=(0,n.k0)("//st.top100.ru/top100/top100.js"));try{await l}catch(e){throw l=null,e}}const i=new window.top100(Object.assign(Object.assign({},e),{checkInit:!0})),s=`initKraken${t}`;return await new Promise((e=>{const t=()=>{document.removeEventListener(s,t),e(null)};document.addEventListener(s,t)})),i}catch(e){throw delete d[t],e}})())},h=async(e,t)=>{if((0,s._o)()&&console.log("%c[debug][sendCustomVars]",r,t),!(0,s.yz)())try{const i=await d[e];null==i||i.sendCustomVars(t)}catch(e){}}}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={id:e,loaded:!1,exports:{}};return i[e].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=i,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>e+"-"+{158:"1a9661af3fa899e50eba",169:"0e9091c543b704dc0d7a",426:"5dff007345673be2b00e",443:"1edb6d0116c9a36a9807",635:"2f132993ea568a81fb87",738:"6350176906f996f479c2",1070:"3ebf98690592bc0923cf",1174:"5442e0bf8a56f20a7ded",1185:"61f235db30e8c25006d8",1237:"26d7c90979ac23e3bafd",1301:"b59ccfc7fac3b8db587d",1363:"64cd49eb893b7089ef06",1760:"546415618034386813eb",1793:"8a3b3b04ee52a089d3f9",1886:"751255afd90443c18daf",1915:"9b9259ffd363923b6e4c",1997:"7b642818c030d7ffb231",2178:"a91550d1c271a996de4d",2244:"cbd019c0407185d1da2a",2597:"d06cc02739221238a5cf",2763:"4a1954784029445db45c",2907:"67f8ba725e2031b000c6",3201:"da75d1ae713f5572933d",3207:"2fa31950eefeb100764a",3436:"3800dd0e6ecefa0e1e40",3462:"32bd77551c3c1d7e7ab1",3477:"c5f71f60a1f42bfb6760",3502:"dee25993af014a735f59",3689:"4ce0529ab2a1612ed6af",3721:"670f0b22b866499c4285",3749:"85b740ff29843b75b982",3883:"3eff8fdad2f882d20487",3973:"79bc555dcd5ce35fadc2",4052:"8f6be2594078ddd5c91d",4480:"610cf13be69939fe7c0f",4570:"06eec25fd28c6a7a8004",4655:"714bee3ab2349af55830",4671:"7b761c5db3e3ab994c11",4683:"06ba5dbd8e89b42151c7",4746:"d82c94a9005cba426f04",4929:"ec93b3a0bd59bdab397c",5015:"0cd4a29c349e1b5a7939",5327:"1c0a8ea9cfa03e5d7188",5488:"11f5a99bafb2dc867aff",5518:"e0bdf9b387c41d994f5a",5645:"342080d4ae96c1537a9b",6002:"fc532cc391b2d49f2971",6316:"479d3230f70f88013936",6453:"03724bdbd219d78219d0",6530:"02fd44c30510e4f0e5c1",6639:"6262e42d787f68b7c15a",6684:"bd74f9e3f1b1da40f005",6689:"eae7b1196a23af8fbc10",6747:"0450987d8acaba7dcd4b",6947:"e14b8b25d9f155cc633e",6969:"e6a201e90083d7cf1037",7027:"ee7d9da83db58efbd3b4",7156:"91a50b4e3b50dd358806",7233:"7e480f962d4220139163",7354:"88872dbaf18fc04c95ae",7432:"d01cfaa4dc8f886e0034",7441:"173326899d97f3242734",7547:"ced93cfd6ec3329ca3f8",7658:"43e85de9f5aa3170e1a0",7885:"8457802872f487ff572b",7984:"3d4ed9d9e229b9004eb2",8573:"261c84cdcc34bc2e39a8",8864:"2e66721b2d76255e44c3",9071:"2e5983549b19094db8a4",9139:"e1f200a7a402a06f4b55",9349:"49788b7b980668b05fa8",9354:"c1ee9103fb91c889e761",9408:"65f52ff38799148a9261",9600:"cf1a3031bd37167dfc91",9681:"b87510521d70f44d8793",9778:"9c1d288bbba98d125884",9897:"c84cdf1428a3394bd6d8",9988:"3d0263ab2bfd6ab0dfdc"}[e]+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="@rambler-vp/player:",n.l=(i,s,r,o)=>{if(e[i])e[i].push(s);else{var a,l;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+r),a.src=i),e[i]=[s];var u=(t,s)=>{a.onerror=a.onload=null,clearTimeout(f);var n=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(s))),t)return t(s)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="https://vp.rambler.ru/player/1.146.0/",(()=>{n.b=document.baseURI||self.location.href;var e={1088:0};n.f.j=(t,i)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var r=new Promise(((i,n)=>s=e[t]=[i,n]));i.push(s[2]=r);var o=n.p+n.u(t),a=new Error;n.l(o,(i=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,s[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var s,r,[o,a,l]=i,d=0;if(o.some((t=>0!==e[t]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);l&&l(n)}for(t&&t(i);d<o.length;d++)r=o[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},i=self.webpackChunkRamblerPlayer=self.webpackChunkRamblerPlayer||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{en:()=>Zl,ru:()=>Jl});var t={};n.r(t),n.d(t,{advertisement:()=>id,aiAd:()=>nd,clickToPause:()=>rd,comscore:()=>gd,docking:()=>Td,eventsReport:()=>bd,levelSelector:()=>Od,likes:()=>Rd,liveStatus:()=>Dd,mediaControl:()=>td,mediascope:()=>wd,multiplayer:()=>dd,notifier:()=>Id,playbackRate:()=>ud,poster:()=>Ed,prometheus:()=>Sd,promoButton:()=>Cd,recommender:()=>_d,replay:()=>ad,settingsMenu:()=>Ld,share:()=>md,subtitles:()=>ld,suggest:()=>vd,threeSixtyViewer:()=>cd,thumbnails:()=>Ad,timeToAdvertisement:()=>sd,tns:()=>pd,unmute:()=>hd,videoBackdrop:()=>Pd,viewport:()=>yd,watchNext:()=>kd,watermark:()=>od,yametrika:()=>fd});var i={};n.r(i),n.d(i,{isSupports:()=>nc,registerIFrame:()=>rc});var s={};n.r(s),n.d(s,{isSupports:()=>ac,registerIFrame:()=>lc});var r={};n.r(r),n.d(r,{isSupports:()=>hc,registerIFrame:()=>uc});var o,a,l=[],d="ResizeObserver loop completed with undelivered notifications.";(a=o||(o={})).BORDER_BOX="border-box",a.CONTENT_BOX="content-box",a.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var c,h=function(e){return Object.freeze(e)},u=function(e,t){this.inlineSize=e,this.blockSize=t,h(this)},f=function(){function e(e,t,i,s){return this.x=e,this.y=t,this.width=i,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,h(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),p=function(e){return e instanceof SVGElement&&"getBBox"in e},g=function(e){if(p(e)){var t=e.getBBox(),i=t.width,s=t.height;return!i&&!s}var n=e,r=n.offsetWidth,o=n.offsetHeight;return!(r||o||e.getClientRects().length)},m=function(e){var t;if(e instanceof Element)return!0;var i=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(i&&e instanceof i.Element)},v="undefined"!=typeof window?window:{},A=new WeakMap,E=/auto|scroll/,y=/^tb|vertical/,T=/msie|trident/i.test(v.navigator&&v.navigator.userAgent),b=function(e){return parseFloat(e||"0")},S=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!1),new u((i?t:e)||0,(i?e:t)||0)},_=h({devicePixelContentBoxSize:S(),borderBoxSize:S(),contentBoxSize:S(),contentRect:new f(0,0,0,0)}),C=function(e,t){if(void 0===t&&(t=!1),A.has(e)&&!t)return A.get(e);if(g(e))return A.set(e,_),_;var i=getComputedStyle(e),s=p(e)&&e.ownerSVGElement&&e.getBBox(),n=!T&&"border-box"===i.boxSizing,r=y.test(i.writingMode||""),o=!s&&E.test(i.overflowY||""),a=!s&&E.test(i.overflowX||""),l=s?0:b(i.paddingTop),d=s?0:b(i.paddingRight),c=s?0:b(i.paddingBottom),u=s?0:b(i.paddingLeft),m=s?0:b(i.borderTopWidth),v=s?0:b(i.borderRightWidth),C=s?0:b(i.borderBottomWidth),R=u+d,L=l+c,I=(s?0:b(i.borderLeftWidth))+v,k=m+C,w=a?e.offsetHeight-k-e.clientHeight:0,P=o?e.offsetWidth-I-e.clientWidth:0,O=n?R+I:0,D=n?L+k:0,N=s?s.width:b(i.width)-O-P,M=s?s.height:b(i.height)-D-w,x=N+R+P+I,B=M+L+w+k,F=h({devicePixelContentBoxSize:S(Math.round(N*devicePixelRatio),Math.round(M*devicePixelRatio),r),borderBoxSize:S(x,B,r),contentBoxSize:S(N,M,r),contentRect:new f(u,l,N,M)});return A.set(e,F),F},R=function(e,t,i){var s=C(e,i),n=s.borderBoxSize,r=s.contentBoxSize,a=s.devicePixelContentBoxSize;switch(t){case o.DEVICE_PIXEL_CONTENT_BOX:return a;case o.BORDER_BOX:return n;default:return r}},L=function(e){var t=C(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=h([t.borderBoxSize]),this.contentBoxSize=h([t.contentBoxSize]),this.devicePixelContentBoxSize=h([t.devicePixelContentBoxSize])},I=function(e){if(g(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t},k=function(){var e=1/0,t=[];l.forEach((function(i){if(0!==i.activeTargets.length){var s=[];i.activeTargets.forEach((function(t){var i=new L(t.target),n=I(t.target);s.push(i),t.lastReportedSize=R(t.target,t.observedBox),n<e&&(e=n)})),t.push((function(){i.callback.call(i.observer,s,i.observer)})),i.activeTargets.splice(0,i.activeTargets.length)}}));for(var i=0,s=t;i<s.length;i++)(0,s[i])();return e},w=function(e){l.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(i){i.isActive()&&(I(i.target)>e?t.activeTargets.push(i):t.skippedTargets.push(i))}))}))},P=[],O=0,D={attributes:!0,characterData:!0,childList:!0,subtree:!0},N=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],M=function(e){return void 0===e&&(e=0),Date.now()+e},x=!1,B=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!x){x=!0;var i,s=M(e);i=function(){var i=!1;try{i=function(){var e,t=0;for(w(t);l.some((function(e){return e.activeTargets.length>0}));)t=k(),w(t);return l.some((function(e){return e.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:d}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=d),window.dispatchEvent(e)),t>0}()}finally{if(x=!1,e=s-M(),!O)return;i?t.run(1e3):e>0?t.run(e):t.start()}},function(e){if(!c){var t=0,i=document.createTextNode("");new MutationObserver((function(){return P.splice(0).forEach((function(e){return e()}))})).observe(i,{characterData:!0}),c=function(){i.textContent="".concat(t?t--:t++)}}P.push(e),c()}((function(){requestAnimationFrame(i)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,D)};document.body?t():v.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),N.forEach((function(t){return v.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),N.forEach((function(t){return v.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),F=function(e){!O&&e>0&&B.start(),!(O+=e)&&B.stop()},U=function(){function e(e,t){this.target=e,this.observedBox=t||o.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=R(this.target,this.observedBox,!0);return e=this.target,p(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),$=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},V=new WeakMap,G=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1},j=function(){function e(){}return e.connect=function(e,t){var i=new $(e,t);V.set(e,i)},e.observe=function(e,t,i){var s=V.get(e),n=0===s.observationTargets.length;G(s.observationTargets,t)<0&&(n&&l.push(s),s.observationTargets.push(new U(t,i&&i.box)),F(1),B.schedule())},e.unobserve=function(e,t){var i=V.get(e),s=G(i.observationTargets,t),n=1===i.observationTargets.length;s>=0&&(n&&l.splice(l.indexOf(i),1),i.observationTargets.splice(s,1),F(-1))},e.disconnect=function(e){var t=this,i=V.get(e);i.observationTargets.slice().forEach((function(i){return t.unobserve(e,i.target)})),i.activeTargets.splice(0,i.activeTargets.length)},e}(),K=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");j.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!m(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");j.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!m(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");j.unobserve(this,e)},e.prototype.disconnect=function(){j.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),H=n(2452),Y=n(377),W=n(6413),z=n(9836),q=n(9200),X=n(5542);const Q=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Z=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=J},J=Number.MAX_SAFE_INTEGER||9007199254740991;let ee=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),te=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),ie=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({});var se="manifest",ne="level",re="audioTrack",oe="subtitleTrack",ae="main",le="audio",de="subtitle";class ce{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class he{constructor(e,t,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ce(e),this.fast_=new ce(t),this.defaultTTFB_=s,this.ttfb_=new ce(e)}update(e,t){const{slow_:i,fast_:s,ttfb_:n}=this;i.halfLife!==e&&(this.slow_=new ce(e,i.getEstimate(),i.getTotalWeight())),s.halfLife!==t&&(this.fast_=new ce(t,s.getEstimate(),s.getTotalWeight())),n.halfLife!==e&&(this.ttfb_=new ce(e,n.getEstimate(),n.getTotalWeight()))}sample(e,t){const i=(e=Math.max(e,this.minDelayMs_))/1e3,s=8*t/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function ue(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},fe.apply(null,arguments)}function pe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ge(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(i),!0).forEach((function(t){ue(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}class me{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=ve,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}}const ve=function(){},Ae={trace:ve,debug:ve,log:ve,warn:ve,info:ve,error:ve};function Ee(){return fe({},Ae)}function ye(e,t,i){return t[e]?t[e].bind(t):function(e,t){const i=self.console[e];return i?i.bind(self.console,`${t?"["+t+"] ":""}[${e}] >`):ve}(e,i)}const Te=Ee(),be=Te;function Se(e=!0){if("undefined"!=typeof self)return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function _e(e,t){const i=Object.keys(e),s=Object.keys(t),n=i.length,r=s.length;return!n||!r||n===r&&!i.some((e=>-1===s.indexOf(e)))}function Ce(e,t=!1){if("undefined"!=typeof TextDecoder){const i=new TextDecoder("utf-8").decode(e);if(t){const e=i.indexOf("\0");return-1!==e?i.substring(0,e):i}return i.replace(/\0/g,"")}const i=e.length;let s,n,r,o="",a=0;for(;a<i;){if(s=e[a++],0===s&&t)return o;if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(s);break;case 12:case 13:n=e[a++],o+=String.fromCharCode((31&s)<<6|63&n);break;case 14:n=e[a++],r=e[a++],o+=String.fromCharCode((15&s)<<12|(63&n)<<6|63&r)}}return o}const Re=function(e){let t="";for(let i=0;i<e.length;i++){let s=e[i].toString(16);s.length<2&&(s="0"+s),t+=s}return t};function Le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ie,ke,we,Pe,Oe,De,Ne={exports:{}},Me=(Ie||(Ie=1,ke=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,we=/^(?=([^\/?#]*))\1([^]*)$/,Pe=/(?:\/|^)\.(?=\/)/g,Oe=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Ne.exports=De={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var s=De.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return s.path=De.normalizePath(s.path),De.buildURLFromParts(s)}var n=De.parseURL(t);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return i.alwaysNormalize?(n.path=De.normalizePath(n.path),De.buildURLFromParts(n)):t;var r=De.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");if(!r.netLoc&&r.path&&"/"!==r.path[0]){var o=we.exec(r.path);r.netLoc=o[1],r.path=o[2]}r.netLoc&&!r.path&&(r.path="/");var a={scheme:r.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(a.netLoc=r.netLoc,"/"!==n.path[0]))if(n.path){var l=r.path,d=l.substring(0,l.lastIndexOf("/")+1)+n.path;a.path=De.normalizePath(d)}else a.path=r.path,n.params||(a.params=r.params,n.query||(a.query=r.query));return null===a.path&&(a.path=i.alwaysNormalize?De.normalizePath(n.path):n.path),De.buildURLFromParts(a)},parseURL:function(e){var t=ke.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(Pe,"");e.length!==(e=e.replace(Oe,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}}),Ne.exports);class xe{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Be="audio",Fe="video",Ue="audiovideo";class $e{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"==typeof e&&(e={url:e}),this.base=e,function(e,t){const i=Ke(e,t);i&&(i.enumerable=!0,Object.defineProperty(e,t,i))}(this,"stats")}setByteRange(e,t){const i=e.split("@",2);let s;s=1===i.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get baseurl(){return this.base.url}get byteRange(){return null===this._byteRange?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return null===this._streams&&(this._streams={[Be]:null,[Fe]:null,[Ue]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return null!==this._stats}get hasStreams(){return null!==this._streams}get stats(){return null===this._stats&&(this._stats=new xe),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Me.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Be]=null,e[Fe]=null,e[Ue]=null}}function Ve(e){return"initSegment"!==e.sn}class Ge extends $e{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],t=this.byteRange[1];if(Q(e)&&Q(t))return t-e}return null}get bitrate(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{const e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;const e=Q(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){const e=Object.keys(this.levelkeys),t=e.length;if(t>1||1===t&&this.levelkeys[e[0]].encrypted)return!0}return!1}get programDateTime(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){Q(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}get ref(){return Ve(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,i,s,n,r=!1){const{elementaryStreams:o}=this,a=o[e];a?(a.startPTS=Math.min(a.startPTS,t),a.endPTS=Math.max(a.endPTS,i),a.startDTS=Math.min(a.startDTS,s),a.endDTS=Math.max(a.endDTS,n)):o[e]={startPTS:t,endPTS:i,startDTS:s,endDTS:n,partial:r}}}class je extends $e{constructor(e,t,i,s,n){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const r=e.enumeratedString("BYTERANGE");r&&this.setByteRange(r,n),n&&(this.fragOffset=n.fragOffset+n.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function Ke(e,t){const i=Object.getPrototypeOf(e);if(i){return Object.getOwnPropertyDescriptor(i,t)||Ke(i,t)}}const He=Math.pow(2,32)-1,Ye=[].push,We={video:1,audio:2,id3:3,text:4};function ze(e){return String.fromCharCode.apply(null,e)}function qe(e,t){const i=e[t]<<8|e[t+1];return i<0?65536+i:i}function Xe(e,t){const i=Ze(e,t);return i<0?4294967296+i:i}function Qe(e,t){let i=Xe(e,t);return i*=Math.pow(2,32),i+=Xe(e,t+4),i}function Ze(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function Je(e,t,i){e[t]=i>>24,e[t+1]=i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function et(e,t){const i=[];if(!t.length)return i;const s=e.byteLength;for(let n=0;n<s;){const r=Xe(e,n),o=r>1?n+r:s;if(ze(e.subarray(n+4,n+8))===t[0])if(1===t.length)i.push(e.subarray(n+8,o));else{const s=et(e.subarray(n+8,o),t.slice(1));s.length&&Ye.apply(i,s)}n=o}return i}function tt(e){const t=[],i=e[0];let s=8;const n=Xe(e,s);s+=4;let r=0,o=0;0===i?(r=Xe(e,s),o=Xe(e,s+4),s+=8):(r=Qe(e,s),o=Qe(e,s+8),s+=16),s+=2;let a=e.length+o;const l=qe(e,s);s+=2;for(let i=0;i<l;i++){let i=s;const r=Xe(e,i);i+=4;const o=2147483647&r;if(1==(2147483648&r)>>>31)return be.warn("SIDX has hierarchical references (not supported)"),null;const l=Xe(e,i);i+=4,t.push({referenceSize:o,subsegmentDuration:l,info:{duration:l/n,start:a,end:a+o-1}}),a+=o,i+=4,s=i}return{earliestPresentationTime:r,timescale:n,version:i,referencesCount:l,references:t}}function it(e){const t=[],i=et(e,["moov","trak"]);for(let e=0;e<i.length;e++){const s=i[e],n=et(s,["tkhd"])[0];if(n){let e=n[0];const i=Xe(n,0===e?12:20),r=et(s,["mdia","mdhd"])[0];if(r){e=r[0];const n=Xe(r,0===e?12:20),o=et(s,["mdia","hdlr"])[0];if(o){const e=ze(o.subarray(8,12)),r={soun:Be,vide:Fe}[e],a=st(et(s,["mdia","minf","stbl","stsd"])[0]);r?(t[i]={timescale:n,type:r,stsd:a},t[r]=ge({timescale:n,id:i},a)):t[i]={timescale:n,type:e,stsd:a}}}}}return et(e,["moov","mvex","trex"]).forEach((e=>{const i=Xe(e,4),s=t[i];s&&(s.default={duration:Xe(e,12),flags:Xe(e,20)})})),t}function st(e){const t=e.subarray(8),i=t.subarray(86),s=ze(t.subarray(4,8));let n,r=s;const o="enca"===s||"encv"===s;if(o){const e=et(t,[s])[0];et(e.subarray("enca"===s?28:78),["sinf"]).forEach((e=>{const t=et(e,["schm"])[0];if(t){const i=ze(t.subarray(4,8));if("cbcs"===i||"cenc"===i){const t=et(e,["frma"])[0];t&&(r=ze(t))}}}))}const a=r;switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const e=et(i,["avcC"])[0];r+="."+ot(e[1])+ot(e[2])+ot(e[3]),n=nt("avc1"===a?"dva1":"dvav",i);break}case"mp4a":{const e=et(t,[s])[0],i=et(e.subarray(28),["esds"])[0];if(i&&i.length>7){let e=4;if(3!==i[e++])break;e=rt(i,e),e+=2;const t=i[e++];if(128&t&&(e+=2),64&t&&(e+=i[e++]),4!==i[e++])break;e=rt(i,e);const s=i[e++];if(64!==s)break;if(r+="."+ot(s),e+=12,5!==i[e++])break;e=rt(i,e);const n=i[e++];let o=(248&n)>>3;31===o&&(o+=1+((7&n)<<3)+((224&i[e])>>5)),r+="."+o}break}case"hvc1":case"hev1":{const e=et(i,["hvcC"]);if(e){const t=e[0],i=t[1],s=["","A","B","C"][i>>6],n=31&i,o=Xe(t,2),a=(32&i)>>5?"H":"L",l=t[12],d=t.subarray(6,12);r+="."+s+n,r+="."+o.toString(16).toUpperCase(),r+="."+a+l;let c="";for(let e=d.length;e--;){const t=d[e];(t||c)&&(c="."+t.toString(16).toUpperCase()+c)}r+=c}n=nt("hev1"==a?"dvhe":"dvh1",i);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":r=nt(r,i)||r;break;case"vp09":{const e=et(i,["vpcC"])[0],t=e[4],s=e[5],n=e[6]>>4&15;r+="."+at(t)+"."+at(s)+"."+at(n);break}case"av01":{const e=et(i,["av1C"])[0],t=e[1]>>>5,s=31&e[1],o=e[2]>>>7?"H":"M",a=(64&e[2])>>6,l=(32&e[2])>>5,d=2===t&&a?l?12:10:a?10:8,c=(16&e[2])>>4,h=(8&e[2])>>3,u=(4&e[2])>>2,f=3&e[2],p=1,g=1,m=1,v=0;r+="."+t+"."+at(s)+o+"."+at(d)+"."+c+"."+h+u+f+"."+at(p)+"."+at(g)+"."+at(m)+"."+v,n=nt("dav1",i);break}}return{codec:r,encrypted:o,supplemental:n}}function nt(e,t){const i=et(t,["dvvC"]),s=i.length?i[0]:et(t,["dvcC"])[0];if(s){const t=s[2]>>1&127,i=s[2]<<5&32|s[3]>>3&31;return e+"."+at(t)+"."+at(i)}}function rt(e,t){const i=t+5;for(;128&e[t++]&&t<i;);return t}function ot(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function at(e){return(e<10?"0":"")+e}function lt(e){const t=et(e,["schm"])[0];if(t){const i=ze(t.subarray(4,8));if("cbcs"===i||"cenc"===i)return et(e,["schi","tenc"])[0]}return null}function dt(e){const t=Xe(e,0);let i=8;1&t&&(i+=4),4&t&&(i+=4);let s=0;const n=Xe(e,4);for(let r=0;r<n;r++)256&t&&(s+=Xe(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return s}function ct(e,t){const i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function ht(e,t){const i=[],s=t.samples,n=t.timescale,r=t.id;let o=!1;return et(s,["moof"]).map((a=>{const l=a.byteOffset-8;et(a,["traf"]).map((a=>{const d=et(a,["tfdt"]).map((e=>{const t=e[0];let i=Xe(e,4);return 1===t&&(i*=Math.pow(2,32),i+=Xe(e,8)),i/n}))[0];return void 0!==d&&(e=d),et(a,["tfhd"]).map((d=>{const c=Xe(d,4),h=16777215&Xe(d,0);let u=0;const f=!!(16&h);let p=0;const g=!!(32&h);let m=8;c===r&&(!!(1&h)&&(m+=8),!!(2&h)&&(m+=4),!!(8&h)&&(u=Xe(d,m),m+=4),f&&(p=Xe(d,m),m+=4),g&&(m+=4),"video"===t.type&&(o=ut(t.codec)),et(a,["trun"]).map((r=>{const a=r[0],d=16777215&Xe(r,0),c=!!(1&d);let h=0;const f=!!(4&d),g=!!(256&d);let m=0;const v=!!(512&d);let A=0;const E=!!(1024&d),y=!!(2048&d);let T=0;const b=Xe(r,4);let S=8;c&&(h=Xe(r,S),S+=4),f&&(S+=4);let _=h+l;for(let l=0;l<b;l++){if(g?(m=Xe(r,S),S+=4):m=u,v?(A=Xe(r,S),S+=4):A=p,E&&(S+=4),y&&(T=0===a?Xe(r,S):Ze(r,S),S+=4),t.type===Fe){let t=0;for(;t<A;){const r=Xe(s,_);_+=4,ft(o,s[_])&&pt(s.subarray(_,_+r),o?2:1,e+T/n,i),_+=r,t+=r+4}}e+=m/n}})))}))}))})),i}function ut(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function ft(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6==(31&t)}function pt(e,t,i,s){const n=gt(e);let r=0;r+=t;let o=0,a=0,l=0;for(;r<n.length;){o=0;do{if(r>=n.length)break;l=n[r++],o+=l}while(255===l);a=0;do{if(r>=n.length)break;l=n[r++],a+=l}while(255===l);const e=n.length-r;let t=r;if(a<e)r+=a;else if(a>e){be.error(`Malformed SEI payload. ${a} is too small, only ${e} bytes left to parse.`);break}if(4===o){if(181===n[t++]){const e=qe(n,t);if(t+=2,49===e){const e=Xe(n,t);if(t+=4,1195456820===e){const e=n[t++];if(3===e){const r=n[t++],a=64&r,l=a?2+3*(31&r):0,d=new Uint8Array(l);if(a){d[0]=r;for(let e=1;e<l;e++)d[e]=n[t++]}s.push({type:e,payloadType:o,pts:i,bytes:d})}}}}}else if(5===o&&a>16){const e=[];for(let i=0;i<16;i++){const s=n[t++].toString(16);e.push(1==s.length?"0"+s:s),3!==i&&5!==i&&7!==i&&9!==i||e.push("-")}const r=a-16,l=new Uint8Array(r);for(let e=0;e<r;e++)l[e]=n[t++];s.push({payloadType:o,pts:i,uuid:e.join(""),userData:Ce(l),userDataBytes:l})}}}function gt(e){const t=e.byteLength,i=[];let s=1;for(;s<t-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return e;const n=t-i.length,r=new Uint8Array(n);let o=0;for(s=0;s<n;o++,s++)o===i[0]&&(o++,i.shift()),r[s]=e[o];return r}function mt(e){const t=e.getUint32(0),i=e.byteOffset,s=e.byteLength;if(s<t)return{offset:i,size:s};if(1886614376!==e.getUint32(4))return{offset:i,size:t};const n=e.getUint32(8)>>>24;if(0!==n&&1!==n)return{offset:i,size:t};const r=e.buffer,o=Re(new Uint8Array(r,i+12,16)),a=e.getUint32(28);let l=null,d=null;if(0===n){if(t-32<a||a<22)return{offset:i,size:t};d=new Uint8Array(r,i+32,a)}else if(1===n){if(!a||s<i+32+16*a+16)return{offset:i,size:t};l=[];for(let e=0;e<a;e++)l.push(new Uint8Array(r,i+32+16*e,16))}return{version:n,systemId:o,kids:l,data:d,offset:i,size:t}}const vt=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),At={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Et(e,t){const i=At[t];return!!i&&!!i[e.slice(0,4)]}function yt(e,t,i=!0){return!e.split(",").some((e=>!Tt(e,t,i)))}function Tt(e,t,i=!0){var s;const n=Se(i);return null!=(s=null==n?void 0:n.isTypeSupported(bt(e,t)))&&s}function bt(e,t){return`${t}/mp4;codecs=${e}`}function St(e){if(e){const t=e.substring(0,4);return At.video[t]}return 2}function _t(e){const t=vt();return e.split(",").reduce(((e,i)=>{const s=t&&ut(i)?9:At.video[i];return s?(2*s+e)/(e?3:2):(At.audio[i]+e)/(e?2:1)}),0)}const Ct={},Rt=/flac|opus|mp4a\.40\.34/i;function Lt(e,t=!0){return e.replace(Rt,(e=>function(e,t=!0){if(Ct[e])return Ct[e];const i={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let n=0;n<i.length;n++){var s;if(Tt(i[n],"audio",t))return Ct[e]=i[n],i[n];if("mp3"===i[n]&&null!=(s=Se(t))&&s.isTypeSupported("audio/mpeg"))return""}return e}(e.toLowerCase(),t)))}function It(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e)))return e;if(t){const i=t.split(",");if(i.length>1){if(e)for(let t=i.length;t--;)if(i[t].substring(0,4)===e.substring(0,4))return i[t];return i[0]}}return t||e}function kt(e){if(e.startsWith("av01.")){const t=e.split("."),i=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=i[e-4];return t.join(".")}return e}function wt(e){const t=Se(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Pt(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const Ot={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function Dt(e,t){return{supported:!1,configurations:t,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:e}}const Nt={};function Mt(e,t,i,s,n,r){const o=e.audioCodec?e.audioGroups:null,a=null==r?void 0:r.audioCodec,l=null==r?void 0:r.channels,d=l?parseInt(l):a?1/0:2;let c=null;if(null!=o&&o.length)try{c=1===o.length&&o[0]?t.groups[o[0]].channels:o.reduce(((e,i)=>{if(i){const s=t.groups[i];if(!s)throw new Error(`Audio track group ${i} not found`);Object.keys(s.channels).forEach((t=>{e[t]=(e[t]||0)+s.channels[t]}))}return e}),{2:0})}catch(e){return!0}return void 0!==e.videoCodec&&(e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(s,30)||"SDR"!==e.videoRange&&e.videoRange!==i||e.bitrate>Math.max(n,8e6))||!!c&&Q(d)&&Object.keys(c).some((e=>parseInt(e)>d))}function xt(e,t,i){const s=e.videoCodec,n=e.audioCodec;if(!s&&!n||!i)return Promise.resolve(Ot);const r=[];if(s){const t={width:e.width,height:e.height,bitrate:Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)),framerate:e.frameRate||30},i=e.videoRange;"SDR"!==i&&(t.transferFunction=i.toLowerCase());const n=s.split(","),o=navigator.userAgent;if(n.some((e=>ut(e)))&&vt())return Promise.resolve(Dt(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent sting: (${o})`),r));r.push.apply(r,n.map((e=>({type:"media-source",video:ge(ge({},t),{},{contentType:bt(kt(e),"video")})}))))}return n&&e.audioGroups&&e.audioGroups.forEach((e=>{var i;e&&(null==(i=t.groups[e])||i.tracks.forEach((t=>{if(t.groupId===e){const e=t.channels||"",i=parseFloat(e);Q(i)&&i>2&&r.push.apply(r,n.split(",").map((e=>({type:"media-source",audio:{contentType:bt(e,"audio"),channels:""+i}}))))}})))})),Promise.all(r.map((e=>{const t=function(e){const{audio:t,video:i}=e,s=i||t;if(s){const e=Pt(s.contentType);if(i)return`r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${e}_${Math.ceil(i.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${e}`}return""}(e);return Nt[t]||(Nt[t]=i.decodingInfo(e))}))).then((e=>({supported:!e.some((e=>!e.supported)),configurations:r,decodingInfoResults:e}))).catch((e=>({supported:!1,configurations:r,decodingInfoResults:[],error:e})))}const Bt=["NONE","TYPE-0","TYPE-1",null],Ft=["SDR","PQ","HLG"];function Ut(e){const{canSkipUntil:t,canSkipDateRanges:i,age:s}=e;return t&&s<t/2?i?"v2":"YES":""}class $t{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Vt{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter((e=>!!e)).map((e=>e.substring(0,4))).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const i=null==(t=e.supplemental)?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return Gt(this._audioGroups,e)}hasSubtitleGroup(e){return Gt(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function Gt(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}const jt=(e,t)=>JSON.stringify(e,(e=>{const t=new WeakSet;return(i,s)=>{if(e&&(s=e(i,s)),"object"==typeof s&&null!==s){if(t.has(s))return;t.add(s)}return s}})(t));function Kt(e,t){be.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function Ht(e){return e.reduce(((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const s=t.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Yt(e){if(!e)return e;const{lang:t,assocLang:i,characteristics:s,channels:n,audioCodec:r}=e;return{lang:t,assocLang:i,characteristics:s,channels:n,audioCodec:r}}function Wt(e,t,i){if("attrs"in e){const i=t.indexOf(e);if(-1!==i)return i}for(let s=0;s<t.length;s++)if(zt(e,t[s],i))return s;return-1}function zt(e,t,i){const{groupId:s,name:n,lang:r,assocLang:o,default:a}=e,l=e.forced;return(void 0===s||t.groupId===s)&&(void 0===n||t.name===n)&&(void 0===r||function(e,t="--"){return e.length===t.length?e===t:e.startsWith(t)||t.startsWith(e)}(r,t.lang))&&(void 0===r||t.assocLang===o)&&(void 0===a||t.default===a)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e,t=""){const i=e.split(","),s=t.split(",");return i.length===s.length&&!i.some((e=>-1===s.indexOf(e)))}(e.characteristics||"",t.characteristics))&&(void 0===i||i(e,t))}function qt(e,t){const{audioCodec:i,channels:s}=e;return!(void 0!==i&&(t.audioCodec||"").substring(0,4)!==i.substring(0,4)||void 0!==s&&s!==(t.channels||"2"))}function Xt(e,t,i){for(let s=t;s>-1;s--)if(i(e[s]))return s;for(let s=t+1;s<e.length;s++)if(i(e[s]))return s;return-1}function Qt(e,t){var i;return!!e&&e!==(null==(i=t.loadLevelObj)?void 0:i.uri)}const Zt=function(e,t){let i=0,s=e.length-1,n=null,r=null;for(;i<=s;){n=(i+s)/2|0,r=e[n];const o=t(r);if(o>0)i=n+1;else{if(!(o<0))return r;s=n-1}}return null};function Jt(e,t,i=0,s=0,n=.005){let r=null;if(e){r=t[1+e.sn-t[0].sn]||null;const s=e.endDTS-i;s>0&&s<15e-7&&(i+=15e-7),r&&e.level!==r.level&&r.end<=e.end&&(r=t[2+e.sn-t[0].sn]||null)}else 0===i&&0===t[0].start&&(r=t[0]);if(r&&((!e||e.level===r.level)&&0===ei(i,s,r)||function(e,t,i){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const s=t.tagList.reduce(((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e)),i);return e.start<=s}return!1}(r,e,Math.min(n,s))))return r;const o=Zt(t,ei.bind(null,i,s));return!o||o===e&&r?r:o}function ei(e=0,t=0,i){if(i.start<=e&&i.start+i.duration>e)return 0;const s=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-s<=e?1:i.start-s>e&&i.start?-1:0}function ti(e,t,i){const s=1e3*Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return(i.endProgramDateTime||0)-s>e}function ii(e,t){return Zt(e,(e=>e.cc<t?1:e.cc>t?-1:0))}function si(e){switch(e.details){case te.FRAG_LOAD_TIMEOUT:case te.KEY_LOAD_TIMEOUT:case te.LEVEL_LOAD_TIMEOUT:case te.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function ni(e,t){const i=si(t);return e.default[(i?"timeout":"error")+"Retry"]}function ri(e,t){const i="linear"===e.backoff?1:Math.pow(2,t);return Math.min(i*e.retryDelayMs,e.maxRetryDelayMs)}function oi(e){return ge(ge({},e),{errorRetry:null,timeoutRetry:null})}function ai(e,t,i,s){if(!e)return!1;const n=null==s?void 0:s.code,r=t<e.maxNumRetry&&(function(e){return 0===e&&!1===navigator.onLine||!!e&&(e<400||e>499)}(n)||!!i);return e.shouldRetry?e.shouldRetry(e,t,i,s,r):r}function li(e){const t={action:0,flags:0};return e&&(t.resolved=!0),t}var di="NOT_LOADED",ci="APPENDING",hi="PARTIAL",ui="OK";class fi{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ie.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ie.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ie.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ie.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let t=i.length;t--;){const s=i[t];if(!s)break;const n=s.end;if(s.start<=e&&null!==n&&e<=n)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){const{fragments:s}=this,n=Object.keys(s);for(let r=n.length;r--;){const o=s[n[r]];if((null==o?void 0:o.body.type)===t&&(!i||o.buffered)){const t=o.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,i,s,n){this.timeRanges&&(this.timeRanges[e]=t);const r=(null==s?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach((s=>{const o=this.fragments[s];if(!o)return;if(r>=o.body.sn)return;if(!o.buffered&&(!o.loaded||n))return void(o.body.type===i&&this.removeFragment(o.body));const a=o.range[e];a&&(0!==a.time.length?a.time.some((e=>{const i=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return i&&this.removeFragment(o.body),i})):this.removeFragment(o.body))}))}detectPartialFragments(e){const t=this.timeRanges;if(!t||"initSegment"===e.frag.sn)return;const i=e.frag,s=gi(i),n=this.fragments[s];if(!n||n.buffered&&i.gap)return;const r=!i.relurl;Object.keys(t).forEach((s=>{const o=i.elementaryStreams[s];if(!o)return;const a=t[s],l=r||!0===o.partial;n.range[s]=this.getBufferedTimes(i,e.part,l,a)})),n.loaded=null,Object.keys(n.range).length?(n.buffered=!0,(n.body.endList=i.endList||n.body.endList)&&(this.endListFragments[n.body.type]=n),pi(n)||this.removeParts(i.sn-1,i.type)):this.removeFragment(n.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=i.filter((t=>t.fragment.sn>=e)))}fragBuffered(e,t){const i=gi(e);let s=this.fragments[i];!s&&t&&(s=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,t,i,s){const n={time:[],partial:i},r=e.start,o=e.end,a=e.minEndPTS||o,l=e.maxStartPTS||r;for(let e=0;e<s.length;e++){const t=s.start(e)-this.bufferPadding,i=s.end(e)+this.bufferPadding;if(l>=t&&a<=i){n.time.push({startPTS:Math.max(r,s.start(e)),endPTS:Math.min(o,s.end(e))});break}if(r<i&&o>t){const t=Math.max(r,s.start(e)),i=Math.min(o,s.end(e));i>t&&(n.partial=!0,n.time.push({startPTS:t,endPTS:i}))}else if(o<=t)break}return n}getPartialFragment(e){let t,i,s,n=null,r=0;const{bufferPadding:o,fragments:a}=this;return Object.keys(a).forEach((l=>{const d=a[l];d&&pi(d)&&(i=d.body.start-o,s=d.body.end+o,e>=i&&e<=s&&(t=Math.min(e-i,s-e),r<=t&&(n=d.body,r=t)))})),n}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||pi(t))}getState(e){const t=gi(e),i=this.fragments[t];return i?i.buffered?pi(i)?hi:ui:ci:di}isTimeBuffered(e,t,i){let s,n;for(let r=0;r<i.length;r++){if(s=i.start(r)-this.bufferPadding,n=i.end(r)+this.bufferPadding,e>=s&&t<=n)return!0;if(t<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if("initSegment"===t.frag.sn||t.frag.bitrateTest)return;const i=t.frag,s=t.part?null:t,n=gi(i);this.fragments[n]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:s,timeRanges:n,type:r}=t;if("initSegment"===i.sn)return;const o=i.type;if(s){let e=this.activePartLists[o];e||(this.activePartLists[o]=e=[]),e.push(s)}this.timeRanges=n;const a=n[r];this.detectEvictedFragments(r,a,o,s)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=gi(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let s=i.length;s--;){const n=t[i[s]];if((null==n?void 0:n.body.type)===e)return!0}return!1}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,i,s,n){s&&!this.hasGaps||Object.keys(this.fragments).forEach((r=>{const o=this.fragments[r];if(!o)return;const a=o.body;a.type!==i||s&&!a.gap||a.start<t&&a.end>e&&(o.buffered||n)&&this.removeFragment(a)}))}removeFragment(e){const t=gi(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const t=e.sn;this.activePartLists[e.type]=i.filter((e=>e.fragment.sn!==t))}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const i=null==(e=this.hls)||null==(t=e.latestLevelDetails)?void 0:t.partList;i&&i.forEach((e=>e.clearElementaryStreamInfo()))}}function pi(e){var t,i,s;return e.buffered&&(e.body.gap||(null==(t=e.range.video)?void 0:t.partial)||(null==(i=e.range.audio)?void 0:i.partial)||(null==(s=e.range.audiovideo)?void 0:s.partial))}function gi(e){return`${e.type}_${e.level}_${e.sn}`}class mi{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case 0:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case 1:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}class vi{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let e=0;e<4;e++)i[e]=t.getUint32(4*e);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,s=i[0],n=i[1],r=i[2],o=i[3],a=this.invSubMix,l=a[0],d=a[1],c=a[2],h=a[3],u=new Uint32Array(256);let f=0,p=0,g=0;for(g=0;g<256;g++)u[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){let i=p^p<<1^p<<2^p<<3^p<<4;i=i>>>8^255&i^99,e[f]=i,t[i]=f;const a=u[f],g=u[a],m=u[g];let v=257*u[i]^16843008*i;s[f]=v<<24|v>>>8,n[f]=v<<16|v>>>16,r[f]=v<<8|v>>>24,o[f]=v,v=16843009*m^65537*g^257*a^16843008*f,l[i]=v<<24|v>>>8,d[i]=v<<16|v>>>16,c[i]=v<<8|v>>>24,h[i]=v,f?(f=a^u[u[u[m^a]]],p^=u[u[p]]):f=p=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,s=0;for(;s<t.length&&i;)i=t[s]===this.key[s],s++;if(i)return;this.key=t;const n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);const r=this.ksRows=4*(n+6+1);let o,a;const l=this.keySchedule=new Uint32Array(r),d=this.invKeySchedule=new Uint32Array(r),c=this.sBox,h=this.rcon,u=this.invSubMix,f=u[0],p=u[1],g=u[2],m=u[3];let v,A;for(o=0;o<r;o++)o<n?v=l[o]=t[o]:(A=v,o%n==0?(A=A<<8|A>>>24,A=c[A>>>24]<<24|c[A>>>16&255]<<16|c[A>>>8&255]<<8|c[255&A],A^=h[o/n|0]<<24):n>6&&o%n==4&&(A=c[A>>>24]<<24|c[A>>>16&255]<<16|c[A>>>8&255]<<8|c[255&A]),l[o]=v=(l[o-n]^A)>>>0);for(a=0;a<r;a++)o=r-a,A=3&a?l[o]:l[o-4],d[a]=a<4||o<=4?A:f[c[A>>>24]]^p[c[A>>>16&255]]^g[c[A>>>8&255]]^m[c[255&A]],d[a]=d[a]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,i){const s=this.keySize+6,n=this.invKeySchedule,r=this.invSBox,o=this.invSubMix,a=o[0],l=o[1],d=o[2],c=o[3],h=this.uint8ArrayToUint32Array_(i);let u=h[0],f=h[1],p=h[2],g=h[3];const m=new Int32Array(e),v=new Int32Array(m.length);let A,E,y,T,b,S,_,C,R,L,I,k,w,P;const O=this.networkToHostOrderSwap;for(;t<m.length;){for(R=O(m[t]),L=O(m[t+1]),I=O(m[t+2]),k=O(m[t+3]),b=R^n[0],S=k^n[1],_=I^n[2],C=L^n[3],w=4,P=1;P<s;P++)A=a[b>>>24]^l[S>>16&255]^d[_>>8&255]^c[255&C]^n[w],E=a[S>>>24]^l[_>>16&255]^d[C>>8&255]^c[255&b]^n[w+1],y=a[_>>>24]^l[C>>16&255]^d[b>>8&255]^c[255&S]^n[w+2],T=a[C>>>24]^l[b>>16&255]^d[S>>8&255]^c[255&_]^n[w+3],b=A,S=E,_=y,C=T,w+=4;A=r[b>>>24]<<24^r[S>>16&255]<<16^r[_>>8&255]<<8^r[255&C]^n[w],E=r[S>>>24]<<24^r[_>>16&255]<<16^r[C>>8&255]<<8^r[255&b]^n[w+1],y=r[_>>>24]<<24^r[C>>16&255]<<16^r[b>>8&255]<<8^r[255&S]^n[w+2],T=r[C>>>24]<<24^r[b>>16&255]<<16^r[S>>8&255]<<8^r[255&_]^n[w+3],v[t]=O(A^u),v[t+1]=O(T^f),v[t+2]=O(y^p),v[t+3]=O(E^g),u=R,f=L,p=I,g=k,t+=4}return v.buffer}}class Ai{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){const e=function(e){switch(e){case 0:return"AES-CBC";case 1:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}class Ei{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(e){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,i=t&&new DataView(e.buffer).getUint8(t-1);return i?e.slice(0,t-i):e}(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,s){return this.useSoftware?new Promise(((n,r)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,i,s);const a=this.flush();a?n(a.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,i,s)}softwareDecrypt(e,t,i,s){const{currentIV:n,currentResult:r,remainderData:o}=this;if(0!==s||16!==t.byteLength)return be.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=ct(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;n&&(i=n);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new vi),l.expandKey(t);const d=r;return this.currentResult=l.decrypt(a.buffer,0,i),this.currentIV=a.slice(-16).buffer,d||null}webCryptoDecrypt(e,t,i,s){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,s));this.key=t,this.fastAesKey=new Ai(this.subtle,t,s)}return this.fastAesKey.expandKey().then((t=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new mi(this.subtle,new Uint8Array(i),s).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized")))).catch((n=>(be.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${n.name}: ${n.message}`),this.onWebCryptoError(e,t,i,s))))}onWebCryptoError(e,t,i,s){const n=this.enableSoftwareAES;if(n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,s);const n=this.flush();if(n)return n.buffer}throw new Error("WebCrypto"+(n?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%16;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){this.logEnabled&&(be.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const yi=Math.pow(2,17);class Ti{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new _i({type:ee.NETWORK_ERROR,details:te.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();const s=this.config,n=s.fLoader,r=s.loader;return new Promise(((o,a)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some((e=>"GAP"===e[0])))return void a(Si(e));e.gap=!1}const l=this.loader=n?new n(s):new r(s),d=bi(e);e.loader=l;const c=oi(s.fragLoadPolicy.default),h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:yi};e.stats=l.stats;const u={onSuccess:(t,i,s,n)=>{this.resetLoader(e,l);let r=t.data;s.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(r.slice(0,16)),r=r.slice(16)),o({frag:e,part:null,payload:r,networkDetails:n})},onError:(t,s,n,r)=>{this.resetLoader(e,l),a(new _i({type:ee.NETWORK_ERROR,details:te.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ge({url:i,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:n,stats:r}))},onAbort:(t,i,s)=>{this.resetLoader(e,l),a(new _i({type:ee.NETWORK_ERROR,details:te.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:s,stats:t}))},onTimeout:(t,i,s)=>{this.resetLoader(e,l),a(new _i({type:ee.NETWORK_ERROR,details:te.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:s,stats:t}))}};t&&(u.onProgress=(i,s,n,r)=>t({frag:e,part:null,payload:n,networkDetails:r})),l.load(d,h,u)}))}loadPart(e,t,i){this.abort();const s=this.config,n=s.fLoader,r=s.loader;return new Promise(((o,a)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void a(Si(e,t));const l=this.loader=n?new n(s):new r(s),d=bi(e,t);e.loader=l;const c=oi(s.fragLoadPolicy.default),h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:yi};t.stats=l.stats,l.load(d,h,{onSuccess:(s,n,r,a)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const d={frag:e,part:t,payload:s.data,networkDetails:a};i(d),o(d)},onError:(i,s,n,r)=>{this.resetLoader(e,l),a(new _i({type:ee.NETWORK_ERROR,details:te.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:ge({url:d.url,data:void 0},i),error:new Error(`HTTP Error ${i.code} ${i.text}`),networkDetails:n,stats:r}))},onAbort:(i,s,n)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),a(new _i({type:ee.NETWORK_ERROR,details:te.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:n,stats:i}))},onTimeout:(i,s,n)=>{this.resetLoader(e,l),a(new _i({type:ee.NETWORK_ERROR,details:te.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:n,stats:i}))}})}))}updateStatsFromPart(e,t){const i=e.stats,s=t.stats,n=s.total;if(i.loaded+=s.loaded,n){const s=Math.round(e.duration/t.duration),r=Math.min(Math.round(i.loaded/n),s),o=(s-r)*Math.round(i.loaded/r);i.total=i.loaded+o}else i.total=Math.max(i.loaded,i.total);const r=i.loading,o=s.loading;r.start?r.first+=o.first-o.start:(r.start=o.start,r.first=o.first),r.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function bi(e,t=null){const i=t||e,s={frag:e,part:t,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},n=i.byteRangeStartOffset,r=i.byteRangeEndOffset;if(Q(n)&&Q(r)){var o;let t=n,i=r;if("initSegment"===e.sn&&("AES-128"===(a=null==(o=e.decryptdata)?void 0:o.method)||"AES-256"===a)){const e=r-n;e%16&&(i=r+(16-e%16)),0!==n&&(s.resetIV=!0,t=n-16)}s.rangeStart=t,s.rangeEnd=i}var a;return s}function Si(e,t){const i=new Error(`GAP ${e.gap?"tag":"attribute"} found`),s={type:ee.MEDIA_ERROR,details:te.FRAG_GAP,fatal:!1,frag:e,error:i,networkDetails:null};return t&&(s.part=t),(t||e).stats.aborted=!0,new _i(s)}class _i extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Ci extends me{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Ri{constructor(e,t,i,s=0,n=-1,r=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=i,this.size=s,this.part=n,this.partial=r}}const Li={length:0,start:()=>0,end:()=>0};class Ii{static isBuffered(e,t){if(e){const i=Ii.getBuffered(e);for(let e=i.length;e--;)if(t>=i.start(e)&&t<=i.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=Ii.getBuffered(e);return Ii.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){const s=Ii.bufferedRanges(e);if(s.length)return Ii.bufferedInfo(s,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort(((e,t)=>e.start-t.start||t.end-e.end));let s=-1,n=[];if(i)for(let r=0;r<e.length;r++){t>=e[r].start&&t<=e[r].end&&(s=r);const o=n.length;if(o){const t=n[o-1].end;e[r].start-t<i?e[r].end>t&&(n[o-1].end=e[r].end):n.push(e[r])}else n.push(e[r])}else n=e;let r,o=0,a=t,l=t;for(let e=0;e<n.length;e++){const d=n[e].start,c=n[e].end;if(-1===s&&t>=d&&t<=c&&(s=e),t+i>=d&&t<c)a=d,l=c,o=l-t;else if(t+i<d){r=d;break}}return{len:o,start:a||0,end:l||0,nextStart:r,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||Li}catch(e){return be.log("failed to get media.buffered",e),Li}}}const ki=/\{\$([a-zA-Z0-9-_]+)\}/g;function wi(e){return ki.test(e)}function Pi(e,t){if(null!==e.variableList||e.hasVariableRefs){const i=e.variableList;return t.replace(ki,(t=>{const s=t.substring(2,t.length-1),n=null==i?void 0:i[s];return void 0===n?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),t):n}))}return t}function Oi(e,t,i){let s,n,r=e.variableList;if(r||(e.variableList=r={}),"QUERYPARAM"in t){s=t.QUERYPARAM;try{const e=new self.URL(i).searchParams;if(!e.has(s))throw new Error(`"${s}" does not match any query parameter in URI: "${i}"`);n=e.get(s)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${t.message}`))}}else s=t.NAME,n=t.VALUE;s in r?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):r[s]=n||""}function Di(e,t,i){const s=t.IMPORT;if(i&&s in i){let t=e.variableList;t||(e.variableList=t={}),t[s]=i[s]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${s}"`))}const Ni=/^(\d+)x(\d+)$/,Mi=/(.+?)=(".*?"|.*?)(?:,|$)/g;class xi{constructor(e,t){"string"==typeof e&&(e=xi.parseAttrList(e,t)),fe(this,e)}get clientAttrs(){return Object.keys(this).filter((e=>"X-"===e.substring(0,2)))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const i=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)i[e]=parseInt(t.slice(2*e,2*e+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce(((e,t)=>(e[t.toLowerCase()]=!0,e)),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=Ni.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i;const s={};for(Mi.lastIndex=0;null!==(i=Mi.exec(e));){const n=i[1].trim();let r=i[2];const o=0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1;let a=!1;if(o)r=r.slice(1,-1);else switch(n){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":a=!0}if(t&&(o||a))r=Pi(t,r);else if(!a&&!o)switch(n){case"CLOSED-CAPTIONS":if("NONE"===r)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":be.warn(`${e}: attribute ${n} is missing quotes`)}s[n]=r}return s}}function Bi(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}class Fi{constructor(e,t,i=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(s=null==t?void 0:t.tagOrder)?s:i,t){const i=t.attr;for(const t in i)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==i[t]){be.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=fe(new xi({}),i,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);Q(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(be.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Q(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return"com.apple.hls.interstitial"===this.class}get isValid(){return!!this.id&&!this._badValueForSameId&&Q(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}class Ui{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&i>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1}get hasProgramDateTime(){return!!this.fragments.length&&Q(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return null!=(e=this.fragments)&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(-1!==t){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function $i(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function Vi(e){switch(e){case"AES-128":case"AES-256":return 0;case"AES-256-CTR":return 1;default:throw new Error(`invalid full segment method ${e}`)}}function Gi(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}function ji(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(e=>e.charCodeAt(0)))}const Ki="undefined"!=typeof self?self:void 0;var Hi={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Yi="org.w3.clearkey",Wi="com.apple.streamingkeydelivery",zi="com.microsoft.playready",qi="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Xi(e){switch(e){case Wi:return Hi.FAIRPLAY;case zi:return Hi.PLAYREADY;case qi:return Hi.WIDEVINE;case Yi:return Hi.CLEARKEY}}function Qi(e){return"edef8ba979d64acea3c827dcd51d21ed"===e?Hi.WIDEVINE:"9a04f07998404286ab92e65be0885f95"===e?Hi.PLAYREADY:"1077efecc0b24d02ace33c1e52e2fb4b"===e||"e2719d58a985b3c9781ab030af78d30e"===e?Hi.CLEARKEY:void 0}function Zi(e){switch(e){case Hi.FAIRPLAY:return Wi;case Hi.PLAYREADY:return zi;case Hi.WIDEVINE:return qi;case Hi.CLEARKEY:return Yi}}function Ji(e){const{drmSystems:t,widevineLicenseUrl:i}=e,s=t?[Hi.FAIRPLAY,Hi.WIDEVINE,Hi.PLAYREADY,Hi.CLEARKEY].filter((e=>!!t[e])):[];return!s[Hi.WIDEVINE]&&i&&s.push(Hi.WIDEVINE),s}const es=null!=Ki&&null!=(ts=Ki.navigator)&&ts.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var ts;function is(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),i=String.fromCharCode.apply(null,Array.from(t)),s=i.substring(i.indexOf("<"),i.length),n=(new DOMParser).parseFromString(s,"text/xml").getElementsByTagName("KID")[0];if(n){const e=n.childNodes[0]?n.childNodes[0].nodeValue:n.getAttribute("VALUE");if(e){const t=Gi(e).subarray(0,16);return function(e){const t=function(e,t,i){const s=e[t];e[t]=e[i],e[i]=s};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),t}}return null}let ss={};class ns{static clearKeyUriToKeyIdMap(){ss={}}constructor(e,t,i,s=[1],n=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=s,this.iv=n,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!$i(e)}isSupported(){if(this.method){if($i(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Wi:case qi:case zi:case Yi:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if($i(this.method)&&this.uri&&!this.iv){"number"!=typeof e&&(be.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const t=function(e){const t=new Uint8Array(16);for(let i=12;i<16;i++)t[i]=e>>8*(15-i)&255;return t}(e);return new ns(this.method,this.uri,"identity",this.keyFormatVersions,t)}const t=function(e){const t=e.split(":");let i=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),s=e[e.length-1].split(",");if(2===s.length){const t="base64"===s[0],n=s[1];t?(e.splice(-1,1),i=Gi(n)):i=function(e){const t=ji(e).subarray(0,16),i=new Uint8Array(16);return i.set(t,16-t.length),i}(n)}}return i}(this.uri);if(t)switch(this.keyFormat){case qi:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case zi:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(e,t,i){if(16!==e.byteLength)throw new RangeError("Invalid system id");let s,n,r;s=0,n=new Uint8Array,r=new Uint8Array;const o=new Uint8Array(4);return i&&i.byteLength>0&&new DataView(o.buffer).setUint32(0,i.byteLength,!1),function(e,...t){const i=t.length;let s=8,n=i;for(;n--;)s+=t[n].byteLength;const r=new Uint8Array(s);for(r[0]=s>>24&255,r[1]=s>>16&255,r[2]=s>>8&255,r[3]=255&s,r.set(e,4),n=0,s=8;n<i;n++)r.set(t[n],s),s+=t[n].byteLength;return r}([112,115,115,104],new Uint8Array([0,0,0,0]),e,r,n,o,i||new Uint8Array)}(e,0,t),this.keyId=is(t);break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=ss[this.uri];if(!e){const t=Object.keys(ss).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16),new DataView(e.buffer,12,4).setUint32(0,t),ss[this.uri]=e}this.keyId=e}return this}}const rs=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,os=/#EXT-X-MEDIA:(.*)/g,as=/^#EXT(?:INF|-X-TARGETDURATION):/m,ls=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),ds=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class cs{static findGroup(e,t){for(let i=0;i<e.length;i++){const s=e[i];if(s.id===t)return s}}static resolve(e,t){return Me.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return as.test(e)}static parseMasterPlaylist(e,t){const i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:wi(e)},s=[];let n;for(rs.lastIndex=0;null!=(n=rs.exec(e));)if(n[1]){var r;const e=new xi(n[1],i),o=Pi(i,n[2]),a={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:cs.resolve(o,t)},l=e.decimalResolution("RESOLUTION");l&&(a.width=l.width,a.height=l.height),gs(e.CODECS,a);const d=e["SUPPLEMENTAL-CODECS"];d&&(a.supplemental={},gs(d,a.supplemental)),null!=(r=a.unknownCodecs)&&r.length||s.push(a),i.levels.push(a)}else if(n[3]){const e=n[3],s=n[4];switch(e){case"SESSION-DATA":{const e=new xi(s,i),t=e["DATA-ID"];t&&(null===i.sessionData&&(i.sessionData={}),i.sessionData[t]=e);break}case"SESSION-KEY":{const e=fs(s,t,i);e.encrypted&&e.isSupported()?(null===i.sessionKeys&&(i.sessionKeys=[]),i.sessionKeys.push(e)):be.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${s}"`);break}case"DEFINE":Oi(i,new xi(s,i),t);break;case"CONTENT-STEERING":{const e=new xi(s,i);i.contentSteering={uri:cs.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":i.startTimeOffset=ps(s)}}const o=s.length>0&&s.length<i.levels.length;return i.levels=o?s:i.levels,0===i.levels.length&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,i){let s;const n={},r=i.levels,o={AUDIO:r.map((e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec}))),SUBTITLES:r.map((e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec}))),"CLOSED-CAPTIONS":[]};let a=0;for(os.lastIndex=0;null!==(s=os.exec(e));){const e=new xi(s[1],i),r=e.TYPE;if(r){const i=o[r],s=n[r]||[];n[r]=s;const l=e.LANGUAGE,d=e["ASSOC-LANGUAGE"],c=e.CHANNELS,h=e.CHARACTERISTICS,u=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:a++,groupId:e["GROUP-ID"]||"",name:e.NAME||l||"",type:r,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:l,url:e.URI?cs.resolve(e.URI,t):""};if(d&&(f.assocLang=d),c&&(f.channels=c),h&&(f.characteristics=h),u&&(f.instreamId=u),null!=i&&i.length){const e=cs.findGroup(i,f.groupId)||i[0];ms(f,e,"audioCodec"),ms(f,e,"textCodec")}s.push(f)}}return n}static parseLevelPlaylist(e,t,i,s,n,r){var o;const a={url:t},l=new Ui(t),d=l.fragments,c=[];let h,u,f,p,g=null,m=0,v=0,A=0,E=0,y=0,T=null,b=new Ge(s,a),S=-1,_=!1,C=null;if(ls.lastIndex=0,l.m3u8=e,l.hasVariableRefs=wi(e),"#EXTM3U"!==(null==(o=ls.exec(e))?void 0:o[0]))return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;for(;null!==(h=ls.exec(e));){_&&(_=!1,b=new Ge(s,a),b.playlistOffset=A,b.start=A,b.sn=m,b.cc=E,y&&(b.bitrate=y),b.level=i,g&&(b.initSegment=g,g.rawProgramDateTime&&(b.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),C&&(b.setByteRange(C),C=null)));const e=h[1];if(e){b.duration=parseFloat(e);const t=(" "+h[2]).slice(1);b.title=t||null,b.tagList.push(t?["INF",e,t]:["INF",e])}else if(h[3]){if(Q(b.duration)){b.playlistOffset=A,b.start=A,f&&Es(b,f,l),b.sn=m,b.level=i,b.cc=E,d.push(b);const e=(" "+h[3]).slice(1);b.relurl=Pi(l,e),vs(b,T,c),T=b,A+=b.duration,m++,v=0,_=!0}}else{if(h=h[0].match(ds),!h){be.warn("No matches on slow regex match for level playlist!");continue}for(u=1;u<h.length&&void 0===h[u];u++);const e=(" "+h[u]).slice(1),n=(" "+h[u+1]).slice(1),o=h[u+2]?(" "+h[u+2]).slice(1):null;switch(e){case"BYTERANGE":T?b.setByteRange(n,T):b.setByteRange(n);break;case"PROGRAM-DATE-TIME":b.rawProgramDateTime=n,b.tagList.push(["PROGRAM-DATE-TIME",n]),-1===S&&(S=d.length);break;case"PLAYLIST-TYPE":l.type&&ys(l,e,h),l.type=n.toUpperCase();break;case"MEDIA-SEQUENCE":0!==l.startSN?ys(l,e,h):d.length>0&&Ts(l,e,h),m=l.startSN=parseInt(n);break;case"SKIP":{l.skippedSegments&&ys(l,e,h);const t=new xi(n,l),i=t.decimalInteger("SKIPPED-SEGMENTS");if(Q(i)){l.skippedSegments+=i;for(let e=i;e--;)d.push(null);m+=i}const s=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");s&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(s.split("\t")));break}case"TARGETDURATION":0!==l.targetduration&&ys(l,e,h),l.targetduration=Math.max(parseInt(n),1);break;case"VERSION":null!==l.version&&ys(l,e,h),l.version=parseInt(n);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||ys(l,e,h),l.live=!1;break;case"#":(n||o)&&b.tagList.push(o?[n,o]:[n]);break;case"DISCONTINUITY":E++,b.tagList.push(["DIS"]);break;case"GAP":b.gap=!0,b.tagList.push([e]);break;case"BITRATE":b.tagList.push([e,n]),y=1e3*parseInt(n),Q(y)?b.bitrate=y:y=0;break;case"DATERANGE":{const e=new xi(n,l),t=new Fi(e,l.dateRanges[e.ID],l.dateRangeTagCount);l.dateRangeTagCount++,t.isValid||l.skippedSegments?l.dateRanges[t.id]=t:be.warn(`Ignoring invalid DATERANGE tag: "${n}"`),b.tagList.push(["EXT-X-DATERANGE",n]);break}case"DEFINE":{const e=new xi(n,l);"IMPORT"in e?Di(l,e,r):Oi(l,e,t)}break;case"DISCONTINUITY-SEQUENCE":0!==l.startCC?ys(l,e,h):d.length>0&&Ts(l,e,h),l.startCC=E=parseInt(n);break;case"KEY":{const e=fs(n,t,l);if(e.isSupported()){if("NONE"===e.method){f=void 0;break}f||(f={}),f[e.keyFormat]&&(f=fe({},f)),f[e.keyFormat]=e}else be.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${n}"`);break}case"START":l.startTimeOffset=ps(n);break;case"MAP":{const e=new xi(n,l);if(b.duration){const t=new Ge(s,a);As(t,e,i,f),g=t,b.initSegment=g,g.rawProgramDateTime&&!b.rawProgramDateTime&&(b.rawProgramDateTime=g.rawProgramDateTime)}else{const t=b.byteRangeEndOffset;if(t){const e=b.byteRangeStartOffset;C=`${t-e}@${e}`}else C=null;As(b,e,i,f),g=b,_=!0}g.cc=E;break}case"SERVER-CONTROL":p&&ys(l,e,h),p=new xi(n),l.canBlockReload=p.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=p.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&p.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=p.optionalFloat("PART-HOLD-BACK",0),l.holdBack=p.optionalFloat("HOLD-BACK",0);break;case"PART-INF":{l.partTarget&&ys(l,e,h);const t=new xi(n);l.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=l.partList;e||(e=l.partList=[]);const t=v>0?e[e.length-1]:void 0,i=v++,s=new xi(n,l),r=new je(s,b,a,i,t);e.push(r),b.duration+=r.duration;break}case"PRELOAD-HINT":{const e=new xi(n,l);l.preloadHint=e;break}case"RENDITION-REPORT":{const e=new xi(n,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(e);break}default:be.warn(`line parsed but not handled: ${h}`)}}}T&&!T.relurl?(d.pop(),A-=T.duration,l.partList&&(l.fragmentHint=T)):l.partList&&(vs(b,T,c),b.cc=E,l.fragmentHint=b,f&&Es(b,f,l)),l.targetduration||(l.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const R=d.length,L=d[0],I=d[R-1];if(A+=l.skippedSegments*l.targetduration,A>0&&R&&I){l.averagetargetduration=A/R;const e=I.sn;l.endSN="initSegment"!==e?e:0,l.live||(I.endList=!0),L&&void 0===l.startCC&&(l.startCC=L.cc),S>0&&(function(e,t){let i=e[t];for(let s=t;s--;){const t=e[s];if(!t)return;t.programDateTime=i.programDateTime-1e3*t.duration,i=t}}(d,S),L&&c.unshift(L))}else l.endSN=0,l.startCC=0;return l.fragmentHint&&(A+=l.fragmentHint.duration),l.totalduration=A,c.length&&l.dateRangeTagCount&&L&&hs(c,l),l.endCC=E,l}}function hs(e,t){const i=e.length,s=e[i-1],n=t.live?1/0:t.totalduration,r=Object.keys(t.dateRanges);for(let o=r.length;o--;){const a=t.dateRanges[r[o]],l=a.startDate.getTime();a.tagAnchor=s.ref;for(let s=i;s--;){const i=us(t,l,e,s,n);if(-1!==i){a.tagAnchor=t.fragments[i].ref;break}}}}function us(e,t,i,s,n){const r=i[s];if(r){const a=r.programDateTime;var o;if(t>=a||0===s)if(t<=a+1e3*(((null==(o=i[s+1])?void 0:o.start)||n)-r.start)){const n=i[s].sn-e.startSN,r=e.fragments;if(r.length>i.length)for(let o=(i[s+1]||r[r.length-1]).sn-e.startSN;o>n;o--){const e=r[o].programDateTime;if(t>=e&&t<e+1e3*r[o].duration)return o}return n}}return-1}function fs(e,t,i){var s,n;const r=new xi(e,i),o=null!=(s=r.METHOD)?s:"",a=r.URI,l=r.hexadecimalInteger("IV"),d=r.KEYFORMATVERSIONS,c=null!=(n=r.KEYFORMAT)?n:"identity";a&&r.IV&&!l&&be.error(`Invalid IV: ${r.IV}`);const h=a?cs.resolve(a,t):"",u=(d||"1").split("/").map(Number).filter(Number.isFinite);return new ns(o,h,c,u,l)}function ps(e){const t=new xi(e).decimalFloatingPoint("TIME-OFFSET");return Q(t)?t:null}function gs(e,t){let i=(e||"").split(/[ ,]+/).filter((e=>e));["video","audio","text"].forEach((e=>{const s=i.filter((t=>Et(t,e)));s.length&&(t[`${e}Codec`]=s.map((e=>e.split("/")[0])).join(","),i=i.filter((e=>-1===s.indexOf(e))))})),t.unknownCodecs=i}function ms(e,t,i){const s=t[i];s&&(e[i]=s)}function vs(e,t,i){e.rawProgramDateTime?i.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function As(e,t,i,s){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=i,e.sn="initSegment",s&&(e.levelkeys=s),e.initSegment=null}function Es(e,t,i){e.levelkeys=t;const{encryptedFragments:s}=i;s.length&&s[s.length-1].levelkeys===t||!Object.keys(t).some((e=>t[e].isCommonEncryption))||s.push(e)}function ys(e,t,i){e.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${i[0]})`)}function Ts(e,t,i){e.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${i[0]})`)}function bs(e,t){const i=t.startPTS;if(Q(i)){let s,n=0;t.sn>e.sn?(n=i-e.start,s=e):(n=e.start-i,s=t),s.duration!==n&&s.setDuration(n)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration):t.setStart(Math.max(e.start-t.duration,0))}function Ss(e,t,i,s,n,r){s-i<=0&&(be.warn("Fragment should have a positive duration",t),s=i+t.duration,r=n+t.duration);let o=i,a=s;const l=t.startPTS,d=t.endPTS;if(Q(l)){const e=Math.abs(l-i);Q(t.deltaPTS)?t.deltaPTS=Math.max(e,t.deltaPTS):t.deltaPTS=e,o=Math.max(i,l),i=Math.min(i,l),n=Math.min(n,t.startDTS),a=Math.min(s,d),s=Math.max(s,d),r=Math.max(r,t.endDTS)}const c=i-t.start;0!==t.start&&t.setStart(i),t.setDuration(s-t.start),t.startPTS=i,t.maxStartPTS=o,t.startDTS=n,t.endPTS=s,t.minEndPTS=a,t.endDTS=r;const h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;let u;const f=h-e.startSN,p=e.fragments;for(p[f]=t,u=f;u>0;u--)bs(p[u],p[u-1]);for(u=f;u<p.length-1;u++)bs(p[u],p[u+1]);return e.fragmentHint&&bs(p[p.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,c}function _s(e,t,i,s,n){return new Error(`${e} ${n.url}\nPlaylist starting @${t.startSN}\n${t.m3u8}\n\nPlaylist starting @${i.startSN}\n${i.m3u8}`)}function Cs(e,t,i=!0){const s=t.startSN+t.skippedSegments-e.startSN,n=e.fragments,r=s>=0;let o=0;if(r&&s<n.length)o=n[s].start;else if(r&&t.startSN===e.endSN+1)o=e.fragmentEnd;else if(r&&i)o=e.fragmentStart+s*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;o=e.fragmentStart}Rs(t,o)}function Rs(e,t){if(t){const i=e.fragments;for(let s=e.skippedSegments;s<i.length;s++)i[s].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function Ls(e,t=1/0){let i=1e3*e.targetduration;if(e.updated){const s=e.fragments,n=4;if(s.length&&i*n>t){const e=1e3*s[s.length-1].duration;e<i&&(i=e)}}else i/=2;return Math.round(i)}function Is(e,t,i){return e?ks(e.partList,t,i):null}function ks(e,t,i){if(e)for(let s=e.length;s--;){const n=e[s];if(n.index===i&&n.fragment.sn===t)return n}return null}function ws(e){e.forEach(((e,t)=>{var i;null==(i=e.details)||i.fragments.forEach((e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)}))}))}function Ps(e,t){for(let s=0,n=e.length;s<n;s++){var i;if((null==(i=e[s])?void 0:i.cc)===t)return e[s]}return null}function Os(e,t){if(e){const i=e.start+t;e.start=e.startPTS=i,e.endPTS=i+e.duration}}function Ds(e,t){const i=t.fragments;for(let t=0,s=i.length;t<s;t++)Os(i[t],e);t.fragmentHint&&Os(t.fragmentHint,e),t.alignedSliding=!0}function Ns(e,t){if(!function(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e))return;const i=Math.min(t.endCC,e.endCC),s=Ps(t.fragments,i),n=Ps(e.fragments,i);s&&n&&(be.log(`Aligning playlist at start of dicontinuity sequence ${i}`),Ds(s.start-n.start,e))}function Ms(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const i=e.fragments,s=t.fragments;if(!i.length||!s.length)return;let n,r;const o=Math.min(t.endCC,e.endCC);t.startCC<o&&e.startCC<o&&(n=Ps(s,o),r=Ps(i,o)),n&&r||(n=s[Math.floor(s.length/2)],r=Ps(i,n.cc)||i[Math.floor(i.length/2)]);const a=n.programDateTime,l=r.programDateTime;a&&l&&Ds((l-a)/1e3-(r.start-n.start),e)}const xs="STOPPED",Bs="IDLE",Fs="KEY_LOADING",Us="FRAG_LOADING",$s="FRAG_LOADING_WAITING_RETRY",Vs="WAITING_TRACK",Gs="PARSING",js="PARSED",Ks="ENDED",Hs="ERROR",Ys="WAITING_INIT_PTS",Ws="WAITING_LEVEL";class zs extends Ci{constructor(e,t,i,s,n){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=xs,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:i,mediaBuffer:s,state:n}=this,r=i?i.currentTime:0,o=Ii.bufferInfo(s||i,r,e.maxBufferHole);if(this.log(`media seeking to ${Q(r)?r.toFixed(3):r}, state: ${n}`),this.state===Ks)this.resetLoadingState();else if(t){const i=e.maxFragLookUpTolerance,s=t.start-i,n=t.start+t.duration+i;if(!o.len||n<o.start||s>o.end){const e=r>n;(r<s||e)&&(e&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(i&&(this.fragmentTracker.removeFragmentsInRange(r,1/0,this.playlistType,!0),r>this.lastCurrentTime&&(this.lastCurrentTime=r),!this.loadingParts)){const e=Math.max(o.end,r),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log(`LL-Part loading ON after seeking to ${r.toFixed(2)} with buffer @${e.toFixed(2)}`),this.loadingParts=t)}this.hls.hasEnoughToStart||o.len||(this.log(`setting startPosition to ${r} because of seek before start`),this.nextLoadPosition=this.startPosition=r),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=n,this.hls=e,this.fragmentLoader=new Ti(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Ei(e.config)}registerListeners(){const{hls:e}=this;e.on(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ie.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ie.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===xs)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=xs}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const i=e.end||0,s=this.config.timelineOffset||0;if(i<=s)return!1;const n=e.nextStart;if(n&&n>s&&n<t.edge)return!1;if(this.media.currentTime<e.start)return!1;const r=t.partList;if(null!=r&&r.length){const e=r[r.length-1];return Ii.isBuffered(this.media,e.start+e.duration/2)}const o=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(o)}getLevelDetails(){var e;if(this.levels&&null!==this.levelLastLoaded)return null==(e=this.levelLastLoaded)?void 0:e.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),i.addEventListener("seeking",this.onMediaSeeking),i.addEventListener("ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===xs&&this.startLoad(s.startPosition)}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(null!==s){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),s.removeEventListener("seeking",this.onMediaSeeking),s.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=xs,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){this._doFragLoad(e,t,i,(e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn(`${t.type} sn: ${t.sn}${e.part?" part: "+e.part.index:""} of ${this.fragInfo(t,!1,e.part)}) was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)})).then((e=>{if(!e)return;const t=this.state,i=e.frag;this.fragContextChanged(i)?(t===Us||!this.fragCurrent&&t===Gs)&&(this.fragmentTracker.removeFragment(i),this.state=Bs):("payload"in e&&(this.log(`Loaded ${i.type} sn: ${i.sn} of ${this.playlistLabel()} ${i.level}`),this.hls.trigger(ie.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))})).catch((t=>{this.state!==xs&&this.state!==Hs&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))}))}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===ci){const t=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,t),n=Math.max(e.duration,s?s.len:this.config.maxBufferLength),r=this.backtrackFragment;(1==(r?e.sn-r.sn:0)||this.reduceMaxBufferLength(n,e.duration))&&i.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===hi&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:i};this.hls.trigger(ie.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then((e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e})).then((e=>{const{hls:t}=this,{frag:i,payload:s}=e,n=i.decryptdata;if(s&&s.byteLength>0&&null!=n&&n.key&&n.iv&&$i(n.method)){const r=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),n.key.buffer,n.iv.buffer,Vi(n.method)).catch((e=>{throw t.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:i}),e})).then((s=>{const n=self.performance.now();return t.trigger(ie.FRAG_DECRYPTED,{frag:i,payload:s,stats:{tstart:r,tdecrypt:n}}),e.payload=s,this.completeInitSegmentLoad(e)}))}return this.completeInitSegmentLoad(e)})).catch((t=>{this.state!==xs&&this.state!==Hs&&(this.warn(t),this.resetFragmentLoading(e))}))}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==xs&&(this.state=Bs),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?function(e){let t="";const i=e.length;for(let s=0;s<i;s++)t+=`[${e.start(s).toFixed(3)}-${e.end(s).toFixed(3)}]`;return t}(Ii.getBuffered(i)):"(detached)"})`),Ve(e)){var s;if(e.type!==de){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return void(this.state=Bs)}const t=null==(s=this.levels)?void 0:s[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=Bs}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:s,partsLoaded:n}=e,r=!n||0===n.length||n.some((e=>!e)),o=new Ri(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!r);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,s){var n;this.fragCurrent=e;const r=null==t?void 0:t.details;if(!this.levels||!r)throw new Error(`frag load aborted, missing level${r?"":" detail"}s`);let o=null;!e.encrypted||null!=(n=e.decryptdata)&&n.key?!e.encrypted&&r.encryptedFragments.length&&this.keyLoader.loadClear(e,r.encryptedFragments):(this.log(`Loading key for ${e.sn} of [${r.startSN}-${r.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Fs,this.fragCurrent=e,o=this.keyLoader.load(e).then((e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(ie.KEY_LOADED,e),this.state===Fs&&(this.state=Bs),e})),this.hls.trigger(ie.KEY_LOADING,{frag:e}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING"))));const a=this.fragPrevious;if(Ve(e)&&(!a||e.sn!==a.sn)){const i=this.shouldLoadParts(t.details,e.end);i!==this.loadingParts&&(this.log(`LL-Part loading ${i?"ON":"OFF"} loading sn ${null==a?void 0:a.sn}->${e.sn}`),this.loadingParts=i)}if(i=Math.max(e.start,i||0),this.loadingParts&&Ve(e)){const n=r.partList;if(n&&s){i>e.end&&r.fragmentHint&&(e=r.fragmentHint);const a=this.getNextPart(n,e,i);if(a>-1){const l=n[a];let d;return e=this.fragCurrent=l.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${l.index} (${a}/${n.length-1}) of ${this.fragInfo(e,!1,l)}) cc: ${e.cc} [${r.startSN}-${r.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=Us,d=o?o.then((i=>!i||this.fragContextChanged(i.frag)?null:this.doFragPartsLoad(e,l,t,s))).catch((e=>this.handleFragLoadError(e))):this.doFragPartsLoad(e,l,t,s).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(ie.FRAG_LOADING,{frag:e,part:l,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):d}if(!e.url||this.loadedEndOfParts(n,i))return Promise.resolve(null)}}if(Ve(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${r?"["+r.startSN+"-"+r.endSN+"]":""}, target: ${parseFloat(i.toFixed(3))}`),Q(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Us;const l=this.config.progressive;let d;return d=l&&o?o.then((t=>!t||this.fragContextChanged(null==t?void 0:t.frag)?null:this.fragmentLoader.load(e,s))).catch((e=>this.handleFragLoadError(e))):Promise.all([this.fragmentLoader.load(e,l?s:void 0),o]).then((([e])=>(!l&&e&&s&&s(e),e))).catch((e=>this.handleFragLoadError(e))),this.hls.trigger(ie.FRAG_LOADING,{frag:e,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,t,i,s){return new Promise(((n,r)=>{var o;const a=[],l=null==(o=i.details)?void 0:o.partList,d=t=>{this.fragmentLoader.loadPart(e,t,s).then((s=>{a[t.index]=s;const r=s.part;this.hls.trigger(ie.FRAG_LOADED,s);const o=Is(i.details,e.sn,t.index+1)||ks(l,e.sn,t.index+1);if(!o)return n({frag:e,part:r,partsLoaded:a});d(o)})).catch(r)};d(t)}))}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===te.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(ie.ERROR,t)}else this.hls.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Gs)return void(this.fragCurrent||this.state===xs||this.state===Hs||(this.state=Bs));const{frag:i,part:s,level:n}=t,r=self.performance.now();i.stats.parsing.end=r,s&&(s.stats.parsing.end=r);const o=this.getLevelDetails(),a=o&&i.sn>o.endSN||this.shouldLoadParts(o,i.end);a!==this.loadingParts&&(this.log(`LL-Part loading ${a?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=a),this.updateLevelTiming(i,s,n,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(null!=e&&e.partList){var i;const n=e.partList[0];var s;if(t>=n.end+((null==(i=e.fragmentHint)?void 0:i.duration)||0))if((this.hls.hasEnoughToStart?(null==(s=this.media)?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>n.start-n.fragment.duration)return!0}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:s,sn:n,part:r}=e;if(null==t||!t[s])return this.warn(`Levels object was unset while buffering fragment ${n} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const o=t[s],a=o.details,l=r>-1?Is(a,n,r):null,d=l?l.fragment:function(e,t,i){if(!e)return null;let s=e.fragments[t-e.startSN];return s||(s=e.fragmentHint,s&&s.sn===t?s:t<e.startSN&&i&&i.sn===t?i:null)}(a,n,i);return d?(i&&i!==d&&(d.stats=i.stats),{frag:d,part:l,level:o}):null}bufferFragmentData(e,t,i,s,n){var r;if(!e||this.state!==Gs)return;const{data1:o,data2:a}=e;let l=o;if(o&&a&&(l=ct(o,a)),null==(r=l)||!r.length)return;const d={type:e.type,frag:t,part:i,chunkMeta:s,parent:t.type,data:l};if(this.hls.trigger(ie.BUFFER_APPENDING,d),e.dropped&&e.independent&&!i){if(n)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Ii.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const i=t.currentTime,s=Ii.bufferInfo(t,i,0),n=e.duration,r=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),o=Math.max(Math.min(e.start-r,s.end-r),i+r);e.start-o>r&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var i;const s=this.getLoadPosition();if(!Q(s))return null;const n=this.lastCurrentTime>s||null!=(i=this.media)&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,t,n)}getFwdBufferInfoAtPos(e,t,i,s){const n=Ii.bufferInfo(e,t,s);if(0===n.len&&void 0!==n.nextStart){const r=this.fragmentTracker.getBufferedFrag(t,i);if(r&&(n.nextStart<=r.end||r.gap)){const i=Math.max(Math.min(n.nextStart,r.end)-t,s);return Ii.bufferInfo(e,t,i)}}return n}getMaxBufferLength(e){const{config:t}=this;let i;return i=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,s=Math.max(Math.min(e-t,i.maxBufferLength),t),n=Math.max(e-3*t,i.maxMaxBufferLength/2,s);return n>=s&&(i.maxMaxBufferLength=n,this.warn(`Reduce max buffer length to ${n}s`),!0)}getAppendedFrag(e,t=ae){var i;const s=null==(i=this.fragmentTracker)?void 0:i.getAppendedFrag(e,t);return s&&"fragment"in s?s.fragment:s}getNextFragment(e,t){const i=t.fragments,s=i.length;if(!s)return null;const{config:n}=this,r=i[0].start,o=n.lowLatencyMode&&!!t.partList;let a=null;if(t.live){const d=n.initialLiveManifestSize;if(s<d)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${d})`),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<r){var l;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),a=this.getInitialLiveFragment(t,i);const s=this.hls.startPosition,n=this.hls.liveSyncPosition,d=a?(-1!==s&&s>=r?s:n)||a.start:e;this.log(`Setting startPosition to ${d} to match start frag at live edge. mainStart: ${s} liveSyncPosition: ${n} frag.start: ${null==(l=a)?void 0:l.start}`),this.startPosition=this.nextLoadPosition=d}}else e<=r&&(a=i[0]);if(!a){const i=this.loadingParts?t.partEnd:t.fragmentEnd;a=this.getFragmentAtPosition(e,i,t)}let d=this.filterReplacedPrimary(a,t);if(!d&&a){const e=a.sn-t.startSN;d=this.filterReplacedPrimary(i[e+1]||null,t)}return this.mapToInitFragWhenRequired(d)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===ui||i===hi&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,s,n){let r=null;if(e.gap&&(r=this.getNextFragment(this.nextLoadPosition,t),r&&!r.gap&&i.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s,0);if(null!==e&&i.len+e.len>=n){const e=r.sn;return this.loopSn!==e&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${e}`),this.loopSn=e),null}}return this.loopSn=void 0,r}get primaryPrefetch(){var e,t;if(qs(this.hls.config)&&(null==(e=this.hls.interstitialsManager)||null==(t=e.playingItem)?void 0:t.event))return!0;return!1}filterReplacedPrimary(e,t){if(!e)return e;if(qs(this.hls.config)&&e.type!==de){const i=this.hls.interstitialsManager,s=null==i?void 0:i.bufferingItem;if(s){const i=s.event;if(i){if(i.appendInPlace||Math.abs(e.start-s.start)>1||0===s.start)return null}else{if(e.end<=s.start&&!1===(null==t?void 0:t.live))return null;if(e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}}const n=null==i?void 0:i.playerQueue;if(n)for(let t=n.length;t--;){const i=n[t].interstitial;if(i.appendInPlace&&e.start>=i.startTime&&e.end<=i.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,i){let s=-1,n=!1,r=!0;for(let o=0,a=e.length;o<a;o++){const a=e[o];if(r=r&&!a.independent,s>-1&&i<a.start)break;const l=a.loaded;l?s=-1:(n||a.independent||r)&&a.fragment===t&&(s=o),n=l}return s}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e,t){const i=this.fragPrevious;let s=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),s=function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!Q(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(let s=0;s<e.length;++s){const n=e[s];if(ti(t,i,n))return n}return null}(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const n=i.sn+1;if(n>=e.startSN&&n<=e.endSN){const r=t[n-e.startSN];i.cc===r.cc&&(s=r,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=ii(t,i.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(s=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,i){const{config:s}=this;let{fragPrevious:n}=this,{fragments:r,endSN:o}=i;const{fragmentHint:a}=i,{maxFragLookUpTolerance:l}=s,d=i.partList,c=!!(this.loadingParts&&null!=d&&d.length&&a);let h;var u;(c&&a&&!this.bitrateTest&&d[d.length-1].fragment.sn===a.sn&&(r=r.concat(a),o=a.sn),e<t)?h=Jt(n,r,e,e<this.lastCurrentTime||e>t-l||null!=(u=this.media)&&u.paused||!this.startFragRequested?0:l):h=r[r.length-1];if(h){const e=h.sn-i.startSN,t=this.fragmentTracker.getState(h);if((t===ui||t===hi&&h.gap)&&(n=h),n&&h.sn===n.sn&&(!c||d[0].fragment.sn>h.sn||!i.live&&!c)&&n&&h.level===n.level){const t=r[e+1];h=h.sn<o&&this.fragmentTracker.getState(t)!==ui?t:null}}return h}alignPlaylists(e,t,i){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const n=e.fragmentStart,r=!t,o=e.alignedSliding&&Q(n);if(r||!o&&!n){!function(e,t){e&&(Ns(t,e),!t.alignedSliding&&e&&Ms(t,e),t.alignedSliding||!e||t.skippedSegments||Cs(e,t,!1))}(i,e);const n=e.fragmentStart;return this.log(`Live playlist sliding: ${n.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${s}`),n}return n}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);const s=this.timelineOffset;if(-1===i){const n=null!==this.startTimeOffset,r=n?this.startTimeOffset:e.startTimeOffset;null!==r&&Q(r)?(i=t+r,r<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${r} found in ${n?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+s}this.nextLoadPosition=i+s}getLoadPosition(){var e;const{media:t}=this;let i=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&Ve(e)&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===$s)||(this.state=Bs)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;var s;if(this.fragContextChanged(i))return void this.warn(`Frag load error must match current frag to retry ${i.url} > ${null==(s=this.fragCurrent)?void 0:s.url}`);const n=t.details===te.FRAG_GAP;n&&this.fragmentTracker.fragBuffered(i,!0);const r=t.errorAction,{action:o,flags:a,retryCount:l=0,retryConfig:d}=r||{},c=!!r&&!!d,h=c&&5===o,u=c&&!r.resolved&&1===a;if(!h&&u&&Ve(i)&&!i.endList)this.resetFragmentErrors(e),this.treatAsGap(i),r.resolved=!0;else if((h||u)&&l<d.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const s=ri(d,l);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${l+1}/${d.maxNumRetry} in ${s}ms`),r.resolved=!0,this.retryDate=self.performance.now()+s,this.state=$s}else if(d&&r){if(this.resetFragmentErrors(e),!(l<d.maxNumRetry))return void this.warn(`${t.details} reached or exceeded max retry (${l})`);n||3===o||(r.resolved=!0)}else this.state=2===o?Ws:Hs;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Gs||this.state===js){const t=e.frag,i=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),n=s&&s.len>.5;n&&this.reduceMaxBufferLength(s.len,(null==t?void 0:t.duration)||10);const r=!n;return r&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),r}return!1}resetFragmentErrors(e){e===le&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==xs&&(this.state=Bs)}afterBufferFlushed(e,t,i){if(!e)return;const s=Ii.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,i),this.state===Ks&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==xs&&(this.state=Bs)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,s){const n=i.details;if(n){var r;if(!Object.keys(e.elementaryStreams).reduce(((t,r)=>{const o=e.elementaryStreams[r];if(o){const a=o.endPTS-o.startPTS;if(a<=0)return this.warn(`Could not parse fragment ${e.sn} ${r} duration reliably (${a})`),t||!1;const l=s?0:Ss(n,e,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return this.hls.trigger(ie.LEVEL_PTS_UPDATED,{details:n,level:i,drift:l,type:r,frag:e,start:o.startPTS,end:o.endPTS}),!0}return t}),!1)&&(0===i.fragmentError&&this.treatAsGap(e,i),null===(null==(r=this.transmuxer)?void 0:r.error))){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=js,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(ie.FRAG_PARSED,{frag:e,part:t})}else this.warn("level.details undefined")}playlistLabel(){return this.playlistType===ae?"level":"track"}fragInfo(e,t=!0,i){var s,n;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${(null!=(s=t&&!i?e.startPTS:(i||e).start)?s:NaN).toFixed(3)}-${(null!=(n=t&&!i?e.endPTS:(i||e).end)?n:NaN).toFixed(3)}]${i&&"main"===e.type?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function qs(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class Xs{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;return e.length?(i=1===e.length?e[0]:function(e,t){const i=new Uint8Array(t);let s=0;for(let t=0;t<e.length;t++){const n=e[t];i.set(n,s),s+=n.length}return i}(e,t),this.reset(),i):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}var Qs,Zs={exports:{}},Js=(Qs||(Qs=1,function(e){var t=Object.prototype.hasOwnProperty,i="~";function s(){}function n(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function r(e,t,s,r,o){if("function"!=typeof s)throw new TypeError("The listener must be a function");var a=new n(s,r||e,o),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),a.prototype.eventNames=function(){var e,s,n=[];if(0===this._eventsCount)return n;for(s in e=this._events)t.call(e,s)&&n.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=i?i+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,r=s.length,o=new Array(r);n<r;n++)o[n]=s[n].fn;return o},a.prototype.listenerCount=function(e){var t=i?i+e:e,s=this._events[t];return s?s.fn?1:s.length:0},a.prototype.emit=function(e,t,s,n,r,o){var a=i?i+e:e;if(!this._events[a])return!1;var l,d,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,s),!0;case 4:return c.fn.call(c.context,t,s,n),!0;case 5:return c.fn.call(c.context,t,s,n,r),!0;case 6:return c.fn.call(c.context,t,s,n,r,o),!0}for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c.fn.apply(c.context,l)}else{var u,f=c.length;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),h){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,s);break;case 4:c[d].fn.call(c[d].context,t,s,n);break;default:if(!l)for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c[d].fn.apply(c[d].context,l)}}return!0},a.prototype.on=function(e,t,i){return r(this,e,t,i,!1)},a.prototype.once=function(e,t,i){return r(this,e,t,i,!0)},a.prototype.removeListener=function(e,t,s,n){var r=i?i+e:e;if(!this._events[r])return this;if(!t)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==t||n&&!a.once||s&&a.context!==s||o(this,r);else{for(var l=0,d=[],c=a.length;l<c;l++)(a[l].fn!==t||n&&!a[l].once||s&&a[l].context!==s)&&d.push(a[l]);d.length?this._events[r]=1===d.length?d[0]:d:o(this,r)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&o(this,t)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a}(Zs)),Zs.exports),en=Le(Js);const tn="1.6.0",sn={};function nn(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function rn(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function on(e,t){let i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,i|=(127&e[t+2])<<7,i|=127&e[t+3],i}function an(e,t){const i=t;let s=0;for(;rn(e,t);)s+=10,s+=on(e,t+6),nn(e,t+10)&&(s+=10),t+=s;if(s>0)return e.subarray(i,i+s)}function ln(e,t){return 255===e[t]&&240==(246&e[t+1])}function dn(e,t){return 1&e[t+1]?7:9}function cn(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function hn(e,t){return t+1<e.length&&ln(e,t)}function un(e,t){if(hn(e,t)){const i=dn(e,t);if(t+i>=e.length)return!1;const s=cn(e,t);if(s<=i)return!1;const n=t+s;return n===e.length||hn(e,n)}return!1}function fn(e,t,i,s,n){if(!e.samplerate){const r=function(e,t,i,s){const n=t[i+2],r=n>>2&15;if(r>12){const t=new Error(`invalid ADTS sampling index:${r}`);return void e.emit(ie.ERROR,ie.ERROR,{type:ee.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const o=1+(n>>6&3),a=t[i+3]>>6&3|(1&n)<<2,l="mp4a.40."+o,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][r];let c=r;5!==o&&29!==o||(c-=3);const h=[o<<3|(14&c)>>1,(1&c)<<7|a<<3];return be.log(`manifest codec:${s}, parsed codec:${l}, channels:${a}, rate:${d} (ADTS object type:${o} sampling index:${r})`),{config:h,samplerate:d,channelCount:a,codec:l,parsedCodec:l,manifestCodec:s}}(t,i,s,n);if(!r)return;fe(e,r)}}function pn(e){return 9216e4/e}function gn(e,t,i,s,n){const r=s+n*pn(e.samplerate),o=function(e,t){const i=dn(e,t);if(t+i<=e.length){const s=cn(e,t)-i;if(s>0)return{headerLength:i,frameLength:s}}}(t,i);let a;if(o){const{frameLength:s,headerLength:n}=o,l=n+s,d=Math.max(0,i+l-t.length);d?(a=new Uint8Array(l-n),a.set(t.subarray(i+n,t.length),0)):a=t.subarray(i+n,i+l);const c={unit:a,pts:r};return d||e.samples.push(c),{sample:c,length:l,missing:d}}const l=t.length-i;return a=new Uint8Array(l),a.set(t.subarray(i,t.length),0),{sample:{unit:a,pts:r},length:l,missing:-1}}function mn(e,t){return rn(e,t)&&on(e,t+6)+10<=e.length-t}function vn(e,t){if(e<0)return-vn(-e,t);const i=Math.pow(10,t);if(Math.abs(e*i%1-.5)<Number.EPSILON){const t=Math.floor(e*i);return(t%2==0?t:t+1)/i}return Math.round(e*i)/i}function An(e,t=0,i=1/0){return function(e,t,i,s){const n=(r=e)instanceof ArrayBuffer?r:r.buffer;var r;let o=1;"BYTES_PER_ELEMENT"in s&&(o=s.BYTES_PER_ELEMENT);const a=(h=e)&&h.buffer instanceof ArrayBuffer&&void 0!==h.byteLength&&void 0!==h.byteOffset?e.byteOffset:0,l=(a+e.byteLength)/o,d=(a+t)/o,c=Math.floor(Math.max(0,Math.min(d,l)));var h;return new s(n,c,Math.floor(Math.min(c+Math.max(i,0),l))-c)}(e,t,i,Uint8Array)}function En(e){return"PRIV"===e.type?function(e){if(e.size<2)return;const t=Ce(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const i=Ce(e.data.subarray(t),!0);t+=i.length+1;const s=Ce(e.data.subarray(t));return{key:e.type,info:i,data:s}}const t=Ce(e.data);return{key:e.type,info:"",data:t}}(e):"APIC"===e.type?function(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return void console.log("Ignore frame with unrecognized character encoding");const i=e.data.subarray(1).indexOf(0);if(-1===i)return;const s=Ce(An(e.data,1,i)),n=e.data[2+i],r=e.data.subarray(3+i).indexOf(0);if(-1===r)return;const o=Ce(An(e.data,3+i,r));let a;var l;return a="--\x3e"===s?Ce(An(e.data,4+i+r)):(l=e.data.subarray(4+i+r))instanceof ArrayBuffer?l:0==l.byteOffset&&l.byteLength==l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer,t.mimeType=s,t.pictureType=n,t.description=o,t.data=a,t}(e):function(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const i=Ce(e.data.subarray(t),!0);t+=i.length+1;const s=Ce(e.data.subarray(t));return{key:e.type,info:i,data:s}}const t=Ce(e.data.subarray(1));return{key:e.type,info:"",data:t}}(e)}function yn(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=on(e,4);return{type:t,size:i,data:e.subarray(10,10+i)}}function Tn(e){let t=0;const i=[];for(;rn(e,t);){const s=on(e,t+6);e[t+5]>>6&1&&(t+=10),t+=10;const n=t+s;for(;t+10<n;){const s=yn(e.subarray(t)),n=En(s);n&&i.push(n),t+=s.size+10}nn(e,t)&&(t+=10)}return i}function bn(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function Sn(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),i=1&t[3];let s=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return s/=45,i&&(s+=47721858.84),Math.round(s)}}function _n(e){const t=Tn(e);for(let e=0;e<t.length;e++){const i=t[e];if(bn(i))return Sn(i)}}let Cn=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function Rn(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class Ln{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=ct(this.cachedData,e),this.cachedData=null);let i,s=an(e,0),n=s?s.length:0;const r=this._audioTrack,o=this._id3Track,a=s?_n(s):void 0,l=e.length;for((null===this.basePTS||0===this.frameIndex&&Q(a))&&(this.basePTS=In(a,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),s&&s.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:Cn.audioId3,duration:Number.POSITIVE_INFINITY});n<l;){if(this.canParse(e,n)){const t=this.appendFrame(r,e,n);t?(this.frameIndex++,this.lastPTS=t.sample.pts,n+=t.length,i=n):n=l}else mn(e,n)?(s=an(e,n),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:Cn.audioId3,duration:Number.POSITIVE_INFINITY}),n+=s.length,i=n):n++;if(n===l&&i!==l){const t=e.slice(i);this.cachedData?this.cachedData=ct(this.cachedData,t):this.cachedData=t}}return{audioTrack:r,videoTrack:Rn(),id3Track:o,textTrack:Rn()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Rn(),id3Track:this._id3Track,textTrack:Rn()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const In=(e,t,i)=>Q(e)?90*e:9e4*t+(i?9e4*i.baseTime/i.timescale:0);let kn=null;const wn=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Pn=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],On=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Dn=[0,1,1,4];function Nn(e,t,i,s,n){if(i+24>t.length)return;const r=Mn(t,i);if(r&&i+r.frameLength<=t.length){const o=s+n*(9e4*r.samplesPerFrame/r.sampleRate),a={unit:t.subarray(i,i+r.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=r.channelCount,e.samplerate=r.sampleRate,e.samples.push(a),{sample:a,length:r.frameLength,missing:0}}}function Mn(e,t){const i=e[t+1]>>3&3,s=e[t+1]>>1&3,n=e[t+2]>>4&15,r=e[t+2]>>2&3;if(1!==i&&0!==n&&15!==n&&3!==r){const o=e[t+2]>>1&1,a=e[t+3]>>6,l=1e3*wn[14*(3===i?3-s:3===s?3:4)+n-1],d=Pn[3*(3===i?0:2===i?1:2)+r],c=3===a?1:2,h=On[i][s],u=Dn[s],f=8*h*u,p=Math.floor(h*l/d+o)*u;if(null===kn){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);kn=e?parseInt(e[1]):0}return!!kn&&kn<=87&&2===s&&l>=224e3&&0===a&&(e[t+3]=128|e[t+3]),{sampleRate:d,channelCount:c,frameLength:p,samplesPerFrame:f}}}function xn(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function Bn(e,t){return t+1<e.length&&xn(e,t)}function Fn(e,t){if(t+1<e.length&&xn(e,t)){const i=4,s=Mn(e,t);let n=i;null!=s&&s.frameLength&&(n=s.frameLength);const r=t+n;return r===e.length||Bn(e,r)}return!1}const Un=(e,t)=>{let i=0,s=5;t+=s;const n=new Uint32Array(1),r=new Uint32Array(1),o=new Uint8Array(1);for(;s>0;){o[0]=e[t];const a=Math.min(s,8),l=8-a;r[0]=4278190080>>>24+l<<l,n[0]=(o[0]&r[0])>>l,i=i?i<<a|n[0]:n[0],t+=1,s-=a}return i};function $n(e,t,i,s,n){if(i+8>t.length)return-1;if(11!==t[i]||119!==t[i+1])return-1;const r=t[i+4]>>6;if(r>=3)return-1;const o=[48e3,44100,32e3][r],a=63&t[i+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*a+r];if(i+l>t.length)return-1;const d=t[i+6]>>5;let c=0;2===d?c+=2:(1&d&&1!==d&&(c+=2),4&d&&(c+=2));const h=(t[i+6]<<8|t[i+7])>>12-c&1,u=[2,1,2,3,3,4,4,5][d]+h,f=t[i+5]>>3,p=7&t[i+5],g=new Uint8Array([r<<6|f<<1|p>>2,(3&p)<<6|d<<3|h<<2|a>>4,a<<4&224]),m=s+n*(1536/o*9e4),v=t.subarray(i,i+l);return e.config=g,e.channelCount=u,e.samplerate=o,e.samples.push({unit:v,pts:m}),l}const Vn=/\/emsg[-/]ID3/i;function Gn(e,t){return Q(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class jn{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Ei(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,0)}decryptAacSample(e,t,i){const s=e[t].unit;if(s.length<=16)return;const n=s.subarray(16,s.length-s.length%16),r=n.buffer.slice(n.byteOffset,n.byteOffset+n.length);this.decryptBuffer(r).then((n=>{const r=new Uint8Array(n);s.set(r,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)}))}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length)return void i();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,i),this.decrypter.isSync())))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,i=new Int8Array(t);let s=0;for(let t=32;t<e.length-16;t+=160,s+=16)i.set(e.subarray(t,t+16),s);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let s=0;for(let t=32;t<e.length-16;t+=160,s+=16)e.set(i.subarray(s,s+16),t);return e}decryptAvcSample(e,t,i,s,n){const r=gt(n.data),o=this.getAvcEncryptedData(r);this.decryptBuffer(o.buffer).then((o=>{n.data=this.getAvcDecryptedUnit(r,o),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,s)}))}decryptAvcSamples(e,t,i,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length)return void s();const n=e[t].units;for(;!(i>=n.length);i++){const r=n[i];if(!(r.data.length<=48||1!==r.type&&5!==r.type||(this.decryptAvcSample(e,t,i,s,r),this.decrypter.isSync())))return}}}}class Kn{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i,s=this.VideoSample;if(s&&0!==s.units.length||(s=e[e.length-1]),null!=(t=s)&&t.units){const e=s.units;i=e[e.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const i=t.samples,s=i.length;if(!s)return void t.dropped++;{const t=i[s-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,i){const s=t.byteLength;let n=e.naluState||0;const r=n,o=[];let a,l,d,c=0,h=-1,u=0;for(-1===n&&(h=0,u=this.getNALuType(t,0),n=0,c=1);c<s;)if(a=t[c++],n)if(1!==n)if(a)if(1===a){if(l=c-n-1,h>=0){const e={data:t.subarray(h,l),type:u};o.push(e)}else{const i=this.getLastNalUnit(e.samples);i&&(r&&c<=4-r&&i.state&&(i.data=i.data.subarray(0,i.data.byteLength-r)),l>0&&(i.data=ct(i.data,t.subarray(0,l)),i.state=0))}c<s?(d=this.getNALuType(t,c),h=c,u=d,n=0):n=-1}else n=0;else n=3;else n=a?0:2;else n=a?0:1;if(h>=0&&n>=0){const e={data:t.subarray(h,s),type:u,state:n};o.push(e)}if(0===o.length){const i=this.getLastNalUnit(e.samples);i&&(i.data=ct(i.data,t))}return e.naluState=n,o}}class Hn{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,s=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");s.set(e.subarray(i,i+n)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&be.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Yn extends Kn{parsePES(e,t,i,s){const n=this.parseNALu(e,i.data,s);let r,o=this.VideoSample,a=!1;i.data=null,o&&n.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),n.forEach((s=>{var n,l;switch(s.type){case 1:{let t=!1;r=!0;const n=s.data;if(a&&n.length>4){const e=this.readSliceType(n);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var d;t&&null!=(d=o)&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.frame=!0,o.key=t;break}case 5:r=!0,null!=(n=o)&&n.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.key=!0,o.frame=!0;break;case 6:r=!0,pt(s.data,1,i.pts,t.samples);break;case 7:{var c,h;r=!0,a=!0;const t=s.data,i=this.readSPS(t);if(!e.sps||e.width!==i.width||e.height!==i.height||(null==(c=e.pixelRatio)?void 0:c[0])!==i.pixelRatio[0]||(null==(h=e.pixelRatio)?void 0:h[1])!==i.pixelRatio[1]){e.width=i.width,e.height=i.height,e.pixelRatio=i.pixelRatio,e.sps=[t];const s=t.subarray(1,4);let n="avc1.";for(let e=0;e<3;e++){let t=s[e].toString(16);t.length<2&&(t="0"+t),n+=t}e.codec=n}break}case 8:r=!0,e.pps=[s.data];break;case 9:r=!0,e.audFound=!0,null!=(l=o)&&l.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:r=!0;break;default:r=!1}o&&r&&o.units.push(s)})),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new Hn(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i,s=8,n=8;for(let r=0;r<e;r++)0!==n&&(i=t.readEG(),n=(s+i+256)%256),s=0===n?s:n}readSPS(e){const t=new Hn(e);let i,s,n,r=0,o=0,a=0,l=0;const d=t.readUByte.bind(t),c=t.readBits.bind(t),h=t.readUEG.bind(t),u=t.readBoolean.bind(t),f=t.skipBits.bind(t),p=t.skipEG.bind(t),g=t.skipUEG.bind(t),m=this.skipScalingList.bind(this);d();const v=d();if(c(5),f(3),d(),g(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){const e=h();if(3===e&&f(1),g(),g(),f(1),u())for(s=3!==e?8:12,n=0;n<s;n++)u()&&m(n<6?16:64,t)}g();const A=h();if(0===A)h();else if(1===A)for(f(1),p(),p(),i=h(),n=0;n<i;n++)p();g(),f(1);const E=h(),y=h(),T=c(1);0===T&&f(1),f(1),u()&&(r=h(),o=h(),a=h(),l=h());let b=[1,1];if(u()&&u())switch(d()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(E+1)-2*r-2*o),height:(2-T)*(y+1)*16-(T?2:4)*(a+l),pixelRatio:b}}}class Wn extends Kn{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,s){const n=this.parseNALu(e,i.data,s);let r,o=this.VideoSample,a=!1;i.data=null,o&&n.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),n.forEach((s=>{var n,l;switch(s.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o||(o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),o.frame=!0,r=!0;break;case 16:case 17:case 18:case 21:var d;r=!0,a&&null!=(d=o)&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.key=!0,o.frame=!0;break;case 19:case 20:r=!0,null!=(n=o)&&n.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.key=!0,o.frame=!0;break;case 39:r=!0,pt(s.data,2,i.pts,t.samples);break;case 32:r=!0,e.vps||("object"!=typeof e.params&&(e.params={}),e.params=fe(e.params,this.readVPS(s.data)),this.initVPS=s.data),e.vps=[s.data];break;case 33:if(r=!0,a=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],s.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(s.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!=typeof e.params&&(e.params={});for(const i in t.params)e.params[i]=t.params[i]}this.pushParameterSet(e.sps,s.data,e.vps),o||(o=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),o.key=!0;break;case 34:if(r=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(s.data);for(const i in t)e.params[i]=t[i]}this.pushParameterSet(e.pps,s.data,e.vps)}break;case 35:r=!0,e.audFound=!0,null!=(l=o)&&l.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:r=!1}o&&r&&o.units.push(s)})),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let i=0;for(let s=0;s<e.byteLength;s++)s>=2&&3===e[s]&&0===e[s-1]&&0===e[s-2]||(t[i]=e[s],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Hn(e);return t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6),{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}}readSPS(e){const t=new Hn(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const i=t.readBits(3);t.readBoolean();const s=t.readBits(2),n=t.readBoolean(),r=t.readBits(5),o=t.readUByte(),a=t.readUByte(),l=t.readUByte(),d=t.readUByte(),c=t.readUByte(),h=t.readUByte(),u=t.readUByte(),f=t.readUByte(),p=t.readUByte(),g=t.readUByte(),m=t.readUByte(),v=[],A=[];for(let e=0;e<i;e++)v.push(t.readBoolean()),A.push(t.readBoolean());if(i>0)for(let e=i;e<8;e++)t.readBits(2);for(let e=0;e<i;e++)v[e]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),A[e]&&t.readUByte();t.readUEG();const E=t.readUEG();3==E&&t.skipBits(1);const y=t.readUEG(),T=t.readUEG(),b=t.readBoolean();let S=0,_=0,C=0,R=0;b&&(S+=t.readUEG(),_+=t.readUEG(),C+=t.readUEG(),R+=t.readUEG());const L=t.readUEG(),I=t.readUEG(),k=t.readUEG();for(let e=t.readBoolean()?0:i;e<=i;e++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let e=0;e<4;e++)for(let i=0;i<(3===e?2:6);i++)if(t.readBoolean()){const i=Math.min(64,1<<4+(e<<1));e>1&&t.readEG();for(let e=0;e<i;e++)t.readEG()}else t.readUEG();t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const w=t.readUEG();let P=0;for(let e=0;e<w;e++){let i=!1;if(0!==e&&(i=t.readBoolean()),i){e===w&&t.readUEG(),t.readBoolean(),t.readUEG();let i=0;for(let e=0;e<=P;e++){const e=t.readBoolean();let s=!1;e||(s=t.readBoolean()),(e||s)&&i++}P=i}else{const e=t.readUEG(),i=t.readUEG();P=e+i;for(let i=0;i<e;i++)t.readUEG(),t.readBoolean();for(let e=0;e<i;e++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const e=t.readUEG();for(let i=0;i<e;i++){for(let e=0;e<k+4;e++)t.readBits(1);t.readBits(1)}}let O=0,D=1,N=1,M=!0,x=1,B=0;t.readBoolean(),t.readBoolean();let F=!1;if(t.readBoolean()){if(t.readBoolean()){const e=t.readUByte();e>0&&e<16?(D=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],N=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(D=t.readBits(16),N=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),F=t.readBoolean(),F&&(S+=t.readUEG(),_+=t.readUEG(),C+=t.readUEG(),R+=t.readUEG()),t.readBoolean()&&(x=t.readBits(32),B=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const e=t.readBoolean(),s=t.readBoolean();let n=!1;(e||s)&&(n=t.readBoolean(),n&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),n&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let r=0;r<=i;r++){M=t.readBoolean();let i=!1;M||t.readBoolean()?t.readEG():i=t.readBoolean();const r=i?1:t.readUEG()+1;if(e)for(let e=0;e<r;e++)t.readUEG(),t.readUEG(),n&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(s)for(let e=0;e<r;e++)t.readUEG(),t.readUEG(),n&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),O=t.readUEG())}let U=y,$=T;if(b||F){let e=1,t=1;1===E?e=t=2:2==E&&(e=2),U=y-e*_-e*S,$=T-t*R-t*C}const V=s?["A","B","C"][s]:"",G=o<<24|a<<16|l<<8|d;let j=0;for(let e=0;e<32;e++)j=(j|(G>>e&1)<<31-e)>>>0;let K=j.toString(16);return 1===r&&"2"===K&&(K="6"),{codecString:`hvc1.${V}${r}.${K}.${n?"H":"L"}${m}.B0`,params:{general_tier_flag:n,general_profile_idc:r,general_profile_space:s,general_profile_compatibility_flags:[o,a,l,d],general_constraint_indicator_flags:[c,h,u,f,p,g],general_level_idc:m,bit_depth:L+8,bit_depth_luma_minus8:L,bit_depth_chroma_minus8:I,min_spatial_segmentation_idc:O,chroma_format_idc:E,frame_rate:{fixed:M,fps:B/x}},width:U,height:$,pixelRatio:[D,N]}}readPPS(e){const t=new Hn(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),s=t.readBoolean();let n=1;return s&&i?n=0:s?n=3:i&&(n=2),{parallelismType:n}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const zn=188;class qn{constructor(e,t,i,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=s,this.videoParser=null}static probe(e,t){const i=qn.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),-1!==i}static syncOffset(e){const t=e.length;let i=Math.min(940,t-zn)+1,s=0;for(;s<i;){let n=!1,r=-1,o=0;for(let a=s;a<t;a+=zn){if(71!==e[a]||t-a!==zn&&71!==e[a+zn]){if(o)return-1;break}if(o++,-1===r&&(r=a,0!==r&&(i=Math.min(r+18612,e.length-zn)+1)),n||(n=0===Xn(e,a)),n&&o>1&&(0===r&&o>2||a+zn>i))return r}s++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:We[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=qn.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=qn.createTrack("audio",s),this._id3Track=qn.createTrack("id3"),this._txtTrack=qn.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,s=!1){let n;i||(this.sampleAes=null);const r=this._videoTrack,o=this._audioTrack,a=this._id3Track,l=this._txtTrack;let d=r.pid,c=r.pesData,h=o.pid,u=a.pid,f=o.pesData,p=a.pesData,g=null,m=this.pmtParsed,v=this._pmtId,A=e.length;if(this.remainderData&&(A=(e=ct(this.remainderData,e)).length,this.remainderData=null),A<zn&&!s)return this.remainderData=e,{audioTrack:o,videoTrack:r,id3Track:a,textTrack:l};const E=Math.max(0,qn.syncOffset(e));A-=(A-E)%zn,A<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,A,e.buffer.byteLength-A));let y=0;for(let t=E;t<A;t+=zn)if(71===e[t]){const s=!!(64&e[t+1]),A=Xn(e,t);let y;if((48&e[t+3])>>4>1){if(y=t+5+e[t+4],y===t+zn)continue}else y=t+4;switch(A){case d:if(s){if(c&&(n=tr(c,this.logger))){if(null===this.videoParser)switch(r.segmentCodec){case"avc":this.videoParser=new Yn;break;case"hevc":this.videoParser=new Wn}null!==this.videoParser&&this.videoParser.parsePES(r,l,n,!1)}c={data:[],size:0}}c&&(c.data.push(e.subarray(y,t+zn)),c.size+=t+zn-y);break;case h:if(s){if(f&&(n=tr(f,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,n);break;case"mp3":this.parseMPEGPES(o,n);break;case"ac3":this.parseAC3PES(o,n)}f={data:[],size:0}}f&&(f.data.push(e.subarray(y,t+zn)),f.size+=t+zn-y);break;case u:s&&(p&&(n=tr(p,this.logger))&&this.parseID3PES(a,n),p={data:[],size:0}),p&&(p.data.push(e.subarray(y,t+zn)),p.size+=t+zn-y);break;case 0:s&&(y+=e[y]+1),v=this._pmtId=Qn(e,y);break;case v:{s&&(y+=e[y]+1);const n=Zn(e,y,this.typeSupported,i,this.observer,this.logger);d=n.videoPid,d>0&&(r.pid=d,r.segmentCodec=n.segmentVideoCodec),h=n.audioPid,h>0&&(o.pid=h,o.segmentCodec=n.segmentAudioCodec),u=n.id3Pid,u>0&&(a.pid=u),null===g||m||(this.logger.warn(`MPEG-TS PMT found at ${t} after unknown PID '${g}'. Backtracking to sync byte @${E} to parse all TS packets.`),g=null,t=E-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=A}}else y++;y>0&&Jn(this.observer,new Error(`Found ${y} TS packet/s that do not start with 0x47`),void 0,this.logger),r.pesData=c,o.pesData=f,a.pesData=p;const T={audioTrack:o,videoTrack:r,id3Track:a,textTrack:l};return s&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:s,textTrack:n}=e,r=i.pesData,o=t.pesData,a=s.pesData;let l;if(r&&(l=tr(r,this.logger))){if(null===this.videoParser)switch(i.segmentCodec){case"avc":this.videoParser=new Yn;break;case"hevc":this.videoParser=new Wn}null!==this.videoParser&&(this.videoParser.parsePES(i,n,l,!0),i.pesData=null)}else i.pesData=r;if(o&&(l=tr(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=o&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;a&&(l=tr(a,this.logger))?(this.parseID3PES(s,l),s.pesData=null):s.pesData=a}demuxSampleAes(e,t,i){const s=this.demux(e,i,!0,!this.config.progressive),n=this.sampleAes=new jn(this.observer,this.config,t);return this.decrypt(s,n)}decrypt(e,t){return new Promise((i=>{const{audioTrack:s,videoTrack:n}=e;s.samples&&"aac"===s.segmentCodec?t.decryptAacSamples(s.samples,0,(()=>{n.samples?t.decryptAvcSamples(n.samples,0,0,(()=>{i(e)})):i(e)})):n.samples&&t.decryptAvcSamples(n.samples,0,0,(()=>{i(e)}))}))}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0;const s=this.aacOverFlow;let n,r,o,a=t.data;if(s){this.aacOverFlow=null;const t=s.missing,n=s.sample.unit.byteLength;if(-1===t)a=ct(s.sample.unit,a);else{const r=n-t;s.sample.unit.set(a.subarray(0,t),r),e.samples.push(s.sample),i=s.missing}}for(n=i,r=a.length;n<r-1&&!hn(a,n);n++);if(n!==i){let e;const t=n<r-1;if(e=t?`AAC PES did not start with ADTS header,offset:${n}`:"No ADTS header found in AAC PES",Jn(this.observer,new Error(e),t,this.logger),!t)return}if(fn(e,this.observer,a,n,this.audioCodec),void 0!==t.pts)o=t.pts;else{if(!s)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=pn(e.samplerate);o=s.sample.pts+t}}let l,d=0;for(;n<r;){if(l=gn(e,a,n,o,d),n+=l.length,l.missing){this.aacOverFlow=l;break}for(d++;n<r-1&&!hn(a,n);n++);}}parseMPEGPES(e,t){const i=t.data,s=i.length;let n=0,r=0;const o=t.pts;if(void 0!==o)for(;r<s;)if(Bn(i,r)){const t=Nn(e,i,r,o,n);if(!t)break;r+=t.length,n++}else r++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const i=t.data,s=t.pts;if(void 0===s)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const n=i.length;let r,o=0,a=0;for(;a<n&&(r=$n(e,i,a,s,o++))>0;)a+=r}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const i=fe({},t,{type:this._videoTrack?Cn.emsg:Cn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function Xn(e,t){return((31&e[t+1])<<8)+e[t+2]}function Qn(e,t){return(31&e[t+10])<<8|e[t+11]}function Zn(e,t,i,s,n,r){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){const a=Xn(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!s){er("ADTS AAC",r);break}case 15:-1===o.audioPid&&(o.audioPid=a);break;case 21:-1===o.id3Pid&&(o.id3Pid=a);break;case 219:if(!s){er("H.264",r);break}case 27:-1===o.videoPid&&(o.videoPid=a);break;case 3:case 4:i.mpeg||i.mp3?-1===o.audioPid&&(o.audioPid=a,o.segmentAudioCodec="mp3"):r.log("MPEG audio found, not supported in this browser");break;case 193:if(!s){er("AC-3",r);break}case 129:i.ac3?-1===o.audioPid&&(o.audioPid=a,o.segmentAudioCodec="ac3"):r.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===o.audioPid&&l>0){let s=t+5,n=l;for(;n>2;){106===e[s]&&(!0!==i.ac3?r.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=a,o.segmentAudioCodec="ac3"));const t=e[s+1]+2;s+=t,n-=t}}break;case 194:case 135:return Jn(n,new Error("Unsupported EC-3 in M2TS found"),void 0,r),o;case 36:-1===o.videoPid&&(o.videoPid=a,o.segmentVideoCodec="hevc",r.log("HEVC in M2TS found"))}t+=l+5}return o}function Jn(e,t,i,s){s.warn(`parsing error: ${t.message}`),e.emit(ie.ERROR,ie.ERROR,{type:ee.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!1,levelRetry:i,error:t,reason:t.message})}function er(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function tr(e,t){let i,s,n,r,o,a=0;const l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=ct(l[0],l[1]),l.splice(1,1);if(i=l[0],1===(i[0]<<16)+(i[1]<<8)+i[2]){if(s=(i[4]<<8)+i[5],s&&s>e.size-6)return null;const d=i[7];192&d&&(r=536870912*(14&i[9])+4194304*(255&i[10])+16384*(254&i[11])+128*(255&i[12])+(254&i[13])/2,64&d?(o=536870912*(14&i[14])+4194304*(255&i[15])+16384*(254&i[16])+128*(255&i[17])+(254&i[18])/2,r-o>54e5&&(t.warn(`${Math.round((r-o)/9e4)}s delta between PTS and DTS, align them`),r=o)):o=r),n=i[8];let c=n+9;if(e.size<=c)return null;e.size-=c;const h=new Uint8Array(e.size);for(let e=0,t=l.length;e<t;e++){i=l[e];let t=i.byteLength;if(c){if(c>t){c-=t;continue}i=i.subarray(c),t-=c,c=0}h.set(i,a),a+=t}return s&&(s-=n+3),{data:h,pts:r,dts:o,len:s}}return null}class ir{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const sr=Math.pow(2,32)-1;class nr{static init(){let e;for(e in nr.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},nr.types)nr.types.hasOwnProperty(e)&&(nr.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);nr.HDLR_TYPES={video:t,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);nr.STTS=nr.STSC=nr.STCO=n,nr.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),nr.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),nr.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),nr.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const r=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),a=new Uint8Array([0,0,0,1]);nr.FTYP=nr.box(nr.types.ftyp,r,a,r,o),nr.DINF=nr.box(nr.types.dinf,nr.box(nr.types.dref,s))}static box(e,...t){let i=8,s=t.length;const n=s;for(;s--;)i+=t[s].byteLength;const r=new Uint8Array(i);for(r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=255&i,r.set(e,4),s=0,i=8;s<n;s++)r.set(t[s],i),i+=t[s].byteLength;return r}static hdlr(e){return nr.box(nr.types.hdlr,nr.HDLR_TYPES[e])}static mdat(e){return nr.box(nr.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(sr+1)),s=Math.floor(t%(sr+1));return nr.box(nr.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,85,196,0,0]))}static mdia(e){return nr.box(nr.types.mdia,nr.mdhd(e.timescale||0,e.duration||0),nr.hdlr(e.type),nr.minf(e))}static mfhd(e){return nr.box(nr.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?nr.box(nr.types.minf,nr.box(nr.types.smhd,nr.SMHD),nr.DINF,nr.stbl(e)):nr.box(nr.types.minf,nr.box(nr.types.vmhd,nr.VMHD),nr.DINF,nr.stbl(e))}static moof(e,t,i){return nr.box(nr.types.moof,nr.mfhd(e),nr.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=nr.trak(e[t]);return nr.box.apply(null,[nr.types.moov,nr.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(nr.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=nr.trex(e[t]);return nr.box.apply(null,[nr.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(sr+1)),s=Math.floor(t%(sr+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return nr.box(nr.types.mvhd,n)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let s,n;for(s=0;s<t.length;s++)n=t[s].flags,i[s+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return nr.box(nr.types.sdtp,i)}static stbl(e){return nr.box(nr.types.stbl,nr.stsd(e),nr.box(nr.types.stts,nr.STTS),nr.box(nr.types.stsc,nr.STSC),nr.box(nr.types.stsz,nr.STSZ),nr.box(nr.types.stco,nr.STCO))}static avc1(e){let t,i,s,n=[],r=[];for(t=0;t<e.sps.length;t++)i=e.sps[t],s=i.byteLength,n.push(s>>>8&255),n.push(255&s),n=n.concat(Array.prototype.slice.call(i));for(t=0;t<e.pps.length;t++)i=e.pps[t],s=i.byteLength,r.push(s>>>8&255),r.push(255&s),r=r.concat(Array.prototype.slice.call(i));const o=nr.box(nr.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),a=e.width,l=e.height,d=e.pixelRatio[0],c=e.pixelRatio[1];return nr.box(nr.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,nr.box(nr.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),nr.box(nr.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return nr.box(nr.types.mp4a,nr.audioStsd(e),nr.box(nr.types.esds,nr.esds(e)))}static mp3(e){return nr.box(nr.types[".mp3"],nr.audioStsd(e))}static ac3(e){return nr.box(nr.types["ac-3"],nr.audioStsd(e),nr.box(nr.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return nr.box(nr.types.stsd,nr.STSD,nr.mp4a(e));if("ac3"===t&&e.config)return nr.box(nr.types.stsd,nr.STSD,nr.ac3(e));if("mp3"===t&&"mp3"===e.codec)return nr.box(nr.types.stsd,nr.STSD,nr.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return nr.box(nr.types.stsd,nr.STSD,nr.avc1(e));if("hevc"===t&&e.vps)return nr.box(nr.types.stsd,nr.STSD,nr.hvc1(e))}throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,i=(e.duration||0)*(e.timescale||0),s=e.width||0,n=e.height||0,r=Math.floor(i/(sr+1)),o=Math.floor(i%(sr+1));return nr.box(nr.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,255&s,0,0,n>>8&255,255&n,0,0]))}static traf(e,t){const i=nr.sdtp(e),s=e.id,n=Math.floor(t/(sr+1)),r=Math.floor(t%(sr+1));return nr.box(nr.types.traf,nr.box(nr.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),nr.box(nr.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r])),nr.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,nr.box(nr.types.trak,nr.tkhd(e),nr.mdia(e))}static trex(e){const t=e.id;return nr.box(nr.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],s=i.length,n=12+16*s,r=new Uint8Array(n);let o,a,l,d,c,h;for(t+=8+n,r.set(["video"===e.type?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,255&s,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),o=0;o<s;o++)a=i[o],l=a.duration,d=a.size,c=a.flags,h=a.cts,r.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,d>>>24&255,d>>>16&255,d>>>8&255,255&d,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*o);return nr.box(nr.types.trun,r)}static initSegment(e){nr.types||nr.init();const t=nr.moov(e);return ct(nr.FTYP,t)}static hvc1(e){const t=e.params,i=[e.vps,e.sps,e.pps],s=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),3|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]);let n=s.length;for(let e=0;e<i.length;e+=1){n+=3;for(let t=0;t<i[e].length;t+=1)n+=2+i[e][t].length}const r=new Uint8Array(n);r.set(s,0),n=s.length;const o=i.length-1;for(let e=0;e<i.length;e+=1){r.set(new Uint8Array([32+e|(e===o?128:0),0,i[e].length]),n),n+=3;for(let t=0;t<i[e].length;t+=1)r.set(new Uint8Array([i[e][t].length>>8,255&i[e][t].length]),n),n+=2,r.set(i[e][t],n),n+=i[e][t].length}const a=nr.box(nr.types.hvcC,r),l=e.width,d=e.height,c=e.pixelRatio[0],h=e.pixelRatio[1];return nr.box(nr.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,nr.box(nr.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),nr.box(nr.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,h>>24,h>>16&255,h>>8&255,255&h])))}}function rr(e,t,i=1,s=!1){const n=e*t*i;return s?Math.round(n):n}function or(e,t=!1){return rr(e,1e3,1/9e4,t)}nr.types=void 0,nr.HDLR_TYPES=void 0,nr.STTS=void 0,nr.STSC=void 0,nr.STCO=void 0,nr.STSZ=void 0,nr.VMHD=void 0,nr.SMHD=void 0,nr.STSD=void 0,nr.FTYP=void 0,nr.DINF=void 0;let ar,lr=null,dr=null;function cr(e,t,i,s){return{duration:t,size:i,cts:s,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class hr{constructor(e,t,i,s){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=s,this.ISGenerated=!1,null===lr){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);lr=e?parseInt(e[1]):0}if(null===dr){const e=navigator.userAgent.match(/Safari\/(\d+)/i);dr=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,s=e.reduce(((e,s)=>{let n=s.pts,r=n-e;return r<-4294967296&&(t=!0,n=ur(n,i),r=n-e),r>0?e:n}),i);return t&&this.logger.debug("PTS rollover detected"),s}remux(e,t,i,s,n,r,o,a){let l,d,c,h,u,f,p=n,g=n;const m=e.pid>-1,v=t.pid>-1,A=t.samples.length,E=e.samples.length>0,y=o&&A>0||A>1;if((!m||E)&&(!v||y)||this.ISGenerated||o){if(this.ISGenerated){var T,b,S,_;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(T=t.pixelRatio)?void 0:T[0])!==(null==(b=e.pixelRatio)?void 0:b[0])||(null==(S=t.pixelRatio)?void 0:S[1])!==(null==(_=e.pixelRatio)?void 0:_[1]))||!e&&y||null===this.nextAudioPts&&E)&&this.resetInitSegment()}this.ISGenerated||(c=this.generateIS(e,t,n,r));const i=this.isVideoContiguous;let s,o=-1;if(y&&(o=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!i&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,o>0){this.logger.warn(`[mp4-remuxer]: Dropped ${o} out of ${A} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(o),t.dropped+=o,g+=(t.samples[0].pts-e)/t.inputTimeScale,s=g}else-1===o&&(this.logger.warn(`[mp4-remuxer]: No keyframe found out of ${A} video samples`),f=!1);if(this.ISGenerated){if(E&&y){const i=this.getVideoStartPts(t.samples),s=(ur(e.samples[0].pts,i)-i)/t.inputTimeScale;p+=Math.max(0,s),g+=Math.max(0,-s)}if(E){if(e.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(e,t,n,r)),d=this.remuxAudio(e,p,this.isAudioContiguous,r,v||y||a===le?g:void 0),y){const s=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(e,t,n,r)),l=this.remuxVideo(t,g,i,s)}}else y&&(l=this.remuxVideo(t,g,i,0));l&&(l.firstKeyFrame=o,l.independent=-1!==o,l.firstKeyFramePTS=s)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(u=fr(i,n,this._initPTS,this._initDTS)),s.samples.length&&(h=pr(s,n,this._initPTS))),{audio:d,video:l,initSegment:c,independent:f,text:h,id3:u}}generateIS(e,t,i,s){const n=e.samples,r=t.samples,o=this.typeSupported,a={},l=this._initPTS;let d,c,h,u=!l||s,f="audio/mp4";if(u&&(d=c=1/0),e.config&&n.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(f="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}a.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&o.mpeg?new Uint8Array(0):nr.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(h=e.inputTimeScale,l&&h===l.timescale?u=!1:d=c=n[0].pts-Math.round(h*i))}if(t.sps&&t.pps&&r.length){if(t.timescale=t.inputTimeScale,a.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:nr.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(h=t.inputTimeScale,l&&h===l.timescale)u=!1;else{const e=this.getVideoStartPts(r),t=Math.round(h*i);c=Math.min(c,ur(r[0].dts,e)-t),d=Math.min(d,e-t)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(a).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:d,timescale:h},this._initDTS={baseTime:c,timescale:h}):d=h=void 0,{tracks:a,initPTS:d,timescale:h}}remuxVideo(e,t,i,s){const n=e.inputTimeScale,r=e.samples,o=[],a=r.length,l=this._initPTS;let d,c,h=this.nextAvcDts,u=8,f=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=!1;if(!i||null===h){const e=t*n,s=r[0].pts-ur(r[0].dts,r[0].pts);lr&&null!==h&&Math.abs(e-s-h)<15e3?i=!0:h=e-s}const v=l.baseTime*n/l.timescale;for(let e=0;e<a;e++){const t=r[e];t.pts=ur(t.pts-v,h),t.dts=ur(t.dts-v,h),t.dts<r[e>0?e-1:e].dts&&(m=!0)}m&&r.sort((function(e,t){const i=e.dts-t.dts,s=e.pts-t.pts;return i||s})),d=r[0].dts,c=r[r.length-1].dts;const A=c-d,E=A?Math.round(A/(a-1)):f||e.inputTimeScale/30;if(i){const i=d-h,s=i>E,n=i<-1;if((s||n)&&(s?this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${or(i,!0)} ms (${i}dts) hole between fragments detected at ${t.toFixed(3)}`):this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${or(-i,!0)} ms (${i}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!n||h>=r[0].pts||lr)){d=h;const e=r[0].pts-i;if(s)r[0].dts=d,r[0].pts=e;else{let t=!0;for(let s=0;s<r.length&&!(r[s].dts>e&&t);s++){const e=r[s].pts;if(r[s].dts-=i,r[s].pts-=i,s<r.length-1){const i=r[s+1].pts;t=i<=r[s].pts==i<=e}}}this.logger.log(`Video: Initial PTS/DTS adjusted: ${or(e,!0)}/${or(d,!0)}, delta: ${or(i,!0)} ms`)}}d=Math.max(0,d);let y=0,T=0,b=d;for(let e=0;e<a;e++){const t=r[e],i=t.units,s=i.length;let n=0;for(let e=0;e<s;e++)n+=i[e].data.length;T+=n,y+=s,t.length=n,t.dts<b?(t.dts=b,b+=E/4|0||1):b=t.dts,p=Math.min(t.pts,p),g=Math.max(t.pts,g)}c=r[a-1].dts;const S=T+4*y+8;let _;try{_=new Uint8Array(S)}catch(e){return void this.observer.emit(ie.ERROR,ie.ERROR,{type:ee.MUX_ERROR,details:te.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:S,reason:`fail allocating video mdat ${S}`})}const C=new DataView(_.buffer);C.setUint32(0,S),_.set(nr.types.mdat,4);let R=!1,L=Number.POSITIVE_INFINITY,I=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,w=Number.NEGATIVE_INFINITY;for(let e=0;e<a;e++){const t=r[e],i=t.units;let l,d=0;for(let e=0,t=i.length;e<t;e++){const t=i[e],s=t.data,n=t.data.byteLength;C.setUint32(u,n),u+=4,_.set(s,u),u+=n,d+=4+n}if(e<a-1)f=r[e+1].dts-t.dts,l=r[e+1].pts-t.pts;else{const i=this.config,o=e>0?t.dts-r[e-1].dts:E;if(l=e>0?t.pts-r[e-1].pts:E,i.stretchShortVideoTrack&&null!==this.nextAudioPts){const e=Math.floor(i.maxBufferHole*n),r=(s?p+s*n:this.nextAudioPts)-t.pts;r>e?(f=r-o,f<0?f=o:R=!0,this.logger.log(`[mp4-remuxer]: It is approximately ${r/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=o}else f=o}const c=Math.round(t.pts-t.dts);L=Math.min(L,f),k=Math.max(k,f),I=Math.min(I,l),w=Math.max(w,l),o.push(cr(t.key,f,d,c))}if(o.length)if(lr){if(lr<70){const e=o[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(dr&&w-I<k-L&&E/k<.025&&0===o[0].cts){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=d;for(let t=0,i=o.length;t<i;t++){const s=e+o[t].duration,n=e+o[t].cts;if(t<i-1){const e=s+o[t+1].cts;o[t].duration=e-n}else o[t].duration=t?o[t-1].duration:E;o[t].cts=0,e=s}}f=R||!f?E:f,this.nextAvcDts=h=c+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const P={data1:nr.moof(e.sequenceNumber++,d,fe(e,{samples:o})),data2:_,startPTS:p/n,endPTS:(g+f)/n,startDTS:d/n,endDTS:h/n,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,P}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,i,s,n){const r=e.inputTimeScale,o=r/(e.samplerate?e.samplerate:r),a=this.getSamplesPerFrame(e),l=a*o,d=this._initPTS,c="mp3"===e.segmentCodec&&this.typeSupported.mpeg,h=[],u=void 0!==n;let f=e.samples,p=c?0:8,g=this.nextAudioPts||-1;const m=t*r,v=d.baseTime*r/d.timescale;if(this.isAudioContiguous=i=i||f.length&&g>0&&(s&&Math.abs(m-g)<9e3||Math.abs(ur(f[0].pts-v,m)-g)<20*l),f.forEach((function(e){e.pts=ur(e.pts-v,m)})),!i||g<0){if(f=f.filter((e=>e.pts>=0)),!f.length)return;g=0===n?0:s&&!u?Math.max(0,m):f[0].pts}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let i=0,s=g;i<f.length;i++){const n=f[i],o=n.pts,a=o-s,d=Math.abs(1e3*a/r);if(a<=-t*l&&u)0===i&&(this.logger.warn(`Audio frame @ ${(o/r).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*a/r)} ms.`),this.nextAudioPts=g=s=o);else if(a>=t*l&&d<1e4&&u){let t=Math.round(a/l);s=o-t*l,s<0&&(t--,s+=l),0===i&&(this.nextAudioPts=g=s),this.logger.warn(`[mp4-remuxer]: Injecting ${t} audio frame @ ${(s/r).toFixed(3)}s due to ${Math.round(1e3*a/r)} ms gap.`);for(let r=0;r<t;r++){const t=Math.max(s,0);let r=ir.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);r||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),r=n.unit.subarray()),f.splice(i,0,{unit:r,pts:t}),s+=l,i++}}n.pts=s,s+=l}}let A,E=null,y=null,T=0,b=f.length;for(;b--;)T+=f[b].unit.byteLength;for(let t=0,s=f.length;t<s;t++){const s=f[t],n=s.unit;let r=s.pts;if(null!==y)h[t-1].duration=Math.round((r-y)/o);else{if(i&&"aac"===e.segmentCodec&&(r=g),E=r,!(T>0))return;T+=p;try{A=new Uint8Array(T)}catch(e){return void this.observer.emit(ie.ERROR,ie.ERROR,{type:ee.MUX_ERROR,details:te.REMUX_ALLOC_ERROR,fatal:!1,error:e,bytes:T,reason:`fail allocating audio mdat ${T}`})}c||(new DataView(A.buffer).setUint32(0,T),A.set(nr.types.mdat,4))}A.set(n,p);const l=n.byteLength;p+=l,h.push(cr(!0,a,l,0)),y=r}const S=h.length;if(!S)return;const _=h[h.length-1];this.nextAudioPts=g=y+o*_.duration;const C=c?new Uint8Array(0):nr.moof(e.sequenceNumber++,E/o,fe({},e,{samples:h}));e.samples=[];const R=E/r,L=g/r,I={data1:C,data2:A,startPTS:R,endPTS:L,startDTS:R,endDTS:L,type:"audio",hasAudio:!0,hasVideo:!1,nb:S};return this.isAudioContiguous=!0,I}}function ur(e,t){let i;if(null===t)return e;for(i=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=i;return e}function fr(e,t,i,s){const n=e.samples.length;if(!n)return;const r=e.inputTimeScale;for(let o=0;o<n;o++){const n=e.samples[o];n.pts=ur(n.pts-i.baseTime*r/i.timescale,t*r)/r,n.dts=ur(n.dts-s.baseTime*r/s.timescale,t*r)/r}const o=e.samples;return e.samples=[],{samples:o}}function pr(e,t,i){const s=e.samples.length;if(!s)return;const n=e.inputTimeScale;for(let r=0;r<s;r++){const s=e.samples[r];s.pts=ur(s.pts-i.baseTime*n/i.timescale,t*n)/n}e.samples.sort(((e,t)=>e.pts-t.pts));const r=e.samples;return e.samples=[],{samples:r}}function gr(e,t){const i=null==e?void 0:e.codec;return i&&i.length>4?i:t===Be?"ec-3"===i||"ac-3"===i||"alac"===i?i:"fLaC"===i||"Opus"===i?Lt(i,!1):(be.warn(`Unhandled audio codec "${i}" in mp4 MAP`),i||"mp4a"):(be.warn(`Unhandled video codec "${i}" in mp4 MAP`),i||"avc1")}try{ar=self.performance.now.bind(self.performance)}catch(e){ar=Date.now}const mr=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,s){const n=this.videoTrack=Rn("video",1),r=this.audioTrack=Rn("audio",1),o=this.txtTrack=Rn("text",1);if(this.id3Track=Rn("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const a=it(e);if(a.video){const{id:e,timescale:t,codec:i,supplemental:s}=a.video;n.id=e,n.timescale=o.timescale=t,n.codec=i,n.supplemental=s}if(a.audio){const{id:e,timescale:t,codec:i}=a.audio;r.id=e,r.timescale=t,r.codec=i}o.id=We.text,n.sampleDuration=0,n.duration=r.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let i=0;i<t;){const s=Xe(e,i);if(s>8&&109===e[i+4]&&111===e[i+5]&&111===e[i+6]&&102===e[i+7])return!0;i=s>1?i+s:t}return!1}(e)}demux(e,t){this.timeOffset=t;let i=e;const s=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=ct(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},i=et(e,["moof"]);if(i.length<2)return t.remainder=e,t;const s=i[i.length-1];return t.valid=e.slice(0,s.byteOffset-8),t.remainder=e.slice(s.byteOffset-8),t}(i);this.remainderData=t.remainder,s.samples=t.valid||new Uint8Array}else s.samples=i;const r=this.extractID3Track(s,t);return n.samples=ht(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:r,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return i.samples=ht(e,t),{videoTrack:t,audioTrack:Rn(),id3Track:s,textTrack:Rn()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const s=et(e.samples,["emsg"]);s&&s.forEach((e=>{const s=function(e){const t=e[0];let i="",s="",n=0,r=0,o=0,a=0,l=0,d=0;if(0===t){for(;"\0"!==ze(e.subarray(d,d+1));)i+=ze(e.subarray(d,d+1)),d+=1;for(i+=ze(e.subarray(d,d+1)),d+=1;"\0"!==ze(e.subarray(d,d+1));)s+=ze(e.subarray(d,d+1)),d+=1;s+=ze(e.subarray(d,d+1)),d+=1,n=Xe(e,12),r=Xe(e,16),a=Xe(e,20),l=Xe(e,24),d=28}else if(1===t){d+=4,n=Xe(e,d),d+=4;const t=Xe(e,d);d+=4;const r=Xe(e,d);for(d+=4,o=2**32*t+r,Z(o)||(o=Number.MAX_SAFE_INTEGER,be.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=Xe(e,d),d+=4,l=Xe(e,d),d+=4;"\0"!==ze(e.subarray(d,d+1));)i+=ze(e.subarray(d,d+1)),d+=1;for(i+=ze(e.subarray(d,d+1)),d+=1;"\0"!==ze(e.subarray(d,d+1));)s+=ze(e.subarray(d,d+1)),d+=1;s+=ze(e.subarray(d,d+1)),d+=1}return{schemeIdUri:i,value:s,timeScale:n,presentationTime:o,presentationTimeDelta:r,eventDuration:a,id:l,payload:e.subarray(d,e.byteLength)}}(e);if(Vn.test(s.schemeIdUri)){const e=Gn(s,t);let n=4294967295===s.eventDuration?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;n<=.001&&(n=Number.POSITIVE_INFINITY);const r=s.payload;i.samples.push({data:r,len:r.byteLength,dts:e,pts:e,type:Cn.emsg,duration:n})}else if(this.config.enableEmsgKLVMetadata&&s.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=Gn(s,t);i.samples.push({data:s.payload,len:s.payload.byteLength,dts:e,pts:e,type:Cn.misbklv,duration:Number.POSITIVE_INFINITY})}}))}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}},remux:class{constructor(e,t,i,s){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.logger=s}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,i,s){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(function(e,t){if(!e||!t)return e;const i=t.keyId;return i&&t.isCommonEncryption&&et(e,["moov","trak"]).forEach((e=>{const t=et(e,["mdia","minf","stbl","stsd"])[0].subarray(8);let s=et(t,["enca"]);const n=s.length>0;n||(s=et(t,["encv"])),s.forEach((e=>{et(n?e.subarray(28):e.subarray(78),["sinf"]).forEach((e=>{const t=lt(e);if(t){const e=t.subarray(8,24);e.some((e=>0!==e))||(be.log(`[eme] Patching keyId in 'enc${n?"a":"v"}>sinf>>tenc' box: ${Re(e)} -> ${Re(i)}`),t.set(i,8))}}))}))})),e}(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const s=this.initData=it(e);s.audio&&(t=gr(s.audio,Be)),s.video&&(i=gr(s.video,Fe));const n={};s.audio&&s.video?n.audiovideo={container:"video/mp4",codec:t+","+i,supplemental:s.video.supplemental,initSegment:e,id:"main"}:s.audio?n.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:s.video?n.video={container:"video/mp4",codec:i,supplemental:s.video.supplemental,initSegment:e,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n}remux(e,t,i,s,n,r){var o,a;let{initPTS:l,lastEndTime:d}=this;const c={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};Q(d)||(d=this.lastEndTime=n||0);const h=t.samples;if(null==h||!h.length)return c;const u={initPTS:void 0,timescale:1};let f=this.initData;if(null!=(o=f)&&o.length||(this.generateInitSegment(h),f=this.initData),null==(a=f)||!a.length)return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(u.tracks=this.initTracks,this.emitInitSegment=!1);const p=function(e,t){let i=0,s=0,n=0;const r=et(e,["moof","traf"]);for(let e=0;e<r.length;e++){const o=r[e],a=et(o,["tfhd"])[0],l=t[Xe(a,4)];if(!l)continue;const d=l.default,c=Xe(a,0)|(null==d?void 0:d.flags);let h=null==d?void 0:d.duration;8&c&&(h=Xe(a,2&c?12:8));const u=l.timescale||9e4,f=et(o,["trun"]);for(let e=0;e<f.length;e++)i=dt(f[e]),!i&&h&&(i=h*Xe(f[e],4)),l.type===Fe?s+=i/u:l.type===Be&&(n+=i/u)}if(0===s&&0===n){let t=1/0,i=0,s=0;const n=et(e,["sidx"]);for(let e=0;e<n.length;e++){const r=tt(n[e]);if(null!=r&&r.references){t=Math.min(t,r.earliestPresentationTime/r.timescale);const e=r.references.reduce(((e,t)=>e+t.info.duration||0),0);i=Math.max(i,e+r.earliestPresentationTime/r.timescale),s=i-t}}if(s&&Q(s))return s}return s||n}(h,f),g=function(e,t){return et(t,["moof","traf"]).reduce(((t,i)=>{const s=et(i,["tfdt"])[0],n=s[0],r=et(i,["tfhd"]).reduce(((t,i)=>{const r=Xe(i,4),o=e[r];if(o){let e=Xe(s,4);if(1===n){if(e===He)return be.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;e*=He+1,e+=Xe(s,8)}const i=e/(o.timescale||9e4);if(Q(i)&&(null===t||i<t))return i}return t}),null);return null!==r&&Q(r)&&(null===t||r<t)?r:t}),null)}(f,h),m=null===g?n:g;!r&&l||!function(e,t,i,s){if(null===e)return!0;const n=Math.max(s,1),r=t-e.baseTime/e.timescale;return Math.abs(r-i)>n}(l,m,n,p)&&u.timescale===l.timescale||(u.initPTS=m-n,l&&1===l.timescale&&this.logger.warn(`Adjusting initPTS @${n} from ${l.baseTime/l.timescale} to ${u.initPTS}`),this.initPTS=l={baseTime:u.initPTS,timescale:1});const v=e?m-l.baseTime/l.timescale:d,A=v+p;!function(e,t,i){et(t,["moof","traf"]).forEach((t=>{et(t,["tfhd"]).forEach((s=>{const n=Xe(s,4),r=e[n];if(!r)return;const o=r.timescale||9e4;et(t,["tfdt"]).forEach((e=>{const t=e[0],s=i*o;if(s){let i=Xe(e,4);if(0===t)i-=s,i=Math.max(i,0),Je(e,4,i);else{i*=Math.pow(2,32),i+=Xe(e,8),i-=s,i=Math.max(i,0);const t=Math.floor(i/(He+1)),n=Math.floor(i%(He+1));Je(e,4,t),Je(e,8,n)}}}))}))}))}(f,h,l.baseTime/l.timescale),p>0?this.lastEndTime=A:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const E=!!f.audio,y=!!f.video;let T="";E&&(T+="audio"),y&&(T+="video");const b={data1:h,startPTS:v,startDTS:v,endPTS:A,endDTS:A,type:T,hasAudio:E,hasVideo:y,nb:1,dropped:0};return c.audio="audio"===b.type?b:void 0,c.video="audio"!==b.type?b:void 0,c.initSegment=u,c.id3=fr(i,n,l,l),s.samples.length&&(c.text=pr(s,n,l)),c}}},{demux:qn,remux:hr},{demux:class extends Ln{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const i=an(e,0);let s=(null==i?void 0:i.length)||0;if(Fn(e,s))return!1;for(let i=e.length;s<i;s++)if(un(e,s))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&ln(e,t)&&cn(e,t)<=e.length-t}(e,t)}appendFrame(e,t,i){fn(e,this.observer,t,i,e.manifestCodec);const s=gn(e,t,i,this.basePTS,this.frameIndex);if(s&&0===s.missing)return s}},remux:hr},{demux:class extends Ln{resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=an(e,0);let i=(null==t?void 0:t.length)||0;if(t&&11===e[i]&&119===e[i+1]&&void 0!==_n(t)&&Un(e,i)<=16)return!1;for(let t=e.length;i<t;i++)if(Fn(e,i))return be.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return xn(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,i){if(null!==this.basePTS)return Nn(e,t,i,this.basePTS,this.frameIndex)}},remux:hr}];mr.splice(2,0,{demux:class extends Ln{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const s=$n(e,t,i,this.basePTS,this.frameIndex);if(-1!==s)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const t=an(e,0);if(!t)return!1;const i=t.length;return 11===e[i]&&119===e[i+1]&&void 0!==_n(t)&&Un(e,i)<16}},remux:hr});class vr{constructor(e,t,i,s,n,r){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=n,this.logger=r}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,s){const n=i.transmuxing;n.executeStart=ar();let r=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:a}=this;s&&(this.currentTransmuxState=s);const{contiguous:l,discontinuity:d,trackSwitch:c,accurateTimeOffset:h,timeOffset:u,initSegmentChange:f}=s||o,{audioCodec:p,videoCodec:g,defaultInitPts:m,duration:v,initSegmentData:A}=a,E=function(e,t){let i=null;return e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(i=t),i}(r,t);if(E&&$i(E.method)){const e=this.getDecrypter(),t=Vi(E.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(r,E.key.buffer,E.iv.buffer,t).then((e=>{const t=this.push(e,null,i);return this.decryptionPromise=null,t})),this.decryptionPromise;{let s=e.softwareDecrypt(r,E.key.buffer,E.iv.buffer,t);if(i.part>-1){const t=e.flush();s=t?t.buffer:t}if(!s)return n.executeEnd=ar(),Ar(i);r=new Uint8Array(s)}}const y=this.needsProbing(d,c);if(y){const e=this.configureTransmuxer(r);if(e)return this.logger.warn(`[transmuxer] ${e.message}`),this.observer.emit(ie.ERROR,ie.ERROR,{type:ee.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),n.executeEnd=ar(),Ar(i)}(d||c||f||y)&&this.resetInitSegment(A,p,g,v,t),(d||f||y)&&this.resetInitialTimestamp(m),l||this.resetContiguity();const T=this.transmux(r,E,u,h,i);this.asyncResult=Er(T);const b=this.currentTransmuxState;return b.contiguous=!0,b.discontinuity=!1,b.trackSwitch=!1,n.executeEnd=ar(),T}flush(e){const t=e.transmuxing;t.executeStart=ar();const{decrypter:i,currentTransmuxState:s,decryptionPromise:n}=this;if(n)return this.asyncResult=!0,n.then((()=>this.flush(e)));const r=[],{timeOffset:o}=s;if(i){const t=i.flush();t&&r.push(this.push(t.buffer,null,e))}const{demuxer:a,remuxer:l}=this;if(!a||!l){t.executeEnd=ar();const i=[Ar(e)];return this.asyncResult?Promise.resolve(i):i}const d=a.flush(o);return Er(d)?(this.asyncResult=!0,d.then((t=>(this.flushRemux(r,t,e),r)))):(this.flushRemux(r,d,e),this.asyncResult?Promise.resolve(r):r)}flushRemux(e,t,i){const{audioTrack:s,videoTrack:n,id3Track:r,textTrack:o}=t,{accurateTimeOffset:a,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===ae?"level":"track"} ${i.level}`);const d=this.remuxer.remux(s,n,r,o,l,a,!0,this.id);e.push({remuxResult:d,chunkMeta:i}),i.transmuxing.executeEnd=ar()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;t&&i&&(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,s,n){const{demuxer:r,remuxer:o}=this;r&&o&&(r.resetInitSegment(e,t,i,s),o.resetInitSegment(e,t,i,n))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,s,n){let r;return r=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,i,s,n):this.transmuxUnencrypted(e,i,s,n),r}transmuxUnencrypted(e,t,i,s){const{audioTrack:n,videoTrack:r,id3Track:o,textTrack:a}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(n,r,o,a,t,i,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,t,i,s,n){return this.demuxer.demuxSampleAes(e,t,i).then((e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,i,s,!1,this.id),chunkMeta:n})))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:s}=this;let n;for(let t=0,i=mr.length;t<i;t++){var r;if(null!=(r=mr[t].demux)&&r.probe(e,this.logger)){n=mr[t];break}}if(!n)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,a=this.remuxer,l=n.remux,d=n.demux;a&&a instanceof l||(this.remuxer=new l(i,t,s,this.logger)),o&&o instanceof d||(this.demuxer=new d(i,t,s,this.logger),this.probe=d.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Ei(this.config)),e}}const Ar=e=>({remuxResult:{},chunkMeta:e});function Er(e){return"then"in e&&e.then instanceof Function}class yr{constructor(e,t,i,s,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=s,this.defaultInitPts=n||null}}class Tr{constructor(e,t,i,s,n,r){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=n,this.initSegmentChange=r}}let br=0;class Sr{constructor(e,t,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=br++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,i=this.hls;if(i&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var s;const e=null==(s=this.workerContext)?void 0:s.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":i.logger[t.data.logType]&&i.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,i.trigger(t.event,t.data)}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error(`${e.message}  (${e.filename}:${e.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const n=e.config;this.hls=e,this.id=t,this.useWorker=!!n.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const r=(e,t)=>{(t=t||{}).frag=this.frag||void 0,e===ie.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new en,this.observer.on(ie.FRAG_DECRYPTED,r),this.observer.on(ie.ERROR,r);const o=wt(n.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){const i=this.hls.logger;if(n.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{n.workerPath?(i.log(`loading Web Worker ${n.workerPath} for "${t}"`),this.workerContext=function(e){const t=sn[e];if(t)return t.clientCount++,t;const i=new self.URL(e,self.location.href).href,s={worker:new self.Worker(i),scriptURL:i,clientCount:1};return sn[e]=s,s}(n.workerPath)):(i.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=sn[tn];if(e)return e.clientCount++,e;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),i=self.URL.createObjectURL(t),s={worker:new self.Worker(i),objectURL:i,clientCount:1};return sn[tn]=s,s}());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:jt(n)})}catch(s){i.warn(`Error setting up "${t}" Web Worker, fallback to inline`,s),this.terminateWorker(),this.error=null,this.transmuxer=new vr(this.observer,o,n,"",t,e.logger)}return}}this.transmuxer=new vr(this.observer,o,n,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=br++;const t=this.hls.config,i=wt(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:jt(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){const t=sn[e||tn];if(t&&1==t.clientCount--){const{worker:i,objectURL:s}=t;delete sn[e||tn],s&&self.URL.revokeObjectURL(s),i.terminate()}}(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,s,n,r,o,a,l,d){var c,h;l.transmuxing.start=self.performance.now();const{instanceNo:u,transmuxer:f}=this,p=r?r.start:n.start,g=n.decryptdata,m=this.frag,v=!(m&&n.cc===m.cc),A=!(m&&l.level===m.level),E=m?l.sn-m.sn:-1,y=this.part?l.part-this.part.index:-1,T=0===E&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),b=!A&&(1===E||0===E&&(1===y||T&&y<=0)),S=self.performance.now();(A||E||0===n.stats.parsing.start)&&(n.stats.parsing.start=S),!r||!y&&b||(r.stats.parsing.start=S);const _=!(m&&(null==(c=n.initSegment)?void 0:c.url)===(null==(h=m.initSegment)?void 0:h.url)),C=new Tr(v,b,a,A,p,_);if(!b||v||_){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${n.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===ae?"level":"track"}: ${l.level} id: ${l.id}\n        discontinuity: ${v}\n        trackSwitch: ${A}\n        contiguous: ${b}\n        accurateTimeOffset: ${a}\n        timeOffset: ${p}\n        initSegmentChange: ${_}`);const e=new yr(i,s,t,o,d);this.configureTransmuxer(e)}if(this.frag=n,this.part=r,this.workerContext)this.workerContext.worker.postMessage({instanceNo:u,cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:C},e instanceof ArrayBuffer?[e]:[]);else if(f){const t=f.push(e,g,l,C);Er(t)?t.then((e=>{this.handleTransmuxComplete(e)})).catch((e=>{this.transmuxerError(e,l,"transmuxer-interface push error")})):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){const t=i.flush(e);Er(t)?t.then((t=>{this.handleFlushResult(t,e)})).catch((t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")})):this.handleFlushResult(t,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach((e=>{this.handleTransmuxComplete(e)})),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class _r extends me{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const s=null==t?void 0:t.renditionReports;if(s){let n=-1;for(let i=0;i<s.length;i++){const r=s[i];let o;try{o=new self.URL(r.URI,t.url).href}catch(e){this.warn(`Could not construct new URL for Rendition Report: ${e}`),o=r.URI||""}if(o===e){n=i;break}o===e.substring(0,o.length)&&(n=i)}if(-1!==n){const e=s[n],r=parseInt(e["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let o=parseInt(e["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);o>=0&&e>t.partTarget&&(o+=1)}const a=i&&Ut(i);return new $t(r,o>=0?o:void 0,a)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(e){this.warn(`Could not construct new URL with HLS Delivery Directives: ${e}`)}return e}playlistLoaded(e,t,i){const{details:s,stats:n}=t,r=self.performance.now(),o=n.loading.first?Math.max(0,r-n.loading.first):0;s.advancedDateTime=Date.now()-o;const a=this.hls.config.timelineOffset;if(a!==s.appliedTimelineOffset){const e=Math.max(a||0,0);s.appliedTimelineOffset=e,s.fragments.forEach((t=>{t.start=t.playlistOffset+e}))}if(s.live||null!=i&&i.live){const a="levelInfo"in t?t.levelInfo:t.track;if(s.reloaded(i),i&&s.fragments.length>0){!function(e,t){if(e===t)return;let i=null;const s=e.fragments;for(let e=s.length-1;e>=0;e--){const t=s[e].initSegment;if(t){i=t;break}}let n;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,i){const s=t.skippedSegments,n=Math.max(e.startSN,t.startSN)-t.startSN,r=(e.fragmentHint?1:0)+(s?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,a=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let d=n;d<=r;d++){const n=l[o+d];let r=a[d];if(s&&!r&&n&&(r=t.fragments[d]=n),n&&r){if(i(n,r,d,a),n.url&&n.url!==r.url)return void(t.playlistParsingError=_s(`media sequence mismatch ${r.sn}:`,e,t,0,r));if(n.cc!==r.cc)return void(t.playlistParsingError=_s(`discontinuity sequence mismatch (${n.cc}!=${r.cc})`,e,t,0,r))}}}(e,t,((e,s,r,o)=>{if(t.skippedSegments&&s.cc!==e.cc){const t=e.cc-s.cc;for(let e=r;e<o.length;e++)o[e].cc+=t}Q(e.startPTS)&&Q(e.endPTS)&&(s.setStart(s.startPTS=e.startPTS),s.startDTS=e.startDTS,s.maxStartPTS=e.maxStartPTS,s.endPTS=e.endPTS,s.endDTS=e.endDTS,s.minEndPTS=e.minEndPTS,s.setDuration(e.endPTS-e.startPTS),s.duration&&(n=s),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(s.elementaryStreams=e.elementaryStreams),s.loader=e.loader,e.hasStats&&(s.stats=e.stats),e.initSegment&&(s.initSegment=e.initSegment,i=e.initSegment)}));const r=t.fragments,o=t.fragmentHint?r.concat(t.fragmentHint):r;if(i&&o.forEach((e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=i)?void 0:t.relurl)||(e.initSegment=i)})),t.skippedSegments)if(t.deltaUpdateFailed=r.some((e=>!e)),t.deltaUpdateFailed){be.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)r.shift();t.startSN=r[0].sn}else{t.endCC=r[r.length-1].cc,t.canSkipDateRanges&&(t.dateRanges=function(e,t){const{dateRanges:i,recentlyRemovedDateranges:s}=t,n=fe({},e);s&&s.forEach((e=>{delete n[e]}));const r=Object.keys(n).length;return r&&Object.keys(i).forEach((e=>{const t=n[e],s=new Fi(i[e].attr,t);s.isValid?(n[e]=s,t||(s.tagOrder+=r)):be.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${jt(i[e].attr)}"`)})),n}(e.dateRanges,t));const i=e.fragments.filter((e=>e.rawProgramDateTime));if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<o.length;e++)null===o[e].programDateTime&&vs(o[e],o[e-1],i);hs(i,t)}!function(e,t,i){if(e&&t){let s=0;for(let n=0,r=e.length;n<=r;n++){const r=e[n],o=t[n+s];r&&o&&r.index===o.index&&r.fragment.sn===o.fragment.sn?i(r,o):s--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),n?Ss(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):Cs(e,t),r.length&&(t.totalduration=t.edge-r[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const a=t.advancedDateTime;if(t.advanced&&a){const e=t.edge;t.driftStart||(t.driftStartTime=a,t.driftStart=e),t.driftEndTime=a,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}(i,s);const e=s.playlistParsingError;if(e){this.warn(e);const i=this.hls;if(!i.config.ignorePlaylistParsingErrors){var l;const{networkDetails:r}=t;return void i.trigger(ie.ERROR,{type:ee.NETWORK_ERROR,details:te.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(l=s.fragments[0])?void 0:l.type,networkDetails:r,stats:n})}s.playlistParsingError=null}}-1===s.requestScheduled&&(s.requestScheduled=n.loading.start);const d=this.hls.mainForwardBufferInfo,c=d?d.end-d.len:0,h=Ls(s,1e3*(s.edge-c));if(s.requestScheduled+h<r?s.requestScheduled=r:s.requestScheduled+=h,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let u,f,p;if(s.canBlockReload&&s.endSN&&s.advanced){const e=this.hls.config.lowLatencyMode,n=s.lastPartSn,o=s.endSN,l=s.lastPartIndex,d=n===o;-1!==l?d?(f=o+1,p=e?0:l):(f=n,p=e?l+1:s.maxPartIndex):f=o+1;const c=s.age,h=c+s.ageHeader;let g=Math.min(h-s.partTarget,1.5*s.targetduration);if(g>0){if(h>3*s.targetduration)this.log(`Playlist last advanced ${c.toFixed(2)}s ago. Omitting segment and part directives.`),f=void 0,p=void 0;else if(null!=i&&i.tuneInGoal&&h-s.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${g} with playlist age: ${s.age}`),g=0;else{const e=Math.floor(g/s.targetduration);f+=e,void 0!==p&&(p+=Math.round(g%s.targetduration/s.partTarget)),this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${c.toFixed(2)}s goal: ${g} skip sn ${e} to part ${p}`)}s.tuneInGoal=g}if(u=this.getDeliveryDirectives(s,t.deliveryDirectives,f,p),e||!d)return s.requestScheduled=r,void this.loadingPlaylist(a,u)}else(s.canBlockReload||s.canSkipUntil)&&(u=this.getDeliveryDirectives(s,t.deliveryDirectives,f,p));u&&void 0!==f&&s.canBlockReload&&(s.requestScheduled=n.loading.first+Math.max(h-2*o,h/2)),this.scheduleLoading(a,u,s)}else this.clearTimer()}scheduleLoading(e,t,i){const s=i||e.details;if(!s)return void this.loadingPlaylist(e,t);const n=self.performance.now(),r=s.requestScheduled;if(n>=r)return void this.loadingPlaylist(e,t);const o=r-n;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout((()=>this.loadingPlaylist(e,t)),o)}getDeliveryDirectives(e,t,i,s){let n=Ut(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,s=t.part,n=""),new $t(i,s,n)}checkRetry(e){const t=e.details,i=si(e),s=e.errorAction,{action:n,retryCount:r=0,retryConfig:o}=s||{},a=!!s&&!!o&&(5===n||!s.resolved&&2===n);if(a){var l;if(r>=o.maxNumRetry)return!1;if(i&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${r+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=ri(o,r);this.clearTimer(),this.timer=self.setTimeout((()=>this.loadPlaylist()),e),this.warn(`Retrying playlist loading ${r+1}/${o.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,s.resolved=!0}return a}}function Cr(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Rr(e[i].attrs,t[i].attrs))return!1;return!0}function Rr(e,t,i){const s=e["STABLE-RENDITION-ID"];return s&&!i?s===t["STABLE-RENDITION-ID"]:!(i||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((i=>e[i]!==t[i]))}function Lr(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class Ir{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(null===this.queues||null===this.tracks)return;const s=this.queues[t];s.push(e),1!==s.length||i||this.executeNext(t)}appendBlocker(e){return new Promise((t=>{const i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)}))}prependBlocker(e){return new Promise((t=>{if(this.queues){const i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}}))}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach((e=>{var t;const i=null==(t=e[0])?void 0:t.label;"async-blocker"!==i&&"async-blocker-prepend"!==i||(e[0].execute(),e.splice(0,1))}))}unblockAudio(e){null!==this.queues&&this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const s=t[0];try{s.execute()}catch(t){var i;if(s.onError(t),null===this.queues||null===this.tracks)return;const n=null==(i=this.tracks[e])?void 0:i.buffer;null!=n&&n.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":`\n${this.list("video")}\n${this.list("audio")}\n${this.list("audiovideo")}}`}list(e){var t,i;return null!=(t=this.queues)&&t[e]||null!=(i=this.tracks)&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const i=null==(t=this.tracks)?void 0:t[e],s=null==i?void 0:i.buffer;return s?`SourceBuffer${s.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map((e=>e.label)).join(", "))||""}}const kr=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,wr="HlsJsTrackRemovedError";class Pr extends Error{constructor(e){super(e),this.name=wr}}function Or(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach((t=>{e.removeChild(t)}))}function Dr(e){return"audio"===e?1:0}class Nr{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(ie.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ie.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ie.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(ie.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ie.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ie.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Q(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter(((t,i)=>this.isLevelAllowed(t)&&i<=e));return this.clientRect=null,Nr.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some((t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height))}static getMaxLevelByMediaSize(e,t,i){if(null==e||!e.length)return-1;let s=e.length-1;const n=Math.max(t,i);for(let t=0;t<e.length;t+=1){const i=e[t];if((i.width>=n||i.height>=n)&&(r=i,!(o=e[t+1])||r.width!==o.width||r.height!==o.height)){s=t;break}}var r,o;return s}}const Mr="m",xr="a",Br="v",Fr="av",Ur="i",$r="tt",Vr="h",Gr="CMCD-Object",jr="CMCD-Request",Kr="CMCD-Session",Hr="CMCD-Status",Yr={[Gr]:["br","d","ot","tb"],[jr]:["bl","dl","mtp","nor","nrr","su"],[Kr]:["cid","pr","sf","sid","st","v"],[Hr]:["bs","rtp"]};class Wr{constructor(e,t){Array.isArray(e)&&(e=e.map((e=>e instanceof Wr?e:new Wr(e)))),this.value=e,this.params=t}}function zr(e,t,i){return function(e,t,i,s){return new Error(`failed to ${e} "${n=t,Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":"object"==typeof n?JSON.stringify(n):String(n)}" as ${i}`,{cause:s});var n}("serialize",e,t,i)}class qr{constructor(e){this.description=e}}const Xr="Bare Item";function Qr(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw zr(e,"Integer");return e.toString()}function Zr(e){const t=vn(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw zr(e,"Decimal");const i=t.toString();return i.includes(".")?i:`${i}.0`}const Jr=/[\x00-\x1f\x7f]+/;function eo(e){const t=(i=e).description||i.toString().slice(7,-1);var i;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw zr(t,"Token");return t}function to(e){switch(typeof e){case"number":if(!Q(e))throw zr(e,Xr);return Number.isInteger(e)?Qr(e):Zr(e);case"string":return function(e){if(Jr.test(e))throw zr(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return eo(e);case"boolean":return function(e){if("boolean"!=typeof e)throw zr(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${Qr(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return function(e){if(!1===ArrayBuffer.isView(e))throw zr(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}(e);if(e instanceof qr)return eo(e);default:throw zr(e,Xr)}}function io(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw zr(e,"Key");return e}function so(e){return null==e?"":Object.entries(e).map((([e,t])=>!0===t?`;${io(e)}`:`;${io(e)}=${to(t)}`)).join("")}function no(e){return e instanceof Wr?`${to(e.value)}${so(e.params)}`:to(e)}const ro=e=>Math.round(e),oo=e=>100*ro(e/100),ao={br:ro,d:ro,bl:oo,dl:oo,mtp:oo,nor:(e,t)=>((null==t?void 0:t.baseUrl)&&(e=function(e,t){const i=new URL(e),s=new URL(t);if(i.origin!==s.origin)return e;const n=i.pathname.split("/").slice(1),r=s.pathname.split("/").slice(1,-1);for(;n[0]===r[0];)n.shift(),r.shift();for(;r.length;)r.shift(),n.unshift("..");return n.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:oo,tb:ro};function lo(e,t={}){return e?function(e,t){return function(e,t={whitespace:!0}){if("object"!=typeof e)throw zr(e,"Dict");const i=e instanceof Map?e.entries():Object.entries(e),s=(null==t?void 0:t.whitespace)?" ":"";return Array.from(i).map((([e,t])=>{t instanceof Wr==0&&(t=new Wr(t));let i=io(e);var s;return!0===t.value?i+=so(t.params):(i+="=",Array.isArray(t.value)?i+=`(${(s=t).value.map(no).join(" ")})${so(s.params)}`:i+=no(t)),i})).join(`,${s}`)}(e,t)}(function(e,t){const i={};if(null==e||"object"!=typeof e)return i;const s=Object.keys(e).sort(),n=fe({},ao,null==t?void 0:t.formatters),r=null==t?void 0:t.filter;return s.forEach((s=>{if(null==r?void 0:r(s))return;let o=e[s];const a=n[s];a&&(o=a(o,t)),"v"===s&&1===o||"pr"==s&&1===o||function(e){return"number"==typeof e?Q(e):null!=e&&""!==e&&!1!==e}(o)&&(function(e){return"ot"===e||"sf"===e||"st"===e}(s)&&"string"==typeof o&&(o=new qr(o)),i[s]=o)})),i}(e,t),fe({whitespace:!1},t)):""}const co=/CMCD=[^&#]+/;function ho(e,t,i,s){e&&Object.keys(t).forEach((n=>{const r=e.filter((e=>e.groupId===n)).map((e=>{const r=fe({},e);return r.details=void 0,r.attrs=new xi(r.attrs),r.url=r.attrs.URI=uo(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),r.groupId=r.attrs["GROUP-ID"]=t[n],r.attrs["PATHWAY-ID"]=s,r}));e.push(...r)}))}function uo(e,t,i,s){const{HOST:n,PARAMS:r,[i]:o}=s;let a;t&&(a=null==o?void 0:o[t],a&&(e=a));const l=new self.URL(e);return n&&!a&&(l.host=n),r&&Object.keys(r).sort().forEach((e=>{e&&l.searchParams.set(e,r[e])})),l.href}class fo extends me{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=fo.CDMCleanupPromise?[fo.CDMCleanupPromise]:[],this.onMediaEncrypted=e=>{const{initDataType:t,initData:i}=e,s=`"${e.type}" event: init data type: "${t}"`;if(this.debug(s),null!==i){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=Ji(this.config));const t=e.map(Zi).filter((e=>!!e));this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then((n=>{const r=Xi(n);let o,a;if("sinf"===t){if(r!==Hi.FAIRPLAY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${r}`);const n=ze(new Uint8Array(i));try{const e=lt(Gi(JSON.parse(n).sinf));if(!e)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");o=new Uint8Array(e.subarray(8,24)),a=Hi.FAIRPLAY}catch(e){return void this.warn(`${s} Failed to parse sinf: ${e}`)}}else{if(r!==Hi.WIDEVINE&&r!==Hi.PLAYREADY)return void this.warn(`Ignoring unexpected "${e.type}" event with init data type: "${t}" for selected key-system ${r}`);const n=function(e){const t=[];if(e instanceof ArrayBuffer){const i=e.byteLength;let s=0;for(;s+32<i;){const i=mt(new DataView(e,s));t.push(i),s+=i.size}}return t}(i),l=n.filter((e=>!!e.systemId&&Qi(e.systemId)===r));l.length>1&&this.warn(`${s} Using first of ${l.length} pssh found for selected key-system ${r}`);const d=l[0];if(!d)return void(0===n.length||n.some((e=>!e.systemId))?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${n.map((e=>Qi(e.systemId))).join(",")} pssh data in favor of playlist keys`));if(a=Qi(d.systemId),0===d.version&&d.data)if(a===Hi.WIDEVINE){const e=d.data.length-22;o=new Uint8Array(d.data.subarray(e,e+16))}else a===Hi.PLAYREADY&&(o=is(d.data))}if(!a||!o)return;const l=Re(o),{keyIdToKeySessionPromise:d,mediaKeySessions:c}=this;let h=d[l];for(let e=0;e<c.length;e++){const s=c[e],n=s.decryptdata;if(!n.keyId)continue;const r=Re(n.keyId);if(l===r||-1!==n.uri.replace(/-/g,"").indexOf(l)){if(h=d[r],n.pssh)break;delete d[r],n.pssh=new Uint8Array(i),n.keyId=o,h=d[l]=h.then((()=>this.generateRequestWithPreferredKeySession(s,t,i,"encrypted-event-key-match"))),h.catch((e=>this.handleError(e)));break}}if(!h){if(a!==r)return void this.log(`Ignoring "${e.type}" event with ${a} init data for selected key-system ${r}`);h=d[l]=this.getKeySystemSelectionPromise([a]).then((({keySystem:e,mediaKeys:s})=>{var n;this.throwIfDestroyed();const r=new ns("ISO-23001-7",l,null!=(n=Zi(e))?n:"");return r.pssh=new Uint8Array(i),r.keyId=o,this.attemptSetMediaKeys(e,s).then((()=>{this.throwIfDestroyed();const n=this.createMediaKeySessionContext({decryptdata:r,keySystem:e,mediaKeys:s});return this.generateRequestWithPreferredKeySession(n,t,i,"encrypted-event-no-match")}))})),h.catch((e=>this.handleError(e)))}}))}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){const e=this.media;this.unregisterListeners(),this.onMediaDetached(),this._clear(e);const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(ie.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(ie.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(ie.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(ie.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(ie.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(ie.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,s=t[e];return s?s.licenseUrl:e===Hi.WIDEVINE&&i?i:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(e,t,i)=>!!e&&i.indexOf(e)===t,s=t.map((e=>e.audioCodec)).filter(i),n=t.map((e=>e.videoCodec)).filter(i);return s.length+n.length===0&&n.push("avc1.42e01e"),new Promise(((t,i)=>{const r=e=>{const o=e.shift();this.getMediaKeysPromise(o,s,n).then((e=>t({keySystem:o,mediaKeys:e}))).catch((t=>{e.length?r(e):i(t instanceof po?t:new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))};r(e)}))}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if("function"!=typeof i){let e=`Configured requestMediaKeySystemAccess is not a function ${i}`;return null===es&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return i(e,t)}getMediaKeysPromise(e,t,i){const s=function(e,t,i,s){let n;switch(e){case Hi.FAIRPLAY:n=["cenc","sinf"];break;case Hi.WIDEVINE:case Hi.PLAYREADY:n=["cenc"];break;case Hi.CLEARKEY:n=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,i,s){return[{initDataTypes:e,persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",sessionTypes:s.sessionTypes||[s.sessionType||"temporary"],audioCapabilities:t.map((e=>({contentType:`audio/mp4; codecs=${e}`,robustness:s.audioRobustness||"",encryptionScheme:s.audioEncryptionScheme||null}))),videoCapabilities:i.map((e=>({contentType:`video/mp4; codecs=${e}`,robustness:s.videoRobustness||"",encryptionScheme:s.videoEncryptionScheme||null})))}]}(n,t,i,s)}(e,t,i,this.config.drmSystemOptions),n=this.keySystemAccessPromises[e];let r=null==n?void 0:n.keySystemAccess;if(!r){this.log(`Requesting encrypted media "${e}" key-system access with config: ${jt(s)}`),r=this.requestMediaKeySystemAccess(e,s);const t=this.keySystemAccessPromises[e]={keySystemAccess:r};return r.catch((t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)})),r.then((i=>{this.log(`Access for key-system "${i.keySystem}" obtained`);const s=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),t.mediaKeys=i.createMediaKeys().then((t=>(this.log(`Media-keys created for "${e}"`),s.then((i=>i?this.setMediaKeysServerCertificate(t,e,i):t))))),t.mediaKeys.catch((t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)})),t.mediaKeys}))}return r.then((()=>n.mediaKeys))}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${Re(e.keyId||[])}`);const s=i.createSession(),n={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(n),n}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),s=this.getKeyIdString(t),n="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,n,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return Re(e.keyId)}updateKeySession(e,t){var i;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${Re((null==(i=e.decryptdata)?void 0:i.keyId)||[])}\n      } (data length: ${t?t.byteLength:t})`),s.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise(((t,i)=>{const s=Ji(this.config),n=e.map(Xi).filter((e=>!!e&&-1!==s.indexOf(e)));return this.getKeySystemSelectionPromise(n).then((({keySystem:e})=>{const s=Zi(e);s?t(s):i(new Error(`Unable to find format for key-system "${e}"`))})).catch(i)}))}loadKey(e){const t=e.keyInfo.decryptdata,i=this.getKeyIdString(t),s=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${s}`);let n=this.keyIdToKeySessionPromise[i];return n||(n=this.getKeySystemForKeyPromise(t).then((({keySystem:i,mediaKeys:n})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(i,n).then((()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:i,mediaKeys:n,decryptdata:t}))))))),(this.keyIdToKeySessionPromise[i]=n.then((e=>{const i=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,"cenc",i,"playlist-key")}))).catch((e=>this.handleError(e)))),n}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof po?this.hls.trigger(ie.ERROR,e.data):this.hls.trigger(ie.ERROR,{type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){const t=Xi(e.keyFormat),i=t?[t]:Ji(this.config);return this.attemptKeySystemAccess(i)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=Ji(this.config)),0===e.length)throw new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${jt({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(i).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(s),s.then((()=>{this.log(`Media-keys set for "${e}"`),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((e=>-1===i.indexOf(e)))}))}generateRequestWithPreferredKeySession(e,t,i,s){var n,r;const o=null==(n=this.config.drmSystems)||null==(r=n[e.keySystem])?void 0:r.generateRequest;if(o)try{const s=o.call(this.hls,t,i,e);if(!s)throw new Error("Invalid response from configured generateRequest filter");t=s.initDataType,i=s.initData?s.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(e){var a;if(this.warn(e.message),null!=(a=this.hls)&&a.config.debug)throw e}if(null===i)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${l} (init data type: ${t} length: ${i?i.byteLength:null})`);const d=new en,c=e._onmessage=t=>{const i=e.mediaKeysSession;if(!i)return void d.emit("error",new Error("invalid state"));const{messageType:s,message:n}=t;this.log(`"${s}" message event for session "${i.sessionId}" message size: ${n.byteLength}`),"license-request"===s||"license-renewal"===s?this.renewLicense(e,n).catch((e=>{d.eventNames().length?d.emit("error",e):this.handleError(e)})):"license-release"===s?e.keySystem===Hi.FAIRPLAY&&(this.updateKeySession(e,ji("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${s}"`)},h=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void d.emit("error",new Error("invalid state"));this.onKeyStatusChange(e);const i=e.keyStatus;d.emit("keyStatus",i),"expired"===i&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",c),e.mediaKeysSession.addEventListener("keystatuseschange",h);const u=new Promise(((e,t)=>{d.on("error",t),d.on("keyStatus",(i=>{i.startsWith("usable")?e():"output-restricted"===i?t(new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===i?t(new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${i}"`)):"expired"===i?t(new Error("key expired while generating request")):this.warn(`unhandled key status change "${i}"`)}))}));return e.mediaKeysSession.generateRequest(t,i).then((()=>{var t;this.log(`Request generated for key-session "${null==(t=e.mediaKeysSession)?void 0:t.sessionId}" keyId: ${l}`)})).catch((e=>{throw new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},`Error generating key-session request: ${e}`)})).then((()=>u)).catch((t=>{throw d.removeAllListeners(),this.removeSession(e),t})).then((()=>(d.removeAllListeners(),e)))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach(((t,i)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${Re("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${Re(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t}))}fetchServerCertificate(e){const t=this.config,i=new(0,t.loader)(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise(((n,r)=>{const o={responseType:"arraybuffer",url:s},a=t.certLoadPolicy.default,l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(e,t,i,s)=>{n(e.data)},onError:(t,i,n,a)=>{r(new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:ge({url:o.url,data:void 0},t)},`"${e}" certificate request failed (${s}). Status: ${t.code} (${t.text})`))},onTimeout:(t,i,n)=>{r(new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:{url:o.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(e,t,i)=>{r(new Error("aborted"))}};i.load(o,l,d)}))):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise(((s,n)=>{e.setServerCertificate(i).then((n=>{this.log(`setServerCertificate ${n?"success":"not supported by CDM"} (${null==i?void 0:i.byteLength}) on "${t}"`),s(e)})).catch((e=>{n(new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then((t=>this.updateKeySession(e,new Uint8Array(t)).catch((e=>{throw new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=(new DOMParser).parseFromString(i,"application/xml"),n=s.querySelectorAll("HttpHeader");if(n.length>0){let t;for(let i=0,s=n.length;i<s;i++){var r,o;t=n[i];const s=null==(r=t.querySelector("name"))?void 0:r.textContent,a=null==(o=t.querySelector("value"))?void 0:o.textContent;s&&a&&e.setRequestHeader(s,a)}}const a=s.querySelector("Challenge"),l=null==a?void 0:a.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return ji(atob(l))}setupLicenseXHR(e,t,i,s){const n=this.config.licenseXhrSetup;return n?Promise.resolve().then((()=>{if(!i.decryptdata)throw new Error("Key removed");return n.call(this.hls,e,t,i,s)})).catch((r=>{if(!i.decryptdata)throw r;return e.open("POST",t,!0),n.call(this.hls,e,t,i,s)})).then((i=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:i||s}))):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise(((s,n)=>{const r=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${r}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return n(new Error("invalid state"));if(4===o.readyState)if(200===o.status){this._requestLicenseFailureCount=0;let t=o.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const i=this.config.licenseResponseCallback;if(i)try{t=i.call(this.hls,o,r,e)}catch(e){this.error(e)}s(t)}else{const a=i.errorRetry,l=a?a.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||o.status>=400&&o.status<500)n(new po({type:ee.KEY_SYSTEM_ERROR,details:te.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:r,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${r}). Status: ${o.status} (${o.statusText})`));else{const i=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${i} attempts left`),this.requestLicense(e,t).then(s,n)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,r,e,t).then((({xhr:t,licenseChallenge:i})=>{e.keySystem==Hi.PLAYREADY&&(i=this.unpackPlayReadyKeyMessage(t,i)),t.send(i)}))}))}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,i.removeEventListener("encrypted",this.onMediaEncrypted),i.removeEventListener("waitingforkey",this.onWaitingForKey),i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null)}_clear(e){var t;const i=this.mediaKeySessions;this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},ns.clearKeyUriToKeyIdMap();const s=i.length;fo.CDMCleanupPromise=Promise.all(i.map((e=>this.removeSession(e))).concat(null==e||null==(t=e.setMediaKeys(null))?void 0:t.catch((e=>{var t;this.log(`Could not clear media keys: ${e}`),null==(t=this.hls)||t.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${e}`)})})))).then((()=>{s&&(this.log("finished closing key sessions and clearing media keys"),i.length=0)})).catch((e=>{var t;this.log(`Could not close sessions and clear media keys: ${e}`),null==(t=this.hls)||t.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${e}`)})}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce(((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e)),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),t.remove().catch((e=>{var t;this.log(`Could not remove session: ${e}`),null==(t=this.hls)||t.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${e}`)})})).then((()=>t.close())).catch((e=>{var t;this.log(`Could not close session: ${e}`),null==(t=this.hls)||t.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${e}`)})}))}}}fo.CDMCleanupPromise=void 0;class po extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function go(e,t){let i;try{i=new Event("addtrack")}catch(e){i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=e,t.dispatchEvent(i)}function mo(e,t){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(i){be.debug(`[texttrack-utils]: ${i}`);try{const i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}catch(e){be.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${e}`)}}"disabled"===i&&(e.mode=i)}function vo(e,t){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues)for(let i=e.cues.length;i--;)t&&e.cues[i].removeEventListener("enter",t),e.removeCue(e.cues[i]);"disabled"===i&&(e.mode=i)}function Ao(e,t,i,s){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&e.cues.length>0){const n=function(e,t,i){const s=[],n=function(e,t){if(t<=e[0].startTime)return 0;const i=e.length-1;if(t>e[i].endTime)return-1;let s,n=0,r=i;for(;n<=r;)if(s=Math.floor((r+n)/2),t<e[s].startTime)r=s-1;else{if(!(t>e[s].startTime&&n<i))return s;n=s+1}return e[n].startTime-t<t-e[r].startTime?n:r}(e,t);if(n>-1)for(let r=n,o=e.length;r<o;r++){const n=e[r];if(n.startTime>=t&&n.endTime<=i)s.push(n);else if(n.startTime>i)return s}return s}(e.cues,t,i);for(let t=0;t<n.length;t++)s&&!s(n[t])||e.removeCue(n[t])}"disabled"===n&&(e.mode=n)}function Eo(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];"subtitles"!==s.kind&&"captions"!==s.kind||!s.label||t.push(e[i])}return t}function yo(e){let t=5381,i=e.length;for(;i;)t=33*t^e.charCodeAt(--i);return(t>>>0).toString()}const To=.025;let bo=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function So(e,t,i){return`${e.identifier}-${i+1}-${yo(t)}`}class _o{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){if(e>=this.assetList.length)return!0;const t=this.playoutLimit;return!(e<=0||isNaN(t))&&this.assetList[e].startOffset>t}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Co(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime;return t-Co(t,e)<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Q(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Co(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<To))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?bo.Range:bo.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return`["${(e=this).identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`;var e}}function Co(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<To)?t.start:t.start+t.duration}function Ro(e,t,i){const s=new self.URL(e,i);return"data:"!==s.protocol&&s.searchParams.set("_HLS_primary_id",t),s}function Lo(e){const t=e.timelineStart,i=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+i).toFixed(2)}]`}class Io{constructor(e,t,i,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{const e=this.interstitial.playoutLimit,t=this.currentTime;this.startOffset+t>=e&&this.hls.trigger(ie.PLAYOUT_LIMIT_REACHED,{})};const n=this.hls=new e(t);this.interstitial=i,this.assetItem=s;let r=s.uri;try{r=Ro(r,n.sessionId).href}catch(e){}n.loadSource(r);const o=()=>{this.hasDetails=!0};n.once(ie.LEVEL_LOADED,o),n.once(ie.AUDIO_TRACK_LOADED,o),n.once(ie.SUBTITLE_TRACK_LOADED,o),n.on(ie.MEDIA_ATTACHING,((e,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t,this.interstitial.playoutLimit&&t.addEventListener("timeupdate",this.checkPlayout)}))}bufferedInPlaceToEnd(e){var t;if(!this.interstitial.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const i=this.timelineOffset,s=Ii.bufferInfo(e,i,0);return this.getAssetTime(s.end)>=this._bufferedEosTime-.02}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=Ii.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){return this.assetItem.duration||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const i=e-t;if(Math.abs(i)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}on(e,t,i){this.hls.on(e,t)}once(e,t,i){this.hls.once(e,t)}off(e,t,i){this.hls.off(e,t)}toString(){var e,t;return`HlsAssetPlayer: ${Lo(this.assetItem)} ${null==(e=this.hls)?void 0:e.sessionId} ${null!=(t=this.interstitial)&&t.appendInPlace?"append-in-place":""}`}}class ko extends me{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach((e=>e.reset())),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce(((i,s)=>e<=s.startOffset&&t>s.startOffset?(delete s.error,i+1):i),0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s)for(s[i]||(void 0===t&&(t=e.start),i=this.findItemIndexAtTime(t));i>=0&&null!=(n=s[i])&&n.event;){var n;i--}return i}findItemIndexAtTime(e,t){const i=this.items;if(i)for(let s=0;s<i.length;s++){let n=i[s];if(t&&"primary"!==t&&(n=n[t]),e===n.start||e>n.start&&e<n.end)return s}return-1}findJumpRestrictedIndex(e,t){const i=this.items;if(i)for(let s=e;s<=t&&i[s];s++){const e=i[s].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return s}return-1}findEventIndex(e){const t=this.items;if(t)for(let s=t.length;s--;){var i;if((null==(i=t[s].event)?void 0:i.identifier)===e)return s}return-1}findAssetIndex(e,t){const i=e.assetList,s=i.length;if(s>1)for(let e=0;e<s;e++){const s=i[e];if(!s.error){const i=s.timelineStart;if(t===i||t>i&&t<i+(s.duration||0))return e}}return 0}get assetIdAtEnd(){var e,t;const i=null==(e=this.items)||null==(t=e[this.length-1])?void 0:t.event;if(i){const e=i.assetList,t=e[e.length-1];if(t)return t.identifier}return null}parseInterstitialDateRanges(e,t){const i=e.main.details,{dateRanges:s}=i,n=this.events,r=this.parseDateRanges(s,{url:i.url},t),o=Object.keys(s),a=n?n.filter((e=>!o.includes(e.identifier))):[];r.length&&r.sort(((e,t)=>{const i=e.cue.pre,s=e.cue.post,n=t.cue.pre,r=t.cue.post;if(i&&!n)return-1;if(n&&!i)return 1;if(s&&!r)return 1;if(r&&!s)return-1;if(!(i||n||s||r)){const i=e.startTime,s=t.startTime;if(i!==s)return i-s}return e.dateRange.tagOrder-t.dateRange.tagOrder})),this.events=r,a.forEach((e=>{this.removeEvent(e)})),this.updateSchedule(e,a)}updateSchedule(e,t=[]){const i=this.events||[];if(i.length||t.length||this.length<2){const s=this.items,n=this.parseSchedule(i,e);(t.length||(null==s?void 0:s.length)!==n.length||n.some(((e,t)=>Math.abs(e.playout.start-s[t].playout.start)>.005||Math.abs(e.playout.end-s[t].playout.end)>.005)))&&(this.items=n,this.onScheduleUpdate(t,s))}}parseDateRanges(e,t,i){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const o=n[r],a=e[o];if(a.isInterstitial){let e=this.eventMap[o];e?e.setDateRange(a):(e=new _o(a,t),this.eventMap[o]=e,!1===i&&(e.appendInPlace=i)),s.push(e)}}return s}parseSchedule(e,t){const i=[],s=t.main.details,n=s.live?1/0:s.edge;let r=0;if((e=e.filter((e=>!(e.error||e.cue.once&&e.hasPlayed)))).length){this.resolveOffsets(e,t);let s=0,a=0;if(e.forEach(((t,o)=>{const l=t.cue.pre,d=t.cue.post,c=e[o-1]||null,h=t.appendInPlace,u=d?n:t.startOffset,f=t.duration,p=t.timelineOccupancy===bo.Range?f:0,g=t.resumptionOffset,m=(null==c?void 0:c.startTime)===u,v=u+t.cumulativeDuration;let A=h?v+f:u+g;if(l||!d&&u<=0){const e=a;a+=p,t.timelineStart=v;const s=r;r+=f,i.push({event:t,start:v,end:A,playout:{start:s,end:r},integrated:{start:e,end:a}})}else{if(!(u<=n))return;{if(!m){const n=u-s;if(n>.033){const l=s,d=a;a+=n;const c=r;r+=n;const h={previousEvent:e[o-1]||null,nextEvent:t,start:l,end:l+n,playout:{start:c,end:r},integrated:{start:d,end:a}};i.push(h)}else n>0&&c&&(c.cumulativeDuration+=n,i[i.length-1].end=u)}d&&(A=v),t.timelineStart=v;const n=a;a+=p;const l=r;r+=f,i.push({event:t,start:v,end:A,playout:{start:l,end:r},integrated:{start:n,end:a}})}}const E=t.resumeTime;s=d||E>n?n:E})),s<n){var o;const e=s,t=a,l=n-s;a+=l;const d=r;r+=l,i.push({previousEvent:(null==(o=i[i.length-1])?void 0:o.event)||null,nextEvent:null,start:s,end:e+l,playout:{start:d,end:r},integrated:{start:t,end:a}})}this.setDurations(n,r,a)}else{const e=0;i.push({previousEvent:null,nextEvent:null,start:e,end:n,playout:{start:e,end:n},integrated:{start:e,end:n}}),this.setDurations(n,n,n)}return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){const i=t.main.details,s=i.live?1/0:i.edge;let n=0,r=-1;e.forEach(((o,a)=>{const l=o.cue.pre,d=o.cue.post,c=l?0:d?s:o.startTime;this.updateAssetDurations(o),r===c?o.cumulativeDuration=n:(n=0,r=c),!d&&o.snapOptions.in&&(o.resumeAnchor=Jt(null,i.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&a+1<e.length&&e[a+1].startTime-e[a].resumeTime<.033&&(e[a+1].appendInPlace=!1,e[a+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const h=Q(o.resumeOffset)?o.resumeOffset:o.duration;n+=h}))}primaryCanResumeInPlaceAt(e,t){const i=e.resumeTime,s=e.startTime+e.resumptionOffset;return Math.abs(i-s)>To?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${s}`),!1):t?!Object.keys(t).some((s=>{const n=t[s].details,r=n.edge;if(i>=r)return this.log(`"${e.identifier}" resumption ${i} past ${s} playlist end ${r}`),!1;const o=Jt(null,n.fragments,i);if(!o)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${s} playlist (${n.fragStart}-${n.fragmentEnd})`),!0;const a="audio"===s?.175:0;return!(Math.abs(o.start-i)<To+a||Math.abs(o.end-i)<To+a||(this.log(`"${e.identifier}" resumption ${i} not aligned with ${s} fragment bounds (${o.start}-${o.end} sn: ${o.sn} cc: ${o.cc})`),0))})):(this.log(`"${e.identifier}" resumption ${i} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let i=0,s=!1,n=!1;e.assetList.forEach(((e,r)=>{const o=t+i;e.startOffset=i,e.timelineStart=o,s||(s=null===e.duration),n||(n=!!e.error);const a=e.error?0:e.duration||0;i+=a})),e.duration=s&&!n?Math.max(i,e.duration):i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function wo(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}class Po{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const i=e.assetListUrl;let s;try{s=Ro(i,this.hls.sessionId,e.baseUrl)}catch(t){const s=this.assignAssetListError(e,te.ASSET_LIST_LOAD_ERROR,t,i);return void this.hls.trigger(ie.ERROR,s)}t&&"data:"!==s.protocol&&s.searchParams.set("_HLS_start_offset",""+t);const n=this.hls.config,r=new(0,n.loader)(n),o={responseType:"json",url:s.href},a=n.interstitialAssetListLoadPolicy.default,l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(t,i,s,n)=>{const r=t.data,o=null==r?void 0:r.ASSETS;if(Array.isArray(o))e.assetListResponse=r,this.hls.trigger(ie.ASSET_LIST_LOADED,{event:e,assetListResponse:r,networkDetails:n});else{const t=this.assignAssetListError(e,te.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),s.url,i,n);this.hls.trigger(ie.ERROR,t)}},onError:(t,i,s,n)=>{const r=this.assignAssetListError(e,te.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${t.code} ${t.text} (${i.url})`),i.url,n,s);this.hls.trigger(ie.ERROR,r)},onTimeout:(t,i,s)=>{const n=this.assignAssetListError(e,te.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${i.url})`),i.url,t,s);this.hls.trigger(ie.ERROR,n)}};return r.load(o,l,d),this.hls.trigger(ie.ASSET_LIST_LOADING,{event:e}),r}assignAssetListError(e,t,i,s,n,r){return e.error=i,{type:ee.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:s,error:i,networkDetails:r,stats:n}}}function Oo(e,t,i){Do(e,t,i),e.addEventListener(t,i)}function Do(e,t,i){e.removeEventListener(t,i)}function No(e){null==e||e.play().catch((()=>{}))}class Mo{constructor(e){this.buffered=void 0;const t=(t,i,s)=>{if((i>>>=0)>s-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][t]};this.buffered={get length(){return e.length},end:i=>t("end",i,e.length),start:i=>t("start",i,e.length)}}}const xo={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Bo=e=>String.fromCharCode(xo[e]||e),Fo=15,Uo=100,$o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Vo={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Go={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},jo={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Ko=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Ho{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i="function"==typeof t?t():t;be.log(`${this.time} [${e}] ${i}`)}}}const Yo=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class Wo{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const s=t[i];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class zo{constructor(){this.uchar=" ",this.penState=new Wo}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class qo{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Wo,this.cueStartTime=null,this.logger=void 0;for(let e=0;e<Uo;e++)this.chars.push(new zo);this.logger=e}equals(e){for(let t=0;t<Uo;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Uo;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Uo;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Uo&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Uo)}moveCursor(e){const t=this.pos+e;if(e>1)for(let e=this.pos+1;e<t+1;e++)this.chars[e].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Bo(e);this.pos>=Uo?this.logger.log(0,(()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<Uo;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<Uo;i++){const s=this.chars[i].uchar;" "!==s&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Xo{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Fo;t++)this.rows.push(new qo(e));this.logger=e}reset(){for(let e=0;e<Fo;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let i=0;i<Fo;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<Fo;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Fo;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,(()=>"pacData = "+jt(e)));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let e=0;e<Fo;e++)this.rows[e].clear();const e=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){const s=i.rows[e].cueStartTime,n=this.logger.time;if(null!==s&&null!==n&&s<n)for(let s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(i.rows[e+s])}}this.currRow=t;const i=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,s=Math.max(t-1,0);i.setCursor(e.indent),e.color=i.chars[s].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,(()=>"bkgData = "+jt(e))),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",s=-1;for(let i=0;i<Fo;i++){const n=this.rows[i].getTextString();n&&(s=i+1,e?t.push("Row "+s+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(i=e?"["+t.join(" | ")+"]":t.join("\n")),i}getTextAndFormat(){return this.rows}}class Qo{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Xo(i),this.nonDisplayedMemory=new Xo(i),this.lastOutputScreen=new Xo(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,(()=>"MODE="+e)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>t+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[i]}this.logger.log(2,"MIDROW: "+jt(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Zo{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const s=this.logger=new Ho;this.channels=[null,new Qo(e,t,s),new Qo(e+1,i,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let e=0;e<t.length;e+=2){const i=127&t[e],s=127&t[e+1];let n=!1,r=null;if(0===i&&0===s)continue;this.logger.log(3,(()=>"["+Yo([t[e],t[e+1]])+"] -> ("+Yo([i,s])+")"));const o=this.cmdHistory;if(i>=16&&i<=31){if(ea(i,s,o)){Jo(null,null,o),this.logger.log(3,(()=>"Repeated command ("+Yo([i,s])+") is dropped"));continue}Jo(i,s,this.cmdHistory),n=this.parseCmd(i,s),n||(n=this.parseMidrow(i,s)),n||(n=this.parsePAC(i,s)),n||(n=this.parseBackgroundAttributes(i,s))}else Jo(null,null,o);if(!n&&(r=this.parseChars(i,s),r)){const e=this.currentChannel;e&&e>0?this.channels[e].insertChars(r):this.logger.log(2,"No channel found yet. TEXT-MODE?")}n||r||this.logger.log(2,(()=>"Couldn't parse cleaned data "+Yo([i,s])+" orig: "+Yo([t[e],t[e+1]])))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;const i=20===e||21===e||23===e?1:2,s=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?s.ccRCL():33===t?s.ccBS():34===t?s.ccAOF():35===t?s.ccAON():36===t?s.ccDER():37===t?s.ccRU(2):38===t?s.ccRU(3):39===t?s.ccRU(4):40===t?s.ccFON():41===t?s.ccRDC():42===t?s.ccTR():43===t?s.ccRTD():44===t?s.ccEDM():45===t?s.ccCR():46===t?s.ccENM():47===t&&s.ccEOC():s.ccTO(t-32),this.currentChannel=i,!0}parseMidrow(e,t){let i=0;if((17===e||25===e)&&t>=32&&t<=47){if(i=17===e?1:2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return!!s&&(s.ccMIDROW(t),this.logger.log(3,(()=>"MIDROW ("+Yo([e,t])+")")),!0)}return!1}parsePAC(e,t){let i;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;const s=e<=23?1:2;i=t>=64&&t<=95?1===s?$o[e]:Go[e]:1===s?Vo[e]:jo[e];const n=this.channels[s];return!!n&&(n.setPAC(this.interpretPAC(i,t)),this.currentChannel=s,!0)}interpretPAC(e,t){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return i=t>95?t-96:t-64,s.underline=!(1&~i),i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=4*Math.floor((i-16)/2),s}parseChars(e,t){let i,s=null,n=null;if(e>=25?(i=2,n=e-8):(i=1,n=e),n>=17&&n<=19){let e;e=17===n?t+80:18===n?t+112:t+144,this.logger.log(2,(()=>"Special char '"+Bo(e)+"' in channel "+i)),s=[e]}else e>=32&&e<=127&&(s=0===t?[e]:[e,t]);return s&&this.logger.log(3,(()=>"Char codes =  "+Yo(s).join(","))),s}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;let i;const s={};16===e||24===e?(i=Math.floor((t-32)/2),s.background=Ko[i],t%2==1&&(s.background=s.background+"_semi")):45===t?s.background="transparent":(s.foreground="black",47===t&&(s.underline=!0));const n=e<=23?1:2;return this.channels[n].setBkgData(s),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Jo(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function Jo(e,t,i){i.a=e,i.b=t}function ea(e,t,i){return i.a===e&&i.b===t}var ta=function(){if(null!=Ki&&Ki.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function i(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const i=t.toLowerCase();return!!~e.indexOf(i)&&i}function s(e){return i(t,e)}function n(e,...t){let i=1;for(;i<arguments.length;i++){const t=arguments[i];for(const i in t)e[i]=t[i]}return e}function r(t,r,o){const a=this,l={enumerable:!0};a.hasBeenReset=!1;let d="",c=!1,h=t,u=r,f=o,p=null,g="",m=!0,v="auto",A="start",E=50,y="middle",T=50,b="middle";Object.defineProperty(a,"id",n({},l,{get:function(){return d},set:function(e){d=""+e}})),Object.defineProperty(a,"pauseOnExit",n({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(a,"startTime",n({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",n({},l,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",n({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",n({},l,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",n({},l,{get:function(){return g},set:function(t){const s=function(t){return i(e,t)}(t);if(!1===s)throw new SyntaxError("An invalid or illegal string was specified.");g=s,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",n({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",n({},l,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",n({},l,{get:function(){return A},set:function(e){const t=s(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",n({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",n({},l,{get:function(){return y},set:function(e){const t=s(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",n({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",n({},l,{get:function(){return b},set:function(e){const t=s(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),a.displayState=void 0}return r.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},r}();class ia{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function sa(e){function t(e,t,i,s){return 3600*(0|e)+60*(0|t)+(0|i)+parseFloat(s||0)}const i=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return i?parseFloat(i[2])>59?t(i[2],i[3],0,i[4]):t(i[1],i[2],i[3],i[4]):null}class na{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let s=0;s<i.length;++s)if(t===i[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function ra(e,t,i,s){const n=s?e.split(s):[e];for(const e in n){if("string"!=typeof n[e])continue;const s=n[e].split(i);2===s.length&&t(s[0],s[1])}}const oa=new ta(0,0,""),aa="middle"===oa.align?"middle":"center";function la(e,t,i){const s=e;function n(){const t=sa(e);if(null===t)throw new Error("Malformed timestamp: "+s);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(){e=e.replace(/^\s+/,"")}if(r(),t.startTime=n(),r(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+s);e=e.slice(3),r(),t.endTime=n(),r(),function(e,t){const s=new na;ra(e,(function(e,t){let n;switch(e){case"region":for(let n=i.length-1;n>=0;n--)if(i[n].id===t){s.set(e,i[n].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":n=t.split(","),s.integer(e,n[0]),s.percent(e,n[0])&&s.set("snapToLines",!1),s.alt(e,n[0],["auto"]),2===n.length&&s.alt("lineAlign",n[1],["start",aa,"end"]);break;case"position":n=t.split(","),s.percent(e,n[0]),2===n.length&&s.alt("positionAlign",n[1],["start",aa,"end","line-left","line-right","auto"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start",aa,"end","left","right"])}}),/:/,/\s/),t.region=s.get("region",null),t.vertical=s.get("vertical","");let n=s.get("line","auto");"auto"===n&&-1===oa.line&&(n=-1),t.line=n,t.lineAlign=s.get("lineAlign","start"),t.snapToLines=s.get("snapToLines",!0),t.size=s.get("size",100),t.align=s.get("align",aa);let r=s.get("position","auto");"auto"===r&&50===oa.position&&(r="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=r}(e,t)}function da(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class ca{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new ia,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function i(){let e=t.buffer,i=0;for(e=da(e);i<e.length&&"\r"!==e[i]&&"\n"!==e[i];)++i;const s=e.slice(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.slice(i),s}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=i();const s=e.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==s||!s[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let s=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:e=i(),t.state){case"HEADER":/:/.test(e)?ra(e,(function(e,t){}),/:/):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new ta(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{la(e,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const i=-1!==e.indexOf("--\x3e");if(!e||i&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const ha=/\r\n|\n\r|\n|\r/g,ua=function(e,t,i=0){return e.slice(i,i+t.length)===t};function fa(e,t,i){return yo(e.toString())+yo(t.toString())+yo(i)}const pa="stpp.ttml.im1t",ga=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ma=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,va={left:"start",center:"center",right:"end",start:"start",end:"end"};function Aa(e,t,i,s){const n=et(new Uint8Array(e),["mdat"]);if(0===n.length)return void s(new Error("Could not parse IMSC1 mdat"));const r=n.map((e=>Ce(e))),o=function(e,t,i=1,s=!1){return rr(e,t,1/i,s)}(t.baseTime,1,t.timescale);try{r.forEach((e=>i(function(e,t){const i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(s).reduce(((e,t)=>(e[t]=i.getAttribute(`ttp:${t}`)||s[t],e)),{}),r="preserve"!==i.getAttribute("xml:space"),o=ya(Ea(i,"styling","style")),a=ya(Ea(i,"layout","region")),l=Ea(i,"body","[begin]");return[].map.call(l,(e=>{const i=Ta(e,r);if(!i||!e.hasAttribute("begin"))return null;const s=_a(e.getAttribute("begin"),n),l=_a(e.getAttribute("dur"),n);let d=_a(e.getAttribute("end"),n);if(null===s)throw Sa(e);if(null===d){if(null===l)throw Sa(e);d=s+l}const c=new ta(s-t,d-t,i);c.id=fa(c.startTime,c.endTime,c.text);const h=function(e,t,i){const s="http://www.w3.org/ns/ttml#styling";let n=null;const r=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return r&&i.hasOwnProperty(r)&&(n=i[r]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(((i,r)=>{const o=ba(t,s,r)||ba(e,s,r)||ba(n,s,r);return o&&(i[r]=o),i}),{})}(a[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:u}=h;if(u){const e=va[u];e&&(c.lineAlign=e),c.align=u}return fe(c,h),c})).filter((e=>null!==e))}(e,o))))}catch(e){s(e)}}function Ea(e,t,i){const s=e.getElementsByTagName(t)[0];return s?[].slice.call(s.querySelectorAll(i)):[]}function ya(e){return e.reduce(((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e}),{})}function Ta(e,t){return[].slice.call(e.childNodes).reduce(((e,i,s)=>{var n;return"br"===i.nodeName&&s?e+"\n":null!=(n=i.childNodes)&&n.length?Ta(i,t):t?e+i.textContent.trim().replace(/\s+/g," "):e+i.textContent}),"")}function ba(e,t,i){return e&&e.hasAttributeNS(t,i)?e.getAttributeNS(t,i):null}function Sa(e){return new Error(`Could not parse ttml timestamp ${e}`)}function _a(e,t){if(!e)return null;let i=sa(e);return null===i&&(ga.test(e)?i=function(e,t){const i=ga.exec(e),s=(0|i[4])+(0|i[5])/t.subFrameRate;return 3600*(0|i[1])+60*(0|i[2])+(0|i[3])+s/t.frameRate}(e,t):ma.test(e)&&(i=function(e,t){const i=ma.exec(e),s=Number(i[1]);switch(i[2]){case"h":return 3600*s;case"m":return 60*s;case"ms":return 1e3*s;case"f":return s/t.frameRate;case"t":return s/t.tickRate}return s}(e,t))),i}class Ca{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}function Ra(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function La(e,t){return!!e&&e.kind===Ra(t)&&Lr(t,e)}const Ia=/\s/,ka={newCue(e,t,i,s){const n=[];let r,o,a,l,d;const c=self.VTTCue||self.TextTrackCue;for(let u=0;u<s.rows.length;u++)if(r=s.rows[u],a=!0,l=0,d="",!r.isEmpty()){var h;for(let e=0;e<r.chars.length;e++)Ia.test(r.chars[e].uchar)&&a?l++:(d+=r.chars[e].uchar,a=!1);r.cueStartTime=t,t===i&&(i+=1e-4),l>=16?l--:l++;const s=da(d.trim()),f=fa(t,i,s);null!=e&&null!=(h=e.cues)&&h.getCueById(f)||(o=new c(t,i,s),o.id=f,o.line=u+1,o.align="left",o.position=10+Math.min(80,10*Math.floor(8*l/32)),n.push(o))}return e&&n.length&&(n.sort(((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line)),n.forEach((t=>mo(e,t)))),n}},wa=/(\d+)-(\d+)\/(\d+)/;class Pa{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Oa,this.controller=new self.AbortController,this.stats=new xe}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const n=function(e,t){const i={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(fe({},e.headers))};return e.rangeEnd&&i.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),i}(e,this.controller.signal),r="arraybuffer"===e.responseType,o=r?"byteLength":"length",{maxTimeToFirstByteMs:a,maxLoadTimeMs:l}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,n),self.clearTimeout(this.requestTimeout),t.timeout=a&&Q(a)?a:l,this.requestTimeout=self.setTimeout((()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))}),t.timeout),(Er(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then((i=>{var n;this.response=this.loader=i;const o=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=l,this.requestTimeout=self.setTimeout((()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))}),l-(o-s.loading.start)),!i.ok){const{status:e,statusText:t}=i;throw new Da(t||"fetch, bad network response",e,i)}s.loading.first=o,s.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=wa.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(Q(e))return e}const i=e.get("Content-Length");if(i)return parseInt(i)}(i.headers)||s.total;const a=null==(n=this.callbacks)?void 0:n.onProgress;return a&&Q(t.highWaterMark)?this.loadProgressively(i,s,e,t.highWaterMark,a):r?i.arrayBuffer():"json"===e.responseType?i.json():i.text()})).then((i=>{var n,r;const a=this.response;if(!a)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const l=i[o];l&&(s.loaded=s.total=l);const d={url:a.url,data:i,code:a.status},c=null==(n=this.callbacks)?void 0:n.onProgress;c&&!Q(t.highWaterMark)&&c(s,e,i,a),null==(r=this.callbacks)||r.onSuccess(d,s,e,a)})).catch((t=>{var i;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const n=t&&t.code||0,r=t?t.message:null;null==(i=this.callbacks)||i.onError({code:n,text:r},e,t?t.details:null,s)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,s=0,n){const r=new Xs,o=e.body.getReader(),a=()=>o.read().then((o=>{if(o.done)return r.dataLength&&n(t,i,r.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const l=o.value,d=l.length;return t.loaded+=d,d<s||r.dataLength?(r.push(l),r.dataLength>=s&&n(t,i,r.flush().buffer,e)):n(t,i,l.buffer,e),a()})).catch((()=>Promise.reject()));return a()}}function Oa(e,t){return new self.Request(e.url,t)}class Da extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const Na=/^age:\s*[\d.]+\s*$/im;class Ma{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new xe,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const n=this.xhrSetup;n?Promise.resolve().then((()=>{if(this.loader===i&&!this.stats.aborted)return n(i,t.url)})).catch((e=>{if(this.loader===i&&!this.stats.aborted)return i.open("GET",t.url,!0),n(i,t.url)})).then((()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)})).catch((e=>{var n;null==(n=this.callbacks)||n.onError({code:i.status,text:e.message},t,i,s)})):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:n,maxLoadTimeMs:r}=i.loadPolicy;if(s)for(const t in s)e.setRequestHeader(t,s[t]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=n&&Q(n)?n:r,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const s=t.readyState,n=this.config;if(!i.aborted&&s>=2&&(0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),n.timeout!==n.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),n.timeout=n.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),4===s)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const s=t.status,l="text"===t.responseType?t.responseText:null;if(s>=200&&s<300){const n=null!=l?l:t.response;if(null!=n){var r,o;i.loading.end=Math.max(self.performance.now(),i.loading.first);const a="arraybuffer"===t.responseType?n.byteLength:n.length;i.loaded=i.total=a,i.bwEstimate=8e3*i.total/(i.loading.end-i.loading.first);const l=null==(r=this.callbacks)?void 0:r.onProgress;l&&l(i,e,n,t);const d={url:t.responseURL,data:n,code:s};return void(null==(o=this.callbacks)||o.onSuccess(d,i,e,t))}}const d=n.loadPolicy.errorRetry;var a;ai(d,i.retry,!1,{url:e.url,data:void 0,code:s})?this.retry(d):(be.error(`${s} while loading ${e.url}`),null==(a=this.callbacks)||a.onError({code:s,text:t.statusText},e,t,i))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(ai(e,this.stats.retry,!0))this.retry(e);else{var t;be.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=ri(e,i.retry),i.retry++,be.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Na.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const xa=ge(ge({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Ma,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class extends me{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:i,partCurrent:s,hls:n}=this,{autoLevelEnabled:r,media:o}=n;if(!i||!o)return;const a=performance.now(),l=s?s.stats:i.stats,d=s?s.duration:i.duration,c=a-l.loading.start,h=n.minAutoLevel,u=i.level,f=this._nextAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||u<=h)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!r)return;const p=f>-1&&f!==u,g=!!e||p;if(!g&&(o.paused||!o.playbackRate||!o.readyState))return;const m=n.mainForwardBufferInfo;if(!g&&null===m)return;const v=this.bwEstimator.getEstimateTTFB(),A=Math.abs(o.playbackRate);if(c<=Math.max(v,d/(2*A)*1e3))return;const E=m?m.len/A:0,y=l.loading.first?l.loading.first-l.loading.start:-1,T=l.loaded&&y>-1,b=this.getBwEstimate(),S=n.levels,_=S[u],C=Math.max(l.loaded,Math.round(d*(i.bitrate||_.averageBitrate)/8));let R=T?c-y:c;R<1&&T&&(R=Math.min(c,8*l.loaded/b));const L=T?1e3*l.loaded/R:0,I=v/1e3,k=L?(C-l.loaded)/L:8*C/b+I;if(k<=E)return;const w=L?8*L:b,P=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),O=this.hls.config.abrBandWidthUpFactor;let D,N=Number.POSITIVE_INFINITY;for(D=u-1;D>h;D--){const e=S[D].maxBitrate,t=!S[D].details||P;if(N=this.getTimeToLoadFrag(I,w,d*e,t),N<Math.min(E,d+I))break}if(N>=k)return;if(N>10*d)return;T?this.bwEstimator.sample(c-Math.min(v,y),l.loaded):this.bwEstimator.sampleTTFB(c);const M=S[D].maxBitrate;this.getBwEstimate()*O>M&&this.resetEstimator(M);const x=this.findBestLevel(M,h,D,0,E,1,1);x>-1&&(D=x),this.warn(`Fragment ${i.sn}${s?" part "+s.index:""} of level ${u} is loading too slowly;\n      Fragment duration: ${i.duration.toFixed(3)}\n      Time to underbuffer: ${E.toFixed(3)} s\n      Estimated load time for current fragment: ${k.toFixed(3)} s\n      Estimated load time for down switch fragment: ${N.toFixed(3)} s\n      TTFB estimate: ${0|y} ms\n      Current BW estimate: ${Q(b)?0|b:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${D} @ ${0|M} bps`),n.nextLoadLevel=n.nextAutoLevel=D,this.clearTimer();const B=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===D&&D>0){const e=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${D>0?"and switching down":""}\n      Fragment duration: ${i.duration.toFixed(3)} s\n      Time to underbuffer: ${e.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,D>h){let t=this.findBestLevel(this.hls.levels[h].bitrate,h,D,0,e,1,1);-1===t&&(t=h),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};p||k>2*N?B():this.timer=self.setInterval(B,1e3*N),n.trigger(ie.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:s,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new he(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.FRAG_LOADING,this.onFragLoading,this),e.on(ie.FRAG_LOADED,this.onFragLoaded,this),e.on(ie.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ie.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ie.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ie.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(ie.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.FRAG_LOADING,this.onFragLoading,this),e.off(ie.FRAG_LOADED,this.onFragLoaded,this),e.off(ie.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ie.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ie.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ie.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(ie.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;var s;this.ignoreFragment(i)||(i.bitrateTest||(this.fragCurrent=i,this.partCurrent=null!=(s=t.part)?s:null),this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100))}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case te.BUFFER_ADD_CODEC_ERROR:case te.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case te.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:i,partCurrent:s}=this;if(e&&i&&e.sn===i.sn&&e.level===i.level){const t=performance.now(),i=s?s.stats:e.stats,n=t-i.loading.start,r=i.loading.first?i.loading.first-i.loading.start:-1;if(i.loaded&&r>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(n-Math.min(e,r),i.loaded)}else this.bwEstimator.sampleTTFB(n)}break}}}getTimeToLoadFrag(e,t,i,s){return e+i/t+(s?e+this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const i=this.hls.config,{loading:s}=t.stats,n=s.end-s.first;Q(n)&&(this.lastLevelLoadSec=n/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){const s=i?i.stats:t.stats;if(t.type===ae&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=i?i.duration:t.duration,n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+s.loaded,o=(n.loaded?n.loaded.duration:0)+e;n.loaded={bytes:r,duration:o},n.realBitrate=Math.round(8*r/o)}if(t.bitrateTest){const e={stats:s,frag:t,part:i,id:t.type};this.onFragBuffered(ie.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:s}=t,n=null!=s&&s.stats.loaded?s.stats:i.stats;if(n.aborted)return;if(this.ignoreFragment(i))return;const r=n.parsing.end-n.loading.start-Math.min(n.loading.first-n.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(r,n.loaded),n.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ae||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,n=this.findBestLevel(i,t,e,0,s,1,1);if(n>-1)return n;const r=this.hls.firstLevel,o=Math.min(Math.max(r,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${r} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&i&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;const s=t&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,s)&&t[e].loadError<=t[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:s,config:n,minAutoLevel:r}=i,o=t?t.duration:e?e.duration:0,a=this.getBwEstimate(),l=this.getStarvationDelay();let d=n.abrBandWidthFactor,c=n.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(a,r,s,l,0,d,c);if(e>=0)return this.rebufferNotice=-1,e}let h=o?Math.min(o,n.maxStarvationDelay):n.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;e&&(h=(o?Math.min(o,n.maxLoadingDelay):n.maxLoadingDelay)-e,this.info(`bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),d=c=1)}const u=this.findBestLevel(a,r,s,l,h,d,c);if(this.rebufferNotice!==u&&(this.rebufferNotice=u,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${u}`)),u>-1)return u;const f=i.levels[r],p=i.loadLevelObj;return p&&(null==f?void 0:f.bitrate)<p.bitrate?r:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,s,n,r,o){var a;const l=s+n,d=this.lastLoadedFragLevel,c=-1===d?this.hls.firstLevel:d,{fragCurrent:h,partCurrent:u}=this,{levels:f,allAudioTracks:p,loadLevel:g,config:m}=this.hls;if(1===f.length)return 0;const v=f[c],A=!(null==(a=this.hls.latestLevelDetails)||!a.live),E=-1===g||-1===d;let y,T="SDR",b=(null==v?void 0:v.frameRate)||0;const{audioPreference:S,videoPreference:_}=m,C=this.audioTracksByGroup||(this.audioTracksByGroup=Ht(p));let R=-1;if(E){if(-1!==this.firstSelection)return this.firstSelection;const s=this.codecTiers||(this.codecTiers=function(e,t,i,s){return e.slice(i,s+1).reduce(((e,i,s)=>{if(!i.codecSet)return e;const n=i.audioGroups;let r=e[i.codecSet];r||(e[i.codecSet]=r={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:s,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!n,fragmentError:0}),r.minBitrate=Math.min(r.minBitrate,i.bitrate);const o=Math.min(i.height,i.width);return r.minHeight=Math.min(r.minHeight,o),r.minFramerate=Math.min(r.minFramerate,i.frameRate),r.minIndex=Math.min(r.minIndex,s),r.maxScore=Math.max(r.maxScore,i.score),r.fragmentError+=i.fragmentError,r.videoRanges[i.videoRange]=(r.videoRanges[i.videoRange]||0)+1,n&&n.forEach((e=>{if(!e)return;const i=t.groups[e];i&&(r.hasDefaultAudio=r.hasDefaultAudio||t.hasDefaultAudio?i.hasDefault:i.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(i.channels).forEach((e=>{r.channels[e]=(r.channels[e]||0)+i.channels[e]})))})),e}),{})}(f,C,t,i)),n=function(e,t,i,s,n){const r=Object.keys(e),o=null==s?void 0:s.channels,a=null==s?void 0:s.audioCodec,l=null==n?void 0:n.videoCodec,d=o&&2===parseInt(o);let c=!1,h=!1,u=1/0,f=1/0,p=1/0,g=1/0,m=0,v=[];const{preferHDR:A,allowedVideoRanges:E}=function(e,t){let i=!1,s=[];if(e&&(i="SDR"!==e,s=[e]),t){s=t.allowedVideoRanges||Ft.slice(0);const e="SDR"!==s.join("")&&!t.videoCodec;i=void 0!==t.preferHDR?t.preferHDR:e&&function(){if("function"==typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),i||(s=["SDR"])}return{preferHDR:i,allowedVideoRanges:s}}(t,n);for(let t=r.length;t--;){const i=e[r[t]];c||(c=i.channels[2]>0),u=Math.min(u,i.minHeight),f=Math.min(f,i.minFramerate),p=Math.min(p,i.minBitrate),E.filter((e=>i.videoRanges[e]>0)).length>0&&(h=!0)}u=Q(u)?u:0,f=Q(f)?f:0;const y=Math.max(1080,u),T=Math.max(30,f);p=Q(p)?p:i,i=Math.max(p,i),h||(t=void 0);const b=r.length>1;return{codecSet:r.reduce(((t,s)=>{const n=e[s];if(s===t)return t;if(v=h?E.filter((e=>n.videoRanges[e]>0)):[],b){if(n.minBitrate>i)return Kt(s,`min bitrate of ${n.minBitrate} > current estimate of ${i}`),t;if(!n.hasDefaultAudio)return Kt(s,"no renditions with default or auto-select sound found"),t;if(a&&s.indexOf(a.substring(0,4))%5!=0)return Kt(s,`audio codec preference "${a}" not found`),t;if(o&&!d){if(!n.channels[o])return Kt(s,`no renditions with ${o} channel sound found (channels options: ${Object.keys(n.channels)})`),t}else if((!a||d)&&c&&0===n.channels[2])return Kt(s,"no renditions with stereo sound found"),t;if(n.minHeight>y)return Kt(s,`min resolution of ${n.minHeight} > maximum of ${y}`),t;if(n.minFramerate>T)return Kt(s,`min framerate of ${n.minFramerate} > maximum of ${T}`),t;if(!v.some((e=>n.videoRanges[e]>0)))return Kt(s,`no variants with VIDEO-RANGE of ${jt(v)} found`),t;if(l&&s.indexOf(l.substring(0,4))%5!=0)return Kt(s,`video codec preference "${l}" not found`),t;if(n.maxScore<m)return Kt(s,`max score of ${n.maxScore} < selected max of ${m}`),t}return t&&(_t(s)>=_t(t)||n.fragmentError>e[t].fragmentError)?t:(g=n.minIndex,m=n.maxScore,s)}),void 0),videoRanges:v,preferHDR:A,minFramerate:f,minBitrate:p,minIndex:g}}(s,T,e,S,_),{codecSet:r,videoRanges:o,minFramerate:a,minBitrate:l,minIndex:d,preferHDR:c}=n;R=d,y=r,T=c?o[o.length-1]:o[0],b=a,e=Math.max(e,l),this.log(`picked start tier ${jt(n)}`)}else y=null==v?void 0:v.codecSet,T=null==v?void 0:v.videoRange;const L=u?u.duration:h?h.duration:0,I=this.bwEstimator.getEstimateTTFB()/1e3,k=[];for(let a=i;a>=t;a--){var w;const t=f[a],h=a>c;if(!t)continue;if(m.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const i=navigator.mediaCapabilities;"function"==typeof(null==i?void 0:i.decodingInfo)&&(Mt(t,C,T,b,e,S)||ut(t.videoCodec))?(t.supportedPromise=xt(t,C,i),t.supportedPromise.then((e=>{if(!this.hls)return;t.supportedResult=e;const i=this.hls.levels,s=i.indexOf(t);e.error?this.warn(`MediaCapabilities decodingInfo error: "${e.error}" for level ${s} ${jt(e)}`):e.supported||(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${s} ${jt(e)}`),s>-1&&i.length>1&&(this.log(`Removing unsupported level ${s}`),this.hls.removeLevel(s),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))}))):t.supportedResult=Ot}if((y&&t.codecSet!==y||T&&t.videoRange!==T||h&&b>t.frameRate||!h&&b>0&&b<t.frameRate||t.supportedResult&&(null==(w=t.supportedResult.decodingInfoResults)||!w[0].smooth))&&(!E||a!==R)){k.push(a);continue}const p=t.details,v=(u?null==p?void 0:p.partTarget:null==p?void 0:p.averagetargetduration)||L;let _;_=h?o*e:r*e;const P=L&&s>=2*L&&0===n?t.averageBitrate:t.maxBitrate,O=this.getTimeToLoadFrag(I,_,P*v,void 0===p);if(_>=P&&(a===d||0===t.loadError&&0===t.fragmentError)&&(O<=I||!Q(O)||A&&!this.bitrateTestDelay||O<l)){const e=this.forcedAutoLevel;return a===g||-1!==e&&e===g||(k.length&&this.trace(`Skipped level(s) ${k.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${f[k[0]].codecs}" ${f[k[0]].videoRange}; not compatible with "${y}" ${T}`),this.info(`switch candidate:${c}->${a} adjustedbw(${Math.round(_)})-bitrate=${Math.round(_-P)} ttfb:${I.toFixed(1)} avgDuration:${v.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${O.toFixed(1)} firstSelection:${E} codecSet:${t.codecSet} videoRange:${t.videoRange} hls.loadLevel:${g}`)),E&&(this.firstSelection=a),a}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}},bufferController:class extends me{constructor(e,t){var i;super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:i}=this;e&&this.log("Media source opened"),t&&i&&(i.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(ie.MEDIA_ATTACHED,{media:t,mediaSource:i}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=(i=Se(e.config.preferManagedMediaSource),"undefined"!=typeof self&&i===self.ManagedMediaSource),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ie.BUFFER_RESET,this.onBufferReset,this),e.on(ie.BUFFER_APPENDING,this.onBufferAppending,this),e.on(ie.BUFFER_CODECS,this.onBufferCodecs,this),e.on(ie.BUFFER_EOS,this.onBufferEos,this),e.on(ie.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ie.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ie.FRAG_PARSED,this.onFragParsed,this),e.on(ie.FRAG_CHANGED,this.onFragChanged,this),e.on(ie.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ie.BUFFER_RESET,this.onBufferReset,this),e.off(ie.BUFFER_APPENDING,this.onBufferAppending,this),e.off(ie.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ie.BUFFER_EOS,this.onBufferEos,this),e.off(ie.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ie.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ie.FRAG_PARSED,this.onFragParsed,this),e.off(ie.FRAG_CHANGED,this.onFragChanged,this),e.off(ie.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const i={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn(`Transfering MediaSource with${t?" operations in queue":""}${e?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===t?fe(i,s.tracks):this.sourceBuffers.forEach((e=>{const[t]=e;t&&(i[t]=fe({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null})),{media:e,mediaSource:t,tracks:i}}initTracks(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),null!=(i=this.transferData)&&i.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,t){const i=this.media=t.media,s=Se(this.appendSource);if(this.transferData=this.overrides=void 0,i&&s){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const n=this.mediaSource=t.mediaSource||new s;if(this.assignMediaSource(n),e)this._objectUrl=i.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(n);if(this.appendSource)try{i.removeAttribute("src");const t=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||t&&n instanceof t,Or(i),function(e,t){const i=self.document.createElement("source");i.type="video/mp4",i.src=t,e.appendChild(i)}(i,e),i.load()}catch(t){i.src=e}else i.src=e}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${(null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${null==(i=e.constructor)?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const i=this.tracks,s=t.tracks,n=s?Object.keys(s):null,r=n?n.length:0,o=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(s&&n&&r){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${jt(i,((e,t)=>"initSegment"===e?void 0:t))};\ntransfer tracks: ${jt(s,((e,t)=>"initSegment"===e?void 0:t))}}`),!_e(s,i)){t.mediaSource=null,t.tracks=void 0;const n=e.currentTime,r=this.details,o=Math.max(n,(null==r?void 0:r.fragments[0].start)||0);return o-n>1?void this.log(`attachTransferred: waiting for playback to reach new tracks start time ${n} -> ${o}`):(this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(i)}") start time: ${o} currentTime: ${n}`),this.onMediaDetaching(ie.MEDIA_DETACHING,{}),this.onMediaAttaching(ie.MEDIA_ATTACHING,t),void(e.currentTime=o))}this.transferData=void 0,n.forEach((e=>{const t=e,i=s[t];if(i){const e=i.buffer;if(e){const s=this.fragmentTracker,n=i.id;if(s.hasFragments(n)||s.hasParts(n)){const i=Ii.getBuffered(e);s.detectEvictedFragments(t,i,n,null,!0)}const r=Dr(t),o=[t,e];this.sourceBuffers[r]=o,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,i)}}})),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const i=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:n,_objectUrl:r}=this;if(n){if(this.log("media source "+(i?"transferring":"detaching")),i)this.sourceBuffers.forEach((([e])=>{e&&this.removeBuffer(e)})),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===n.readyState;try{const t=n.sourceBuffers;for(let i=t.length;i--;)e&&t[i].abort(),n.removeSourceBuffer(t[i]);e&&n.endOfStream()}catch(e){this.warn(`onMediaDetaching: ${e.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),i||(r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(s.removeAttribute("src"),this.appendSource&&Or(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(ie.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach((([e])=>{e&&this.resetBuffer(e)})),this.initTracks()}resetBuffer(e){var t;const i=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),i)try{var s;null!=(s=this.mediaSource)&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(t){this.warn(`onBufferReset ${e}`,t)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Dr(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Ir(this.tracks)}onBufferCodecs(e,t){const i=this.tracks,s=Object.keys(t);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const n="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),r=!n&&this.sourceBufferCount&&this.media&&s.some((e=>!i[e]));n||r?this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`):(s.forEach((e=>{var s,n,r;const o=t[e],{id:a,codec:l,levelCodec:d,container:c,metadata:h,supplemental:u}=o;let f=i[e];const p=null==(s=this.transferData)||null==(n=s.tracks)?void 0:n[e],g=null!=p&&p.buffer?p:f,m=(null==g?void 0:g.pendingCodec)||(null==g?void 0:g.codec),v=null==g?void 0:g.levelCodec;f||(f=i[e]={buffer:void 0,listeners:[],codec:l,supplemental:u,container:c,levelCodec:d,metadata:h,id:a});const A=It(m,v),E=null==A?void 0:A.replace(kr,"$1");let y=It(l,d);const T=null==(r=y)?void 0:r.replace(kr,"$1");y&&A&&E!==T&&("audio"===e.slice(0,5)&&(y=Lt(y,this.appendSource)),this.log(`switching codec ${m} to ${y}`),y!==(f.pendingCodec||f.codec)&&(f.pendingCodec=y),f.container=c,this.appendChangeType(e,c,y))})),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce(((e,t)=>{const i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e}),{})}appendChangeType(e,t,i){const s=`${t};codecs=${i}`,n={label:`change-type=${s}`,execute:()=>{const n=this.tracks[e];if(n){const r=n.buffer;null!=r&&r.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),r.changeType(s),n.codec=i,n.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};this.append(n,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const i=e.start,s=i+.05*e.duration;if(!0===(null==(t=this.fragmentTracker.getAppendedFrag(i,ae))?void 0:t.gap))return;const n={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>s||null!=t&&t.buffer&&Ii.isBuffered(t.buffer,s)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(s,ae))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:n,frag:e},this.append(n,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:i}=this,{data:s,type:n,parent:r,frag:o,part:a,chunkMeta:l}=t,d=l.buffering[n],c=o.sn,h=self.performance.now();d.start=h;const u=o.stats.buffering,f=a?a.stats.buffering:null;0===u.start&&(u.start=h),f&&0===f.start&&(f.start=h);const p=i.audio;let g=!1;"audio"===n&&"audio/mpeg"===(null==p?void 0:p.container)&&(g=!this.lastMpegAudioChunk||1===l.id||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const m=this.tracks.video,v=null==m?void 0:m.buffer;if(v&&"initSegment"!==c){const e=a||o,t=this.blockedAudioAppend;if("audio"!==n||"main"===r||this.blockedAudioAppend){if("video"===n){const i=e.end;if(t){const e=t.frag.start;(i>e||i<this.lastVideoAppendEnd||Ii.isBuffered(v,e))&&this.unblockAudio()}this.lastVideoAppendEnd=i}}else{const t=e.start+.05*e.duration,i=v.buffered,s=this.currentOp("video");i.length||s?!s&&!Ii.isBuffered(v,t)&&this.lastVideoAppendEnd<t&&this.blockAudio(e):this.blockAudio(e)}}const A=(a||o).start,E={label:`append-${n}`,execute:()=>{if(d.executeStart=self.performance.now(),g){const e=this.tracks[n];if(e){const t=e.buffer;if(t){const e=A-t.timestampOffset;Math.abs(e)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${A} (delta: ${e}) sn: ${c})`),t.timestampOffset=A)}}}this.appendExecutor(s,n)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();d.executeEnd=d.end=e,0===u.first&&(u.first=e),f&&0===f.first&&(f.first=e);const t={};this.sourceBuffers.forEach((([e,i])=>{e&&(t[e]=Ii.getBuffered(i))})),this.appendErrors[n]=0,"audio"===n||"video"===n?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(ie.BUFFER_APPENDED,{type:n,frag:o,part:a,chunkMeta:l,parent:o.type,timeRanges:t})},onError:e=>{var t;const i={type:ee.MEDIA_ERROR,parent:o.type,details:te.BUFFER_APPEND_ERROR,sourceBufferName:n,frag:o,part:a,chunkMeta:l,error:e,err:e,fatal:!1};if(e.code===DOMException.QUOTA_EXCEEDED_ERR)i.details=te.BUFFER_FULL_ERROR;else if(e.code!==DOMException.INVALID_STATE_ERR||!this.mediaSourceOpenOrEnded||null!=(t=this.media)&&t.error)if(e.name===wr)0===this.sourceBufferCount?i.errorAction=li(!0):++this.appendErrors[n];else{const e=++this.appendErrors[n];this.warn(`Failed ${e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${n}" sourceBuffer`),e>=this.hls.config.appendErrorMaxRetry&&(i.fatal=!0)}else i.errorAction=li(!0);this.hls.trigger(ie.ERROR,i)}};this.append(E,n,this.isPending(this.tracks[n]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(ie.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,t){const{type:i,startOffset:s,endOffset:n}=t;i?this.append(this.getFlushOp(i,s,n),i):this.sourceBuffers.forEach((([e])=>{e&&this.append(this.getFlushOp(e,s,n),e)}))}onFragParsed(e,t){const{frag:i,part:s}=t,n=[],r=s?s.elementaryStreams:i.elementaryStreams;r[Ue]?n.push("audiovideo"):(r[Be]&&n.push("audio"),r[Fe]&&n.push("video")),0===n.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers((()=>{const e=self.performance.now();i.stats.buffering.end=e,s&&(s.stats.buffering.end=e);const t=s?s.stats:i.stats;this.hls.trigger(ie.FRAG_BUFFERED,{frag:i,part:s,stats:t,id:i.type})}),n)}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some((([e])=>{var t,i;return e&&(!(null!=(t=this.tracks[e])&&t.ended)||(null==(i=this.tracks[e])?void 0:i.ending))}))}onBufferEos(e,t){var i;this.sourceBuffers.forEach((([e])=>{if(e){const i=this.tracks[e];t.type&&t.type!==e||(i.ending=!0,i.ended||(i.ended=!0,this.log(`${e} buffer reached EOS`)))}}));const s=!1!==(null==(i=this.overrides)?void 0:i.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some((([e])=>{var t;return e&&!(null!=(t=this.tracks[e])&&t.ended)}))&&(s?(this.log("Queueing EOS"),this.blockUntilOpen((()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger(ie.BUFFERED_TO_END,void 0)):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)}))):(this.tracksEnded(),this.hls.trigger(ie.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach((([e])=>{if(null!==e){const t=this.tracks[e];t&&(t.ending=!1)}}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){const e=this.getDurationAndRange();e&&this.blockUntilOpen((()=>this.updateMediaSource(e)))}onError(e,t){if(t.details===te.BUFFER_APPEND_ERROR&&t.frag){var i;const e=null==(i=t.errorAction)?void 0:i.nextAutoLevel;Q(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||null===t)return;if(!this.sourceBufferCount)return;const s=e.config,n=i.currentTime,r=t.levelTargetDuration,o=t.live&&null!==s.liveBackBufferLength?s.liveBackBufferLength:s.backBufferLength;if(Q(o)&&o>=0){const e=Math.max(o,r),t=Math.floor(n/r)*r-e;this.flushBackBuffer(n,r,t)}if(Q(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const e=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),t=Math.max(e,r),i=Math.floor(n/r)*r+t;this.flushFrontBuffer(n,r,i)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach((([e,t])=>{if(t){const n=Ii.getBuffered(t);if(n.length>0&&i>n.start(0)){var s;this.hls.trigger(ie.BACK_BUFFER_REACHED,{bufferEnd:i});const t=this.tracks[e];if(null!=(s=this.details)&&s.live)this.hls.trigger(ie.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(null!=t&&t.ended)return void this.log(`Cannot flush ${e} back buffer while SourceBuffer is in ended state`);this.hls.trigger(ie.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:e})}}}))}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach((([t,s])=>{if(s){const n=Ii.getBuffered(s),r=n.length;if(r<2)return;const o=n.start(r-1),a=n.end(r-1);if(i>o||e>=o&&e<=a)return;this.hls.trigger(ie.BUFFER_FLUSHING,{startOffset:o,endOffset:1/0,type:t})}}))}getDurationAndRange(){var e;const{details:t,mediaSource:i}=this;if(!t||!this.media||"open"!==(null==i?void 0:i.readyState))return null;const s=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&t.live&&i.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart);return{duration:1/0,start:e,end:Math.max(e,s)}}return{duration:1/0}}const n=null==(e=this.overrides)?void 0:e.duration;if(n)return Q(n)?{duration:n}:null;const r=this.media.duration;return s>(Q(i.duration)?i.duration:0)&&s>r||!Q(r)?{duration:s}:null}updateMediaSource({duration:e,start:t,end:i}){const s=this.mediaSource;this.media&&s&&"open"===s.readyState&&(s.duration!==e&&(Q(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),void 0!==t&&void 0!==i&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${t}-${i}.`),s.setLiveSeekableRange(t,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${jt(i)}`),this.tracksReady){var s;const e=null==(s=this.transferData)?void 0:s.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach((([t,i])=>{if(t){const s=this.tracks[t];e[t]={buffer:i,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}})),this.hls.trigger(ie.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach((([e])=>{this.executeNext(e)}))}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const n in e){const r=n,o=e[r];if(this.isPending(o)){const e=this.getTrackCodec(o,r),n=`${o.container};codecs=${e}`;o.codec=e,this.log(`creating sourceBuffer(${n})${this.currentOp(r)?" Queued":""} ${jt(o)}`);try{const e=i.addSourceBuffer(n),s=Dr(r),a=[r,e];t[s]=a,o.buffer=e}catch(e){var s;return this.error(`error while trying to add sourceBuffer: ${e.message}`),this.shiftAndExecuteNext(r),null==(s=this.operationQueue)||s.removeBlockers(),delete this.tracks[r],void this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,sourceBufferName:r,mimeType:n,parent:o.id})}this.trackSourceBuffer(r,o)}}this.bufferCreated()}getTrackCodec(e,t){const i=e.supplemental;let s=e.codec;i&&("video"===t||"audiovideo"===t)&&yt(i,"video")&&(s=function(e,t){const i=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)Et(t[e],"video")||i.push(t[e])}return t&&i.push(t),i.join(",")}(s,i));const n=It(s,e.levelCodec);return n?"audio"===t.slice(0,5)?Lt(n,this.appendSource):n:""}trackSourceBuffer(e,t){const i=t.buffer;if(!i)return;const s=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:s,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",((e,t)=>{const i=t.removedRanges;null!=i&&i.length&&this.hls.trigger(ie.BUFFER_FLUSHED,{type:e})}))}get mediaSrc(){var e,t;const i=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==i?void 0:i.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(i=this.mediaSource)?void 0:i.readyState}`);this.error(`${s}`,t),this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const n=this.currentOp(e);n&&n.onError(s)}removeExecutor(e,t,i){const{media:s,mediaSource:n}=this,r=this.tracks[e],o=null==r?void 0:r.buffer;if(!s||!n||!o)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void this.shiftAndExecuteNext(e);const a=Q(s.duration)?s.duration:1/0,l=Q(n.duration)?n.duration:1/0,d=Math.max(0,t),c=Math.min(i,a,l);c>d&&(!r.ending||r.ended)?(r.ended=!1,this.log(`Removing [${d},${c}] from the ${e} SourceBuffer`),o.remove(d,c)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.tracks[t],s=null==i?void 0:i.buffer;if(!s)throw new Pr(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){this.isUpdating()||this.isQueued()?this.blockBuffers(e):e()}isUpdating(){return this.sourceBuffers.some((([e,t])=>e&&t.updating))}isQueued(){return this.sourceBuffers.some((([e])=>e&&!!this.currentOp(e)))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:i}=this,s=t.map((e=>this.appendBlocker(e)));t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then((s=>{i===this.operationQueue&&(e(),this.stepOperationQueue(t))}))}stepOperationQueue(e){e.forEach((e=>{var t;const i=null==(t=this.tracks[e])?void 0:t.buffer;i&&!i.updating&&this.shiftAndExecuteNext(e)}))}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce(((e,t)=>e+(this.isPending(this.tracks[t])?1:0)),0)}get sourceBufferCount(){return this.sourceBuffers.reduce(((e,[t])=>e+(t?1:0)),0)}get sourceBufferTypes(){return this.sourceBuffers.map((([e])=>e)).filter((e=>!!e))}addBufferListener(e,t,i){const s=this.tracks[e];if(!s)return;const n=s.buffer;if(!n)return;const r=i.bind(this,e);s.listeners.push({event:t,listener:r}),n.addEventListener(t,r)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const i=t.buffer;i&&(t.listeners.forEach((e=>{i.removeEventListener(e.event,e.listener)})),t.listeners.length=0)}},capLevelController:Nr,errorController:class extends me{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(ie.ERROR,this.onError,this),e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(ie.ERROR,this.onError,this),e.off(ie.ERROR,this.onErrorOut,this),e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===ae?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;const s=this.hls,n=t.context;switch(t.details){case te.FRAG_LOAD_ERROR:case te.FRAG_LOAD_TIMEOUT:case te.KEY_LOAD_ERROR:case te.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case te.FRAG_PARSING_ERROR:if(null!=(i=t.frag)&&i.gap)return void(t.errorAction=li());case te.FRAG_GAP:case te.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case te.LEVEL_EMPTY_ERROR:case te.LEVEL_PARSING_ERROR:{var r,o;const e=t.parent===ae?t.level:s.loadLevel;t.details===te.LEVEL_EMPTY_ERROR&&null!=(r=t.context)&&null!=(o=r.levelDetails)&&o.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case te.LEVEL_LOAD_ERROR:case te.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==n?void 0:n.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.level)));case te.AUDIO_TRACK_LOAD_ERROR:case te.AUDIO_TRACK_LOAD_TIMEOUT:case te.SUBTITLE_LOAD_ERROR:case te.SUBTITLE_TRACK_LOAD_TIMEOUT:if(n){const e=s.loadLevelObj;if(e&&(n.type===re&&e.hasAudioGroup(n.groupId)||n.type===oe&&e.hasSubtitleGroup(n.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case te.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const e=s.loadLevelObj,i=null==e?void 0:e.attrs["HDCP-LEVEL"];i?t.errorAction={action:2,flags:2,hdcpLevel:i}:this.keySystemError(t)}return;case te.BUFFER_ADD_CODEC_ERROR:case te.REMUX_ALLOC_ERROR:case te.BUFFER_APPEND_ERROR:var a;return void(t.errorAction||(t.errorAction=this.getLevelSwitchAction(t,null!=(a=t.level)?a:s.loadLevel)));case te.INTERNAL_EXCEPTION:case te.BUFFER_APPENDING_ERROR:case te.BUFFER_FULL_ERROR:case te.LEVEL_SWITCH_ERROR:case te.BUFFER_STALLED_ERROR:case te.BUFFER_SEEK_OVER_HOLE:case te.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=li())}t.type===ee.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const i=ni(this.hls.config.playlistLoadPolicy,e),s=this.playlistError++;if(ai(i,s,si(e),e.response))return{action:5,flags:0,retryConfig:i,retryCount:s};const n=this.getLevelSwitchAction(e,t);return i&&(n.retryConfig=i,n.retryCount=s),n}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),s=t.levels[i],{fragLoadPolicy:n,keyLoadPolicy:r}=t.config,o=ni(e.details.startsWith("key")?r:n,e),a=t.levels.reduce(((e,t)=>e+t.fragmentError),0);if(s&&(e.details!==te.FRAG_GAP&&s.fragmentError++,ai(o,a,si(e),e.response)))return{action:5,flags:0,retryConfig:o,retryCount:a};const l=this.getLevelSwitchAction(e,i);return o&&(l.retryConfig=o,l.retryCount=a),l}getLevelSwitchAction(e,t){const i=this.hls;null==t&&(t=i.loadLevel);const s=this.hls.levels[t];if(s){var n,r;const t=e.details;s.loadError++,t===te.BUFFER_APPEND_ERROR&&s.fragmentError++;let l=-1;const{levels:d,loadLevel:c,minAutoLevel:h,maxAutoLevel:u}=i;i.autoLevelEnabled||(i.loadLevel=-1);const f=null==(n=e.frag)?void 0:n.type,p=(f===le&&t===te.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===te.BUFFER_ADD_CODEC_ERROR||t===te.BUFFER_APPEND_ERROR))&&d.some((({audioCodec:e})=>s.audioCodec!==e)),g="video"===e.sourceBufferName&&(t===te.BUFFER_ADD_CODEC_ERROR||t===te.BUFFER_APPEND_ERROR)&&d.some((({codecSet:e,audioCodec:t})=>s.codecSet!==e&&s.audioCodec===t)),{type:m,groupId:v}=null!=(r=e.context)?r:{};for(let i=d.length;i--;){const n=(i+c)%d.length;if(n!==c&&n>=h&&n<=u&&0===d[n].loadError){var o,a;const i=d[n];if(t===te.FRAG_GAP&&f===ae&&e.frag){const t=d[n].details;if(t){const i=Jt(e.frag,t.fragments,e.frag.start);if(null!=i&&i.gap)continue}}else{if(m===re&&i.hasAudioGroup(v)||m===oe&&i.hasSubtitleGroup(v))continue;if(f===le&&null!=(o=s.audioGroups)&&o.some((e=>i.hasAudioGroup(e)))||f===de&&null!=(a=s.subtitleGroups)&&a.some((e=>i.hasSubtitleGroup(e)))||p&&s.audioCodec===i.audioCodec||!p&&s.audioCodec!==i.audioCodec||g&&s.codecSet===i.codecSet)continue}l=n;break}}if(l>-1&&i.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:2,flags:0,nextAutoLevel:l}}return{action:2,flags:1}}onErrorOut(e,t){var i;switch(null==(i=t.errorAction)?void 0:i.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===te.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:s,hdcpLevel:n,nextAutoLevel:r}=i;switch(s){case 0:this.switchLevel(e,r);break;case 2:n&&(t.maxHdcpLevel=Bt[Bt.indexOf(n)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}i.resolved||this.switchLevel(e,r)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===te.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=Pt(e.mimeType),i=this.hls.levels;for(let s=i.length;s--;)i[s][`${e.sourceBufferName}Codec`]===t&&this.hls.removeLevel(s)}}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){const s=performance.now();if(t){if(this.lastTime){const e=s-this.lastTime,n=i-this.lastDroppedFrames,r=t-this.lastDecodedFrames,o=1e3*n/e,a=this.hls;if(a.trigger(ie.FPS_DROP,{currentDropped:n,currentDecoded:r,totalDroppedFrames:i}),o>0&&n>a.config.fpsDroppedMonitoringThreshold*r){let e=a.currentLevel;a.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===a.autoLevelCapping||a.autoLevelCapping>=e)&&(e-=1,a.trigger(ie.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:a.currentLevel}),a.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:es,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:ka,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends zs{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",de),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ie.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ie.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(ie.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ie.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(ie.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ie.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ie.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(ie.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ie.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(ie.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Bs,this.setInterval(500),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:s}=t;if(Ve(i)&&(this.fragPrevious=i),this.state=Bs,!s)return;const n=this.tracksBuffered[this.currentTrackId];if(!n)return;let r;const o=i.start;for(let e=0;e<n.length;e++)if(o>=n[e].start&&o<=n[e].end){r=n[e];break}const a=i.start+i.duration;r?r.end=a:(r={start:o,end:a},n.push(r)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:i,endOffset:s}=t;if(0===i&&s!==Number.POSITIVE_INFINITY){const e=s-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach((t=>{for(let i=0;i<t.length;)if(t[i].end<=e)t.shift();else{if(!(t[i].start<e))break;t[i].start=e,i++}})),this.fragmentTracker.removeFragmentsInRange(i,e,de)}}onError(e,t){const i=t.frag;(null==i?void 0:i.type)===de&&(t.details===te.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==xs&&(this.state=Bs))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&Cr(this.levels,t)?this.levels=t.map((e=>new Vt(e))):(this.tracksBuffered=[],this.levels=t.map((e=>{const t=new Vt(e);return this.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,de),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,null==(i=this.levels)||!i.length||-1===this.currentTrackId)return void this.clearInterval();const s=this.levels[this.currentTrackId];null!=s&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==xs&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:s,levels:n}=this,{details:r,id:o}=t;if(!n)return void this.warn(`Subtitle tracks were reset while loading level ${o}`);const a=n[o];if(o>=n.length||!a)return;this.log(`Subtitle track ${o} loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(r.live||null!=(i=a.details)&&i.live){const e=this.mainDetails;if(r.deltaUpdateFailed||!e)return;const t=e.fragments[0];var d;a.details?(l=this.alignPlaylists(r,a.details,null==(d=this.levelLastLoaded)?void 0:d.details),0===l&&t&&(l=t.start,Rs(r,l))):r.hasProgramDateTime&&e.hasProgramDateTime?(Ms(r,e),l=r.fragmentStart):t&&(l=t.start,Rs(r,l))}a.details=r,this.levelLastLoaded=a,o===s&&(this.hls.trigger(ie.SUBTITLE_TRACK_UPDATED,{details:r,id:o,groupId:t.groupId}),this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===Bs)&&(Jt(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),a.details=void 0))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,s=t.decryptdata,n=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&null!=s&&s.key&&s.iv&&$i(s.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer,Vi(s.method)).catch((e=>{throw n.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((i=>{const s=performance.now();n.trigger(ie.FRAG_DECRYPTED,{frag:t,payload:i,stats:{tstart:e,tdecrypt:s}})})).catch((e=>{this.warn(`${e.name}: ${e.message}`),this.state=Bs}))}}doTick(){if(this.media){if(this.state===Bs){const{currentTrackId:e,levels:t}=this,i=null==t?void 0:t[e];if(!i||!t.length||!i.details)return;if(this.waitForLive(i))return;const{config:s}=this,n=this.getLoadPosition(),r=Ii.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n,s.maxBufferHole),{end:o,len:a}=r,l=i.details;if(a>this.hls.maxBufferLength+l.levelTargetDuration)return;const d=l.fragments,c=d.length,h=l.edge;let u=null;const f=this.fragPrevious;if(o<h){const e=s.maxFragLookUpTolerance,t=o>h-e?0:e;u=Jt(f,d,Math.max(d[0].start,o),t),!u&&f&&f.start<d[0].start&&(u=d[0])}else u=d[c-1];if(u=this.filterReplacedPrimary(u,i.details),!u)return;const p=d[u.sn-l.startSN-1];if(p&&p.cc===u.cc&&this.fragmentTracker.getState(p)===di&&(u=p),this.fragmentTracker.getState(u)===di){const e=this.mapToInitFragWhenRequired(u);e&&this.loadFragment(e,i,o)}}}else this.state=Bs}loadFragment(e,t,i){Ve(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new Mo(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends _r{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=Eo(this.media.textTracks);for(let i=0;i<t.length;i++)if("hidden"===t[i].mode)e=t[i];else if("showing"===t[i].mode){e=t[i];break}const i=this.findTrackForTextTrack(e);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ie.LEVEL_LOADING,this.onLevelLoading,this),e.on(ie.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ie.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(ie.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ie.LEVEL_LOADING,this.onLevelLoading,this),e.off(ie.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ie.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(ie.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const i=this.media;if(!i)return;const s=!!t.transferMedia;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s||Eo(i.textTracks).forEach((e=>{vo(e)}))}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:s,details:n}=t,r=this.tracksInGroup[i];if(!r||r.groupId!==s)return void this.warn(`Subtitle track with id:${i} and group:${s} not found in active group ${null==r?void 0:r.groupId}`);const o=r.details;r.details=t.details,this.log(`Subtitle track ${i} "${r.name}" lang:${r.lang} group:${s} loaded [${n.startSN}-${n.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,s=this.groupIds;let n=this.currentTrack;if(!i||(null==s?void 0:s.length)!==(null==i?void 0:i.length)||null!=i&&i.some((e=>-1===(null==s?void 0:s.indexOf(e))))){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!i||-1!==i.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!n&&t){this.selectDefaultTrack=!1;const i=Wt(t,e);if(i>-1)n=e[i];else{const e=Wt(t,this.tracks);n=this.tracks[e]}}let s=this.findTrackId(n);-1===s&&n&&(s=this.findTrackId(null));const r={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==i?void 0:i.join(",")}" group-id`),this.hls.trigger(ie.SUBTITLE_TRACKS_UPDATED,r),-1!==s&&-1===this.trackId&&this.setSubtitleTrack(s)}}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const n=t[s];if((!i||n.default)&&(i||e)&&(!e||zt(n,e)))return s}if(e){for(let i=0;i<t.length;i++){const s=t[i];if(Rr(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const s=t[i];if(Rr(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++)if(Lr(t[i],e))return i}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==oe||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&zt(e,i))return i;const s=Wt(e,this.tracksInGroup);if(s>-1){const e=this.tracksInGroup[s];return this.setSubtitleTrack(s),e}if(i)return null;{const i=Wt(e,t);if(i>-1)return t[i]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,n=this.getUrlWithDirectives(e.url,t),r=e.details,o=null==r?void 0:r.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${s}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${o&&r.live?" age "+o.toFixed(1)+(r.type?" "+r.type||0:""):""} ${n}`),this.hls.trigger(ie.SUBTITLE_TRACK_LOADING,{url:n,id:i,groupId:s,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Eo(e.textTracks),i=this.currentTrack;let s;if(i&&(s=t.filter((e=>Lr(i,e)))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach((e=>{"disabled"!==e.mode&&e!==s&&(e.mode="disabled")})),s){const e=this.subtitleDisplay?"showing":"hidden";s.mode!==e&&(s.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!Q(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s)return void this.hls.trigger(ie.SUBTITLE_TRACK_SWITCH,{id:e});const n=!!s.details&&!s.details.live;if(e===this.trackId&&s===i&&n)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:r,groupId:o="",name:a,type:l,url:d}=s;this.hls.trigger(ie.SUBTITLE_TRACK_SWITCH,{id:r,groupId:o,name:a,type:l,url:d});const c=this.switchParams(s.url,null==i?void 0:i.details,s.details);this.loadPlaylist(c)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ie.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(ie.FRAG_LOADING,this.onFragLoading,this),e.on(ie.FRAG_LOADED,this.onFragLoaded,this),e.on(ie.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(ie.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(ie.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ie.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(ie.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ie.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(ie.FRAG_LOADING,this.onFragLoading,this),e.off(ie.FRAG_LOADED,this.onFragLoaded,this),e.off(ie.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(ie.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(ie.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ie.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(ie.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Ca(this,"textTrack1"),t=new Ca(this,"textTrack2"),i=new Ca(this,"textTrack3"),s=new Ca(this,"textTrack4");this.cea608Parser1=new Zo(1,e,t),this.cea608Parser2=new Zo(3,i,s)}addCues(e,t,i,s,n){let r=!1;for(let e=n.length;e--;){const s=n[e],c=(o=s[0],a=s[1],l=t,d=i,Math.min(a,d)-Math.max(o,l));if(c>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],i),r=!0,c/(i-t)>.5))return}var o,a,l,d;if(r||n.push([t,i]),this.config.renderTextTracksNatively){const n=this.captionsTracks[e];this.Cues.newCue(n,t,i,s)}else{const n=this.Cues.newCue(null,t,i,s);this.hls.trigger(ie.CUES_PARSED,{type:"captions",cues:n,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:n}){const{unparsedVttFrags:r}=this;i===ae&&(this.initPTS[t.cc]={baseTime:s,timescale:n}),r.length&&(this.unparsedVttFrags=[],r.forEach((e=>{this.onFragLoaded(ie.FRAG_LOADED,e)})))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const n=i.textTracks[s];if(La(n,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return n}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:s}=this,{label:n,languageCode:r}=t[e],o=this.getExistingTrack(n,r);if(o)i[e]=o,vo(i[e]),go(i[e],s);else{const t=this.createTextTrack("captions",n,r);t&&(t[e]=!0,i[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(ie.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,i){const s=this.media;if(s)return s.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const i=!!t.transferMedia;if(this.media=null,i)return;const{captionsTracks:s}=this;Object.keys(s).forEach((e=>{vo(s[e]),delete s[e]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let e=0;e<t.length;e++)vo(t[e])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],s=i.some((e=>e.textCodec===pa));if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(Cr(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const e=this.media,t=e?Eo(e.textTracks):null;if(this.tracks.forEach(((e,i)=>{let s;if(t){let i=null;for(let s=0;s<t.length;s++)if(t[s]&&La(t[s],e)){i=t[s],t[s]=null;break}i&&(s=i)}if(s)vo(s);else{const t=Ra(e);s=this.createTextTrack(t,e.name,e.lang),s&&(s.mode="disabled")}s&&this.textTracks.push(s)})),null!=t&&t.length){const e=t.filter((e=>null!==e)).map((e=>e.label));e.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(ie.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const i=`textTrack${t[1]}`,s=this.captionsProperties[i];s&&(s.label=e.name,e.lang&&(s.languageCode=e.lang),s.media=e)}))}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===ae){var i,s;const{cea608Parser1:e,cea608Parser2:n,lastSn:r}=this,{cc:o,sn:a}=t.frag,l=null!=(i=null==(s=t.part)?void 0:s.index)?i:-1;e&&n&&(a!==r+1||a===r&&l!==this.lastPartIndex+1||o!==this.lastCc)&&(e.reset(),n.reset()),this.lastCc=o,this.lastSn=a,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:i,payload:s}=t;if(i.type===de)if(s.byteLength){const e=i.decryptdata,n="stats"in t;if(null==e||!e.encrypted||n){const e=this.tracks[i.level],n=this.vttCCs;n[i.cc]||(n[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),e&&e.textCodec===pa?this._parseIMSC1(i,s):this._parseVTTs(t)}}else this.hls.trigger(ie.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;Aa(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),i.trigger(ie.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(t=>{i.logger.log(`Failed to parse IMSC1: ${t}`),i.trigger(ie.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))}_parseVTTs(e){var t;const{frag:i,payload:s}=e,{initPTS:n,unparsedVttFrags:r}=this,o=n.length-1;if(!n[i.cc]&&-1===o)return void r.push(e);const a=this.hls;!function(e,t,i,s,n,r,o){const a=new ca,l=Ce(new Uint8Array(e)).trim().replace(ha,"\n").split("\n"),d=[],c=t?function(e,t=1){return rr(e,9e4,1/t)}(t.baseTime,t.timescale):0;let h,u="00:00.000",f=0,p=0,g=!0;a.oncue=function(e){const r=i[s];let o=i.ccOffset;const a=(f-c)/9e4;if(null!=r&&r.new&&(void 0!==p?o=i.ccOffset=r.start:function(e,t,i){let s=e[t],n=e[s.prevCC];if(!n||!n.new&&s.new)return e.ccOffset=e.presentationOffset=s.start,void(s.new=!1);for(;null!=(r=n)&&r.new;){var r;e.ccOffset+=s.start-n.start,s.new=!1,s=n,n=e[s.prevCC]}e.presentationOffset=i}(i,s,a)),a){if(!t)return void(h=new Error("Missing initPTS for VTT MPEGTS"));o=a-i.presentationOffset}const l=e.endTime-e.startTime,u=ur(9e4*(e.startTime+o-p),9e4*n)/9e4;e.startTime=Math.max(u,0),e.endTime=Math.max(u+l,0);const g=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(g)),e.id||(e.id=fa(e.startTime,e.endTime,g)),e.endTime>0&&d.push(e)},a.onparsingerror=function(e){h=e},a.onflush=function(){h?o(h):r(d)},l.forEach((e=>{if(g){if(ua(e,"X-TIMESTAMP-MAP=")){g=!1,e.slice(16).split(",").forEach((e=>{ua(e,"LOCAL:")?u=e.slice(6):ua(e,"MPEGTS:")&&(f=parseInt(e.slice(7)))}));try{p=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),n=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(Q(t)&&Q(i)&&Q(s)&&Q(n)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=6e4*s,t+=36e5*n,t}(u)/1e3}catch(e){h=e}return}""===e&&(g=!1)}a.parse(e+"\n")})),a.flush()}(null!=(t=i.initSegment)&&t.data?ct(i.initSegment.data,new Uint8Array(s)).buffer:s,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,(e=>{this._appendCues(e,i.level),a.trigger(ie.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})}),(t=>{const n="Missing initPTS for VTT MPEGTS"===t.message;n?r.push(e):this._fallbackToIMSC1(i,s),a.logger.log(`Failed to parse VTT cue: ${t}`),n&&o>i.cc||a.trigger(ie.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:t})}))}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||Aa(t,this.initPTS[e.cc],(()=>{i.textCodec=pa,this._parseIMSC1(e,t)}),(()=>{i.textCodec="wvtt"}))}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach((e=>mo(i,e)))}else{const s=this.tracks[t];if(!s)return;const n=s.default?"default":"subtitles"+t;i.trigger(ie.CUES_PARSED,{type:"subtitles",cues:e,track:n})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===de&&this.onFragLoaded(ie.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:s}=t;if(i.type!==ae||"NONE"!==this.closedCaptionsForLevel(i))for(let e=0;e<s.length;e++){const t=s[e].bytes;if(t){this.cea608Parser1||this.initCea608Parsers();const i=this.extractCea608Data(t);this.cea608Parser1.addData(s[e].pts,i[0]),this.cea608Parser2.addData(s[e].pts,i[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:s,type:n}){const{media:r}=this;if(r&&!(r.currentTime<i)){if(!n||"video"===n){const{captionsTracks:e}=this;Object.keys(e).forEach((s=>Ao(e[s],t,i)))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==s){const{textTracks:e}=this;Object.keys(e).forEach((i=>Ao(e[i],t,s)))}}}extractCea608Data(e){const t=[[],[]],i=31&e[0];let s=2;for(let n=0;n<i;n++){const i=e[s++],n=127&e[s++],r=127&e[s++];if((0!==n||0!==r)&&4&i){const e=3&i;0!==e&&1!==e||(t[e].push(n),t[e].push(r))}}return t}},audioStreamController:class extends zs{constructor(e,t,i){super(e,t,i,"audio-stream-controller",le),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ie.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(ie.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ie.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ie.BUFFER_RESET,this.onBufferReset,this),e.on(ie.BUFFER_CREATED,this.onBufferCreated,this),e.on(ie.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ie.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ie.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(ie.FRAG_LOADING,this.onFragLoading,this),e.on(ie.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ie.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(ie.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ie.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ie.BUFFER_RESET,this.onBufferReset,this),e.off(ie.BUFFER_CREATED,this.onBufferCreated,this),e.off(ie.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ie.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ie.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(ie.FRAG_LOADING,this.onFragLoading,this),e.off(ie.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:n}){if(i===ae){const e=t.cc,i=this.fragCurrent;if(this.initPTS[e]={baseTime:s,timescale:n},this.log(`InitPTS for cc: ${e} found from main: ${s}/${n}`),this.mainAnchor=t,this.state===Ys){const i=this.waitingData;(!i&&!this.loadingParts||i&&i.frag.cc!==e)&&(this.nextLoadPosition=this.findSyncFrag(t).start),this.tick()}else!this.hls.hasEnoughToStart&&i&&i.cc!==e?(this.startFragRequested=!1,this.nextLoadPosition=this.findSyncFrag(t).start,i.abortRequests(),this.resetLoadingState()):this.state===Bs&&this.tick()}}findSyncFrag(e){const t=this.getLevelDetails(),i=e.cc;return function(e,t,i){if(e&&e.startCC<=t&&e.endCC>=t){const s=i.start,n=i.end;let r=e.fragments;if(!i.relurl){const{fragmentHint:t}=e;t&&(r=r.concat(t))}return Zt(r,(e=>e.cc<t||e.end<=s?1:e.cc>t||e.start>=n?-1:0))}return null}(t,i,e)||t&&ii(t.fragments,i)||e}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=xs);const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),i>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=Bs):this.state=Vs,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Bs:this.doTickIdle();break;case Vs:{const{levels:e,trackId:t}=this,i=null==e?void 0:e[t],s=null==i?void 0:i.details;if(s&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(s))break;this.state=Ys}break}case $s:{var e;const t=performance.now(),i=this.retryDate;if(!i||t>=i||null!=(e=this.media)&&e.seeking){const{levels:e,trackId:t}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==e?void 0:e[t])||null),this.state=Bs}break}case Ys:{const e=this.waitingData;if(e){const{frag:t,part:i,cache:s,complete:n}=e,r=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=Us;const e={frag:t,part:i,payload:s.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(e),n&&super._handleFragmentLoadComplete(e)}else r&&r.cc!==e.frag.cc&&(this.log(`Waiting fragment cc (${t.cc}) cancelled because video is at cc ${r.cc}`),this.nextLoadPosition=this.findSyncFrag(r).start,this.clearWaitingFragment())}else this.state=Bs}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.state!==xs&&(this.state=Bs))}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:i,media:s,trackId:n}=this,r=t.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!r.startFragPrefetch)||null==i||!i[n])return;const o=i[n],a=o.details;if(!a||this.waitForLive(o)||this.waitForCdnTuneIn(a))return this.state=Vs,void(this.startFragRequested=!1);const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Be,le));const d=this.getFwdBufferInfo(l,le);if(null===d)return;if(!this.switchingTrack&&this._streamEnded(d,a))return t.trigger(ie.BUFFER_EOS,{type:"audio"}),void(this.state=Ks);const c=d.len,h=t.maxBufferLength,u=a.fragments,f=u[0].start,p=this.getLoadPosition(),g=this.flushing?p:d.end;if(this.switchingTrack&&s){const e=p;a.PTSKnown&&e<f&&(d.end>f||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=f+.05)}if(c>=h&&!this.switchingTrack&&g<u[u.length-1].start)return;let m=this.getNextFragment(g,a);if(m&&this.isLoopLoading(m,g)&&(m=this.getNextFragmentLoopLoading(m,a,d,ae,h)),!m)return void(this.bufferFlushed=!0);let v=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&v&&Ve(m)&&!m.endList&&(!a.live||!this.loadingParts&&g<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(v)===ui&&(this.mainFragLoading=v=null),v&&Ve(v))){if(m.start>v.end){const e=this.fragmentTracker.getFragAtPos(g,ae);e&&e.end>v.end&&(v=e,this.mainFragLoading={frag:e,targetBufferTime:null})}if(m.start>v.end)return}this.loadFragment(m,o,g)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map((e=>new Vt(e)))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==xs&&(this.setInterval(100),this.state=Bs,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(ie.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;const{levels:s}=this,{details:n,id:r,groupId:o,track:a}=t;if(!s)return void this.warn(`Audio tracks reset while loading track ${r} "${a.name}" of "${o}"`);const l=this.mainDetails;if(!l||n.endCC>l.endCC||l.expired)return this.cachedTrackLoadedData=t,void(this.state!==xs&&(this.state=Vs));this.cachedTrackLoadedData=null,this.log(`Audio track ${r} "${a.name}" of "${o}" loaded [${n.startSN},${n.endSN}]${n.lastPartSn?`[part-${n.lastPartSn}-${n.lastPartIndex}]`:""},duration:${n.totalduration}`);const d=s[r];let c=0;if(n.live||null!=(i=d.details)&&i.live){if(this.checkLiveUpdate(n),n.deltaUpdateFailed)return;var h;d.details&&(c=this.alignPlaylists(n,d.details,null==(h=this.levelLastLoaded)?void 0:h.details)),n.alignedSliding||(Ns(n,l),n.alignedSliding||Ms(n,l),c=n.fragmentStart)}d.details=n,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(l,c),this.hls.trigger(ie.AUDIO_TRACK_UPDATED,{details:n,id:r,groupId:t.groupId}),this.state!==Vs||this.waitForCdnTuneIn(n)||(this.state=Bs),this.tick()}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:n}=e,{config:r,trackId:o,levels:a}=this;if(!a)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const l=a[o];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const d=l.details;if(!d)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(i.start);const c=r.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new Sr(this.hls,le,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const u=this.initPTS[i.cc],f=null==(t=i.initSegment)?void 0:t.data;if(void 0!==u){const e=!1,t=s?s.index:-1,r=-1!==t,o=new Ri(i.level,i.sn,i.stats.chunkCount,n.byteLength,t,r);h.push(n,f,c,"",i,s,d.totalduration,e,o,u)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${d.startSN} ,${d.endSN}],track ${o}`);const{cache:e}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new Xs,complete:!1};e.push(new Uint8Array(n)),this.state!==xs&&(this.state=Ys)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===ae&&Ve(t.frag)&&(this.mainFragLoading=t,this.state===Bs&&this.tick())}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i.type===le)if(this.fragContextChanged(i))this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if(Ve(i)){this.fragPrevious=i;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(ie.AUDIO_TRACK_SWITCHED,ge({},e)))}this.fragBufferedComplete(i,s),this.media&&this.tick()}else this.audioOnly||i.type!==ae||i.elementaryStreams.video||i.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var i;if(t.fatal)this.state=Hs;else switch(t.details){case te.FRAG_GAP:case te.FRAG_PARSING_ERROR:case te.FRAG_DECRYPT_ERROR:case te.FRAG_LOAD_ERROR:case te.FRAG_LOAD_TIMEOUT:case te.KEY_LOAD_ERROR:case te.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(le,t);break;case te.AUDIO_TRACK_LOAD_ERROR:case te.AUDIO_TRACK_LOAD_TIMEOUT:case te.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Vs||(null==(i=t.context)?void 0:i.type)!==re||(this.state=Bs);break;case te.BUFFER_ADD_CODEC_ERROR:case te.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.resetLoadingState();break;case te.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case te.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==Fe&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Fe){this.flushing=!1,this.bufferFlushed=!0,this.state===Ks&&(this.state=Bs);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,le),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:s}=this,{remuxResult:n,chunkMeta:r}=e,o=this.getCurrentContext(r);if(!o)return void this.resetWhenMissingContext(r);const{frag:a,part:l,level:d}=o,{details:c}=d,{audio:h,text:u,id3:f,initSegment:p}=n;if(!this.fragContextChanged(a)&&c){if(this.state=Gs,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){const e=a.initSegment||a;this._bufferInitSegment(d,p.tracks,e,r),s.trigger(ie.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:i,tracks:p.tracks})}if(h){const{startPTS:e,endPTS:t,startDTS:i,endDTS:s}=h;l&&(l.elementaryStreams[Be]={startPTS:e,endPTS:t,startDTS:i,endDTS:s}),a.setElementaryStreamInfo(Be,e,t,i,s),this.bufferFragmentData(h,a,l,r)}if(null!=f&&null!=(t=f.samples)&&t.length){const e=fe({id:i,frag:a,details:c},f);s.trigger(ie.FRAG_PARSING_METADATA,e)}if(u){const e=fe({id:i,frag:a,details:c},u);s.trigger(ie.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(a)}_bufferInitSegment(e,t,i,s){if(this.state!==Gs)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const n=t.audio;n.id=le;const r=e.audioCodec;this.log(`Init audio buffer, container:${n.container}, codecs[level/parsed]=[${r}/${n.codec}]`),r&&1===r.split(",").length&&(n.levelCodec=r),this.hls.trigger(ie.BUFFER_CODECS,t);const o=n.initSegment;if(null!=o&&o.byteLength){const e={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:o};this.hls.trigger(ie.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);var n;if(this.switchingTrack||s===di||s===hi)if(Ve(e))if(null!=(n=t.details)&&n.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Ys;const i=this.mainDetails;i&&i.fragmentStart!==t.details.fragmentStart&&Ms(t.details,i)}else super.loadFragment(e,t,i);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:s,characteristics:n,audioCodec:r,channels:o}=this.bufferedTrack;zt({name:t,lang:i,assocLang:s,characteristics:n,audioCodec:r,channels:o},e,qt)||(Qt(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(ie.AUDIO_TRACK_SWITCHED,ge({},e))}},audioTrackController:class extends _r{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ie.LEVEL_LOADING,this.onLevelLoading,this),e.on(ie.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(ie.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(ie.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ie.LEVEL_LOADING,this.onLevelLoading,this),e.off(ie.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(ie.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(ie.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:s,details:n}=t,r=this.tracksInGroup[i];if(!r||r.groupId!==s)return void this.warn(`Audio track with id:${i} and group:${s} not found in active group ${null==r?void 0:r.groupId}`);const o=r.details;r.details=t.details,this.log(`Audio track ${i} "${r.name}" lang:${r.lang} group:${s} loaded [${n.startSN}-${n.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,s=this.groupIds;let n=this.currentTrack;if(!i||(null==s?void 0:s.length)!==(null==i?void 0:i.length)||null!=i&&i.some((e=>-1===(null==s?void 0:s.indexOf(e))))){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter((e=>!i||-1!==i.indexOf(e.groupId)));if(e.length)this.selectDefaultTrack&&!e.some((e=>e.default))&&(this.selectDefaultTrack=!1),e.forEach(((e,t)=>{e.id=t}));else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!n&&t){const i=Wt(t,e,qt);if(i>-1)n=e[i];else{const e=Wt(t,this.tracks);n=this.tracks[e]}}let s=this.findTrackId(n);-1===s&&n&&(s=this.findTrackId(null));const o={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==i?void 0:i.join(",")}`),this.hls.trigger(ie.AUDIO_TRACKS_UPDATED,o);const a=this.trackId;if(-1!==s&&-1===a)this.setAudioTrack(s);else if(e.length&&-1===a){var r;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(r=this.groupIds)?void 0:r.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==re||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&zt(e,s,qt))return s;const n=Wt(e,this.tracksInGroup,qt);if(n>-1){const e=this.tracksInGroup[n];return this.setAudioTrack(n),e}if(s){let s=t.loadLevel;-1===s&&(s=t.firstAutoLevel);const n=function(e,t,i,s,n){const r=t[s],o=t.reduce(((e,t,i)=>{const s=t.uri;return(e[s]||(e[s]=[])).push(i),e}),{})[r.uri];o.length>1&&(s=Math.max.apply(Math,o));const a=r.videoRange,l=r.frameRate,d=r.codecSet.substring(0,4),c=Xt(t,s,(t=>{if(t.videoRange!==a||t.frameRate!==l||t.codecSet.substring(0,4)!==d)return!1;const s=t.audioGroups,r=i.filter((e=>!s||-1!==s.indexOf(e.groupId)));return Wt(e,r,n)>-1}));return c>-1?c:Xt(t,s,(t=>{const s=t.audioGroups,r=i.filter((e=>!s||-1!==s.indexOf(e.groupId)));return Wt(e,r,n)>-1}))}(e,t.levels,i,s,qt);if(-1===n)return null;t.nextLoadLevel=n}if(e.channels||e.audioCodec){const t=Wt(e,i);if(t>-1)return i[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e],n=s.details&&!s.details.live;if(e===this.trackId&&s===i&&n)return;if(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(ie.AUDIO_TRACK_SWITCHING,ge({},s)),n)return;const r=this.switchParams(s.url,null==i?void 0:i.details,s.details);this.loadPlaylist(r)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if((!this.selectDefaultTrack||s.default)&&(!e||zt(e,s,qt)))return i}if(e){const{name:i,lang:s,assocLang:n,characteristics:r,audioCodec:o,channels:a}=e;for(let e=0;e<t.length;e++)if(zt({name:i,lang:s,assocLang:n,characteristics:r,audioCodec:o,channels:a},t[e],qt))return e;for(let i=0;i<t.length;i++){const s=t[i];if(Rr(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const s=t[i];if(Rr(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Qt(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,n=this.getUrlWithDirectives(e.url,t),r=e.details,o=null==r?void 0:r.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${s}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${o&&r.live?" age "+o.toFixed(1)+(r.type?" "+r.type||0:""):""} ${n}`),this.hls.trigger(ie.AUDIO_TRACK_LOADING,{url:n,id:i,groupId:s,deliveryDirectives:t||null,track:e})}},emeController:fo,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:Mr,su:!this.initialized})}catch(e){this.hls.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=e=>{try{const{frag:t,part:i}=e,s=this.hls.levels[t.level],n=this.getObjectType(t),r={d:1e3*(i||t).duration,ot:n};n!==Br&&n!==xr&&n!=Fr||(r.br=s.bitrate/1e3,r.tb=this.getTopBandwidth(n)/1e3,r.bl=this.getBufferLength(n));const o=i?this.getNextPart(i):this.getNextFrag(t);null!=o&&o.url&&o.url!==t.url&&(r.nor=o.url),this.apply(e,r)}catch(e){this.hls.logger.warn("Could not generate segment CMCD data.",e)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;null!=i&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ie.MEDIA_DETACHED,this.onMediaDetached,this),e.on(ie.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ie.MEDIA_DETACHED,this.onMediaDetached,this),e.off(ie.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,s;this.audioBuffer=null==(i=t.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(s=t.tracks.video)?void 0:s.buffer}createData(){var e;return{v:1,sf:Vr,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){fe(t,this.createData());const i=t.ot===Ur||t.ot===Br||t.ot===Fr;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce(((e,i)=>(s.includes(i)&&(e[i]=t[i]),e)),{}));const n={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),function(e,t,i){fe(e,function(e,t={}){const i={};if(!e)return i;const s=Object.entries(e),n=Object.entries(Yr).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),r=s.reduce(((e,t)=>{var i,s;const[r,o]=t,a=(null===(i=n.find((e=>e[1].includes(r))))||void 0===i?void 0:i[0])||jr;return null!==(s=e[a])&&void 0!==s||(e[a]={}),e[a][r]=o,e}),{});return Object.entries(r).reduce(((e,[i,s])=>(e[i]=lo(s,t),e)),i)}(t,i))}(e.headers,t,n)):e.url=function(e,t,i){const s=function(e,t={}){if(!e)return"";const i=lo(e,t);return`CMCD=${encodeURIComponent(i)}`}(t,i);if(!s)return e;if(co.test(e))return e.replace(co,s);const n=e.includes("?")?"&":"?";return`${e}${n}${s}`}(e.url,t,n)}getNextFrag(e){var t;const i=null==(t=this.hls.levels[e.level])?void 0:t.details;if(i){const t=e.sn-i.startSN;return i.fragments[t+1]}}getNextPart(e){var t,i;const{index:s,fragment:n}=e,r=null==(t=this.hls.levels[n.level])||null==(i=t.details)?void 0:i.partList;if(r){const{sn:e}=n;for(let t=r.length-1;t>=0;t--){const i=r[t];if(i.index===s&&i.fragment.sn===e)return r[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?$r:"initSegment"===e.sn?Ur:"audio"===t?xr:"main"===t?this.hls.audioTracks.length?Br:Fr:void 0}getTopBandwidth(e){let t,i=0;const s=this.hls;if(e===xr)t=s.audioTracks;else{const e=s.maxAutoLevel,i=e>-1?e+1:s.levels.length;t=s.levels.slice(0,i)}for(const e of t)e.bitrate>i&&(i=e.bitrate);return i>0?i:NaN}getBufferLength(e){const t=this.media,i=e===xr?this.audioBuffer:this.videoBuffer;return i&&t?1e3*Ii.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len:NaN}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new i(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,i,s){t(e),this.loader.load(e,i,s)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new i(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,i,s){t(e),this.loader.load(e,i,s)}}}},contentSteeringController:class extends me{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ie.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ie.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce(((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e)),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter((t=>t!==e)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;null!==i&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if(2===(null==i?void 0:i.action)&&1===i.flags){const e=this.levels;let s=this._pathwayPriority,n=this.pathwayId;if(t.context){const{groupId:i,pathwayId:s,type:r}=t.context;i&&e?n=this.getPathwayForGroupId(i,r,n):s&&(n=s)}n in this.penalizedPathways||(this.penalizedPathways[n]=performance.now()),!s&&e&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==n),i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${n} levels: ${e?e.length:e} priorities: ${jt(s)} penalized: ${jt(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter((t=>e===t.pathwayId))}updatePathwayPriority(e){let t;this._pathwayPriority=e;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach((e=>{s-i[e]>3e5&&delete i[e]}));for(let s=0;s<e.length;s++){const n=e[s];if(n in i)continue;if(n===this.pathwayId)return;const r=this.hls.nextLoadLevel,o=this.hls.levels[r];if(t=this.getLevelsForPathway(n),t.length>0){this.log(`Setting Pathway to "${n}"`),this.pathwayId=n,ws(t),this.hls.trigger(ie.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[r];o&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==o.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==o.bitrate&&this.log(`Unstable Pathways change from bitrate ${o.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=r);break}}}getPathwayForGroupId(e,t,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let i=0;i<s.length;i++)if(t===re&&s[i].hasAudioGroup(e)||t===oe&&s[i].hasSubtitleGroup(e))return s[i].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},s={};e.forEach((e=>{const{ID:n,"BASE-ID":r,"URI-REPLACEMENT":o}=e;if(t.some((e=>e.pathwayId===n)))return;const a=this.getLevelsForPathway(r).map((e=>{const t=new xi(e.attrs);t["PATHWAY-ID"]=n;const r=t.AUDIO&&`${t.AUDIO}_clone_${n}`,a=t.SUBTITLES&&`${t.SUBTITLES}_clone_${n}`;r&&(i[t.AUDIO]=r,t.AUDIO=r),a&&(s[t.SUBTITLES]=a,t.SUBTITLES=a);const l=uo(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",o),d=new Vt({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let t=1;t<e.audioGroups.length;t++)d.addGroupId("audio",`${e.audioGroups[t]}_clone_${n}`);if(e.subtitleGroups)for(let t=1;t<e.subtitleGroups.length;t++)d.addGroupId("text",`${e.subtitleGroups[t]}_clone_${n}`);return d}));t.push(...a),ho(this.audioTracks,i,o,n),ho(this.subtitleTracks,s,o,n)}))}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;let s;this.loader&&this.loader.destroy(),this.loader=new i(t);try{s=new self.URL(e)}catch(t){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==s.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+e)}const n={responseType:"json",url:s.href},r=t.steeringManifestLoadPolicy.default,o=r.errorRetry||r.timeoutRetry||{},a={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(e,t,i,n)=>{this.log(`Loaded steering manifest: "${s}"`);const r=e.data;if(1!==(null==r?void 0:r.VERSION))return void this.log(`Steering VERSION ${r.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=r.TTL;const{"RELOAD-URI":o,"PATHWAY-CLONES":a,"PATHWAY-PRIORITY":l}=r;if(o)try{this.uri=new self.URL(o,s).href}catch(e){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${o}`)}this.scheduleRefresh(this.uri||i.url),a&&this.clonePathways(a);const d={steeringManifest:r,url:s.toString()};this.hls.trigger(ie.STEERING_MANIFEST_LOADED,d),l&&this.updatePathwayPriority(l)},onError:(e,t,i,s)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let n=1e3*this.timeToLoad;if(429!==e.code)this.scheduleRefresh(this.uri||t.url,n);else{const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(n=1e3*parseFloat(t))}this.log(`Steering manifest ${t.url} rate limited`)}},onTimeout:(e,t,i)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(n,a,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var t;const i=null==(t=this.hls)?void 0:t.media;!i||i.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)}),t)}},interstitialsController:class extends me{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;const t=e-this.timelinePos;if(Math.abs(t)<1/7056e5)return;const i=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const s=this.playingItem;if(!s)return void this.checkBuffer();if(i&&this.schedule.resetErrorsInRange(e,e-t)&&this.updateSchedule(),this.checkBuffer(),i&&e<s.start||e>=s.end){var n;const e=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(s)&&null!=(n=this.media)&&n.paused&&(this.shouldPlay=!1),!i){const t=this.findItemIndex(s);if(e>t){const i=this.schedule.findJumpRestrictedIndex(t+1,e);if(i>t)return void this.setSchedulePosition(i)}}return void this.setSchedulePosition(e)}const r=this.playingAsset;if(!r){if(this.playingLastItem&&this.isInterstitial(s)){const t=s.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const o=r.timelineStart,a=r.duration||0;(i&&e<o||e>=o+a)&&this.setScheduleToAssetAtTime(e,r)},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const i=this.playingAsset;i&&e>=i.timelineStart+(i.duration||0)&&this.setScheduleToAssetAtTime(e,i)},this.onScheduleUpdate=(e,t)=>{const i=this.schedule,s=this.playingItem,n=i.events||[],r=i.items||[],o=i.durations,a=e.map((e=>e.identifier)),l=!(!n.length&&!a.length);if(l&&this.log(`INTERSTITIALS_UPDATED (${n.length}): ${n}\nSchedule: ${r.map((e=>wo(e)))}`),a.length&&this.log(`Removed events ${a}`),this.playerQueue.forEach((e=>{if(e.interstitial.appendInPlace){const t=e.assetItem.timelineStart,i=e.timelineOffset-t;if(i)try{e.timelineOffset=t}catch(s){Math.abs(i)>To&&this.warn(`${s} ("${e.assetId}" ${e.timelineOffset}->${t})`)}}})),s){const e=this.updateItem(s,this.timelinePos);this.itemsMatch(s,e)&&(this.playingItem=e,this.waitingItem=this.endedItem=null)}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const d=this.bufferingItem;if(d){const e=this.updateItem(d,this.bufferedPos);this.itemsMatch(d,e)?this.bufferingItem=e:d.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(d.event,null))}if(e.forEach((e=>{e.assetList.forEach((e=>{this.clearAssetPlayer(e.identifier,null)}))})),l||t){if(this.hls.trigger(ie.INTERSTITIALS_UPDATED,{events:n.slice(0),schedule:r.slice(0),durations:o,removedIds:a}),this.isInterstitial(s)&&a.includes(s.event.identifier))return this.warn(`Interstitial "${s.event.identifier}" removed while playing`),void this.primaryFallback(s.event);this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new Po(e),this.schedule=new ko(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ie.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ie.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(ie.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(ie.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(ie.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(ie.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(ie.BUFFER_APPENDED,this.onBufferAppended,this),e.on(ie.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ie.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(ie.MEDIA_ENDED,this.onMediaEnded,this),e.on(ie.ERROR,this.onError,this),e.on(ie.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ie.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ie.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(ie.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(ie.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(ie.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(ie.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(ie.BUFFER_CODECS,this.onBufferCodecs,this),e.off(ie.BUFFER_APPENDED,this.onBufferAppended,this),e.off(ie.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ie.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(ie.MEDIA_ENDED,this.onMediaEnded,this),e.off(ie.ERROR,this.onError,this),e.off(ie.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Do(e,"play",this.onPlay),Do(e,"pause",this.onPause),Do(e,"seeking",this.onSeeking),Do(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const i=this.media=t.media;Oo(i,"seeking",this.onSeeking),Oo(i,"timeupdate",this.onTimeupdate),Oo(i,"play",this.onPlay),Oo(i,"pause",this.onPause)}onMediaAttached(e,t){const i=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,null===i)this.checkStart();else if(!s){this.clearScheduleState();const e=this.findItemIndex(i);this.setSchedulePosition(e)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(this.media=null,!i&&(s&&this.removeMediaListeners(s),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,t=()=>e.bufferingItem||e.waitingItem,i=t=>t?e.getAssetPlayer(t.identifier):t,s=(t,s,n,o,a)=>{if(t){let l=t[s].start;const d=t.event;if(d){if("playout"===s||d.timelineOccupancy!==bo.Point){const e=i(n);(null==e?void 0:e.interstitial)===d&&(l+=e.assetItem.startOffset+e[a])}}else l+=("bufferedPos"===o?r():e[o])-t.start;return l}return 0},n=(t,i)=>{if(0!==t&&"primary"!==i&&e.schedule.length){var s;const n=e.schedule.findItemIndexAtTime(t),r=null==(s=e.schedule.items)?void 0:s[n];if(r)return t+(r[i].start-r.start)}return t},r=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?o("primary"):Math.max(t,0)},o=t=>{var i;return null!=(i=e.primaryDetails)&&i.live?e.primaryDetails.edge:e.schedule.durations[t]},a=(t,n)=>{var r,o;const a=e.effectivePlayingItem;if(null!=a&&null!=(r=a.event)&&r.restrictions.skip)return;e.log(`seek to ${t} "${n}"`);const l=e.effectivePlayingItem,d=e.schedule.findItemIndexAtTime(t,n),c=null==(o=e.schedule.items)?void 0:o[d],h=e.getBufferingPlayer(),u=null==h?void 0:h.interstitial,f=null==u?void 0:u.appendInPlace,p=l&&e.itemsMatch(l,c);if(l&&(f||p)){const r=i(e.playingAsset),o=(null==r?void 0:r.media)||e.primaryMedia;if(o){const i="primary"===n?o.currentTime:s(l,n,e.playingAsset,"timelinePos","currentTime"),a=t-i,d=(f?i:o.currentTime)+a;if(d>=0&&(!r||f||d<=r.duration))return void(o.currentTime=d)}}if(c){let i=t;if("primary"!==n){const e=t-c[n].start;i=c.start+e}const s=!e.isInterstitial(c);if(e.isInterstitial(l)&&!l.event.appendInPlace||!s&&!c.event.appendInPlace){if(l){const r=e.findItemIndex(l);if(d>r){const t=e.schedule.findJumpRestrictedIndex(r+1,d);if(t>r)return void e.setSchedulePosition(t)}let o=0;if(s)e.timelinePos=i,e.checkBuffer();else{var g;const e=null==c||null==(g=c.event)?void 0:g.assetList;if(e){const i=t-(c[n]||c).start;for(let t=e.length;t--;){const s=e[t];if(s.duration&&i>=s.startOffset&&i<s.startOffset+s.duration){o=t;break}}}}e.setSchedulePosition(d,o)}}else{const t=e.media||(f?null==h?void 0:h.media:null);t&&(t.currentTime=i)}}},l=()=>{const i=e.effectivePlayingItem;if(e.isInterstitial(i))return i;const s=t();return e.isInterstitial(s)?s:null},d={get currentTime(){const t=l(),i=e.effectivePlayingItem;return i&&i===t?s(i,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-i.playout.start:0},set currentTime(t){const i=l(),s=e.effectivePlayingItem;s&&s===i&&a(t+s.playout.start,"playout")},get duration(){const e=l();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const i=null==(t=l())?void 0:t.event.assetList;return i?i.map((t=>e.getAssetPlayer(t.identifier))):[]},get playingIndex(){var t;const i=null==(t=l())?void 0:t.event;return i&&e.effectivePlayingAsset?i.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return l()}};this.manager={get events(){var t,i;return(null==(t=e.schedule)||null==(i=t.events)?void 0:i.slice(0))||[]},get schedule(){var t,i;return(null==(t=e.schedule)||null==(i=t.items)?void 0:i.slice(0))||[]},get interstitialPlayer(){return l()?d:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const i=t();return e.findItemIndex(i)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return r()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){a(e,"primary")},get duration(){return o("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){a(e,"integrated")},get duration(){return o("integrated")},get seekableStart(){var t;return n((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,i=null==t?void 0:t.event;if(i&&!i.restrictions.skip){const s=e.findItemIndex(t);if(i.appendInPlace){const e=t.playout.start+t.event.duration;a(e+.001,"playout")}else e.advanceAfterAssetEnded(i,s,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,i=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&i)&&this.findItemIndex(t)===i.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t,i;if(null===this.mediaSelection)return;const s=this.waitingItem||this.playingItem;if(this.isInterstitial(s)&&!s.event.appendInPlace)return;let n=this.media;!n&&null!=(e=this.bufferingItem)&&null!=(t=e.event)&&t.appendInPlace&&(n=this.primaryMedia);const r=null==(i=n)?void 0:i.currentTime;return void 0!==r&&Q(r)?r:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){const i=e.interstitial.appendInPlace,s=e.media;if(i&&s===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&s)return void(this.detachedData={media:s});const i=e.transferMedia();this.log(`transfer MediaSource from ${e} ${jt(i)}`),this.detachedData=i}else t&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,t){var i,s;if(e.media===t)return;let n=null;const r=this.hls,o=e!==r,a=o&&e.interstitial.appendInPlace,l=null==(i=this.detachedData)?void 0:i.mediaSource;let d;if(r.media)a&&(n=r.transferMedia(),this.detachedData=n),d="Primary";else if(l){const e=this.getBufferingPlayer();e?(n=e.transferMedia(),d=`${e}`):d="detached MediaSource"}else d="detached media";if(!n)if(l)n=this.detachedData,this.log(`using detachedData: MediaSource ${jt(n)}`);else if(!this.detachedData||r.media===t){const e=this.playerQueue;e.length>1&&e.forEach((e=>{if(o&&e.interstitial.appendInPlace!==a){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${t}`)}})),this.hls.detachMedia(),this.detachedData={media:t}}const c=n&&"mediaSource"in n&&"closed"!==(null==(s=n.mediaSource)?void 0:s.readyState),h=c&&n?n:t;if(this.log(`${c?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${d}`),h===n){const t=o&&e.assetId===this.schedule.assetIdAtEnd;h.overrides={duration:this.schedule.duration,endOfStream:!o||t,cueRemoval:!o}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const i=this.timelinePos,s=this.effectivePlayingItem;if(-1===i){const i=this.hls.startPosition;if(this.timelinePos=i,t.length&&t[0].cue.pre){const i=e.findEventIndex(t[0].identifier);this.setSchedulePosition(i)}else if(i>=0||!this.primaryLive){const t=this.timelinePos=i>0?i:0,s=e.findItemIndexAtTime(t);this.setSchedulePosition(s)}}else if(s&&!this.playingItem){const t=e.findItemIndex(s);this.setSchedulePosition(t)}}advanceAfterAssetEnded(e,t,i){const s=i+1;if(e.isAssetPastPlayoutLimit(s)||e.assetList[s].error){const i=this.schedule.items;if(i){const s=t+1;if(s>=i.length)return void this.setSchedulePosition(-1);const n=e.resumeTime;this.timelinePos<n&&(this.timelinePos=n,this.checkBuffer()),this.setSchedulePosition(s)}}else this.setSchedulePosition(t,s)}setScheduleToAssetAtTime(e,t){const i=this.schedule,s=t.parentIdentifier,n=i.getEvent(s);if(n){const t=i.findEventIndex(s),r=i.findAssetIndex(n,e);this.setSchedulePosition(t,r)}}setSchedulePosition(e,t){const i=this.schedule.items;if(!i||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const s=e>=0?i[e]:null,n=this.playingItem,r=this.playingLastItem;if(this.isInterstitial(n)){var o;const l=n.event,d=this.playingAsset,c=null==d?void 0:d.identifier,h=c?this.getAssetPlayer(c):null;if(h&&c&&(!this.eventItemsMatch(n,s)||void 0!==t&&c!==(null==(o=l.assetList)?void 0:o[t].identifier))){var a;const t=l.findAssetIndex(d);this.log(`INTERSTITIAL_ASSET_ENDED ${t+1}/${l.assetList.length} ${Lo(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(ie.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:t,event:l,schedule:i.slice(0),scheduleIndex:e,player:h}),this.retreiveMediaSource(c,s),!h.media||null!=(a=this.detachedData)&&a.mediaSource||h.detachMedia()}if(!this.eventItemsMatch(n,s)&&(this.endedItem=n,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${l} ${wo(n)}`),l.hasPlayed=!0,this.hls.trigger(ie.INTERSTITIAL_ENDED,{event:l,schedule:i.slice(0),scheduleIndex:e}),l.cue.once)){this.updateSchedule();const e=this.schedule.items;if(s&&e){const i=this.schedule.findItemIndex(s);this.advanceSchedule(i,e,t,n,r)}return}}this.advanceSchedule(e,i,t,n,r)}advanceSchedule(e,t,i,s,n){const r=e>=0?t[e]:null,o=this.primaryMedia,a=this.playerQueue;if(a.length&&a.forEach((t=>{const i=t.interstitial,s=this.schedule.findEventIndex(i.identifier);(s<e||s>e+1)&&this.clearInterstitial(i,r)})),this.isInterstitial(r)){this.timelinePos=Math.min(Math.max(this.timelinePos,r.start),r.end);const n=r.event;void 0===i&&(i=this.schedule.findAssetIndex(n,this.timelinePos));const a=this.waitingItem;this.assetsBuffered(r,o)||this.setBufferingItem(r);let l=this.preloadAssets(n,i);if(this.eventItemsMatch(r,a||s)||(this.waitingItem=r,this.log(`INTERSTITIAL_STARTED ${wo(r)} ${n.appendInPlace?"append in place":""}`),this.hls.trigger(ie.INTERSTITIAL_STARTED,{event:n,schedule:t.slice(0),scheduleIndex:e})),!n.assetListLoaded)return void this.log(`Waiting for ASSET-LIST to complete loading ${n}`);if(n.assetListLoader&&(n.assetListLoader.destroy(),n.assetListLoader=void 0),!o)return void this.log(`Waiting for attachMedia to start Interstitial ${n}`);this.waitingItem=this.endedItem=null,this.playingItem=r;const d=n.assetList[i];if(!d){const s=t[e+1],r=this.media;return s&&r&&!this.isInterstitial(s)&&r.currentTime<s.start&&(r.currentTime=this.timelinePos=s.start),void this.advanceAfterAssetEnded(n,e,i||0)}if(l||(l=this.getAssetPlayer(d.identifier)),null===l||l.destroyed){const e=n.assetList.length;this.warn(`asset ${i+1}/${e} player destroyed ${n}`),l=this.createAssetPlayer(n,d,i)}if(!this.eventItemsMatch(r,this.bufferingItem)&&n.appendInPlace&&this.isAssetBuffered(d))return;this.startAssetPlayer(l,i,t,e,o),this.shouldPlay&&No(l.media)}else null!==r?(this.resumePrimary(r,e,s),this.shouldPlay&&No(this.hls.media)):n&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e,t;return null==(e=this.mediaSelection)||null==(t=e.main)?void 0:t.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,i){var s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${wo(e)}`),null==(s=this.detachedData)||!s.mediaSource){let i=this.timelinePos;(i<e.start||i>=e.end)&&(i=this.getPrimaryResumption(e,t),this.timelinePos=i),this.attachPrimary(i,e)}if(!i)return;const n=this.schedule.items;n&&(this.log(`resumed ${wo(e)}`),this.hls.trigger(ie.INTERSTITIALS_PRIMARY_RESUMED,{schedule:n.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const i=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(i<e.fragmentStart||i>e.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return null!=t&&t.hls?t.hls.bufferedToEnd:Ii.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const n=this.hls;n.media?this.checkBuffer():(this.transferMediaTo(n,s),i&&this.startLoadingPrimaryAt(e,i)),i||(this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs(((null==(i=s.mainForwardBufferInfo)?void 0:i.start)||s.media.currentTime)-e)>.5?s.startLoad(e,t):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(ie.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(ie.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level)return;const i=this.hls.levels[t.level],s=ge(ge({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const i=this.hls.audioTracks[t.id],s=this.mediaSelection;if(!s)return void(this.altSelection=ge(ge({},this.altSelection),{},{audio:i}));const n=ge(ge({},s),{},{audio:i});this.mediaSelection=n}onSubtitleTrackUpdated(e,t){const i=this.hls.subtitleTracks[t.id],s=this.mediaSelection;if(!s)return void(this.altSelection=ge(ge({},this.altSelection),{},{subtitles:i}));const n=ge(ge({},s),{},{subtitles:i});this.mediaSelection=n}onAudioTrackSwitching(e,t){const i=Yt(t);this.playerQueue.forEach((e=>e.hls.setAudioOption(t)||e.hls.setAudioOption(i)))}onSubtitleTrackSwitch(e,t){const i=Yt(t);this.playerQueue.forEach((e=>e.hls.setSubtitleOption(t)||-1!==t.id&&e.hls.setSubtitleOption(i)))}onBufferCodecs(e,t){const i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const s=t[e];if(s.cue.post){var i;const e=this.schedule.findEventIndex(s.identifier),t=null==(i=this.schedule.items)?void 0:i[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){const i=this.schedule.items;return e&&i&&i[this.findItemIndex(e,t)]||null}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===(null==(i=t.event)?void 0:i.identifier))}findItemIndex(e,t){return e?this.schedule.findItemIndex(e,t):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const t=this.schedule.items;if(!t)return;const i=Ii.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,t,e)}updateBufferedPos(e,t,i){const s=this.schedule,n=this.bufferingItem;if(this.bufferedPos>e)return;if(1===t.length&&this.itemsMatch(t[0],n))return void(this.bufferedPos=e);const r=this.playingItem,o=this.findItemIndex(r);let a=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var l,d;const i=this.findItemIndex(n),s=Math.min(i+1,t.length-1),r=t[s];if((-1===a&&n&&e>=n.end||null!=(l=r.event)&&l.appendInPlace&&e+.01>=r.start)&&(a=s),s-o>1&&!1===(null==n||null==(d=n.event)?void 0:d.appendInPlace))return;if(this.bufferedPos=e,a>i&&a>o)this.bufferedToItem(r);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&r.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(r)&&this.preloadAssets(r.event,0)}}else i&&r&&!this.itemsMatch(r,n)&&(a===o?this.bufferedToItem(r):a===o+1&&this.bufferedToItem(t[a]))}assetsBuffered(e,t){return 0!==e.event.assetList.length&&!e.event.assetList.some((e=>{const i=this.getAssetPlayer(e.identifier);return!(null!=i&&i.bufferedInPlaceToEnd(t))}))}setBufferingItem(e){const t=this.bufferingItem,i=this.schedule;if(this.itemsMatch(e,t))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:s,events:n}=i;if(!s||!n)return t;const r=this.isInterstitial(e),o=this.getBufferingPlayer();if(this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos)),!this.playbackDisabled){const i=o?o.remaining:t?t.end-this.timelinePos:0;this.log(`buffered to boundary ${wo(e)}`+(t?` (${i.toFixed(2)} remaining)`:"")),r?e.event.assetList.forEach((e=>{const t=this.getAssetPlayer(e.identifier);t&&t.resumeBuffering()})):(this.hls.resumeBuffering(),this.playerQueue.forEach((e=>e.pauseBuffering())))}this.hls.trigger(ie.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:n.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return t}bufferedToItem(e,t=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==i){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){const i=e.event,s=0===i.assetList.length&&!i.assetListLoader,n=i.cue.once;if(s||!n){const e=this.preloadAssets(i,t);if(null!=e&&e.interstitial.appendInPlace){const s=i.assetList[t],n=this.primaryMedia;s&&n&&this.bufferAssetPlayer(e,n)}}}preloadAssets(e,t){const i=e.assetUrl,s=e.assetList.length,n=0===s&&!e.assetListLoader,r=e.cue.once;if(n){const n=e.timelineStart;if(e.appendInPlace){var o;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(o=t.nextEvent)?void 0:o.identifier)!==e.identifier||this.flushFrontBuffer(n+.25)}let r,a=0;if(!this.playingItem&&this.primaryLive&&(a=this.hls.startPosition,-1===a&&(a=this.hls.liveSyncPosition||0)),a&&!e.cue.pre&&!e.cue.post){const e=a-n;e>0&&(r=Math.round(1e3*e)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:s} ${e}${r?` live-start: ${a} start-offset: ${r}`:""}`),i)return this.createAsset(e,0,0,n,e.duration,i);const l=this.assetListLoader.loadAssetList(e,r);l&&(e.assetListLoader=l)}else if(!r&&s){for(let i=t;i<s;i++){const t=e.assetList[i],s=this.getAssetPlayerQueueIndex(t.identifier);-1!==s&&!this.playerQueue[s].destroyed||t.error||this.createAssetPlayer(e,t,i)}return this.getAssetPlayer(e.assetList[t].identifier)}return null}flushFrontBuffer(e){const t=this.requiredTracks;t&&(this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach((t=>{this.hls.trigger(ie.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})})))}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i];return null}createAsset(e,t,i,s,n,r){const o={parentIdentifier:e.identifier,identifier:So(e,r,t),duration:n,startOffset:i,timelineStart:s,uri:r};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,i){this.log(`create HLSAssetPlayer for ${Lo(t)}`);const s=this.hls,n=s.userConfig;let r=n.videoPreference;const o=s.loadLevelObj||s.levels[s.currentLevel];(r||o)&&(r=fe({},r),o.videoCodec&&(r.videoCodec=o.videoCodec),o.videoRange&&(r.allowedVideoRanges=[o.videoRange]));const a=s.audioTracks[s.audioTrack],l=s.subtitleTracks[s.subtitleTrack];let d=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const i=t.duration;i&&e<i&&(d=e)}}const c=t.identifier,h=ge(ge({},n),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:c,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:d,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:r,audioPreference:a||n.audioPreference,subtitlePreference:l||n.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(h.timelineOffset=t.timelineStart));const u=h.cmcd;null!=u&&u.sessionId&&u.contentId&&(h.cmcd=fe({},u,{contentId:yo(t.uri)})),this.getAssetPlayer(c)&&this.warn(`Duplicate date range identifier ${e} and asset ${c}`);const f=new Io(this.HlsPlayerClass,h,e,t);this.playerQueue.push(f),e.assetList[i]=t;const p=s=>{if(s.live){const t=new Error(`Interstitials MUST be VOD assets ${e}`),s={fatal:!0,type:ee.OTHER_ERROR,details:te.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};return void this.handleAssetItemError(s,e,this.schedule.findEventIndex(e.identifier),i,t.message)}const n=s.edge-s.fragmentStart,r=t.duration;(null===r||n>r)&&(this.log(`Interstitial asset "${c}" duration change ${r} > ${n}`),t.duration=n,this.updateSchedule())};f.on(ie.LEVEL_UPDATED,((e,{details:t})=>p(t))),f.on(ie.LEVEL_PTS_UPDATED,((e,{details:t})=>p(t)));const g=(e,t)=>{const i=this.getAssetPlayer(c);if(i&&t.tracks){i.off(ie.BUFFER_CODECS,g),i.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===i.assetItem&&e&&!i.media&&this.bufferAssetPlayer(i,e)}};f.on(ie.BUFFER_CODECS,g);const m=()=>{var i;const s=this.getAssetPlayer(c);if(this.log(`buffered to end of asset ${s}`),!s)return;const n=this.schedule.findEventIndex(e.identifier),r=e.findAssetIndex(t),o=r+1,a=null==(i=this.schedule.items)?void 0:i[n];if(this.isInterstitial(a))if(-1===r||e.isAssetPastPlayoutLimit(o)||e.assetList[o].error){var l;const e=null==(l=this.schedule.items)?void 0:l[n+1];e&&this.bufferedToItem(e)}else this.bufferedToItem(a,o)};f.on(ie.BUFFERED_TO_END,m);const v=t=>()=>{if(!this.getAssetPlayer(c))return;this.shouldPlay=!0;const i=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,i,t)};return f.once(ie.MEDIA_ENDED,v(i)),f.once(ie.PLAYOUT_LIMIT_REACHED,v(1/0)),f.on(ie.ERROR,((t,s)=>{const n=this.getAssetPlayer(c);if(s.details!==te.BUFFER_STALLED_ERROR)this.handleAssetItemError(s,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${s.error} ${e}`);else if(null!=n&&n.media){const t=n.currentTime,i=n.duration-t;t&&e.appendInPlace&&i/n.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${c} ${e} at ${n.media.currentTime}`),m()):(this.warn(`Stalled at ${t} of ${t+i} in asset ${c} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}})),f.on(ie.DESTROYING,(()=>{if(!this.getAssetPlayer(c))return;const t=new Error(`Asset player destroyed unexpectedly ${c}`),s={fatal:!0,type:ee.OTHER_ERROR,details:te.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};this.handleAssetItemError(s,e,this.schedule.findEventIndex(e.identifier),i,t.message)})),this.hls.trigger(ie.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:f}),f}clearInterstitial(e,t){e.assetList.forEach((e=>{this.clearAssetPlayer(e.identifier,t)})),e.reset()}clearAssetPlayer(e,t){const i=this.getAssetPlayerQueueIndex(e);if(-1!==i){this.log(`clearAssetPlayer "${e}" toSegment: ${t?wo(t):t}`);const s=this.playerQueue[i];this.transferMediaFromPlayer(s,t),this.playerQueue.splice(i,1),s.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,s,n){const{interstitial:r,assetItem:o,assetId:a}=e,l=r.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=o,d&&d.identifier===a||(d&&(this.clearAssetPlayer(d.identifier,i[s]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${l} ${e}`),this.hls.trigger(ie.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:r,schedule:i.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,n)}bufferAssetPlayer(e,t){var i,s;const{interstitial:n,assetItem:r,assetId:o}=e,a=this.schedule.findEventIndex(n.identifier),l=null==(i=this.schedule.items)?void 0:i[a];if(!l)return;this.setBufferingItem(l),this.bufferingAsset=r;const d=this.getBufferingPlayer();if(d===e)return;const c=n.appendInPlace;if(c&&!1===(null==d?void 0:d.interstitial.appendInPlace))return;const h=(null==d?void 0:d.tracks)||(null==(s=this.detachedData)?void 0:s.tracks)||this.requiredTracks;if(c&&r!==this.playingAsset){if(!e.tracks)return;if(h&&!_e(h,e.tracks)){const t=new Error(`Asset "${o}" SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),i={fatal:!0,type:ee.OTHER_ERROR,details:te.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},s=n.findAssetIndex(r);return void this.handleAssetItemError(i,n,a,s,t.message)}}this.transferMediaTo(e,t)}handleAssetItemError(e,t,i,s,n){if(e.details===te.BUFFER_STALLED_ERROR)return;const r=t.assetList[s]||null;let o=null;if(r){const e=this.getAssetPlayerQueueIndex(r.identifier);o=this.playerQueue[e]||null}const a=this.schedule.items,l=fe({},e,{fatal:!1,errorAction:li(!0),asset:r,assetListIndex:s,event:t,schedule:a,scheduleIndex:i,player:o});if(this.warn(`Asset item error: ${e.error}`),this.hls.trigger(ie.INTERSTITIAL_ASSET_ERROR,l),!e.fatal)return;const d=new Error(n);r&&(this.playingAsset!==r&&this.clearAssetPlayer(r.identifier,null),r.error=d),t.assetList.some((e=>!e.error))?t.appendInPlace&&(t.error=d):t.error=d,this.primaryFallback(t)}primaryFallback(e){const t=e.timelineStart,i=this.effectivePlayingItem;if(this.updateSchedule(),i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${i?wo(i):"<none>"} error: ${e.error}`),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));let s=this.timelinePos;-1===s&&(s=this.hls.startPosition);const n=this.updateItem(i,s);if(this.itemsMatch(i,n))this.clearInterstitial(e,null);else{const e=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(e)}}else this.checkStart()}onAssetListLoaded(e,t){var i;const s=t.event,n=s.identifier,r=t.assetListResponse.ASSETS;if(!this.schedule.hasEvent(n))return;const o=s.timelineStart,a=s.duration;let l=0;r.forEach(((e,t)=>{const i=parseFloat(e.DURATION);this.createAsset(s,t,l,o+l,i,e.URI),l+=i})),s.duration=l,this.log(`Loaded asset-list with duration: ${l} (was: ${a}) ${s}`);const d=this.waitingItem,c=(null==d?void 0:d.event.identifier)===n;this.updateSchedule();const h=null==(i=this.bufferingItem)?void 0:i.event;if(c){var u;const e=this.schedule.findEventIndex(n),t=null==(u=this.schedule.items)?void 0:u[e];if(t){if(!this.playingItem&&this.timelinePos>t.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==e)return s.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${s}`),void this.primaryFallback(s);this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==h?void 0:h.identifier)===n&&h.appendInPlace){const e=s.assetList[0],t=this.getAssetPlayer(e.identifier),i=this.primaryMedia;e&&t&&i&&this.bufferAssetPlayer(t,i)}}onError(e,t){switch(t.details){case te.ASSET_LIST_PARSING_ERROR:case te.ASSET_LIST_LOAD_ERROR:case te.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&this.primaryFallback(e);break}case te.BUFFER_STALLED_ERROR:this.onTimeupdate(),this.checkBuffer(!0)}}}});function Ba(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(Ba):Object.keys(e).reduce(((t,i)=>(t[i]=Ba(e[i]),t)),{}):e}class Fa extends Ci{constructor(e,t){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var e;null!=(e=this.media)&&e.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{var e;this.hls&&(this.ended=(null==(e=this.media)?void 0:e.currentTime)||1,this.hls.trigger(ie.MEDIA_ENDED,{stalled:!1}))},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ie.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ie.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(100),this.mediaSource=t.mediaSource;const i=this.media=t.media;Oo(i,"playing",this.onMediaPlaying),Oo(i,"waiting",this.onMediaWaiting),Oo(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:i}=this;i&&(Do(i,"playing",this.onMediaPlaying),Do(i,"waiting",this.onMediaWaiting),Do(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(null==(e=this.media)||!e.readyState||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,s;const n=null==(i=this.hls)?void 0:i.config;if(!n)return;const{media:r,stalled:o}=this;if(!r)return;const{seeking:a}=r,l=this.seeking&&!a,d=!this.seeking&&a,c=r.paused&&!a||r.ended||0===r.playbackRate;if(this.seeking=a,e!==t)return t&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,n.nudgeOnVideoHole&&!c&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(d||l)return void(l&&this.stallResolved(e));if(c)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&r.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(ie.MEDIA_ENDED,{stalled:!1})));if(!Ii.getBuffered(r).length)return void(this.nudgeRetry=0);const h=Ii.bufferInfo(r,e,0),u=h.nextStart||0,f=this.fragmentTracker;if(a&&f&&this.hls){const t=Ua(this.hls.inFlightFragments,e),i=h.len>2,s=!u||t||u-e>2&&!f.getPartialFragment(e);if(i||s)return;this.moved=!1}const p=null==(s=this.hls)?void 0:s.latestLevelDetails;if(!this.moved&&null!==this.stalled&&f){if(!(h.len>0||u))return;const t=Math.max(u,h.start||0)-e,i=null!=p&&p.live?2*p.targetduration:2,s=f.getPartialFragment(e);if(t>0&&(t<=i||s))return void(r.paused||this._trySkipBufferHole(s))}const g=n.detectStallWithCurrentTimeMs,m=self.performance.now(),v=this.waiting;if(null===o)return void(this.stalled=v>0&&m-v<g?v:m);const A=m-o;if(!a&&(A>=g||v)&&this.hls){var E;if("ended"===(null==(E=this.mediaSource)?void 0:E.readyState)&&(null==p||!p.live)&&Math.abs(e-((null==p?void 0:p.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger(ie.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(h),!this.media||!this.hls)return}const y=Ii.bufferInfo(r,e,n.maxBufferHole);this._tryFixBufferStall(y,A)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(ie.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(i=this.buffered.audio)&&i.length&&s&&s.length>1&&e>s.end(0)){const i=Ii.bufferedInfo(Ii.timeRangesToArray(this.buffered.audio),e,0);if(i.len>1&&t>=i.start){const i=Ii.timeRangesToArray(s),n=Ii.bufferedInfo(i,t,0).bufferedIndex;if(n>-1&&n<i.length-1){const t=Ii.bufferedInfo(i,e,0).bufferedIndex,s=i[n].end,r=i[n+1].start;if((-1===t||t>n)&&r-s<1&&e-s<2){const i=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${s} -> ${r} buffered index: ${t}`);this.warn(i.message),this.media.currentTime+=1e-6;const n=this.fragmentTracker.getPartialFragment(e)||void 0,o=Ii.bufferInfo(this.media,e,0);this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:i,reason:i.message,frag:n,buffer:o.len,bufferInfo:o})}}}}}_tryFixBufferStall(e,t){var i,s;const{fragmentTracker:n,media:r}=this,o=null==(i=this.hls)?void 0:i.config;if(!r||!n||!o)return;const a=r.currentTime,l=null==(s=this.hls)?void 0:s.latestLevelDetails,d=n.getPartialFragment(a);if((d||null!=l&&l.live&&a<l.fragmentStart)&&(this._trySkipBufferHole(d)||!this.media))return;const c=e.buffered;(c&&c.length>1&&e.len>o.maxBufferHole||e.nextStart&&e.nextStart-a<o.maxBufferHole)&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}_reportStall(e){const{hls:t,media:i,stallReported:s,stalled:n}=this;if(!s&&null!==n&&i&&t){this.stallReported=!0;const s=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${jt(e)})`);this.warn(s.message),t.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len,bufferInfo:e,stalled:{start:n}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:i,media:s}=this,n=null==(t=this.hls)?void 0:t.config;if(!s||!i||!n)return 0;const r=s.currentTime,o=Ii.bufferInfo(s,r,0),a=r<o.start?o.start:o.nextStart;if(a&&this.hls){const t=o.len<=n.maxBufferHole,d=o.len>0&&o.len<1&&s.readyState<3,c=a-r;if(c>0&&(t||d)){if(c>n.maxBufferHole){let t=!1;if(0===r){const e=i.getAppendedFrag(0,ae);e&&a<e.end&&(t=!0)}if(!t){const t=e||i.getAppendedFrag(r,ae);if(t){var l;if(null==(l=this.hls.loadLevelObj)||!l.details)return 0;if(Ua(this.hls.inFlightFragments,a))return 0;let e=!1,s=t.end;for(;s<a;){const t=i.getPartialFragment(s);if(!t){e=!0;break}s+=t.duration}if(e)return 0}}}const t=Math.max(a+.05,r+.1);if(this.warn(`skipping hole, adjusting currentTime from ${r} to ${t}`),this.moved=!0,s.currentTime=t,null==e||!e.gap){const i=new Error(`fragment loaded with buffer holes, seeking from ${r} to ${t}`);this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:i,reason:i.message,frag:e||void 0,buffer:o.len,bufferInfo:o})}return t}}return 0}_tryNudgeBuffer(e){const{hls:t,media:i,nudgeRetry:s}=this,n=null==t?void 0:t.config;if(!i||!n)return 0;const r=i.currentTime;if(this.nudgeRetry++,s<n.nudgeMaxRetry){const o=r+(s+1)*n.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${r} to ${o}`);this.warn(a.message),i.currentTime=o,t.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1,buffer:e.len,bufferInfo:e})}else{const i=new Error(`Playhead still not moving while enough data buffered @${r} after ${n.nudgeMaxRetry} nudges`);this.error(i.message),t.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.BUFFER_STALLED_ERROR,error:i,fatal:!0,buffer:e.len,bufferInfo:e})}}}function Ua(e,t){const i=$a(e.main);if(i&&i.start<=t)return i;const s=$a(e.audio);return s&&s.start<=t?s:null}function $a(e){if(!e)return null;switch(e.state){case Bs:case xs:case Ks:case Hs:return null}return e.frag}function Va(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function Ga(e,t,i,s,n){let r=new e(t,i,"");try{r.value=s,n&&(r.type=n)}catch(o){r=new e(t,i,jt(n?ge({type:n},s):s))}return r}const ja=(()=>{const e=Va();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Ka{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(ie.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(ie.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(ie.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ie.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(ie.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(ie.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(ie.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ie.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,t){var i;this.media=t.media,!1===(null==(i=t.overrides)?void 0:i.cueRemoval)&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,t){this.media=null,t.transferMedia||(this.id3Track&&(this.removeCues&&vo(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if("metadata"===i.kind&&"id3"===i.label)return go(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:s}}}=this;if(!i&&!s)return;const{samples:n}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const r=Va();if(r)for(let e=0;e<n.length;e++){const t=n[e].type;if(t===Cn.emsg&&!i||!s)continue;const o=Tn(n[e].data);if(o){const i=n[e].pts;let s=i+n[e].duration;s>ja&&(s=ja),s-i<=0&&(s=i+.25);for(let e=0;e<o.length;e++){const n=o[e];if(!bn(n)){this.updateId3CueEnds(i,t);const e=Ga(r,i,s,n,t);e&&this.id3Track.addCue(e)}}}}}updateId3CueEnds(e,t){var i;const s=null==(i=this.id3Track)?void 0:i.cues;if(s)for(let i=s.length;i--;){const n=s[i];n.type===t&&n.startTime<e&&n.endTime===ja&&(n.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:s}){const{id3Track:n,hls:r}=this;if(!r)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:a}}=r;if(n&&(o||a)){let e;e="audio"===s?e=>e.type===Cn.audioId3&&a:"video"===s?e=>e.type===Cn.emsg&&o:e=>e.type===Cn.audioId3&&a||e.type===Cn.emsg&&o,Ao(n,t,i,e)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:i}=this,{dateRanges:s}=e,n=Object.keys(s);let r=this.dateRangeCuesAppended;var o;if(i&&t)if(null!=(o=i.cues)&&o.length){const e=Object.keys(r).filter((e=>!n.includes(e)));for(let t=e.length;t--;){const s=e[t],n=r[s].cues;delete r[s],Object.keys(n).forEach((e=>{try{const t=n[e];t.removeEventListener("enter",this.onEventCueEnter),i.removeCue(t)}catch(e){}}))}}else r=this.dateRangeCuesAppended={};const a=e.fragments[e.fragments.length-1];if(0===n.length||!Q(null==a?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=Va();for(let e=0;e<n.length;e++){const t=n[e],i=s[t],o=i.startTime,a=r[t],h=(null==a?void 0:a.cues)||{};let u=(null==a?void 0:a.durationKnown)||!1,f=ja;const{duration:p,endDate:g}=i;if(g&&null!==p)f=o+p,u=!0;else if(i.endOnNext&&!u){const e=n.reduce(((e,t)=>{if(t!==i.id){const n=s[t];if(n.class===i.class&&n.startDate>i.startDate&&(!e||i.startDate<e.startDate))return n}return e}),null);e&&(f=e.startTime,u=!0)}const m=Object.keys(i.attr);for(let e=0;e<m.length;e++){const s=m[e];if("ID"===(c=s)||"CLASS"===c||"CUE"===c||"START-DATE"===c||"DURATION"===c||"END-DATE"===c||"END-ON-NEXT"===c)continue;const n=h[s];if(n)u&&!a.durationKnown?n.endTime=f:Math.abs(n.startTime-o)>.01&&(n.startTime=o,n.endTime=f);else if(l){let e=i.attr[s];Bi(s)&&(d=e,e=Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const n=Ga(l,o,f,{key:s,data:e},Cn.dateRange);n&&(n.id=t,this.id3Track.addCue(n),h[s]=n,this.hls.config.interstitialsController&&("X-ASSET-LIST"!==s&&"X-ASSET-URL"!==s||n.addEventListener("enter",this.onEventCueEnter)))}}r[t]={cues:h,dateRange:i,durationKnown:u}}var d,c}}class Ha{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,t=this.levelDetails;if(!e||!t)return;this.currentTime=e.currentTime;const i=this.computeLatency();if(null===i)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:n}=this.config;if(!s||1===n||!t.live)return;const r=this.targetLatency;if(null===r)return;const o=i-r;if(o<Math.min(this.maxLatency,r+t.targetduration)&&o>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,n)),i=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20,s=Math.min(t,Math.max(1,i));this.changeMediaPlaybackRate(e,s)}else 1!==e.playbackRate&&0!==e.playbackRate&&this.changeMediaPlaybackRate(e,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(null===e||null===this.hls)return null;const{holdBack:t,partHoldBack:i,targetduration:s}=e,{liveSyncDuration:n,liveSyncDurationCount:r,lowLatencyMode:o}=this.config,a=this.hls.userConfig;let l=o&&i||t;(this._targetLatencyUpdated||a.liveSyncDuration||a.liveSyncDurationCount||0===l)&&(l=void 0!==n?n:r*s);const d=s;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,d)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;const i=this.levelDetails;if(null===i)return null;const s=i.edge,n=e-t-this.edgeStalled,r=s-i.totalduration,o=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(r,n),o)}get drift(){const e=this.levelDetails;return null===e?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(ie.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(ie.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(ie.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(ie.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===te.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(i=this.levelDetails)&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,s;e.playbackRate!==t&&(null==(i=this.hls)||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${null==(s=this.targetLatency)?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}class Ya extends _r{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ie.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ie.FRAG_BUFFERED,this.onFragBuffered,this),e.on(ie.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ie.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ie.FRAG_BUFFERED,this.onFragBuffered,this),e.off(ie.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((e=>{e.loadError=0,e.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,s=[],n={},r={};let o=!1,a=!1,l=!1;t.levels.forEach((e=>{var t;const d=e.attrs;let{audioCodec:c,videoCodec:h}=e;c&&(e.audioCodec=c=Lt(c,i)||void 0),0===(null==(t=h)?void 0:t.indexOf("avc1"))&&(h=e.videoCodec=function(e){const t=e.split(",");for(let e=0;e<t.length;e++){const i=t[e].split(".");if(i.length>2){let s=i.shift()+".";s+=parseInt(i.shift()).toString(16),s+=("000"+parseInt(i.shift()).toString(16)).slice(-4),t[e]=s}}return t.join(",")}(h));const{width:u,height:f,unknownCodecs:p}=e;let g=p?p.length:0;if(p)for(let t=g;t--;){const i=p[t];this.isAudioSupported(i)?(e.audioCodec=c=c?`${c},${i}`:i,g--,At.audio[c.substring(0,4)]=2):this.isVideoSupported(i)&&(e.videoCodec=h=h?`${h},${i}`:i,g--,At.video[h.substring(0,4)]=2)}if(o||(o=!(!u||!f)),a||(a=!!h),l||(l=!!c),g||c&&!this.isAudioSupported(c)||h&&!this.isVideoSupported(h))return void this.log(`Some or all CODECS not supported "${d.CODECS}"`);const{CODECS:m,"FRAME-RATE":v,"HDCP-LEVEL":A,"PATHWAY-ID":E,RESOLUTION:y,"VIDEO-RANGE":T}=d,b=`${E||"."}-${e.bitrate}-${y}-${v}-${m}-${T}-${A}`;if(n[b])if(n[b].uri===e.url||e.attrs["PATHWAY-ID"])n[b].addGroupId("audio",d.AUDIO),n[b].addGroupId("text",d.SUBTITLES);else{const t=r[b]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const i=this.createLevel(e);n[b]=i,s.push(i)}else{const t=this.createLevel(e);n[b]=t,r[b]=1,s.push(t)}})),this.filterAndSortMediaOptions(s,t,o,a,l)}createLevel(e){const t=new Vt(e),i=e.supplemental;if(null!=i&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const e=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(e.message),t.supportedResult=Dt(e,[])}return t}isAudioSupported(e){return yt(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return yt(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,s,n){let r=[],o=[],a=e;if((i||s)&&n&&(a=a.filter((({videoCodec:e,videoRange:t,width:i,height:s})=>{return(!!e||!(!i||!s))&&!!(n=t)&&Ft.indexOf(n)>-1;var n}))),0===a.length)return void Promise.resolve().then((()=>{if(this.hls){let e="no level with compatible codecs found in manifest",i=e;t.levels.length&&(i=`one or more CODECS in variant not supported: ${jt(t.levels.map((e=>e.attrs.CODECS)).filter(((e,t,i)=>i.indexOf(e)===t)))}`,this.warn(i),e+=` (${i})`);const s=new Error(e);this.hls.trigger(ie.ERROR,{type:ee.MEDIA_ERROR,details:te.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:s,reason:i})}}));t.audioTracks&&(r=t.audioTracks.filter((e=>!e.audioCodec||this.isAudioSupported(e.audioCodec))),Wa(r)),t.subtitles&&(o=t.subtitles,Wa(o));const l=a.slice(0);a.sort(((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return Ft.indexOf(e.videoRange)-Ft.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const i=St(e.videoCodec),s=St(t.videoCodec);if(i!==s)return s-i}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const i=_t(e.codecSet),s=_t(t.codecSet);if(i!==s)return s-i}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0}));let d=l[0];if(this.steering&&(a=this.steering.filterParsedLevels(a),a.length!==l.length))for(let e=0;e<l.length;e++)if(l[e].pathwayId===a[0].pathwayId){d=l[e];break}this._levels=a;for(let e=0;e<a.length;e++)if(a[e]===d){var c;this._firstLevel=e;const t=d.bitrate,i=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${a.length} level(s) found, first bitrate: ${t}`),void 0===(null==(c=this.hls.userConfig)?void 0:c.abrEwmaDefaultEstimate)){const e=Math.min(t,this.hls.config.abrEwmaDefaultEstimateMax);e>i&&i===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=e)}break}const h=n&&!s,u={levels:a,audioTracks:r,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:n,video:s,altAudio:!h&&r.some((e=>!!e.url))};this.hls.trigger(ie.MANIFEST_PARSED,u)}get levels(){return 0===this._levels.length?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const i=new Error("invalid level idx"),s=e<0;if(this.hls.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.LEVEL_SWITCH_ERROR,level:e,fatal:s,error:i,reason:i.message}),s)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,n=s?s.attrs["PATHWAY-ID"]:void 0,r=t[e],o=r.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=r,i===e&&s&&n===o)return;this.log(`Switching to level ${e} (${r.height?r.height+"p ":""}${r.videoRange?r.videoRange+" ":""}${r.codecSet?r.codecSet+" ":""}@${r.bitrate})${o?" with Pathway "+o:""} from level ${i}${n?" with Pathway "+n:""}`);const a={level:e,attrs:r.attrs,details:r.details,bitrate:r.bitrate,averageBitrate:r.averageBitrate,maxBitrate:r.maxBitrate,realBitrate:r.realBitrate,width:r.width,height:r.height,codecSet:r.codecSet,audioCodec:r.audioCodec,videoCodec:r.videoCodec,audioGroups:r.audioGroups,subtitleGroups:r.subtitleGroups,loaded:r.loaded,loadError:r.loadError,fragmentError:r.fragmentError,name:r.name,id:r.id,uri:r.uri,url:r.url,urlId:0,audioGroupIds:r.audioGroupIds,textGroupIds:r.textGroupIds};this.hls.trigger(ie.LEVEL_SWITCHING,a);const l=r.details;if(!l||l.live){const e=this.switchParams(r.uri,null==s?void 0:s.details,l);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),i=e.filter((e=>-1!==t.indexOf(e)));if(e.length<1)return void this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);this.steering.pathwayPriority=i}}onError(e,t){!t.fatal&&t.context&&t.context.type===ne&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===ae){const e=t.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return;const i=this._levels[t.level];null!=i&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var i;const{level:s,details:n}=t,r=t.levelInfo;var o;if(!r)return this.warn(`Invalid level index ${s}`),void(null!=(o=t.deliveryDirectives)&&o.skip&&(n.deltaUpdateFailed=!0));if(r===this.currentLevel||t.withoutMultiVariant){0===r.fragmentError&&(r.loadError=0);let e=r.details;e===t.details&&e.advanced&&(e=void 0),this.playlistLoaded(s,t,e)}else null!=(i=t.deliveryDirectives)&&i.skip&&(n.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=this.getUrlWithDirectives(e.uri,t),s=this.currentLevelIndex,n=e.attrs["PATHWAY-ID"],r=e.details,o=null==r?void 0:r.age;this.log(`Loading level index ${s}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${n?" Pathway "+n:""}${o&&r.live?" age "+o.toFixed(1)+(r.type?" "+r.type||0:""):""} ${i}`),this.hls.trigger(ie.LEVEL_LOADING,{url:i,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(1===this._levels.length)return;const i=this._levels.filter(((t,i)=>i!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach((e=>e.level=-1))),!1)));ws(i),this._levels=i,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=i.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(ie.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(ie.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function Wa(e){const t={};e.forEach((e=>{const i=e.groupId||"";e.id=t[i]=t[i]||0,t[i]++}))}function za(){return self.SourceBuffer||self.WebKitSourceBuffer}function qa(){if(!Se())return!1;const e=za();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}class Xa extends zs{constructor(e,t,i){super(e,t,i,"stream-controller",ae),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const e=this.media,t=e?e.currentTime:null;if(null===t||!Q(t))return;if(this.log(`Media seeked to ${t.toFixed(3)}`),!this.getBufferedFrag(t))return;const i=this.getFwdBufferInfoAtPos(e,t,ae,0);null!==i&&0!==i.len?this.tick():this.warn(`Main forward buffer length at ${t} on "seeked" event ${i?i.len:"empty"})`)},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.on(ie.LEVEL_LOADING,this.onLevelLoading,this),e.on(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.on(ie.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(ie.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(ie.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(ie.BUFFER_CREATED,this.onBufferCreated,this),e.on(ie.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(ie.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(ie.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(ie.MANIFEST_PARSED,this.onManifestParsed,this),e.off(ie.LEVEL_LOADED,this.onLevelLoaded,this),e.off(ie.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(ie.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(ie.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(ie.BUFFER_CREATED,this.onBufferCreated,this),e.off(ie.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(ie.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(ie.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:i,hls:s}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=s.startLevel;-1===e&&(s.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=s.firstAutoLevel),s.nextLoadLevel=e,this.level=s.loadLevel,this._hasEnoughToStart=!!t}i>0&&-1===e&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=Bs,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=xs}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Ws:{const{levels:e,level:t}=this,i=null==e?void 0:e[t],s=null==i?void 0:i.details;if(s&&(!s.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(s))break;this.state=Bs;break}if(this.hls.nextLoadLevel!==this.level){this.state=Bs;break}break}case $s:{var e;const t=self.performance.now(),i=this.retryDate;if(!i||t>=i||null!=(e=this.media)&&e.seeking){const{levels:e,level:t}=this,i=null==e?void 0:e[t];this.resetStartWhenNotLoaded(i||null),this.state=Bs}}}this.state===Bs&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),null!=(e=this.media)&&e.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:s}=this;if(null===t||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const n=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==i||!i[n])return;const r=i[n],o=this.getMainFwdBufferInfo();if(null===o)return;const a=this.getLevelDetails();if(a&&this._streamEnded(o,a)){const e={};return 2===this.altAudio&&(e.type="video"),this.hls.trigger(ie.BUFFER_EOS,e),void(this.state=Ks)}if(!this.buffering)return;e.loadLevel!==n&&-1===e.manualLevel&&this.log(`Adapting to level ${n} from level ${this.level}`),this.level=e.nextLoadLevel=n;const l=r.details;if(!l||this.state===Ws||this.waitForLive(r))return this.level=n,this.state=Ws,void(this.startFragRequested=!1);const d=o.len,c=this.getMaxBufferLength(r.maxBitrate);if(d>=c)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let u=this.getNextFragment(h,l);if(this.couldBacktrack&&!this.fragPrevious&&u&&Ve(u)&&this.fragmentTracker.getState(u)!==ui){var f;const e=(null!=(f=this.backtrackFragment)?f:u).sn-l.startSN,t=l.fragments[e-1];t&&u.cc===t.cc&&(u=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(u&&this.isLoopLoading(u,h)){if(!u.gap){const e=this.audioOnly&&!this.altAudio?Be:Fe,t=(e===Fe?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,ae)}u=this.getNextFragmentLoopLoading(u,l,o,ae,c)}u&&(!u.initSegment||u.initSegment.data||this.bitrateTest||(u=u.initSegment),this.loadFragment(u,r,h))}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);s===di||s===hi?Ve(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ae)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let i;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const n=this.getLevelDetails();if(null!=n&&n.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*n.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],s=this.fragLastKbps;i=s&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*s)+1:0}else i=0;const r=this.getBufferedFrag(t.currentTime+i);if(r){const e=this.followingBufferedFrag(r);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,i=e.duration,s=Math.max(r.end,t+Math.min(Math.max(i-this.config.maxFragLookUpTolerance,i*(this.couldBacktrack?.5:.125)),i*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(s,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Fs:case Us:case $s:case Gs:case js:this.state=Bs}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,2===this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;Oo(i,"playing",this.onMediaPlaying),Oo(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:i}=this;i&&(Do(i,"playing",this.onMediaPlaying),Do(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),t.transferMedia||(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(ie.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,s=!1;t.levels.forEach((e=>{const t=e.audioCodec;t&&(i=i||-1!==t.indexOf("mp4a.40.2"),s=s||-1!==t.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=i&&s&&!function(){var e;const t=za();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==Bs)return;const s=t.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=Ws)}onLevelLoaded(e,t){var i;const{levels:s,startFragRequested:n}=this,r=t.level,o=t.details,a=o.totalduration;if(!s)return void this.warn(`Levels were reset while loading level ${r}`);this.log(`Level ${r} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const l=t.levelInfo,d=this.fragCurrent;!d||this.state!==Us&&this.state!==$s||d.level!==t.level&&d.loader&&this.abortCurrentFrag();let c=0;if(o.live||null!=(i=l.details)&&i.live){var h;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;c=this.alignPlaylists(o,l.details,null==(h=this.levelLastLoaded)?void 0:h.details)}if(l.details=o,this.levelLastLoaded=l,n||this.setStartPosition(o,c),this.hls.trigger(ie.LEVEL_UPDATED,{details:o,level:r}),this.state===Ws){if(this.waitForCdnTuneIn(o))return;this.state=Bs}n&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,n=this.getLoadPosition(),r=e.fragmentStart,o=e.edge,a=n>=r-t.maxFragLookUpTolerance&&n<=o;if(null!==s&&i.duration>s&&(n<s||!a)){const r=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!a&&i.readyState<4||n<o-r)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),i.readyState&&(this.warn(`Playback: ${n.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${s.toFixed(3)}`),i.currentTime=s))}}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:n}=e,{levels:r}=this;if(!r)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);const o=r[i.level];if(!o)return void this.warn(`Level ${i.level} not found on progress`);const a=o.details;if(!a)return this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),void this.fragmentTracker.removeFragment(i);const l=o.videoCodec,d=a.PTSKnown||!a.live,c=null==(t=i.initSegment)?void 0:t.data,h=this._getAudioCodec(o),u=this.transmuxer=this.transmuxer||new Sr(this.hls,ae,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=s?s.index:-1,p=-1!==f,g=new Ri(i.level,i.sn,i.stats.chunkCount,n.byteLength,f,p),m=this.initPTS[i.cc];u.push(n,c,h,l,i,s,a.totalduration,d,g,m)}onAudioTrackSwitching(e,t){const i=this.hls,s=2===this.altAudio;if(Qt(t.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s)return this.fragmentTracker.removeAllFragments(),i.once(ie.BUFFER_FLUSHED,(()=>{var e;null==(e=this.hls)||e.trigger(ie.AUDIO_TRACK_SWITCHED,t)})),void i.trigger(ie.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});i.trigger(ie.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=Qt(t.url,this.hls);if(i){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){const i=t.tracks;let s,n,r=!1;for(const e in i){const t=i[e];if("main"===t.id){if(n=e,s=t,"video"===e){const t=i[e];t&&(this.videoBuffer=t.buffer)}}else r=!0}r&&s?(this.log(`Alternate track found, use ${n}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:s}=t,n=i.type===ae;if(n){if(this.fragContextChanged(i))return this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===js&&(this.state=Bs));const e=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),Ve(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}const r=this.media;r&&(!this._hasEnoughToStart&&Ii.getBuffered(r).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),n&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal)this.state=Hs;else switch(t.details){case te.FRAG_GAP:case te.FRAG_PARSING_ERROR:case te.FRAG_DECRYPT_ERROR:case te.FRAG_LOAD_ERROR:case te.FRAG_LOAD_TIMEOUT:case te.KEY_LOAD_ERROR:case te.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ae,t);break;case te.LEVEL_LOAD_ERROR:case te.LEVEL_LOAD_TIMEOUT:case te.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Ws||(null==(i=t.context)?void 0:i.type)!==ne||(this.state=Bs);break;case te.BUFFER_ADD_CODEC_ERROR:case te.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.resetLoadingState();break;case te.BUFFER_FULL_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case te.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onFragLoadEmergencyAborted(){this.state=Bs,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Be||!this.altAudio){const e=(t===Fe?this.videoBuffer:this.mediaBuffer)||this.media;e&&(this.afterBufferFlushed(e,t,ae),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking)return void this.log(`could not seek to ${i}, already seeking at ${t}`);const s=this.timelineOffset;s&&i&&(i+=s);const n=this.getLevelDetails(),r=Ii.getBuffered(e),o=r.length?r.start(0):0,a=o-i,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);a>0&&(a<l||this.loadingParts&&a<2*((null==n?void 0:n.partTarget)||0))&&(this.log(`adjusting start position by ${a} to match buffer start`),i+=a,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${o}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then((e=>{const{hls:i}=this,s=null==e?void 0:e.frag;if(!s||this.fragContextChanged(s))return;t.fragmentError=0,this.state=Bs,this.startFragRequested=!1,this.bitrateTest=!1;const n=s.stats;n.parsing.start=n.parsing.end=n.buffering.start=n.buffering.end=self.performance.now(),i.trigger(ie.FRAG_LOADED,e),s.bitrateTest=!1}))}_handleTransmuxComplete(e){var t;const i=this.playlistType,{hls:s}=this,{remuxResult:n,chunkMeta:r}=e,o=this.getCurrentContext(r);if(!o)return void this.resetWhenMissingContext(r);const{frag:a,part:l,level:d}=o,{video:c,text:h,id3:u,initSegment:f}=n,{details:p}=d,g=this.altAudio?void 0:n.audio;if(this.fragContextChanged(a))this.fragmentTracker.removeFragment(a);else{if(this.state=Gs,f){if(null!=f&&f.tracks){const e=a.initSegment||a;this._bufferInitSegment(d,f.tracks,e,r),s.trigger(ie.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:i,tracks:f.tracks})}const e=f.initPTS,t=f.timescale;Q(e)&&(this.initPTS[a.cc]={baseTime:e,timescale:t},s.trigger(ie.INIT_PTS_FOUND,{frag:a,id:i,initPTS:e,timescale:t}))}if(c&&p){const e=p.fragments[a.sn-1-p.startSN],t=a.sn===p.startSN,i=!e||a.cc>e.cc;if(!1!==n.independent){const{startPTS:e,endPTS:s,startDTS:n,endDTS:o}=c;if(l)l.elementaryStreams[c.type]={startPTS:e,endPTS:s,startDTS:n,endDTS:o};else if(c.firstKeyFrame&&c.independent&&1===r.id&&!i&&(this.couldBacktrack=!0),c.dropped&&c.independent){const n=this.getMainFwdBufferInfo(),r=(n?n.end:this.getLoadPosition())+this.config.maxBufferHole,l=c.firstKeyFramePTS?c.firstKeyFramePTS:e;if(!t&&r<l-this.config.maxBufferHole&&!i)return void this.backtrack(a);i&&(a.gap=!0),a.setElementaryStreamInfo(c.type,a.start,s,a.start,o,!0)}else t&&e-(p.appliedTimelineOffset||0)>2&&(a.gap=!0);a.setElementaryStreamInfo(c.type,e,s,n,o),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(c,a,l,r,t||i)}else{if(!t&&!i)return void this.backtrack(a);a.gap=!0}}if(g){const{startPTS:e,endPTS:t,startDTS:i,endDTS:s}=g;l&&(l.elementaryStreams[Be]={startPTS:e,endPTS:t,startDTS:i,endDTS:s}),a.setElementaryStreamInfo(Be,e,t,i,s),this.bufferFragmentData(g,a,l,r)}if(p&&null!=u&&null!=(t=u.samples)&&t.length){const e={id:i,frag:a,details:p,samples:u.samples};s.trigger(ie.FRAG_PARSING_METADATA,e)}if(p&&h){const e={id:i,frag:a,details:p,samples:h.samples};s.trigger(ie.FRAG_PARSING_USERDATA,e)}}}_bufferInitSegment(e,t,i,s){if(this.state!==Gs)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:n,video:r,audiovideo:o}=t;if(n){let i=It(n.codec,e.audioCodec);"mp4a"===i&&(i="mp4a.40.5");const s=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){i&&(i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=n.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===s.indexOf("firefox")&&(i="mp4a.40.5")}i&&-1!==i.indexOf("mp4a.40.5")&&-1!==s.indexOf("android")&&"audio/mpeg"!==n.container&&(i="mp4a.40.2",this.log(`Android: force audio codec to ${i}`)),e.audioCodec&&e.audioCodec!==i&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${i}"`),n.levelCodec=i,n.id=ae,this.log(`Init audio buffer, container:${n.container}, codecs[selected/level/parsed]=[${i||""}/${e.audioCodec||""}/${n.codec}]`),delete t.audiovideo}if(r){r.levelCodec=e.videoCodec,r.id=ae;const i=r.codec;if(4===(null==i?void 0:i.length))switch(i){case"hvc1":case"hev1":r.codec="hvc1.1.6.L120.90";break;case"av01":r.codec="av01.0.04M.08";break;case"avc1":r.codec="avc1.42e01e"}this.log(`Init video buffer, container:${r.container}, codecs[level/parsed]=[${e.videoCodec||""}/${i}]${r.codec!==i?" parsed-corrected="+r.codec:""}${r.supplemental?" supplemental="+r.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const a=Object.keys(t);if(a.length){if(this.hls.trigger(ie.BUFFER_CODECS,t),!this.hls)return;a.forEach((e=>{const n=t[e].initSegment;null!=n&&n.byteLength&&this.hls.trigger(ie.BUFFER_APPENDING,{type:e,data:n,frag:i,part:null,chunkMeta:s,parent:i.type})}))}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,ae)}get maxBufferLength(){const{levels:e,level:t}=this,i=null==e?void 0:e[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Bs}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const i=e.currentTime;if(Ii.isBuffered(e,i)?t=this.getAppendedFrag(i):Ii.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,i=t.level;e&&t.sn===e.sn&&e.level===i||(this.fragPlaying=t,this.hls.trigger(ie.FRAG_CHANGED,{frag:t}),e&&e.level===i||this.hls.trigger(ie.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return Q(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(Q(t)){const e=this.getLevelDetails(),i=this.currentFrag||(e?Jt(null,e.fragments,t):null);if(i){const e=i.programDateTime;if(null!==e){const s=e+1e3*(t-i.start);return new Date(s)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Qa{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[i].loader;if(s){var t;if(e&&e!==(null==(t=s.context)?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=te.KEY_LOAD_ERROR,i,s,n){return new _i({type:ee.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:n,error:i,networkDetails:s})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:s}=e;for(let e=0;e<t.length;e++){const n=t[e];if(s<=n.cc&&("initSegment"===i||"initSegment"===n.sn||i<n.sn)){this.emeController.selectKeySystemFormat(n).then((e=>{n.setKeyFormat(e)}));break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then((t=>this.loadInternal(e,t))):this.loadInternal(e)}loadInternal(e,t){var i,s;t&&e.setKeyFormat(t);const n=e.decryptdata;if(!n){const i=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,te.KEY_LOAD_ERROR,i))}const r=n.uri;if(!r)return Promise.reject(this.createKeyLoadError(e,te.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${r}"`)));let o=this.keyUriToKeyInfo[r];if(null!=(i=o)&&i.decryptdata.key)return n.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});var a;if(null!=(s=o)&&s.keyLoadPromise)switch(null==(a=o.mediaKeySessionContext)?void 0:a.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then((t=>(n.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:o})))}switch(o=this.keyUriToKeyInfo[r]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===n.keyFormat?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,te.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${n.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const t=this.emeController.loadKey(i);if(t)return(e.keyLoadPromise=t.then((t=>(e.mediaKeySessionContext=t,i)))).catch((t=>{throw e.keyLoadPromise=null,t}))}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,s=new(0,i.loader)(i);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise(((n,r)=>{const o={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},a=i.keyLoadPolicy.default,l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(e,t,i,s)=>{const{frag:o,keyInfo:a,url:l}=i;if(!o.decryptdata||a!==this.keyUriToKeyInfo[l])return r(this.createKeyLoadError(o,te.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),s));a.decryptdata.key=o.decryptdata.key=new Uint8Array(e.data),o.keyLoader=null,a.loader=null,n({frag:o,keyInfo:a})},onError:(e,i,s,n)=>{this.resetLoader(i),r(this.createKeyLoadError(t,te.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),s,ge({url:o.url,data:void 0},e)))},onTimeout:(e,i,s)=>{this.resetLoader(i),r(this.createKeyLoadError(t,te.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),s))},onAbort:(e,i,s)=>{this.resetLoader(i),r(this.createKeyLoadError(t,te.INTERNAL_ABORTED,new Error("key loading aborted"),s))}};s.load(o,l,d)}))}resetLoader(e){const{frag:t,keyInfo:i,url:s}=e,n=i.loader;t.keyLoader===n&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[s],n&&n.destroy()}}function Za(e){const{type:t}=e;switch(t){case re:return le;case oe:return de;default:return ae}}function Ja(e,t){let i=e.url;return void 0!==i&&0!==i.indexOf("data:")||(i=t.url),i}class el{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ie.LEVEL_LOADING,this.onLevelLoading,this),e.on(ie.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(ie.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(ie.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(ie.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ie.LEVEL_LOADING,this.onLevelLoading,this),e.off(ie.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(ie.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(ie.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,s=t.loader,n=new(i||s)(t);return this.loaders[e.type]=n,n}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:se,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:i,level:s,pathwayId:n,url:r,deliveryDirectives:o,levelInfo:a}=t;this.load({id:i,level:s,pathwayId:n,responseType:"text",type:ne,url:r,deliveryDirectives:o,levelOrTrack:a})}onAudioTrackLoading(e,t){const{id:i,groupId:s,url:n,deliveryDirectives:r,track:o}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:re,url:n,deliveryDirectives:r,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:i,groupId:s,url:n,deliveryDirectives:r,track:o}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:oe,url:n,deliveryDirectives:r,levelOrTrack:o})}onLevelsUpdated(e,t){const i=this.loaders[ne];if(i){const e=i.context;e&&!t.levels.some((t=>t===e.levelOrTrack))&&(i.abort(),delete this.loaders[ne])}}load(e){var t;const i=this.hls.config;let s,n=this.getInternalLoader(e);if(n){const t=this.hls.logger,i=n.context;if(i&&i.levelOrTrack===e.levelOrTrack&&(i.url===e.url||i.deliveryDirectives&&!e.deliveryDirectives))return void(i.url===e.url?t.log(`[playlist-loader]: ignore ${e.url} ongoing request`):t.log(`[playlist-loader]: ignore ${e.url} in favor of ${i.url}`));t.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),n.abort()}if(s=e.type===se?i.manifestLoadPolicy.default:fe({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),n=this.createInternalLoader(e),Q(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===ne&&null!==e.level?t=this.hls.levels[e.level].details:e.type===re&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===oe&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,i=t.targetduration;if(e&&i){const t=1e3*Math.max(3*e,.8*i);s=fe({},s,{maxTimeToFirstByteMs:Math.min(t,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,s.maxTimeToFirstByteMs)})}}}const r=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:r.maxNumRetry||0,retryDelay:r.retryDelayMs||0,maxRetryDelay:r.maxRetryDelayMs||0},a={onSuccess:(e,t,i,s)=>{const n=this.getInternalLoader(i);this.resetInternalLoader(i.type);const r=e.data;0===r.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),cs.isMediaPlaylist(r)||i.type!==se?this.handleTrackOrLevelPlaylist(e,t,i,s||null,n):this.handleMasterPlaylist(e,t,i,s)):this.handleManifestParsingError(e,i,new Error("no EXTM3U delimiter"),s||null,t)},onError:(e,t,i,s)=>{this.handleNetworkError(t,i,!1,e,s)},onTimeout:(e,t,i)=>{this.handleNetworkError(t,i,!0,void 0,e)}};n.load(e,o,a)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,s){const n=this.hls,r=e.data,o=Ja(e,i),a=cs.parseMasterPlaylist(r,o);if(a.playlistParsingError)return void this.handleManifestParsingError(e,i,a.playlistParsingError,s,t);const{contentSteering:l,levels:d,sessionData:c,sessionKeys:h,startTimeOffset:u,variableList:f}=a;this.variableList=f;const{AUDIO:p=[],SUBTITLES:g,"CLOSED-CAPTIONS":m}=cs.parseMasterPlaylistMedia(r,o,a);p.length&&(p.some((e=>!e.url))||!d[0].audioCodec||d[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new xi({}),bitrate:0,url:""}))),n.trigger(ie.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:g,captions:m,contentSteering:l,url:o,stats:t,networkDetails:s,sessionData:c,sessionKeys:h,startTimeOffset:u,variableList:f})}handleTrackOrLevelPlaylist(e,t,i,s,n){const r=this.hls,{id:o,level:a,type:l}=i,d=Ja(e,i),c=Q(a)?a:Q(o)?o:0,h=Za(i),u=cs.parseLevelPlaylist(e.data,d,c,h,0,this.variableList);if(l===se){const e={attrs:new xi({}),bitrate:0,details:u,name:"",url:d};u.requestScheduled=t.loading.start+Ls(u,0),r.trigger(ie.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:d,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=u,this.handlePlaylistLoaded(u,e,t,i,s,n)}handleManifestParsingError(e,t,i,s,n){this.hls.trigger(ie.ERROR,{type:ee.NETWORK_ERROR,details:te.MANIFEST_PARSING_ERROR,fatal:t.type===se,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:s,stats:n})}handleNetworkError(e,t,i=!1,s,n){let r=`A network ${i?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===ne?r+=`: ${e.level} id: ${e.id}`:e.type!==re&&e.type!==oe||(r+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(r);this.hls.logger.warn(`[playlist-loader]: ${r}`);let a=te.UNKNOWN,l=!1;const d=this.getInternalLoader(e);switch(e.type){case se:a=i?te.MANIFEST_LOAD_TIMEOUT:te.MANIFEST_LOAD_ERROR,l=!0;break;case ne:a=i?te.LEVEL_LOAD_TIMEOUT:te.LEVEL_LOAD_ERROR,l=!1;break;case re:a=i?te.AUDIO_TRACK_LOAD_TIMEOUT:te.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case oe:a=i?te.SUBTITLE_TRACK_LOAD_TIMEOUT:te.SUBTITLE_LOAD_ERROR,l=!1}d&&this.resetInternalLoader(e.type);const c={type:ee.NETWORK_ERROR,details:a,fatal:l,url:e.url,loader:d,context:e,error:o,networkDetails:t,stats:n};if(s){const i=(null==t?void 0:t.url)||e.url;c.response=ge({url:i,data:void 0},s)}this.hls.trigger(ie.ERROR,c)}handlePlaylistLoaded(e,t,i,s,n,r){const o=this.hls,{type:a,level:l,id:d,groupId:c,deliveryDirectives:h}=s,u=Ja(t,s),f=Za(s),p="number"==typeof s.level&&f===ae?l:void 0;if(!e.fragments.length){const r=e.playlistParsingError=new Error("No Segments found in Playlist");return void o.trigger(ie.ERROR,{type:ee.NETWORK_ERROR,details:te.LEVEL_EMPTY_ERROR,fatal:!1,url:u,error:r,reason:r.message,response:t,context:s,level:p,parent:f,networkDetails:n,stats:i})}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const g=e.playlistParsingError;if(g){if(this.hls.logger.warn(g),!o.config.ignorePlaylistParsingErrors)return void o.trigger(ie.ERROR,{type:ee.NETWORK_ERROR,details:te.LEVEL_PARSING_ERROR,fatal:!1,url:u,error:g,reason:g.message,response:t,context:s,level:p,parent:f,networkDetails:n,stats:i});e.playlistParsingError=null}switch(e.live&&r&&(r.getCacheAge&&(e.ageHeader=r.getCacheAge()||0),r.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),a){case se:case ne:o.trigger(ie.LEVEL_LOADED,{details:e,levelInfo:s.levelOrTrack||o.levels[0],level:p||0,id:d||0,stats:i,networkDetails:n,deliveryDirectives:h,withoutMultiVariant:a===se});break;case re:o.trigger(ie.AUDIO_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:d||0,groupId:c||"",stats:i,networkDetails:n,deliveryDirectives:h});break;case oe:o.trigger(ie.SUBTITLE_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:d||0,groupId:c||"",stats:i,networkDetails:n,deliveryDirectives:h})}}}class tl{static get version(){return tn}static isMSESupported(){return qa()}static isSupported(){return function(){if(!qa())return!1;const e=Se();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((t=>e.isTypeSupported(bt(t,"video"))))||["mp4a.40.2","fLaC"].some((t=>e.isTypeSupported(bt(t,"audio")))))}()}static getMediaSource(){return Se()}static get Events(){return ie}static get MetadataSchema(){return Cn}static get ErrorTypes(){return ee}static get ErrorDetails(){return te}static get DefaultConfig(){return tl.defaultConfig?tl.defaultConfig:xa}static set DefaultConfig(e){tl.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new en,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=function(e,t,i){const s=Ee();if("object"==typeof console&&!0===e||"object"==typeof e){const t=["debug","log","info","warn","error"];t.forEach((t=>{s[t]=ye(t,e,i)}));try{s.log('Debug logs enabled for "Hls instance" in hls.js version 1.6.0')}catch(e){return Ee()}t.forEach((t=>{Te[t]=ye(t,e)}))}else fe(Te,s);return s}(e.debug||!1,0,e.assetPlayerId),i=this.config=function(e,t,i){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const s=Ba(e),n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((e=>{const r=`${"level"===e?"playlist":e}LoadPolicy`,o=void 0===t[r],a=[];n.forEach((i=>{const n=`${e}Loading${i}`,l=t[n];if(void 0!==l&&o){a.push(n);const e=s[r].default;switch(t[r]={default:e},i){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}})),a.length&&i.warn(`hls.js config: "${a.join('", "')}" setting(s) are deprecated, use "${r}": ${jt(t[r])}`)})),ge(ge({},s),t)}(tl.DefaultConfig,e,t);this.userConfig=e,i.progressive&&function(e,t){const i=e.loader;i!==Pa&&i!==Ma?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}()&&(e.loader=Pa,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}(i,t);const{abrController:s,bufferController:n,capLevelController:r,errorController:o,fpsController:a}=i,l=new o(this),d=this.abrController=new s(this),c=new fi(this),h=i.interstitialsController,u=h?this.interstitialsController=new h(this,tl):null,f=this.bufferController=new n(this,c),p=this.capLevelController=new r(this),g=new a(this),m=new el(this),v=i.contentSteeringController,A=v?new v(this):null,E=this.levelController=new Ya(this,A),y=new Ka(this),T=new Qa(this.config),b=this.streamController=new Xa(this,c,T),S=this.gapController=new Fa(this,c);p.setStreamController(b),g.setStreamController(b);const _=[m,E,b];u&&_.splice(1,0,u),A&&_.splice(1,0,A),this.networkControllers=_;const C=[d,f,S,p,g,y,c];this.audioTrackController=this.createController(i.audioTrackController,_);const R=i.audioStreamController;R&&_.push(this.audioStreamController=new R(this,c,T)),this.subtitleTrackController=this.createController(i.subtitleTrackController,_);const L=i.subtitleStreamController;L&&_.push(this.subtititleStreamController=new L(this,c,T)),this.createController(i.timelineController,C),T.emeController=this.emeController=this.createController(i.emeController,C),this.cmcdController=this.createController(i.cmcdController,C),this.latencyController=this.createController(Ha,C),this.coreComponents=C,_.push(l);const I=l.onErrorOut;"function"==typeof I&&this.on(ie.ERROR,I,l),this.on(ie.MANIFEST_LOADED,m.onManifestLoaded,m)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,s){this._emitter.off(e,t,i,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),!this.triggeringException){this.triggeringException=!0;const i=e===ie.ERROR;this.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.INTERNAL_EXCEPTION,fatal:i,event:e,error:t}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(ie.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach((e=>e.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((e=>e.destroy())),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const t=new Error(`attachMedia failed: invalid argument (${e})`);return void this.trigger(ie.ERROR,{type:ee.OTHER_ERROR,details:te.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,i=t?e.media:e,s=t?e:{media:i};this._media=i,this.trigger(ie.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(ie.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(ie.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,i=this._url,s=this._url=Me.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),t&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(ie.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,t),this.started&&this.networkControllers);i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach((e=>{e.resumeBuffering&&e.resumeBuffering()})))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach((e=>{e.pauseBuffering&&e.pauseBuffering()})))}get inFlightFragments(){const e={[ae]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[le]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[de]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(e){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)}))}}}()),e}get levels(){return this.levelController.levels||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return Bt.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let s;if(s=-1===t&&null!=e&&e.length?e.length-1:t,i)for(let t=s;t--;){const s=e[t].attrs["HDCP-LEVEL"];if(s&&s<=i)return t}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}get interstitialsManager(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){return xt(e,Ht(t),navigator.mediaCapabilities)}}tl.defaultConfig=void 0;var il=n(9371),sl=n(8220),nl=n.n(sl),rl=n(5858),ol=n.n(rl),al=n(8081),ll=n(6121),dl=n(997);const cl=async(e={})=>{var{muted:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(e,["muted"]);const s=[!0];t||il.Pw.isiOS||s.push(!1);const[n,r]=await Promise.all(s.map((e=>new Promise((t=>il.Aq.canAutoPlayMedia(t,Object.assign({inline:!0,muted:e},i)))))));return r?"unmuted":n?"muted":"notAllowed"},hl=e=>null!=e.audioTracks?e.audioTracks.length>0:null!=e.mozHasAudio?!0===e.mozHasAudio:null!=e.webkitAudioDecodedByteCount?e.webkitAudioDecodedByteCount>0:void 0;class ul extends il.iJ{get name(){return"Core"}get attributes(){return{class:"eagleplayer-container eagleplayer-loader",style:"width: 100%",tabindex:"9999","data-player":""}}get mediaControl(){return this.getPlugin("mediaControl")||this.dummyMediaControl}get i18n(){return this.getPlugin("strings")||{t:e=>e}}get activePlaybackEl(){return this.activePlayback?this.activePlayback.$el?this.activePlayback.$el.get(0):this.activePlayback.el:null}constructor(e,t){super(e),this.loading=!1,this.handleVolumeChange=e=>{const t=e.target.muted?0:100*e.target.volume;this.activeContainer.volume!==t&&this.activeContainer.setVolume(t)},this.handleBeginFullscreen=()=>{this.trigger(ll.s.CORE_FULLSCREEN,!0),this.updateSize()},this.handleEndFullscreen=()=>{this.trigger(ll.s.CORE_FULLSCREEN,!1),this.updateSize()},t&&(this.optionsLoader=t)}resize(e){this.el.style.width="100%",super.resize(e)}renderContainers(){this.containers.forEach((e=>this.el.prepend(e.render().el)))}setupContainers(e){var t;if(super.setupContainers(e),il.Pw.isiOS){const e=null===(t=this.activePlayback)||void 0===t?void 0:t.el;e&&(e.addEventListener("volumechange",this.handleVolumeChange),e.addEventListener("webkitbeginfullscreen",this.handleBeginFullscreen),e.addEventListener("webkitendfullscreen",this.handleEndFullscreen))}}removeContainer(e){if(il.Pw.isiOS){const e=this.activePlayback.el;e.removeEventListener("volumechange",this.handleVolumeChange),e.removeEventListener("webkitbeginfullscreen",this.handleBeginFullscreen),e.removeEventListener("webkitendfullscreen",this.handleEndFullscreen)}super.removeContainer(e)}async reload(e){var t,i;this.loading||(this.loading=!0,await(null===(i=(t=this.options).reload)||void 0===i?void 0:i.call(t,e)),this.loading=!1)}createContainerFactory(e){if(e.loader){const t=il.$;this.defer=t.Deferred(),this.defer.promise(this),this.containerFactory=new il.o2(e,e.loader,this.i18n,this.playerError)}}stopContainersAndPlugins(){this.disableResizeObserver(),this.containers.forEach((e=>e.destroy())),this.plugins.forEach((e=>e.destroy())),this.stopListening(),this.plugins=[],this.containers=[],this.ready=!1}replace(e){this._options=Object.assign({},e)}}var fl=n(5705),pl=n(6243),gl=n(5166),ml=n(2591);const{now:vl,listContainsIgnoreCase:Al}=il.Aq;il.sV.register("PLAYBACK_FRAGMENT_CHANGED"),il.sV.register("PLAYBACK_FRAGMENT_PARSING_METADATA");class El extends il.ab{get name(){return"hls"}get supportedVersion(){return{min:"0.5.0"}}get levels(){return this._levels||[]}get currentLevel(){return null===this._currentLevel||void 0===this._currentLevel?-1:this._currentLevel}get isReady(){return this._isReadyState}set currentLevel(e){this._currentLevel=e,this.trigger(il.sV.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}get latency(){return this._hls.latency}get currentProgramDateTime(){return this._hls.playingDate}get _startTime(){return this._playbackType===il.YZ.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}get _now(){return vl()}get _extrapolatedStartTime(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;let e=this._localStartTimeCorrelation,t=this._now-e.local,i=(e.remote+t)/1e3;return Math.min(i,this._playableRegionStartTime+this._extrapolatedWindowDuration)}get _extrapolatedEndTime(){let e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;const t=this._localEndTimeCorrelation,i=this._now-t.local,s=(t.remote+i)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(s,e))}get _duration(){return this._extrapolatedEndTime-this._startTime}get _extrapolatedWindowDuration(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}get bandwidthEstimate(){return this._hls&&this._hls.bandwidthEstimate}get defaultOptions(){return{preload:!0}}get customListeners(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}get sourceMedia(){return this.options.src}get currentTimestamp(){return this._currentFragment?(this._currentFragment.programDateTime+1e3*(this.el.currentTime-this._currentFragment.start))/1e3:null}static get HLSJS(){return tl}constructor(...e){super(...e),this.options.hlsPlayback=Object.assign(Object.assign({},this.defaultOptions),this.options.hlsPlayback),this._timeUpdateThrottleDelay=200,this._timeUpdateFiringRate=.2,this._durationChangeMinOffset=.5,this._setInitialState()}_setInitialState(){this._minDvrSize=void 0===this.options.hlsMinimumDvrSize?60:this.options.hlsMinimumDvrSize,this._extrapolatedWindowNumSegments=this.options.playback&&void 0!==this.options.playback.extrapolatedWindowNumSegments?this.options.playback.extrapolatedWindowNumSegments:2,this._playbackType=il.YZ.VOD,this._lastTimeUpdate={current:0,total:0,firstFragDateTime:0},this._lastTimeUpdateFiredTime=0,this._lastDuration=null,this._playableRegionStartTime=0,this._localStartTimeCorrelation=null,this._localEndTimeCorrelation=null,this._playableRegionDuration=0,this._programDateTime=0,this._durationExcludesAfterLiveSyncPoint=!1,this._segmentTargetDuration=null,this._playlistType=null,this._recoverAttemptsRemaining=this.options.hlsRecoverAttempts||16}_setup(){this._destroyHLSInstance(),this._createHLSInstance(),this._listenHLSEvents(),this._attachHLSMedia()}_destroyHLSInstance(){this._hls&&(this._manifestLoading=!1,this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._setInitialState(),this._hls.destroy(),this._hls=null)}_createHLSInstance(){const e=Object.assign({},this.options.playback.hlsjsConfig);this._hls=new tl(e)}_attachHLSMedia(){this._hls&&this._hls.attachMedia(this.el)}_listenHLSEvents(){this._hls&&(this._hls.once(tl.Events.MEDIA_ATTACHED,(()=>{this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src)})),this._hls.on(tl.Events.MANIFEST_LOADING,(()=>this._manifestLoading=!0)),this._hls.on(tl.Events.LEVEL_LOADED,((e,t)=>this._updatePlaybackType(e,t))),this._hls.on(tl.Events.LEVEL_UPDATED,((e,t)=>this._onLevelUpdated(e,t))),this._hls.on(tl.Events.LEVEL_SWITCHED,((e,t)=>this._onLevelSwitch(e,t))),this._hls.on(tl.Events.FRAG_CHANGED,((e,t)=>this._onFragmentChanged(e,t))),this._hls.on(tl.Events.FRAG_LOADED,((e,t)=>this._onFragmentLoaded(e,t))),this._hls.on(tl.Events.FRAG_BUFFERED,((e,t)=>this._onFragmentBuffered(e,t))),this._hls.on(tl.Events.FRAG_PARSING_METADATA,((e,t)=>this._onFragmentParsingMetadata(e,t))),this._hls.on(tl.Events.ERROR,((e,t)=>this._onHLSJSError(e,t))),this._hls.on(tl.Events.SUBTITLE_TRACK_LOADED,((e,t)=>this._onSubtitleLoaded(e,t))),this._hls.on(tl.Events.SUBTITLE_TRACKS_UPDATED,(()=>this._ccTracksUpdated=!0)),this.bindCustomListeners())}bindCustomListeners(){this.customListeners.forEach((e=>{const t=e.eventName,i=e.once?"once":"on";t&&this._hls[`${i}`](t,e.callback)}))}unbindCustomListeners(){this.customListeners.forEach((e=>{const t=e.eventName;t&&this._hls.off(t,e.callback)}))}_onFragmentParsingMetadata(e,t){this.trigger(il.sV.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:e,data:t})}render(){return this._ready(),super.render()}_ready(){this._isReadyState||(!this._hls&&this._setup(),this._isReadyState=!0,this.trigger(il.sV.PLAYBACK_READY,this.name))}_recover(e,t,i){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){il.tG.error("hlsjs: failed to recover",{evt:e,data:t}),i.level=il.Mk.Levels.FATAL;const s=this.createError(i);this.trigger(il.sV.PLAYBACK_ERROR,s),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError(),this.play();else this._recoveredDecodingError=!0,this._hls.recoverMediaError(),this.play()}_setupSrc(e){}_startTimeUpdateTimer(){this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((()=>{this._onDurationChange(),this._onTimeUpdate()}),100))}_stopTimeUpdateTimer(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}getProgramDateTime(){return this._programDateTime}getDuration(){return this._duration}getCurrentTime(){return Math.max(0,this.el.currentTime-this._startTime)}getStartTimeOffset(){return this._startTime}seekPercentage(e){const t=e>0?this._duration*(e/100):this._duration;this.seek(t)}seek(e){e<0&&(il.tG.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),e+=this._startTime,this.el.currentTime=e}seekToLivePoint(){this.seek(this.getDuration())}_updateSettings(){this._playbackType===il.YZ.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(il.sV.PLAYBACK_SETTINGSUPDATE)}_onHLSJSError(e,t){const i={code:`${t.type}_${t.details}`,description:`${this.name} error: type: ${t.type}, details: ${t.details}`,raw:t};let s;if(t.response&&(i.description+=`, response: ${JSON.stringify(t.response)}`),t.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,t.type){case tl.ErrorTypes.NETWORK_ERROR:switch(t.details){case tl.ErrorDetails.MANIFEST_LOAD_ERROR:case tl.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case tl.ErrorDetails.MANIFEST_PARSING_ERROR:case tl.ErrorDetails.LEVEL_LOAD_ERROR:case tl.ErrorDetails.LEVEL_LOAD_TIMEOUT:il.tG.error("hlsjs: unrecoverable network fatal error.",{evt:e,data:t}),s=this.createError(i),this.trigger(il.sV.PLAYBACK_ERROR,s),this.stop();break;default:il.tG.warn("hlsjs: trying to recover from network error.",{evt:e,data:t}),i.level=il.Mk.Levels.WARN,this._hls.startLoad()}break;case tl.ErrorTypes.MEDIA_ERROR:il.tG.warn("hlsjs: trying to recover from media error.",{evt:e,data:t}),i.level=il.Mk.Levels.WARN,this._recover(e,t,i);break;default:il.tG.error("hlsjs: could not recover from error.",{evt:e,data:t}),s=this.createError(i),this.trigger(il.sV.PLAYBACK_ERROR,s),this.stop()}else il.tG.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:e,data:t}),s=this.createError(i),this.trigger(il.sV.PLAYBACK_ERROR,s),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(t))return il.tG.error("hlsjs: could not load decrypt key.",{evt:e,data:t}),s=this.createError(i),this.trigger(il.sV.PLAYBACK_ERROR,s),void this.stop();i.level=il.Mk.Levels.WARN,il.tG.warn("hlsjs: non-fatal error occurred",{evt:e,data:t})}}_keyIsDenied(e){return e.type===tl.ErrorTypes.NETWORK_ERROR&&e.details===tl.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}_onTimeUpdate(){const e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._shouldThrottleTimeUpdate(e)||(this._lastTimeUpdate=e,this._lastTimeUpdateFiredTime=this._now,this.trigger(il.sV.PLAYBACK_TIMEUPDATE,e,this.name))}_shouldThrottleTimeUpdate(e){const t=Math.abs(e.current-this._lastTimeUpdate.current)<this._timeUpdateFiringRate,i=Math.abs(e.total-this._lastTimeUpdate.total)<this._durationChangeMinOffset,s=e.firstFragDateTime===this._lastTimeUpdate.firstFragDateTime,n=t&&i&&s,r=this._now-this._lastTimeUpdateFiredTime<this._timeUpdateThrottleDelay;return n&&r}_onDurationChange(){const e=this.getDuration();Math.abs(this._lastDuration-e)<this._durationChangeMinOffset||(this._lastDuration=e,super._onDurationChange())}_onProgress(){if(!this.el.buffered.length)return;let e=[],t=0;for(let i=0;i<this.el.buffered.length;i++)e=[...e,{start:Math.max(0,this.el.buffered.start(i)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(i)-this._playableRegionStartTime)}],this.el.currentTime>=e[i].start&&this.el.currentTime<=e[i].end&&(t=i);const i={start:e[t].start,current:e[t].end,total:this.getDuration()};this.trigger(il.sV.PLAYBACK_PROGRESS,i,e)}load(e){this._stopTimeUpdateTimer(),this.options.src=e,this._setup()}play(){!this._hls&&this._setup(),!this._manifestLoading&&!this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src),super.play(),this._startTimeUpdateTimer()}pause(){this._hls&&this.el.pause()}stop(){this._stopTimeUpdateTimer(),this._hls&&super.stop(),this._destroyHLSInstance()}destroy(){this._stopTimeUpdateTimer(),this._destroyHLSInstance(),super.destroy()}_updatePlaybackType(e,t){this._playbackType=t.details.live?il.YZ.LIVE:il.YZ.VOD,this._onLevelUpdated(e,t),this._ccTracksUpdated&&this._playbackType===il.YZ.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}_fillLevels(){this._levels=this._hls.levels.map(((e,t)=>({id:t,level:e,label:e.bitrate/1e3+"Kbps"}))),this.trigger(il.sV.PLAYBACK_LEVELS_AVAILABLE,this._levels)}_onLevelUpdated(e,t){this._segmentTargetDuration=t.details.targetduration,this._playlistType=t.details.type||null;let i=!1,s=!1,n=t.details.fragments,r=this._playableRegionStartTime,o=this._playableRegionDuration;if(0===n.length)return;if(n[0].rawProgramDateTime&&(this._programDateTime=n[0].rawProgramDateTime),this._playableRegionStartTime!==n[0].start&&(i=!0,this._playableRegionStartTime=n[0].start),i)if(this._localStartTimeCorrelation){let e=this._localStartTimeCorrelation,t=this._now-e.local,i=(e.remote+t)/1e3;i<n[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*n[0].start}:i>r+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(n[0].start,r+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(n[0].start+this._extrapolatedWindowDuration/2)};let a=t.details.totalduration;if(this._playbackType===il.YZ.LIVE){let e=t.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||tl.DefaultConfig.liveSyncDurationCount);e<=a?(a-=e,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}a!==this._playableRegionDuration&&(s=!0,this._playableRegionDuration=a);let l=n[0].start+a,d=r+o;if(l!==d)if(this._localEndTimeCorrelation){let e=this._localEndTimeCorrelation,t=this._now-e.local,i=(e.remote+t)/1e3;i>l?this._localEndTimeCorrelation={local:this._now,remote:1e3*l}:i<l-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(l-this._extrapolatedWindowDuration)}:i>d&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*d})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*l};s&&this._onDurationChange(),i&&this._onProgress()}_onFragmentChanged(e,t){this._currentFragment=t.frag,this.trigger(il.sV.Custom.PLAYBACK_FRAGMENT_CHANGED,t)}_onFragmentLoaded(e,t){this.trigger(il.sV.PLAYBACK_FRAGMENT_LOADED,t)}_onFragmentBuffered(e,t){this.trigger(il.sV.PLAYBACK_FRAGMENT_BUFFERED,t)}_onSubtitleLoaded(){if(!this._ccIsSetup){this.trigger(il.sV.PLAYBACK_SUBTITLE_AVAILABLE);const e=this._playbackType===il.YZ.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this._ccIsSetup=!0}}_onLevelSwitch(e,t){this.levels.length||this._fillLevels(),this.trigger(il.sV.PLAYBACK_LEVEL_SWITCH_END),this.trigger(il.sV.PLAYBACK_LEVEL_SWITCH,t);let i=this._hls.levels[t.level];i&&(this.highDefinition=i.height>=720||i.bitrate/1e3>=2e3,this.trigger(il.sV.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(il.sV.PLAYBACK_BITRATE,{height:i.height,width:i.width,bandwidth:i.bitrate,bitrate:i.bitrate,level:t.level}))}get dvrEnabled(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===il.YZ.LIVE}getPlaybackType(){return this._playbackType}isSeekEnabled(){return this._playbackType===il.YZ.VOD||this.dvrEnabled}}El.canPlay=function(e,t){const i=e.split("?")[0].match(/.*\.(.*)$/)||[],s=i.length>1&&"m3u8"===i[1].toLowerCase()||Al(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!tl.isSupported()||!s)};var yl=n(7546);class Tl extends El{constructor(){super(...arguments),this.playing=!1}get hasAudio(){return this._hasAudio}set hasAudio(e){this._hasAudio=e}static canPlay(e,t){const i=e.split("?")[0].match(/.*\.(.*)$/)||[],s=i.length>1&&"m3u8"===i[1].toLowerCase()||(r=["application/vnd.apple.mpegurl","application/x-mpegURL"],void 0!==(n=t)&&void 0!==r&&r.filter((e=>n.toLowerCase()===e.toLowerCase())).length>0);var n,r;return!(!tl.isSupported()&&!yl.Q_||!s)}get shouldLimitBuffering(){const{currentTime:e,duration:t}=this.el;return this.getPlaybackType()===il.YZ.VOD&&e+30<t}get hasEnoughBufferLength(){const{currentTime:e,buffered:t}=this.el;for(let i=0;i<t.length;i++){let s=t.start(i);const n=t.end(i);if(s<.1&&(s=0),s<=e&&e+30<=n)return!0}return!1}get bufferingEnabled(){return Tl.bufferingEnabled}set bufferingEnabled(e){Tl.bufferingEnabled=e}bindCustomListeners(){super.bindCustomListeners(),this.resumeBuffering(),this.listenTo(this,ll.s.PLAYBACK_LEVEL_SWITCH_START,this.resumeBuffering)}unbindCustomListeners(){super.unbindCustomListeners(),this.stopListening(this,ll.s.PLAYBACK_LEVEL_SWITCH_START,this.resumeBuffering)}checkBuffering(e=this.playing){this.playing=e;const t=e||!this.shouldLimitBuffering||!this.hasEnoughBufferLength;this.bufferingEnabled!==t&&(t?this.resumeBuffering():this.pauseBuffering())}pauseBuffering(){this.bufferingEnabled=!1,this._hls.pauseBuffering()}resumeBuffering(){this.bufferingEnabled=!0,this._hls.resumeBuffering()}_onLoadedData(e){var t;super._onLoadedData(e),null!==(t=this.hasAudio)&&void 0!==t||(this.hasAudio=hl(this.el)),this.trigger(ll.s.PLAYBACK_LOADEDDATA)}_onFragmentLoaded(e,t){super._onFragmentLoaded(e,t),this.checkBuffering()}clearPlayTimeout(){clearTimeout(this.playTimeout)}play(){this.playTimeout=window.setTimeout((()=>super.play()),0),this.trigger(ll.s.PLAYBACK_PLAY_INTENT),this.checkBuffering(!0)}pause(){this.clearPlayTimeout(),super.pause(),this.checkBuffering(!1)}stop(){this.clearPlayTimeout(),super.stop(),this.checkBuffering(!1)}seek(e){super.seek(e),this.checkBuffering()}configure(e){this.clearPlayTimeout(),super.configure(e)}destroy(){this.clearPlayTimeout(),super.destroy()}}Tl.bufferingEnabled=!0;var bl=n(5072),Sl=n.n(bl),_l=n(7825),Cl=n.n(_l),Rl=n(7659),Ll=n.n(Rl),Il=n(5056),kl=n.n(Il),wl=n(540),Pl=n.n(wl),Ol=n(1113),Dl=n.n(Ol),Nl=n(242),Ml={};Ml.styleTagTransform=Dl(),Ml.setAttributes=kl(),Ml.insert=Ll().bind(null,"head"),Ml.domAPI=Cl(),Ml.insertStyleElement=Pl(),Sl()(Nl.A,Ml);const xl=Nl.A&&Nl.A.locals?Nl.A.locals:void 0,Bl=`\n<div class="${xl.message}"><%- message %></div>\n<% if (canReload) { %>\n<div class="${xl.button}" data-noop-reload>\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n    <path\n      fill-rule="evenodd"\n      d="M20 0v20M0 0v20m12.5-6.6h1.8a5.48 5.48 0 0 1-4.3 2.1 5.5 5.5 0 0 1-5.48-5.04.5.5 0 0 0-.5-.46h-.5a.5.5 0 0 0-.5.54A7 7 0 0 0 10 17c2.3 0 4.33-1.12 5.6-2.84v2.34a.5.5 0 0 0 .5.5h.4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 0-.5.5v.4a.5.5 0 0 0 .5.5M7.5 8h-4a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h.4a.5.5 0 0 1 .5.5v2.34A6.96 6.96 0 0 1 10 3a7 7 0 0 1 6.98 6.46.5.5 0 0 1-.5.54h-.5a.5.5 0 0 1-.5-.46A5.5 5.5 0 0 0 10 4.5a5.48 5.48 0 0 0-4.3 2.1h1.8a.5.5 0 0 1 .5.5v.4a.5.5 0 0 1-.5.5"\n    />\n  </svg>\n  Обновить\n</div>\n<% } %>\n<% if (hasSuggest) { %>\n<div class="${xl.button}" data-noop-hide>\n  Показать рекомендации\n</div>\n<% } %>\n`;class Fl extends il.YZ{static canPlay(){return!0}get name(){return"no_op"}get supportedVersion(){return{min:"0.5.0"}}get template(){return(0,il.vs)(Bl)}get attributes(){return{class:xl.noop}}get events(){return{"click [data-noop-reload]":"reload","click [data-noop-hide]":"hide"}}reload(){const{id:e,reload:t}=this.options;e&&t({id:e})}hide(){this.$el.hide()}render(){const{handledLiveErrorCode:e,playbackNotSupportedMessage:t,playbackNotSupportedCanReload:i,sources:s}=this.options;return e||this.$el.html(this.template({message:t||this.i18n.t("playback_not_supported"),hasSuggest:!!(null==s?void 0:s.includes("not_found_fallback")),canReload:i})),this.$el.toggle(!e),this.trigger(ll.s.PLAYBACK_READY,this.name),this}}class Ul extends il.ab{get hasAudio(){return this._hasAudio}set hasAudio(e){this._hasAudio=e}isSeekEnabled(){const e=this.getDuration();return isFinite(e)||this.dvrEnabled}_onLoadedData(e){var t;super._onLoadedData(e),null!==(t=this.hasAudio)&&void 0!==t||(this.hasAudio=hl(this.el)),this.trigger(ll.s.PLAYBACK_LOADEDDATA)}clearPlayTimeout(){clearTimeout(this.playTimeout)}play(){this.playTimeout=window.setTimeout((()=>super.play()),0),this.trigger(ll.s.PLAYBACK_PLAY_INTENT)}pause(){this.clearPlayTimeout(),super.pause()}stop(){this.clearPlayTimeout(),super.stop()}configure(e){this.clearPlayTimeout(),super.configure(e)}destroy(){this.clearPlayTimeout(),super.destroy()}}var $l=n(1978),Vl=n(8522),Gl=n(9749);const jl=[fl.dZ,fl.N6,pl.Poster,gl.Viewport,ml.EventsReport,$l.Docking,Vl.Mediascope,Gl.Prometheus],Kl=[Ul,Tl],Hl=[Fl,...il.Pw.isiOS||il.Pw.isSafari?Kl.reverse():Kl];jl.forEach((e=>{il.aH.registerPlugin(e)})),Hl.forEach((e=>{il.aH.registerPlayback(e)}));class Yl extends il.Ut{constructor(){super(...arguments),this.configure=async e=>{var t,i,s,n,r,o;if(!this.core)return;const a=null===(t=this.core)||void 0===t?void 0:t.getPlugin("multiplayer");if(e.id){const{registeredPlugins:e,registeredPlaybacks:t}=il.aH;this.loader.corePlugins=this.loader.corePlugins.filter((t=>~Object.keys(e.core).map((t=>e.core[t])).indexOf(t))),this.loader.containerPlugins=this.loader.containerPlugins.filter((t=>~Object.keys(e.container).map((t=>e.container[t])).indexOf(t))),this.loader.playbackPlugins=this.loader.playbackPlugins.filter((e=>~t.indexOf(e))),null===(i=this.core)||void 0===i||i.stopContainersAndPlugins()}await this.optionsLoader.load(e),this._options=Object.assign({},this.optionsLoader.options),this.options.reload=this.configure,this.options.loader=this.loader,this.options.disableCanAutoPlay=!0;const l=this.options,{sources:d}=l,c=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(l,["sources"]);e.id?(this.options.plugins&&this.loader.addExternalPlugins(this.options.plugins),null===(s=this.core)||void 0===s||s.replace(c),this.addCorePlugins(),a&&(null===(n=this.core)||void 0===n||n.addPlugin(a))):null===(r=this.core)||void 0===r||r.configure(c),this.core.options.playbackNotSupportedMessage=(null==d?void 0:d.includes("not_found_fallback"))?this.core.i18n.t("not_found_fallback"):this.core.i18n.t("playback_not_supported"),this.core.options.playbackNotSupportedCanReload=!1,null===(o=this.core)||void 0===o||o.configure({sources:d}),await new Promise((e=>{this.listenToOnce(this.core,ll.s.CORE_RESIZE,e)}))}}get loader(){return this.player.loader}get optionsLoader(){return this.player.optionsLoader}create(){var e;return this.options.reload=this.configure,this.options.loader=this.loader,this.core=new ul(this.options,this.optionsLoader),null===(e=this.core)||void 0===e||e.createContainerFactory(this.options),this.core}}var Wl=n(7193),zl=n.n(Wl),ql=n(7083),Xl=n.n(ql),Ql=n(2136);const Zl=JSON.parse('{"unknown_error":"Video cannot be played now","video_not_found":"Video not found","video_publish_finish":"Publishing of video finished","access_denied":"Access to this video is denied in your country or on this website","geo_access_denied":"The video you requested cannot be played in your country. Sorry for the inconvenience.","warning_proxy_anon":"If you use traffic boosters, proxy servers or anonymizers please consider turning them off before viewing this content","access_restricted":"You cannot watch this video","video_processing":"Video is now processing","announce":"Broadcasting will start on {0} at {1}({2}).","no_broadcast":"No broadcast","no_signal":"No signal","no_stream":"No stream","no_connection":"Server connection terminated. Please check network settings. If you are using firewall or antivirus software then disable it.","secure_link_fail":"The link is no longer valid. Try reload the page.","watch_next":"Watch next","share":"Share","share_copy":"Copy","share_copied":"Copied","share_link":"URL","share_copy_link":"Copy URL","share_link_copied":"URL copied","share_code":"Code","share_copy_code":"Copy code","share_code_copied":"Code copied","ai_ad_hide":"Hide products","ai_ad_show":"Show products","ai_ad_buy":"Buy","ai_ad_note":"Advertisement. Advertiser: ООО «МАРКЕТПЛЕЙС»","suggest":"You may also like","replay":"Play again","advertisement":"Advertisement","advertisement_link":"More details","advertisement_after":"After advertisement","advertisement_skip":"Skip","advertisement_skip_timer":"Skip:","advertisement_watch":"Watch","advertisement_watch_timer":"Watch:","advertisement_block":"Advertisement","advertisement_block_of":"of","advertisement_block_number":"Advertisement #","advertisement_starting_in":"Advertisement starting in:","live":"Live","live_no_signal":"No signal","live_finished":"Broadcast ended","live_back_to":"Back to live","complaint":"Report","settings":"Settings","quality":"Quality","quality_auto":"Auto","speed":"Speed","speed_normal":"Normal","subtitles":"Subtitles","subtitles_off":"Off","ru":"Russian","en":"English","es":"Spanish","fr":"French","de":"Deutsch","ja":"Japanese","it":"Italian","ko":"Korean","zh":"Chinese","pt":"Portuguese","other":"Other","unmute":"Unmute","unmuted":"Unmuted","muted":"Muted","no_sound":"This video doesn\'t have sound","not_found_fallback":"Video not found, but you can choose from recommendations"}'),Jl=JSON.parse('{"unknown_error":"Просмотр видео в данный момент недоступен","video_not_found":"Видео не найдено","video_publish_finish":"Видео снято с публикации","access_denied":"Просмотр этого видео запрещен в вашей стране или на этом сайте","geo_access_denied":"К сожалению, просмотр данного видео в вашей стране невозможен.","warning_proxy_anon":"Если вы используете ускорители трафика, прокси-серверы и анонимайзеры - пожалуйста, выключите их перед просмотром видео.","access_restricted":"Вы не можете смотреть данное видео","video_processing":"Видео находится в обработке","announce":"Трансляция начнется {0} в {1} ({2}).","no_broadcast":"Нет трансляции","no_signal":"Нет сигнала","no_stream":"Нет потока","no_connection":"Соединение с сервером не установлено. Пожалуйста, проверьте настройки сети. Если вы используете фаерволлы и антивирусы - отключите их на время просмотра трансляции.","secure_link_fail":"Ссылка более не действительна, попробуйте перезагрузить страницу.","watch_next":"Смотрите далее","share":"Поделиться","share_copy":"Скопировать","share_copied":"Скопировано","share_link":"Ссылка","share_copy_link":"Копировать ссылку","share_link_copied":"Ссылка скопирована","share_code":"Код","share_copy_code":"Копировать код","share_code_copied":"Код скопирован","ai_ad_hide":"Скрыть товары","ai_ad_show":"Показать товары из видео","ai_ad_buy":"Купить","ai_ad_note":"Реклама. Рекламодатель: ООО «МАРКЕТПЛЕЙС»","suggest":"Рекомендации к просмотру","replay":"Смотреть заново","advertisement":"Реклама","advertisement_link":"Узнать больше","advertisement_after":"После рекламы","advertisement_skip":"Пропустить","advertisement_skip_timer":"Пропустить:","advertisement_watch":"Смотреть","advertisement_watch_timer":"Смотрите:","advertisement_block":"Реклама","advertisement_block_of":"из","advertisement_block_number":"Рекламный блок №","advertisement_starting_in":"Реклама через:","live":"Трансляция","live_no_signal":"Нет сигнала трансляции","live_finished":"Трансляция завершена","live_back_to":"К прямой трансляции","complaint":"Пожаловаться","settings":"Настройки","quality":"Качество","quality_auto":"Авто","speed":"Скорость","speed_normal":"Обычная","subtitles":"Субтитры","subtitles_off":"Выключены","ru":"Русский","en":"Английский","es":"Испанский","fr":"Французский","de":"Немецкий","ja":"Японский","it":"Итальянский","ko":"Корейский","zh":"Китайский","pt":"Португальский","other":"Другой","unmute":"Включить звук","unmuted":"Звук включён","muted":"Звук выключен","no_sound":"Это видео без звука","default_error_message":"Возникла проблема при загрузке видео","playback_not_supported":"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте использовать другой браузер","not_found_fallback":"Видео не найдено, но вы можете выбрать похожее из рекомендаций"}');var ed=n(5008);const td=(0,ed.L)((()=>n.e(1793).then(n.bind(n,1793)))),id=(0,ed.L)((()=>Promise.resolve().then(n.bind(n,6653)))),sd=(0,ed.L)((()=>n.e(7156).then(n.bind(n,7156)))),nd=(0,ed.L)((()=>n.e(8573).then(n.bind(n,8573)))),rd=(0,ed.L)((()=>n.e(3883).then(n.bind(n,3883)))),od=(0,ed.L)((()=>n.e(7233).then(n.bind(n,7233)))),ad=(0,ed.L)((()=>n.e(6969).then(n.bind(n,6969)))),ld=(0,ed.L)((()=>n.e(6639).then(n.bind(n,6639)))),dd=(0,ed.L)((()=>n.e(9988).then(n.bind(n,9988)))),cd=(0,ed.L)((()=>n.e(9349).then(n.bind(n,9349)))),hd=(0,ed.L)((()=>n.e(3973).then(n.bind(n,3973)))),ud=(0,ed.L)((()=>n.e(7885).then(n.bind(n,7885)))),fd=(0,ed.L)((()=>n.e(1363).then(n.bind(n,1363)))),pd=(0,ed.L)((()=>n.e(6453).then(n.bind(n,6453)))),gd=(0,ed.L)((()=>n.e(738).then(n.bind(n,738)))),md=(0,ed.L)((()=>n.e(4746).then(n.bind(n,4746)))),vd=(0,ed.L)((()=>n.e(2178).then(n.bind(n,2178)))),Ad=(0,ed.L)((()=>n.e(635).then(n.bind(n,635)))),Ed=(0,ed.L)((()=>Promise.resolve().then(n.bind(n,6243)))),yd=(0,ed.L)((()=>Promise.resolve().then(n.bind(n,5166)))),Td=(0,ed.L)((()=>Promise.resolve().then(n.bind(n,1978)))),bd=(0,ed.L)((()=>Promise.resolve().then(n.bind(n,2591)))),Sd=(0,ed.L)((()=>Promise.resolve().then(n.bind(n,9749)))),_d=(0,ed.L)((()=>n.e(9139).then(n.bind(n,9139)))),Cd=(0,ed.L)((()=>n.e(9600).then(n.bind(n,9600)))),Rd=(0,ed.L)((()=>n.e(6689).then(n.bind(n,6689)))),Ld=(0,ed.L)((()=>n.e(6947).then(n.bind(n,6947)))),Id=(0,ed.L)((()=>n.e(3477).then(n.bind(n,3477)))),kd=(0,ed.L)((()=>n.e(2763).then(n.bind(n,2763)))),wd=(0,ed.L)((()=>Promise.resolve().then(n.bind(n,8522)))),Pd=(0,ed.L)((()=>n.e(1174).then(n.bind(n,1174)))),Od=(0,ed.L)((()=>n.e(4480).then(n.bind(n,4480)))),Dd=(0,ed.L)((()=>n.e(6684).then(n.bind(n,6684))));var Nd=n(7204);const Md=n.p+"55c0750ac5225c3d6f96.png",xd=n.p+"4e75069800b136c59203.gif";class Bd extends il.bI{get name(){return"OptionsLoader"}get provider(){return this.options.provider}get playerError(){return this.player.playerError}constructor(e){super(e.options),this.multiPlayerLoaded=!1,this.createError=il.yF.createError.bind(this),this.testDownloadSpeed=Xl()((async()=>{var e,t;try{if(!il.Pw.isSafari&&!il.Pw.isiOS){const{download:i,startLevel:s}=(null===(e=window.navigator)||void 0===e?void 0:e.connection)?this.testConnection():await this.testImageDownload();(null===(t=this.options.playback)||void 0===t?void 0:t.hlsjsConfig)&&(this.options.playback.hlsjsConfig.startLevel=s),this.trigger(ll.s.OPTIONS_LOADER_SPEEDTEST,{download:i,startLevel:s})}}catch(e){}})),this.player=e}async load(e){var t,i;const s=Boolean(e.id||e.playList);s&&this.trigger(ll.s.OPTIONS_LOADER_LOADING,e);try{this.prepareOptions(e),e.id?(this.testDownloadSpeed(),await this.loadPlayerData(),await Promise.all([this.verifyAuthToken(),(async()=>{var e;try{this.parseSources(),await this.loadPlugins()}catch(t){throw(null===(e=t.details)||void 0===e?void 0:e.shouldHandleLiveError)&&await this.loadPlugins(["mediaControl","liveStatus","videoBackdrop"]),t}})(),this.testAutoPlayOptions()])):e.playList&&this.parseSources(),s&&this.trigger(ll.s.OPTIONS_LOADER_LOADED,this.options)}catch(e){const n=this.createError({code:e.code,description:null!==(i=null===(t=e.details)||void 0===t?void 0:t.message)&&void 0!==i?i:e.message,level:il.Mk.Levels.FATAL},{useCodePrefix:!1});s&&window.setTimeout((()=>{this.trigger(ll.s.OPTIONS_LOADER_ERROR,n)}),0)}}prepareOptions(t){var i,s;const{strings:n,playerTemplateId:r,checkReferrerCount:o}=this.options,{playback:a,playList:l}=this.player.options;let d;if(null==o)try{d=null===(s=(i=JSON.parse('["vp.rambler.ru","vp.dev.rambler.ru","vp-stage01.rambler.ru","vp-stage02.rambler.ru","vp-dev01.rambler.ru","vp-dev02.rambler.ru"]')).every)||void 0===s?void 0:s.call(i,(e=>{var t,i;return!(null===(i=null===(t=this.options)||void 0===t?void 0:t.referrer)||void 0===i?void 0:i.match(e))}))}catch(e){}else d=!1;if(this._options=Object.assign(Object.assign(Object.assign({},this.player.options),t),{strings:n,checkReferrerCount:d}),r&&(this._options.playerTemplateId=r),t.playback&&(this.options.playback=Object.assign(Object.assign({},a),t.playback)),t.playList&&(this.options.playList=Object.assign(Object.assign({},l),t.playList)),this.options.plugins||(this.options.plugins={core:[],container:[]}),!this.options.strings){const{language:t}=this.options;t&&(this.options.strings={[t]:e[t]})}}testConnection(){const{downlink:e,effectiveType:t}=window.navigator.connection;let i=2;t.includes("2g")?i=0:"3g"===t&&(i=1);const s=Object.keys(Bd.START_LEVEL_DOWNLINK).sort(((e,t)=>Number(e)-Number(t))).reduce(((t,s)=>"number"!=typeof t&&e<Number(s)?Bd.START_LEVEL_DOWNLINK[Number(s)][i]:t),void 0);return{download:1e3*e,startLevel:s}}async testImageDownload(){var e;const t=new Image;await new Promise((e=>{t.addEventListener("load",e),t.addEventListener("error",e),window.setTimeout(e,Bd.TEST_DOWNLOAD_SPEED_TIMEOUT),t.src=`${xd}?_=${this.options.playerId}`}));const i=null===performance||void 0===performance?void 0:performance.getEntriesByType("resource");let s,n;if(i){const r=i.find((e=>e.name.includes(t.src)));(null===(e=this.options.playback)||void 0===e?void 0:e.hlsjsConfig)&&(s=r?8*r.transferSize/1e3/((r.responseEnd-r.requestStart)/1e3):-1,n=Object.keys(Bd.START_LEVEL_SPEED).reduce(((e,t)=>"number"!=typeof e&&s<Number(t)?Bd.START_LEVEL_SPEED[Number(t)]:e),void 0))}return{download:s,startLevel:n}}async loadPlayerData(){var e,t,i,s,n,r,o,a,l,d,c,h,u,f,p,g,m,v,A,E,y,T,b,S,_,C,R,L,I,k,w,P,O,D,N,M,x,B,F,U,$,V,G,j,K,H,Y,W,z,X,Q,Z,J,ee,te,ie,se,ne,re,oe,ae,le,de,ce,he,ue,fe,pe,ge,me,ve,Ae,Ee,ye,Te,be,Se,_e,Ce,Re,Le,Ie,ke,we,Pe,Oe,De,Ne,Me,xe,Be,Fe,Ue,$e;const Ve=!!this.options.sessionId&&!!this.options.channel;let Ge,je;this.provider&&Ve&&(Ge=(await this.provider.getSessionToken()).token);try{je=await(0,al.o2)(Object.assign(Object.assign({},this.options),{sessionId:Ge}))}catch(n){if(null!==(e=(he=this.options).channel)&&void 0!==e||(he.channel=null!==(s=await(null===(i=null===(t=this.provider)||void 0===t?void 0:t.mediator)||void 0===i?void 0:i.getOptionStorage("channel")))&&void 0!==s?s:void 0),!this.options.channel||!this.options.referrer||n.code!==al.I.RECORD_NOT_FOUND.code)throw n;je=await(0,al._3)(this.options),this.options.sources=["not_found_fallback"],this.options.playbackNotSupportedCanReload=!1}const{advertisement:Ke,autoPlay:He,autoPlayMobile:Ye,playList:We,mediaControl:ze,tns:qe,comscore:Xe,yametrika:Qe}=je,Ze=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(je,["advertisement","autoPlay","autoPlayMobile","playList","mediaControl","tns","comscore","yametrika"]),Je=il.Pw.isMobile?Ye:He,et=Object.assign(Object.assign({autoPlay:"true"===Je,[q.gM]:"scroll"===Je,[q.yN]:"scroll_mute"===Je},Ze),this.options);if(et.multiplayer&&"false"!==this.options.recommendationSystem){const{useRecommendations:e,recommendationsBlockId:t,recommendationsRcmId:i,recommendationsXuid:s}=(null===(n=Ze.allFrontSettings)||void 0===n?void 0:n.playerTemplate)||{};e&&t&&i&&s&&(et.recommender={blockId:t,rcmId:i,xuid:s})}if(null==Bd.usePseudoStreaming){const e=Boolean(et.multiplayer&&(null===(o=null===(r=Ze.allFrontSettings)||void 0===r?void 0:r.playerTemplate)||void 0===o?void 0:o.usePseudoStreaming));Bd.usePseudoStreaming=e,e&&(Bd.advertisement=Ke)}if(et.usePseudoStreaming=Bd.usePseudoStreaming,et.advertisement=Bd.usePseudoStreaming?zl()(Bd.advertisement):Ke,this._options=Object.assign(Object.assign({},this.options),et),We){const{startsAt:e}=We;e?(We.startsAtDate=new Date(e),We.startsAtTimeZone=("-"===e.slice(-6,-5)?-1:1)*(Number(e.slice(-5,-3))+Number(e.slice(-2))/60)):(We.startsAtDate=null,We.startsAtTimeZone=null)}this.options.playList=We,this.options.mediaControl=ze,this.options.useDvrControls=null==We?void 0:We.dvr,this.options.hlsUseNextLevel=(null!==(a=null==We?void 0:We.chunkDuration)&&void 0!==a?a:Bd.DEFAULT_CHUNK_DURATION)<=Bd.NEXT_LEVEL_MAX_CHUNK_DURATION,this.options.channel&&(null===(d=null===(l=this.provider)||void 0===l?void 0:l.mediator)||void 0===d||d.setOptionStorage("channel",this.options.channel)),this.options.playback&&(this.options.playback.controls=!ze),et.recommender&&(this.options.recommender=et.recommender);const tt=null===(c=et.allFrontSettings)||void 0===c?void 0:c.playerTemplate;if(null!==(h=(ue=this.options).pauseSuggestFilterShuffle)&&void 0!==h||(ue.pauseSuggestFilterShuffle=il.Pw.isMobile?null==tt?void 0:tt.pauseSuggestMobileFilterShuffle:null==tt?void 0:tt.pauseSuggestFilterShuffle),null!==(u=(fe=this.options).suggestFilterShuffle)&&void 0!==u||(fe.suggestFilterShuffle=il.Pw.isMobile?null==tt?void 0:tt.suggestMobileFilterShuffle:null==tt?void 0:tt.suggestFilterShuffle),(null===(f=this.options.sources)||void 0===f?void 0:f.includes("not_found_fallback"))&&(this.options.suggestFilterShuffle=il.Pw.isMobile?null==tt?void 0:tt.notFoundSuggestMobileFilterShuffle:null==tt?void 0:tt.notFoundSuggestFilterShuffle),null!==(p=(pe=this.options).minPlayingVisibleHeight)&&void 0!==p||(pe.minPlayingVisibleHeight=il.Pw.isMobile?null==tt?void 0:tt.minPlayingVisibleHeightMobile:null==tt?void 0:tt.minPlayingVisibleHeightDesktop),null!==(g=(ge=this.options).enforceStartWhenPlayingInParent)&&void 0!==g||(ge.enforceStartWhenPlayingInParent=il.Pw.isMobile?null==tt?void 0:tt.enforceStartWhenPlayingInParentMobile:null==tt?void 0:tt.enforceStartWhenPlayingInParentDesktop),null!==(m=(me=this.options).redirectToSuggestOnClick)&&void 0!==m||(me.redirectToSuggestOnClick=il.Pw.isMobile?null==tt?void 0:tt.redirectToSuggestOnClickMobile:null==tt?void 0:tt.redirectToSuggestOnClickDesktop),null!==(v=(ve=this.options).showSuggestNames)&&void 0!==v||(ve.showSuggestNames=il.Pw.isMobile||!0!==(null==tt?void 0:tt.hideSuggestNamesDesktop)),null!==(A=(Ae=this.options).mediaControlVisible)&&void 0!==A||(Ae.mediaControlVisible=null===(E=null==tt?void 0:tt.mediaControlVisible)||void 0===E||E),this.options.mediaControlVisible||(this.options.allowUserInteraction=!1,this.options.disableKeyboardShortcuts=!0),!1!==this.options.suggest&&this.options.mediaControlVisible&&(this.options.suggest=il.Pw.isMobile?Ze.suggestMobile:Ze.suggest),(null===(y=this.options.sources)||void 0===y?void 0:y.includes("not_found_fallback"))&&"universal"===(null===(b=null===(T=this.options.mediaControl)||void 0===T?void 0:T.skinName)||void 0===b?void 0:b.toLowerCase())){delete this.options.suggest;const e=il.Pw.isMobile?null==tt?void 0:tt.notFoundSuggestMobileFilterId:null==tt?void 0:tt.notFoundSuggestFilterId;if(!e)throw new Ql.hD(al.I.RECORD_NOT_FOUND);this.options.suggest={filterId:e,url:`//${this.options.channel}.media.eagleplatform.com/api/filters/${e}/suggest.json`}}if(il.Pw.isMobile){const{docking:e}=this.options;null!=e&&!0!==e||(this.options.docking=!0===e||!0===(null==tt?void 0:tt.dockingMobile)?"middle-down":null==tt?void 0:tt.dockingMobile),null!==(S=(Ee=this.options).dockingOffsetY)&&void 0!==S||(Ee.dockingOffsetY=null==tt?void 0:tt.dockingMobileOffsetY),null!==(_=(ye=this.options).dockingCloseDelay)&&void 0!==_||(ye.dockingCloseDelay=null==tt?void 0:tt.dockingMobileCloseDelay)}else null!==(C=(Te=this.options).docking)&&void 0!==C||(Te.docking=null==tt?void 0:tt.docking),null!==(R=(be=this.options).dockingOffsetX)&&void 0!==R||(be.dockingOffsetX=null==tt?void 0:tt.dockingOffsetX),null!==(L=(Se=this.options).dockingOffsetY)&&void 0!==L||(Se.dockingOffsetY=null==tt?void 0:tt.dockingOffsetY),null!==(I=(_e=this.options).dockingCloseDelay)&&void 0!==I||(_e.dockingCloseDelay=null==tt?void 0:tt.dockingCloseDelay);null!==(k=(Ce=this.options).dockingDirection)&&void 0!==k||(Ce.dockingDirection=(null==tt?void 0:tt.dockingDirection)||"both");const{share:it,shareEmbedCodes:st,shareSocialNetworks:nt,multiplayer:rt,multiplayerTextColor:ot,multiplayerColor:at,multiplayerBackgroundColor:lt,multiplayerFontUrl:dt,mediaControlSkinName:ct,mediaControlTextColor:ht,mediaControlHoverColor:ut,mediaControlForegroundColor:ft,mediaControlBackgroundColor:pt,mediaControlFontUrl:gt,promoButtonImage:mt=(null==tt?void 0:tt.promoButtonImage),promoButtonPosition:vt=(null==tt?void 0:tt.promoButtonPosition),promoButtonClickUrl:At=(null==tt?void 0:tt.promoButtonClickUrl),promoButtonSize:Et=(null==tt?void 0:tt.promoButtonSize)}=this.options;if(null==st&&null==nt||(this.options.share=Object.assign(Object.assign({},it),{embedCodes:null!=st?st:null==it?void 0:it.embedCodes,socialNetworks:null!=nt?nt:null==it?void 0:it.socialNetworks})),(null===(w=this.options.share)||void 0===w?void 0:w.embedCodes)||(null===(P=this.options.share)||void 0===P?void 0:P.socialNetworks)||delete this.options.share,!rt||null==ot&&null==at&&null==lt&&null==dt||(this.options.multiplayer=Object.assign(Object.assign({},rt),{textColor:null!=ot?ot:null==rt?void 0:rt.textColor,color:null!=at?at:null==rt?void 0:rt.color,backgroundColor:null!=lt?lt:null==rt?void 0:rt.backgroundColor,fontUrl:null!=dt?dt:null==rt?void 0:rt.fontUrl})),null!==(O=(Re=this.options).multiplayerHidden)&&void 0!==O||(Re.multiplayerHidden=null==tt?void 0:tt.hideMultiplayer),null!==(D=(Le=this.options).multiplayerShuffle)&&void 0!==D||(Le.multiplayerShuffle=null==tt?void 0:tt.shuffleRecommendedRecords),!ze||null==ct&&null==ht&&null==ut&&null==ft&&null==pt&&null==gt||(this.options.mediaControl=Object.assign(Object.assign({},ze),{skinName:null!=ct?ct:ze.skinName,textColor:null!=ht?ht:null==ze?void 0:ze.textColor,hoverColor:null!=ut?ut:null==ze?void 0:ze.hoverColor,foregroundColor:null!=ft?ft:null==ze?void 0:ze.foregroundColor,backgroundColor:null!=pt?pt:null==ze?void 0:ze.backgroundColor,fontUrl:null!=gt?gt:null==ze?void 0:ze.fontUrl})),null!=ct){const e=ct.toLowerCase().replace(" ","_");this.options.share&&(this.options.share.skinName=e),this.options.suggest&&(this.options.suggest.skinName=e)}(null===(M=null===(N=this.options.mediaControl)||void 0===N?void 0:N.skinName)||void 0===M?void 0:M.match(/(^[A-Z]|[ _])/))&&(this.options.mediaControl.skinName=this.options.mediaControl.skinName.toLowerCase().replace(" ","_"));const yt="universal"===(null===(x=this.options.mediaControl)||void 0===x?void 0:x.skinName);let Tt;(null==We?void 0:We.snapshot)&&(Tt=We.snapshot),yt&&(!Tt||this.options.live&&Tt.includes("/auto/"))&&(Tt=Md),Tt&&(null!==(B=(Ie=this.options).poster)&&void 0!==B||(Ie.poster={custom:`black url(${Tt}) center / contain no-repeat;`})),yt&&il.Pw.isMobile&&this.options.mediaControlVisible&&(this.options.unmute=!0);let bt,St=null==tt?void 0:tt.analyticsParams;Array.isArray(St)||(St=[{type:"tns",params:qe},{type:"comscore",params:Xe},{type:"yametrika",params:Qe&&Object.assign(Object.assign({},Qe),null==tt?void 0:tt.yametrika)}].filter((e=>e.params))),St.forEach((({type:e,params:t})=>{var i;this.options[e]=(null!==(i=this.options[e])&&void 0!==i?i:[]).concat(t)})),mt&&(this.options.promoButton={image:mt,clickUrl:At,position:vt,size:Et}),null!==(F=(ke=this.options).likes)&&void 0!==F||(ke.likes=null==tt?void 0:tt.likes),null!==(U=(we=this.options).videoBackdropColor)&&void 0!==U||(we.videoBackdropColor=null==tt?void 0:tt.videoBackdropColor),this.options.videoBackdrop="none"!==this.options.videoBackdropColor;const _t=null===(V=null===($=et.allFrontSettings)||void 0===$?void 0:$.record)||void 0===V?void 0:V.episodes;if(yt&&We&&_t){const e=_t.filter((([e])=>e<We.duration/1e3)).sort((([e],[t])=>e-t)),t=Object.create(null);e.length<2||0!==e[0][0]||e.some((([e])=>{if(t[e])return!0;t[e]=!0}))||(bt=e.map((([e,t],i,s)=>{var n,r;return{start:e,end:null!==(r=null===(n=s[i+1])||void 0===n?void 0:n[0])&&void 0!==r?r:We.duration/1e3,label:t}})))}this.options.episodes=bt,bt&&(null!==(G=(Pe=this.options).thumbnails)&&void 0!==G||(Pe.thumbnails={thumbs:[]})),null!==(j=(Oe=this.options).aiAd)&&void 0!==j||(Oe.aiAd=!0===(null===(H=null===(K=et.allFrontSettings)||void 0===K?void 0:K.record)||void 0===H?void 0:H.aiAd)),et.aiAdInfo||delete this.options.aiAd,yt&&rt&&this.options.multiplayerHidden?null!==(Y=(De=this.options).watchNext)&&void 0!==Y||(De.watchNext=null==tt?void 0:tt.watchNext):delete this.options.watchNext,null!==(W=(Ne=this.options).preload)&&void 0!==W||(Ne.preload=!0===et.preloadChunksEnabled),this.options.preload||(this.options.playback&&(this.options.playback.preload="none"),this.options.hlsPlayback&&(this.options.hlsPlayback.preload=!1)),null!=(null==tt?void 0:tt.replayTimeout)&&(null!==(z=(Me=this.options).replayTimeout)&&void 0!==z||(Me.replayTimeout=null==tt?void 0:tt.replayTimeout)),null!==(X=(xe=this.options).threeSixtyViewer)&&void 0!==X||(xe.threeSixtyViewer=null===(Z=null===(Q=et.allFrontSettings)||void 0===Q?void 0:Q.record)||void 0===Z?void 0:Z.threeSixtyViewer),null!==(J=(Be=this.options).saveUserVolume)&&void 0!==J||(Be.saveUserVolume=null==tt?void 0:tt.saveUserVolume),null!==(ee=(Fe=this.options).volume)&&void 0!==ee||(Fe.volume=null!==(se=null===(ie=null===(te=et.allFrontSettings)||void 0===te?void 0:te.account)||void 0===ie?void 0:ie.initialVolume)&&void 0!==se?se:Bd.VOLUME),this.options.saveUserVolume&&(this.options.volume=null!==(oe=await(null===(re=null===(ne=this.provider)||void 0===ne?void 0:ne.mediator)||void 0===re?void 0:re.getOptionStorage("volume")))&&void 0!==oe?oe:this.options.volume),null!==(ae=(Ue=this.options).playbackRate)&&void 0!==ae||(Ue.playbackRate=!0===(null==tt?void 0:tt.playbackRate)),null!==(le=($e=this.options).minDurationToShowAd)&&void 0!==le||($e.minDurationToShowAd=null===(ce=null===(de=et.allFrontSettings)||void 0===de?void 0:de.account)||void 0===ce?void 0:ce.minDurationToShowAd)}async verifyAuthToken(){var e;const{playList:t,authToken:i,allFrontSettings:s,authTokenVerifyUrl:n=(null===(e=null==s?void 0:s.account)||void 0===e?void 0:e.authTokenVerifyUrl)}=this.options;if(n){const e=Nd.Uc.startTimer({endpoint:"authTokenVerifyUrl"});try{const e=(0,H.JT)(n,{recordId:null==t?void 0:t.id,token:i});await new Promise(((t,i)=>{const s=new XMLHttpRequest;s.open("get",e,!0),s.setRequestHeader("content-type","text/plain"),s.timeout=Bd.VERIFY_AUTH_TOKEN_TIMEOUT,s.onload=()=>{200===s.status?t():i(new Error(s.statusText))},s.onerror=()=>i(new Error(s.statusText)),s.send(null)}))}catch(e){throw new Ql.hD(al.I.ACCESS_RESTRICTED)}finally{e.observeDuration()}}}parseSources(){var e;const{playList:t,sources:i,mediaControl:s}=this.options;if(null==i?void 0:i.includes("not_found_fallback"))return;const n="empty"===(null==t?void 0:t.type)||"online"===(null==t?void 0:t.type)&&!(null==t?void 0:t.source)&&!(null==t?void 0:t.directSource),r=this.options.live?{shouldHandleLiveError:"universal"===(null==s?void 0:s.skinName)}:void 0;if(n){const i=null===(e=null==t?void 0:t.startsAtDate)||void 0===e?void 0:e.getTime();if(i&&i>Date.now())throw new Ql.hD(Object.assign(Object.assign({},al.I.ANNOUNCE),{details:r}));if(i&&i<Date.now()&&"finished"===(null==t?void 0:t.status))throw new Ql.hD(Object.assign(Object.assign({},al.I.LIVE_FINISHED),{details:r}));if(!(null==t?void 0:t.startsAt))throw new Ql.hD(Object.assign(Object.assign({},al.I.NO_BROADCAST),{details:r}))}if(!(null==t?void 0:t.directSource))throw new Ql.hD(Object.assign(Object.assign({},al.I.NO_SIGNAL),{details:r}));this.options.sources=[t.directSource]}async loadPlugin(e){var i;const s=t[e];let n;if("function"==typeof s&&("multiplayer"!==e||!this.multiPlayerLoaded))try{const{Plugin:t}=await s(),r=null===(i=this.options.plugins)||void 0===i?void 0:i[t.type];return"function"==typeof t.preload&&(n=await t.preload(this.options)),r&&r.push(t),"multiplayer"===e&&(this.multiPlayerLoaded=!0),n}catch(e){const t=this.createError({code:e.code,description:e.message,level:il.Mk.Levels.WARN},{useCodePrefix:!1});this.trigger(ll.s.OPTIONS_LOADER_ERROR,t)}}async loadPlugins(e=[]){var t,i,s;const n=[...e];if(!n.length){const{options:e}=this,r=null===(t=e.mediaControl)||void 0===t?void 0:t.skinName,{minDurationToShowAd:o=0,playList:a}=e;0!==o&&Number(((null==a?void 0:a.duration)||0)/1e3)<=o&&delete e.advertisement,n.push(...Object.keys(e).filter((t=>Boolean(e[t])))),e.qualityVisible&&n.push("levelSelector"),e.allowUserInteraction&&n.push("clickToPause"),"universal"===r&&((e.qualityVisible||e.playbackRate||(null===(i=e.subtitles)||void 0===i?void 0:i.length))&&n.push("settingsMenu"),(e.unmute||(null===(s=e.share)||void 0===s?void 0:s.embedCodes)||e.advertisement)&&n.push("notifier"),e.live&&n.push("liveStatus")),e.advertisement&&("universal"===r||"unity"===r||"rambler_2018"===r||"rambler_html5"===r||"lenta"===r||"championat_html5"===r)&&n.push("timeToAdvertisement")}const r=Nd.EH.startTimer(),o=await Promise.all(n.map((e=>this.loadPlugin(e))));r.observeDuration(),o.forEach((e=>{e&&Object.keys(e).forEach((t=>{this.options[t]=e[t]}))}))}async testAutoPlayOptions(){var e,t,i,s;const{mute:n,recordIsMute:r,autoPlayTimeout:o,autoPlay:a,[q.gM]:l,[q.yN]:d}=this.options;if(a||l||d||null!==(e=(i=this.options).autoPlayPolicy)&&void 0!==e||(i.autoPlayPolicy="off"),yl.Q_&&(this.options.autoPlay=!1,this.options[q.gM]=!1,this.options[q.yN]=!1,null!==(t=(s=this.options).autoPlayPolicy)&&void 0!==t||(s.autoPlayPolicy="notAllowedForSearchBot")),this.options.autoPlay&&document.hidden&&(this.options.autoPlay=!1,this.options[q.QT]=!0),this.options.autoPlay){const e=await cl({muted:n||r,timeout:o});"unmuted"!==e&&("muted"===e?this.options.mute=!0:this.options.autoPlay=!1),this.options.autoPlayPolicy=e}}}Bd.TEST_DOWNLOAD_SPEED_TIMEOUT=1e3,Bd.VERIFY_AUTH_TOKEN_TIMEOUT=5e3,Bd.DEFAULT_CHUNK_DURATION=1e4,Bd.NEXT_LEVEL_MAX_CHUNK_DURATION=2e3,Bd.VOLUME=10,Bd.START_LEVEL_SPEED={3:0,8:1,10:2,20:3,Infinity:void 0},Bd.START_LEVEL_DOWNLINK={2:[0,0,0],4.8:[0,0,1],8:[0,1,2],Infinity:[0,2,3]};var Fd=n(1162),Ud=n(1669),$d={};$d.styleTagTransform=Dl(),$d.setAttributes=kl(),$d.insert=Ll().bind(null,"head"),$d.domAPI=Cl(),$d.insertStyleElement=Pl(),Sl()(Ud.A,$d),Ud.A&&Ud.A.locals&&Ud.A.locals;var Vd;const Gd=Symbol("onVisibleAreaChanged"),jd=[al.I.UNKNOWN_ERROR.code,al.I.RECORD_NOT_PROCESSED.code,al.I.ANNOUNCE.code,al.I.NO_BROADCAST.code,al.I.NO_SIGNAL.code,al.I.NO_STREAM.code,al.I.NO_CONNECTION.code,"warning_proxy_anon","secure_link_fail"],Kd=[al.I.ANNOUNCE.code,al.I.LIVE_FINISHED.code,al.I.NO_BROADCAST.code,al.I.NO_SIGNAL.code,...[tl.ErrorDetails.MANIFEST_LOAD_ERROR,tl.ErrorDetails.MANIFEST_LOAD_TIMEOUT,tl.ErrorDetails.MANIFEST_PARSING_ERROR].map((e=>`hls:${tl.ErrorTypes.NETWORK_ERROR}_${e}`))];class Hd extends il.bI{get name(){return"Player"}get $parent(){return(0,il.$)(this.options.parentElement)}get provider(){return this.core.options.provider}get aspectRatio(){var e,t,i;return null!==(i=null!==(t=null===(e=this.core)||void 0===e?void 0:e.options.aspectRatio)&&void 0!==t?t:this.options.aspectRatio)&&void 0!==i?i:Fd.nT}get ended(){var e;return!(null===(e=this.advertisement)||void 0===e?void 0:e.hasAd())&&(this.core.activeContainer.ended||this.recordEnded)}get isReady(){return this.core.isReady}get mediaControl(){return this.core.getPlugin("mediaControl")}get share(){return this.core.getPlugin("share")}get viewport(){return this.core.getPlugin("viewport")}get advertisement(){return this.core.getPlugin("advertisement")}get docking(){return this.core.getPlugin("docking")}get multiPlayer(){return this.core.getPlugin("multiplayer")}get clickToPause(){var e;return null===(e=this.core.activeContainer)||void 0===e?void 0:e.getPlugin("click_to_pause")}get suggest(){return this.core.getPlugin("suggest")}get playerError(){return this.core.playerError}constructor(e){var t,i,s,n,r;super(e),this.recordEnded=!1,this.loadingErrors=0,this.onMouseMove=({target:e})=>{const t=e&&(0,il.$)(e).closest("[data-active-state]").data("activeState");null!=t?t?this.setActiveState(!1):this.unsetActiveState():this.setActiveState()},this.setActiveState=ol()(((e=!0)=>{this.stateTimeout&&this.clearStateTimeout(),this.stateTimeout&&e||(window.setTimeout((()=>{this.$parent.addClass("eplayer-active"),this.$parent.css("cursor",null)}),0),window.setTimeout(this.toggleClickToPause,Hd.ACTIVATE_TIMEOUT,!0)),e&&(this.stateTimeout=window.setTimeout(this.unsetActiveState,Hd.ACTIVE_STATE_TIMEOUT))}),Hd.ACTIVE_STATE_THROTTLE_TIMEOUT),this.unsetActiveState=()=>{var e;this.clearStateTimeout(),this.$parent.removeClass("eplayer-active"),this.$parent.css("cursor","none"),(null===(e=this.core.activeContainer)||void 0===e?void 0:e.isPlaying())&&this.toggleClickToPause(!1)},this.onInitialPlay=async()=>{var e,t;const{enforceStartWhenPlayingInParent:i,autoPlay:s,[q.QT]:n,[q.gM]:r,[q.yN]:o,playerId:a,dockingParentId:l}=this.core.options;i&&!(o||r||s||n)&&await(null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t?void 0:t.enforceStart(a,l))},this.cleanPlayingState=(e=!1)=>{var t,i,s;const n=null===(t=this.docking)||void 0===t?void 0:t.isDocked(),{playerId:r,dockingParentId:o,enforceStartWhenPlayingInParent:a}=this.core.options;n&&!e||a||null===(s=null===(i=this.provider)||void 0===i?void 0:i.mediator)||void 0===s||s.stopPlaying(r,o)},this.toggleClickToPause=e=>{var t,i;e?null===(t=this.clickToPause)||void 0===t||t.enable():null===(i=this.clickToPause)||void 0===i||i.disable()},this.onParentResize=nl()((()=>{var e,t;const i=this.fixedHeight?Number(this.core.options.height):Math.round(this.core.el.offsetWidth/this.aspectRatio);this.core.isFullscreen()||i===this.core.el.offsetHeight||(this.options.height=(null===(e=this.docking)||void 0===e?void 0:e.isDocked())||(null===(t=this.docking)||void 0===t?void 0:t.isDockingRequested())||this.multiPlayer?i:this.core.options.height,this.core.resize({width:"100%",height:i}))})),this[Vd]=ol()((async e=>{var t,i,s,n,r,o,a,l,d,c,h,u,f,p,g,m;const{mute:v,recordIsMute:A,autoPlay:E,autoPlayTimeout:y,minPlayingVisibleHeight:T=.5,playerId:b,dockingParentId:S,[q.QT]:_,[q.gM]:C,[q.yN]:R,enforceStartWhenPlayingInParent:L}=this.core.options;document.hidden&&(this.recordEnded=!1);const I=R||C||E||_,k=this.ended&&!(null===(t=this.multiPlayer)||void 0===t?void 0:t.isNextRecordRequested())&&(null===(i=this.multiPlayer)||void 0===i?void 0:i.isLastRecord),w=null===(s=this.docking)||void 0===s?void 0:s.enabled;if(!L&&(!I||k))return;if(document.hidden||!(!C&&!R||e>=T||(null===(n=this.docking)||void 0===n?void 0:n.isDockingAwaited())||(null===(r=this.docking)||void 0===r?void 0:r.isDockingRequested()))){if((this.isPlaying()||(null===(o=this.advertisement)||void 0===o?void 0:o.hasAd()))&&!this.core.isFullscreen()){if(R&&w)return void this.mute();R&&!w&&(this.mute(),this.cleanPlayingState()),R||this.pause()}return void((null===(a=this.multiPlayer)||void 0===a?void 0:a.isNextRecordRequested())&&(null===(l=this.multiPlayer)||void 0===l||l.waitNextRecord(),w||this.cleanPlayingState()))}if(null===(d=this.multiPlayer)||void 0===d?void 0:d.isNextRecordAwaited())return void(null===(c=this.multiPlayer)||void 0===c||c.autoPlayNextRecord());if(null===(h=this.multiPlayer)||void 0===h?void 0:h.isNextRecordRequested())return;if(null==this.core.options.autoPlayPolicy){const e=await cl({muted:v||A,timeout:y});this.core.configure({autoPlayPolicy:e})}const{autoPlayPolicy:P}=this.core.options;"muted"===P||"unmuted"===P?(!v&&R&&"unmuted"===P&&this.unmute(),this.isPlaying()||!1!==(E||_||(C||R)&&(L||await(null===(f=null===(u=this.provider)||void 0===u?void 0:u.mediator)||void 0===f?void 0:f.canPlay(b,S))))&&("muted"===P&&this.mute(),this.play(),_&&(this.core.options.autoPlay=!0,this.core.options[q.QT]=!1)),L&&e>=T&&!(null===(p=this.docking)||void 0===p?void 0:p.isDocked())&&!await(null===(m=null===(g=this.provider)||void 0===g?void 0:g.mediator)||void 0===m?void 0:m.canPlay(b,S))&&(this.isPlaying()?await this.onEnforceStarted():this.listenAdOrContainerPlay())):this.toggleHold(!0)}),Hd.VIEWPORT_CHANGE_THROTTLE_TIMEOUT,{leading:!1}),this.onErrorWithPlayNext=e=>{var t;this.trigger(ll.s.PLAYER_ERROR,e),null===(t=this.multiPlayer)||void 0===t||t.playNext()},this.hideSpinner=()=>{this.spinnerTimeout&&(clearTimeout(this.spinnerTimeout),delete this.spinnerTimeout),this.toggleSpinner(!1)},this.toggleSpinner=e=>{this.$parent.toggleClass("loading",e)};const o={recycleVideo:il.Pw.isMobile,disableContextMenu:!0,preload:"metadata",controls:!1,playInline:!0,crossOrigin:"anonymous",audioOnly:!1,hlsjsConfig:{capLevelToPlayerSize:!0,enableWorker:!0}};this._options=Object.assign(Object.assign({},{allowUserInteraction:!0,disableKeyboardShortcuts:!1,loop:!1,hideMediaControl:!1,hideVolumeBar:!1,disableVideoTagContextMenu:!0,exitFullscreenOnEnd:!1,disableErrorScreen:!0,autoPlayTimeout:2500,eventsReportLive:!0}),e),this.options.playback=Object.assign(Object.assign({},o),e.playback),this.options.hlsPlayback=Object.assign(Object.assign({},{preload:!0}),e.hlsPlayback),this.options.playerId=(0,dl.D)(),null!==(t=(n=this.options).referrer)&&void 0!==t||(n.referrer=document.referrer||window.location.href),this.options.referrer=null===(i=this.options.referrer)||void 0===i?void 0:i.replace(/#.+/m,""),null!==(s=(r=this.options).language)&&void 0!==s||(r.language=/^(ru|ru-RU)$/.test(il.Aq.getBrowserLanguage())?"ru":"en"),this.options.chromeless||(this.options.allowUserInteraction=!0),this.options.allowUserInteraction||(this.options.disableKeyboardShortcuts=!0),null!=this.options.height&&(this.fixedHeight=!0),this.loader=new il.aH([],this.options.playerId),this.optionsLoader=new Bd(this),this.coreFactory=new Yl(this),this.resizeObserver=new ResizeObserver(this.onParentResize),this.mutationObserver=new MutationObserver(this.onParentResize),this.options.parentId?this.setParentId(this.options.parentId):this.options.parent&&this.attachTo(this.options.parent)}setParentId(e){const t=document.querySelector(e);return t instanceof HTMLElement&&this.attachTo(t),this}attachTo(e){var t,i,s;return this.options.parentElement=e,this.options.width="100%",null!==(t=(s=this.options).height)&&void 0!==t||(s.height=Math.round(e.offsetWidth/this.aspectRatio)),this.core=this.coreFactory.create(),this.addEventListeners(),this.coreFactory.configure(this.options),null===(i=this.provider)||void 0===i||i.setPlayerId(this.options.playerId),this}configure(e){return e.id&&this.$parent.css("height",this.$parent.offset().height),this.coreFactory.configure(e),this}clearStateTimeout(){this.setActiveState.cancel(),clearTimeout(this.stateTimeout),delete this.stateTimeout}addEventListeners(){return this.core.isReady?this.onReady():this.listenToOnce(this.core,ll.s.CORE_READY,this.onReady),this.listenTo(this.core,ll.s.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),this.listenTo(this.core,ll.s.CORE_FULLSCREEN,this.onFullscreenChange),this.listenTo(this.core,ll.s.CORE_RESIZE,this.onResize),this.listenTo(this.optionsLoader,ll.s.OPTIONS_LOADER_LOADING,this.onLoading),this.listenTo(this.optionsLoader,ll.s.OPTIONS_LOADER_LOADED,this.onLoaded),this.listenTo(this.optionsLoader,ll.s.OPTIONS_LOADER_ERROR,this.onLoadingError),this.viewport&&this.listenTo(this.viewport,ll.s.VIEWPORT_VISIBLE_AREA_CHANGED,this[Gd]),this.docking&&this.listenTo(this.docking,ll.s.DOCKING_CHANGED,this.onDockingChange),this.mediaControl&&(this.listenToOnce(this.mediaControl,ll.s.MEDIACONTROL_RENDERED,this.restoreHeight),this.listenTo(this.mediaControl,ll.s.MEDIACONTROL_SHARE,this.onMediaControlShare),this.listenToOnce(this.mediaControl,ll.s.MEDIACONTROL_PLAYPAUSE_CLICK,this.stopPlayInVisibleArea),this.listenTo(this.mediaControl,ll.s.MEDIACONTROL_VOLUME_CLICK,this.stopUnmuteInVisibleArea),this.listenTo(this.mediaControl,ll.s.MEDIACONTROL_MUTE_CLICK,this.stopUnmuteInVisibleArea)),this.multiPlayer&&this.listenTo(this.multiPlayer,ll.s.MULTIPLAYER_SUGGEST_TIMEOUT,this.onMultiPlayerSuggestTimeout),this.advertisement&&(this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_LOADING,this.onAdLoading),this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_LOADED,this.hideSpinner),this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_ERROR,this.onAdError),this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_STARTED,this.onAdStarted),this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_PAUSED,this.onAdPaused),this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_COMPLETE,this.onAdPaused),this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_RESUMED,this.onAdResumed),this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_ENDED,this.onAdEnded),this.listenTo(this.advertisement,ll.s.ADVERTISEMENT_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested),this.listenToOnce(this.advertisement,ll.s.ADVERTISEMENT_INTERACTION_PLAYING,this.stopPlayInVisibleArea)),this}addContainerEventListeners(){var e;const{activeContainer:t,activePlayback:i}=this.core;return t&&(this.listenToOnce(t,ll.s.CONTAINER_PLAY,this.onStartPlay),this.listenToOnce(t,ll.s.CONTAINER_CLICK,this.stopPlayInVisibleArea),this.listenTo(t,ll.s.CONTAINER_PLAY,this.onPlay),this.listenTo(t,ll.s.CONTAINER_PAUSE,this.onPause),this.listenTo(t,ll.s.CONTAINER_STOP,this.onStop),this.listenTo(t,ll.s.CONTAINER_ENDED,this.onEnded),this.listenTo(t,ll.s.CONTAINER_SEEK,this.onSeek),this.listenTo(t,ll.s.CONTAINER_ERROR,this.onError),this.suggest&&this.listenTo(this.suggest,ll.s.SUGGEST_ERROR,this.onError),this.listenTo(t,ll.s.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(t,ll.s.CONTAINER_VOLUME,this.onVolumeUpdate),this.listenTo(t,ll.s.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable)),i&&(this.listenTo(i,ll.s.PLAYBACK_BUFFERING,this.onBuffering),(null===(e=this.docking)||void 0===e?void 0:e.enabled)&&this.listenTo(i,ll.s.PLAYBACK_PLAY_INTENT,this.onInitialPlay),this.listenTo(i,ll.s.PLAYBACK_BUFFERFULL,this.hideSpinner),i.buffering&&this.showSpinner()),this}stopListening(e,t,i){return i||(this.clearStateTimeout(),clearTimeout(this.spinnerTimeout),delete this.spinnerTimeout,this.resizeObserver.disconnect(),this.mutationObserver.disconnect(),document.removeEventListener("mousemove",this.onMouseMove)),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.addEventListeners()}stopPlayInVisibleArea(){this.core.options.autoPlay=!1,this.core.options[q.gM]=!1}stopUnmuteInVisibleArea(e){const{[q.yN]:t}=this.core.options;if(0===e&&t)return this.autoPlayCache=t,void(this.core.options[q.yN]=!1);const i=e>0;i&&this.core.configure({autoPlayPolicy:"unmuted"}),i&&this.isPlaying()&&this.autoPlayCache&&(this.core.options[q.yN]=!0,this.autoPlayCache=null)}onReady(){var e,t,i;this.addContainerEventListeners();const{playList:s,useDvrControls:n,autoPlay:r,[q.QT]:o,[q.gM]:a,[q.yN]:l,sources:d}=this.core.options;this.$parent.addClass("eagleplayer eagleplayer-instance eplayer eplayer-ios-noskin"),this.$parent.toggleClass("eplayer-mobile",il.Pw.isMobile).toggleClass("eplayer-not-mobile",!il.Pw.isMobile).toggleClass("eplayer-not-found",null==d?void 0:d.includes("not_found_fallback"));const c=l||a||r||o;this.toggleHold(!c),this.toggleSize((null===(e=this.core.activeContainer)||void 0===e?void 0:e.el.offsetWidth)<Fd.Pn);const h="online"===(null==s?void 0:s.type)||"empty"===(null==s?void 0:s.type);this.$parent.toggleClass("eplayer-live",h&&!0!==n).toggleClass("eplayer-live-dvr",h&&!0===n),this.$parent.css({color:"white",fontSize:16,fontFamily:"Helvetica, Helvetica Neue, Arial",overflow:"hidden",position:"relative"}),null===(t=this.core.activeContainer)||void 0===t||t.$el.css({width:"100%",height:"100%",position:"relative",top:0,background:"black"}),null===(i=this.core.activePlayback)||void 0===i||i.$el.css({width:"100%",height:"100%"});const u=document.body||document.documentElement;this.resizeObserver.observe(u),this.mutationObserver.observe(u,{childList:!0,subtree:!0}),document.addEventListener("mousemove",this.onMouseMove),this.setActiveState()}listenAdOrContainerPlay(){this.listenToOnce(this.advertisement,ll.s.ADVERTISEMENT_STARTED,this.onEnforceStarted),this.listenToOnce(this.core.activeContainer,ll.s.CONTAINER_PLAY,this.onEnforceStarted)}async onEnforceStarted(){var e,t;const{playerId:i,dockingParentId:s}=this.core.options;this.stopListening(this.advertisement,ll.s.ADVERTISEMENT_STARTED,this.onEnforceStarted),this.stopListening(this.core.activeContainer,ll.s.CONTAINER_PLAY,this.onEnforceStarted),await(null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t?void 0:t.enforceStart(i,s))}onFullscreenChange(e){this.trigger(ll.s.PLAYER_FULLSCREEN,e),this.$parent.toggleClass("eagleplayer-fullscreen fullscreen-on",e)}onDockingChange(e){const{dockingWidth:t=Fd.Pn}=this.options;"boolean"==typeof this.fixedHeight&&(e?this.dockedHeight=this.core.options.height:this.core.options.height=this.dockedHeight,this.fixedHeight=!e),t<Fd.Pn&&this.toggleSize(e),this.$parent.toggleClass("eplayer-docked",e),this.trigger(ll.s.PLAYER_DOCK,e)}onVolumeUpdate(e){var t;this.trigger(ll.s.PLAYER_VOLUMEUPDATE,e),this.$parent.toggleClass("eplayer-mute",0===e),(null===(t=this.docking)||void 0===t?void 0:t.enabled)||this.isPlaying()&&0===e&&this.cleanPlayingState()}onSubtitleAvailable(){this.trigger(ll.s.PLAYER_SUBTITLE_AVAILABLE)}onResize(e){Number(e.width)&&Number(e.height)&&(this.toggleSize(Number(e.width)<Fd.Pn),this.$parent.toggleClass("eplayer-vertical",this.aspectRatio<1),this.trigger(ll.s.PLAYER_RESIZE,e))}onStartPlay(){const{startPosition:e}=this.core.options;e&&this.seek(e)}onPlay(){var e,t;this.recordEnded=!1,this.trigger(ll.s.PLAYER_PLAY),this.toggleHold(!1),this.$parent.addClass("eagleplayer-state-play"),null===(t=null===(e=this.core.options.playback)||void 0===e?void 0:e.hlsjsConfig)||void 0===t||delete t.startLevel,clearTimeout(this.cleanMediatorStateTimeout),delete this.cleanMediatorStateTimeout,this.getVolume()&&this.autoPlayCache&&(this.autoPlayCache=null,this.core.options[q.yN]=!0)}onPause(){var e;const{[q.yN]:t}=this.core.options;this.trigger(ll.s.PLAYER_PAUSE),this.toggleHold(!0),this.$parent.removeClass("eagleplayer-state-play"),this.toggleClickToPause(!0),null!==(e=this.cleanMediatorStateTimeout)&&void 0!==e||(this.cleanMediatorStateTimeout=window.setTimeout(this.cleanPlayingState,Hd.CLEAN_MEDIATOR_STATE_TIMEOUT)),t&&(this.autoPlayCache=t),this.core.options[q.yN]=!1}onStop(){var e;this.trigger(ll.s.PLAYER_STOP,this.getCurrentTime()),this.toggleHold(!0),this.hideSpinner(),this.toggleClickToPause(!0),null!==(e=this.cleanMediatorStateTimeout)&&void 0!==e||(this.cleanMediatorStateTimeout=window.setTimeout(this.cleanPlayingState,Hd.CLEAN_MEDIATOR_STATE_TIMEOUT))}onEnded(){var e;this.recordEnded=!0,this.trigger(ll.s.PLAYER_ENDED),this.hideSpinner(),this.seek(0),this.toggleHold(!0),this.toggleClickToPause(!0),null!==(e=this.cleanMediatorStateTimeout)&&void 0!==e||(this.cleanMediatorStateTimeout=window.setTimeout(this.cleanPlayingState,Hd.CLEAN_MEDIATOR_STATE_TIMEOUT))}onSeek(e){this.trigger(ll.s.PLAYER_SEEK,e)}onTimeUpdate(e){this.trigger(ll.s.PLAYER_TIMEUPDATE,e)}onError(e){var t,i,s,n,r;if(this.trigger(ll.s.PLAYER_ERROR,e),this.hideSpinner(),(null==e?void 0:e.level)!==il.Mk.Levels.FATAL)return;let o=e.code===al.I.ANNOUNCE.code&&e.description||e.code&&(null===(t=this.core)||void 0===t?void 0:t.i18n.t(e.code))||null;if(e.code===o&&(o=null),e.origin!==this.optionsLoader.name&&e.origin!==(null===(i=this.suggest)||void 0===i?void 0:i.name)){const t=new Error("playback failed"),i=this.getCurrentTime(),n=this.core.options.playList,r=null!==(s=null==n?void 0:n.directSource)&&void 0!==s?s:null==n?void 0:n.source,{UI:o}=e,a=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(e,["UI"]),l={source:r,currentTime:i,playbackError:a,errorCode:String(a.code)};(0,W.Cp)(t,l)}const a=e.code&&Kd.includes(e.code)&&this.core.getPlugin("liveStatus")?e.code:void 0,l={autoPlay:!0,source:"error",handledLiveErrorCode:a,playbackNotSupportedMessage:o||(null===(n=this.core)||void 0===n?void 0:n.i18n.t("default_error_message")),playbackNotSupportedCanReload:!o||!!e.code&&jd.indexOf(e.code)>-1};this.core.configure(l),a||null===(r=this.mediaControl)||void 0===r||r.disable()}onLoading(){clearTimeout(this.nextRecordTimeout),this.onBuffering()}onLoaded(){this.hideSpinner(),this.loadingErrors=0,this.trigger(ll.s.PLAYER_READY)}onLoadingError(e){if(this.multiPlayer&&e.level===il.Mk.Levels.FATAL)return this.loadingErrors<Hd.MAX_LOADING_ERRORS?this.onErrorWithPlayNext(e):this.nextRecordTimeout=window.setTimeout(this.onErrorWithPlayNext,Hd.NEXT_RECORD_AFTER_ERROR_TIMEOUT,e),void(this.loadingErrors+=1);this.onError(e)}onMultiPlayerSuggestTimeout(){window.setTimeout((()=>{clearTimeout(this.cleanMediatorStateTimeout),delete this.cleanMediatorStateTimeout}),0)}onAdLoading(e){var t;"banner"!==e.blockType&&"bannerMobile"!==e.blockType&&!(null===(t=this.advertisement)||void 0===t?void 0:t.isPreRollWithStartTime(e.blockType))&&"middleRoll"!==e.blockType&&"middleRollMobile"!==e.blockType&&"pseudostreaming"!==e.blockType&&"pseudostreamingMobile"!==e.blockType&&(clearTimeout(this.hideAdSpinnerTimeout),delete this.hideAdSpinnerTimeout,this.toggleSpinner(!0)),clearTimeout(this.cleanMediatorStateTimeout),delete this.cleanMediatorStateTimeout}onAdError(){this.hideAdSpinnerTimeout=window.setTimeout(this.hideSpinner,0)}onAdStarted(){this.trigger(ll.s.ADVERTISEMENT_STARTED)}onAdPaused(){var e;this.trigger(ll.s.ADVERTISEMENT_PAUSED),(null===(e=this.docking)||void 0===e?void 0:e.enabled)||this.cleanPlayingState()}onAdResumed(){this.trigger(ll.s.ADVERTISEMENT_RESUMED)}onAdEnded(){this.trigger(ll.s.ADVERTISEMENT_ENDED)}onAdContentResumeRequested(e){var t;("postRoll"===e.blockType||"postRollMobile"===e.blockType||"pauseBanner"===e.blockType||"pauseBannerMobile"===e.blockType)&&(null!==(t=this.cleanMediatorStateTimeout)&&void 0!==t||(this.cleanMediatorStateTimeout=window.setTimeout(this.cleanPlayingState,Hd.CLEAN_MEDIATOR_STATE_TIMEOUT)))}onMediaControlShare(){this.share&&this.viewport&&(this.stopListening(this.viewport,ll.s.VIEWPORT_VISIBLE_AREA_CHANGED,this[Gd]),this.listenToOnce(this.share,ll.s.SHARE_CLOSE,(()=>{this.listenTo(this.viewport,ll.s.VIEWPORT_VISIBLE_AREA_CHANGED,this[Gd])})))}onBuffering(){this.showSpinner(),this.toggleHold(!1)}showSpinner(){this.spinnerTimeout||(this.spinnerTimeout=window.setTimeout(this.toggleSpinner,Hd.SPINNER_TIMEOUT,!0))}toggleHold(e){this.$parent.toggleClass("eplayer-hold-skin",e)}toggleSize(e){this.$parent.toggleClass("eplayer-xs",e)}restoreHeight(){this.$parent.css("height",null)}toggleFullscreen(){var e;return null===(e=this.mediaControl)||void 0===e||e.toggleFullscreen(),this}resize(e){var t;const i=null!==(t=e.height)&&void 0!==t?t:Math.round(this.core.el.offsetWidth/this.aspectRatio);null!=e.height?this.fixedHeight=!0:delete this.fixedHeight,this.core.resize({width:"100%",height:i})}destroy(){return this.stopListening(),this.core.destroy(),this.cleanPlayingState(!0),this}play(){var e,t;return(null===(e=this.advertisement)||void 0===e?void 0:e.hasAd())?null===(t=this.advertisement)||void 0===t||t.play():this.core.activeContainer.play(),this}pause(){var e,t;return(null===(e=this.advertisement)||void 0===e?void 0:e.hasAd())?null===(t=this.advertisement)||void 0===t||t.pause():this.core.activeContainer.pause(),this}stop(){return this.core.activeContainer.stop(),this}seek(e){return this.core.activeContainer.seek(e),this}seekPercentage(e){return this.core.activeContainer.seekPercentage(e),this}mute(){var e,t,i;return(null===(e=this.mediaControl)||void 0===e?void 0:e.muted)||(this.mutedVolume=null===(t=this.mediaControl)||void 0===t?void 0:t.volume,null===(i=this.mediaControl)||void 0===i||i.setVolume(0)),this}unmute(){var e,t,i;const{volume:s}=this.core.options;return(null===(e=this.mediaControl)||void 0===e?void 0:e.muted)&&(null===(t=this.mediaControl)||void 0===t||t.setVolume(null!==(i=this.mutedVolume)&&void 0!==i?i:s),delete this.mutedVolume),this}setVolume(e){var t;return null===(t=this.mediaControl)||void 0===t||t.setVolume(e),this}isPlaying(){var e;return this.core.activeContainer.isPlaying()||!!(null===(e=this.advertisement)||void 0===e?void 0:e.isPlaying())}getVolume(){var e,t;return null!==(t=null===(e=this.mediaControl)||void 0===e?void 0:e.volume)&&void 0!==t?t:0}getCurrentTime(){return this.core.activeContainer.getCurrentTime()}getStartTimeOffset(){return this.core.activeContainer.getStartTimeOffset()}getDuration(){return this.core.activeContainer.getDuration()}getSourceLink(){var e,t;return null!==(t=null===(e=this.core.options.playList)||void 0===e?void 0:e.link)&&void 0!==t?t:""}}var Yd,Wd;Vd=Gd,Hd.SPINNER_TIMEOUT=300,Hd.ACTIVE_STATE_TIMEOUT=3e3,Hd.ACTIVE_STATE_THROTTLE_TIMEOUT=300,Hd.VIEWPORT_CHANGE_THROTTLE_TIMEOUT=200,Hd.ACTIVATE_TIMEOUT=il.Pw.isMobile?1e3:0,Hd.CLEAN_MEDIATOR_STATE_TIMEOUT=100,Hd.NEXT_RECORD_AFTER_ERROR_TIMEOUT=1e3,Hd.MAX_LOADING_ERRORS=3,(Wd=Yd||(Yd={})).PLAYER_READY="ready",Wd.PLAYER_RESIZE="resize",Wd.PLAYER_FULLSCREEN="fullscreen",Wd.PLAYER_DOCK="dock",Wd.PLAYER_PLAY="play",Wd.PLAYER_PAUSE="pause",Wd.PLAYER_STOP="stop",Wd.PLAYER_ENDED="ended",Wd.PLAYER_SEEK="seek",Wd.PLAYER_ERROR="playererror",Wd.PLAYER_TIMEUPDATE="timeupdate",Wd.PLAYER_VOLUMEUPDATE="volumeupdate",Wd.PLAYER_DESTROY="destroy",Wd.ADVERTISEMENT_STARTED="advertisement:started",Wd.ADVERTISEMENT_PAUSED="advertisement:paused",Wd.ADVERTISEMENT_RESUMED="advertisement:resumed",Wd.ADVERTISEMENT_ENDED="advertisement:ended",Wd.ADVERTISEMENT_ERROR="advertisement:error";var zd=n(7007);let qd,Xd;const Qd=async()=>{const e=await(async()=>{if(!qd){Xd||(Xd=(async()=>{window.ramblerIdHelper=window.ramblerIdHelper||[],await Promise.all([new Promise((e=>{window.ramblerIdHelper.push((()=>{qd=window.ramblerIdHelper,e()}))})),(0,X.k0)("https://id.rambler.ru/rambler-id-helper/auth_events.js")])})());try{await Xd}catch(e){}}return qd})();return new Promise(((t,i)=>{e.getSessionToken(((e,s)=>{s?i(s):t(e)}))}))},Zd=(()=>{let e;return()=>(e||(e=(async()=>{window.userID=window.userID||[];try{const[e]=await Promise.all([new Promise((e=>{window.userID.push((()=>{e(new window.userID)}))})),(0,X.k0)("https://ssp.rambler.ru/user-id-sdk.js")]);return e}catch(t){throw e=void 0,t}})()),e)})(),Jd=async()=>{try{return(await Zd()).getFingerPrint()}catch(e){return""}};var ec=n(5250),tc=n(9987);class ic extends zd.EventEmitter{constructor(){super(...arguments),this.startTime=Date.now(),this.getSessionToken=Qd,this.getCookie=ec.R,this.setCookie=ec.T,this.activateTop100=tc.ez,this.sendCustomVars=tc.yP,this.getFingerPrintUserId=Jd}getStartTime(){return this.startTime}setPlayerId(e){this.playerId=e}}class sc extends ic{constructor(e){super(),this.docked=!1,this.getVisibleArea=()=>new Promise((e=>{this.ampIntegration.getIntersection((t=>{const{offsetWidth:i,offsetHeight:s}=document.documentElement,n=s*(this.docked?1:t.intersectionRatio);e({width:i,height:n,left:0,top:0,right:i,bottom:n})}))})),this.getEmbedVisibleArea=()=>this.getVisibleArea(),this.subscribePageScroll=e=>()=>null,this.subscribeVisibleAreaChange=e=>{const t=window.setInterval((async()=>{const t=await this.getVisibleArea();e(t)}),2e3);return()=>{clearInterval(t)}},this.ampIntegration=e,this.ampIntegration.method("showcontrols",(()=>{this.docked=!1})),this.ampIntegration.method("hidecontrols",(()=>{this.docked=!0}))}}const nc=e=>Boolean(e.amp),rc=async e=>{const t=await new Promise((e=>{window.AmpVideoIframe=window.AmpVideoIframe||[],window.AmpVideoIframe.push(e),(0,X.k0)("https://cdn.ampproject.org/video-iframe-integration-v0.js")})),i=new sc(t),s=new Hd(Object.assign(Object.assign({},e),{provider:i,docking:!1}));let n=!1;t.method("play",(()=>s.play())),t.method("pause",(()=>s.pause())),t.method("mute",(()=>s.mute())),t.method("unmute",(()=>s.unmute())),t.method("fullscreenenter",(()=>!n&&s.toggleFullscreen())),t.method("fullscreenexit",(()=>n&&s.toggleFullscreen())),s.on(Yd.PLAYER_READY,(()=>{t.postEvent("canplay"),0===s.getVolume()&&t.postEvent("muted")})),s.on(Yd.PLAYER_PLAY,(()=>t.postEvent("playing"))),s.on(Yd.PLAYER_PAUSE,(()=>t.postEvent("pause"))),s.on(Yd.PLAYER_ENDED,(()=>t.postEvent("ended"))),s.on(Yd.PLAYER_FULLSCREEN,(e=>{n=e})),s.on(Yd.PLAYER_VOLUMEUPDATE,(e=>t.postEvent(0===e?"muted":"unmuted"))),s.on(Yd.PLAYER_RESIZE,(e=>{window.parent.postMessage({sentinel:"amp",type:"embed-size",height:e.height},"*")})),s.on(Yd.ADVERTISEMENT_STARTED,(()=>{t.postEvent("playing"),t.postEvent("ad_start")})),s.on(Yd.ADVERTISEMENT_PAUSED,(()=>t.postEvent("pause"))),s.on(Yd.ADVERTISEMENT_RESUMED,(()=>t.postEvent("playing"))),s.on(Yd.ADVERTISEMENT_ENDED,(()=>t.postEvent("ad_end")))};class oc extends ic{getVisibleArea(){return Promise.resolve({})}getEmbedVisibleArea(){return this.getVisibleArea()}subscribePageScroll(e){return()=>null}subscribeVisibleAreaChange(e){return()=>null}}const ac=e=>!0,lc=e=>{const t=new oc;new Hd(Object.assign(Object.assign({},e),{provider:t,docking:!1,[q.gM]:!1,[q.yN]:!1}))};var dc=n(1687),cc=n(2633);const hc=e=>Boolean(e.widgetId&&window!==window.top),uc=e=>{(0,dc._s)({async initialize(){this.player=new Hd(Object.assign(Object.assign({},e),{provider:this.provider}));try{await new Promise(((e,t)=>{this.player.once(Yd.PLAYER_READY,e),this.player.once(Yd.PLAYER_ERROR,t)})),this.provider.once("widgetShown",(()=>{this.provider.emit(Yd.PLAYER_READY)}))}catch(e){this.provider.once("widgetShown",(()=>{this.provider.emit(Yd.PLAYER_ERROR,e)}))}finally{Object.keys(Yd).forEach((e=>{const t=Yd[e];this.player.on(t,((...e)=>{this.provider.emit(t,...e)}))}))}}},{toggleFullscreen(){this.player.toggleFullscreen()},resize(e){this.player.resize(e)},play(){this.player.play()},pause(){this.player.pause()},stop(){this.player.stop()},seek(e){this.player.seek(e)},seekPercentage(e){this.player.seekPercentage(e)},mute(){this.player.mute()},unmute(){this.player.unmute()},setVolume(e){this.player.setVolume(e)},configure(e){e.id=(0,cc.x)(e.id),this.player.configure(e)},isReady(){return this.player.isReady},isPlaying(){return this.player.isPlaying()},getVolume(){return this.player.getVolume()},getCurrentTime(){return this.player.getCurrentTime()},getStartTimeOffset(){return this.player.getStartTimeOffset()},getDuration(){return this.player.getDuration()},getSourceLink(){return this.player.getSourceLink()}})};var fc,pc=n(4774),gc={};gc.styleTagTransform=Dl(),gc.setAttributes=kl(),gc.insert=Ll().bind(null,"head"),gc.domAPI=Cl(),gc.insertStyleElement=Pl(),Sl()(pc.A,gc),pc.A&&pc.A.locals&&pc.A.locals;const mc=[i,r,s];(0,W.hD)(),null!==(fc=n.g.ResizeObserver)&&void 0!==fc||(n.g.ResizeObserver=K);const{href:vc,hash:Ac,protocol:Ec,hostname:yc}=window.location,Tc=(0,H.J1)({protocol:Ec,host:yc}),bc=(0,H.al)(vc),Sc=(0,H.al)(`${Tc}${Ac.replace(/^#/,"?")}`),_c=Object.assign(Object.assign({},bc),Sc),Cc=(0,q.qg)(_c);Cc.parent=document.createElement("div"),document.body.appendChild(Cc.parent);const Rc=mc.find((e=>e.isSupports(Cc)));if(!Rc)throw new Error("supported player integration not found");Cc.referrer&&(0,W.NA)("referrer",Cc.referrer),(0,Y.o)(Boolean(Cc.debug)),(0,z.Q)(),Rc.registerIFrame(Cc)})()})();
//# sourceMappingURL=player-c4ea7a737688e8412374.js.map</script><div class="eagleplayer eagleplayer-instance eplayer eplayer-ios-noskin eplayer-not-mobile eplayer-mute eagleplayer-state-play" style="color: white; font-size: 16px; font-family: Helvetica, &quot;Helvetica Neue&quot;, Arial; overflow: hidden; position: relative; cursor: none;"><div class="eagleplayer-container eagleplayer-loader settings-menu-with-rates eplayer-light-main-color eplayer-normal-menu eplayer-large-title eplayer-large-screen eplayer-large-size eplayer-large-height eplayer-watch-next-large eplayer-watch-next-three-lines eplayer-active-watch-next-three-lines settings-menu-multiple settings-menu-with-levels" style="width: 100%; height: 349px;" tabindex="9999" data-player=""><div class="eagleplayer-advertisement" style="width: 100%; display: none; height: 349px;" data-advertisement=""><div class="eagleplayer-advertisement-container" data-ad-container=""></div>
<a class="eagleplayer-advertisement-click-area" data-ad-click="" style="display: none;"></a>
</div><div class="container pointer-enabled" data-container="" style="width: 100%; height: 100%; position: relative; top: 0px; background: black;"><style class="clappr-style">[object Object]</style><div data-video-backdrop=""><canvas width="620" height="349"></canvas><canvas style="display: none;"></canvas></div><video data-html5-video="" muted="true" preload="metadata" crossorigin="anonymous" playsinline="playsinline" src="blob:https://vp.rambler.ru/de0bd78f-9ea4-4016-89e3-ce284795c341" style="width: 100%; height: 100%;"><style class="clappr-style">[object Object]</style></video><div class="eplayer-poster" data-poster="" style="background: url(&quot;https://static.eaglecdn.com/eda/logos/5/8/58540171fe9d7aeaeed5f732c90beeb7845d0e86.jpg?1553681665&quot;) center center / contain no-repeat transparent; display: none;"></div></div><div class="eplayer-skin lkmOG3wUM0Z5a0SeJ1r5 eplayer-title-hidden Ui6arcgDYDPWnMjd1t5M" data-media-control="" style="--player-height: 349px; --player-width: 620px; --duration: 263.44; --seekbar-loaded-left: 0.0003036744609778318; --seekbar-loaded: 1; --seekbar-position: 0.4825509300030367;"><div class="d0Wtmh2nCgM8caj_TqLG eplayer-skin-fullsize">
  <div class="QYO7K0CPc6Not_CRjC15 pZUgR3nHn1YXpC3zT3f7">
    <svg class="bRPcZBMubpuqfuqcSLH7 i7ub3t6TEyYfkQOp60xA" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 110 110">
      <circle class="_PrcML9Dd5BCBD5o3N8u" cx="55" cy="55" r="50"></circle>
      <circle class="jWK0NJrUpXuxqUNbLdAu XLBBfwYI1SCCEQ1VJtGA" cx="55" cy="55" r="50"></circle>
    </svg>
  </div>
</div>
<div class="
  u9XDMzbFMAqO7NyK9ulv
  eplayer-skin-component eplayer-holdable eplayer-hide-control-start
">
<div class="_32zwiHYCtqPi8PyAE0S">
  <div class="BKlUDFsUy1ipHeZoPJ8N TiO74SfiDSOKcmosHslW">
    <span class="RNBojmMlPZ8PvONeJKpw K01cowoNUeJSyzVMDrXz URPE3uegZa6K1qu6Kyae" data-toggle-play="">
      <svg class="wPIaSvDsJJ39mLEwu8s6 oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M20 0v20M0 0v20m17.48-9.13L6.5 17.15a1 1 0 0 1-1.5-.87V3.72a1 1 0 0 1 1.5-.87l10.98 6.28a1 1 0 0 1 0 1.74"></path>
      </svg>
      <svg class="AhNM5yJEK_Nzb6Nq_m0p oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M20 0v20M0 0v20m15-4V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1m-7 1H6a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1"></path>
      </svg>
      <svg class="C29dzOZnB_rpOjH1jFWr oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M0 20V0m20 20V0M4.62 8.81a5.51 5.51 0 0 0 4.9 6.67.5.5 0 0 1 .48.5v.5a.5.5 0 0 1-.52.5A7 7 0 0 1 10 3c2.3 0 4.33 1.12 5.6 2.84V3.5a.5.5 0 0 1 .5-.5h.4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-.4a.5.5 0 0 1 .5-.5h1.8a5.48 5.48 0 0 0-5.36-2 5.5 5.5 0 0 0-4.31 4.21"></path>
      </svg>
    </span>
    <span class="bnerg71ROuWznY868UxH K01cowoNUeJSyzVMDrXz URPE3uegZa6K1qu6Kyae" data-play-next="" style="display:none">
      <span class="BVIFxxTPVkwVFj3H6zA2" data-play-next-hover="">
        <svg class="oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M19.5 0v20M.5 0v20M18 16V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1zm-6.11-5.19-8.3 6.03A1 1 0 0 1 2 16.03V3.96a1 1 0 0 1 1.59-.81l8.3 6.04a1 1 0 0 1 0 1.62z"></path>
        </svg>
      </span>
    </span>
    <div class="Lfv5NnHE5OJyfG2L4m0w K01cowoNUeJSyzVMDrXz">
      <div class="vmFAfGxN5HeCCzE4Efbd volume-bar-hide" data-volume="">
        <div class="qdn6JQnrqbPII1mhW36H">
          <div class="UeGdTTJw8YPpKmhwgbnL" data-volume-bar="" style="width: 0%;"></div>
        </div>
      </div>
      <div class="URPE3uegZa6K1qu6Kyae" data-mute="">
        <svg class="pizYCFa54fJeBklKsmn6 oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M8.72 16.72 5 13H2.5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5H5l3.72-3.72a.75.75 0 0 1 1.28.53V16.2a.75.75 0 0 1-1.28.53zM20 0v20V0zM0 0v20V0zm12 4.53c0-.29.24-.53.53-.5a6 6 0 0 1 0 11.95.5.5 0 0 1-.53-.5v-.8c0-.27.2-.48.47-.5A4.2 4.2 0 0 0 16.2 10a4.2 4.2 0 0 0-3.73-4.17c-.26-.03-.47-.24-.47-.5v-.8zm0 6.89c0 .32.31.58.62.48a2 2 0 0 0 0-3.8c-.3-.1-.62.16-.62.48v2.84z"></path>
        </svg>
        <svg class="vQyqSPmituv2_yLvfvUS oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M20 0v20M0 0v20M19.35 7.35l-.7-.7a.5.5 0 0 0-.71 0L16 8.59l-1.94-1.94a.5.5 0 0 0-.7 0l-.71.7a.5.5 0 0 0 0 .71L14.59 10l-1.94 1.94a.5.5 0 0 0 0 .7l.7.71a.5.5 0 0 0 .71 0L16 11.41l1.94 1.94a.5.5 0 0 0 .7 0l.71-.7a.5.5 0 0 0 0-.71L17.41 10l1.94-1.94a.5.5 0 0 0 0-.7M8.72 16.71 5 13H2.5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5H5l3.72-3.72a.75.75 0 0 1 1.28.53V16.2a.75.75 0 0 1-1.28.53"></path>
        </svg>
      </div>
    </div>
    
    <div class="TuJl1IGpHD8gN5lhKP1P" data-seek="">
      
      <div class="l_iPVSY22AC8V4YqOqVl" data-seek-episode="" style="--episode-start: 0; --episode-end: 263.44">
        <div class="la10zGeSOnDcDasdYvdm"></div>
      </div>
      
      <span class="orXpRxeW9xF3qLbSaRzC"></span>
    </div>
  </div>
  <div class="rhlywXBNykvui9fCrp6B TiO74SfiDSOKcmosHslW">
    <div class="JdxX8XLsS7vYD3D5YpnJ">
      <span class="XV62sRZm6k02ffrBfVGu">
        <span class="AkeQCTC8rbIXFagL05NN" data-time-current="">02:07</span>
        <span class="oZ_hNpHqHcwGdDQGbtD0" data-time-placeholder="">00:00</span>
      </span>
      <span class="oFTaysBjfwbvJfV8YeHA">
        <span class="AkeQCTC8rbIXFagL05NN" data-time-total="">04:23</span>
        <span class="oZ_hNpHqHcwGdDQGbtD0" data-time-placeholder="">00:00</span>
      </span>
      <span class="uZpB4MrTQ1SdQcDAZCTl">
        <span class="AkeQCTC8rbIXFagL05NN" data-time-left="">02:16</span>
        <span class="oZ_hNpHqHcwGdDQGbtD0" data-time-placeholder="">00:00</span>
      </span>
    </div>
    

    <div class="Z35qhSFoFblyghPV_k_f K01cowoNUeJSyzVMDrXz URPE3uegZa6K1qu6Kyae" data-menu="levels">
      <svg class="oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M0 20V0m20 0v20m-10-8.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3M10 2a8 8 0 0 0-2.33.35.98.98 0 0 0-.67.94v.94l-.5.29-.8-.47a1.02 1.02 0 0 0-1.21.16 7.98 7.98 0 0 0-2.26 3.9 1.02 1.02 0 0 0 .47 1.14l.81.47v.56l-.81.47a1.02 1.02 0 0 0-.47 1.14 7.98 7.98 0 0 0 2.26 3.9c.33.31.82.38 1.21.16l.8-.47.5.29v.94c0 .42.26.82.67.94a8 8 0 0 0 4.66 0c.4-.12.67-.52.67-.94v-.94l.5-.29.8.47c.4.22.88.15 1.21-.16a7.98 7.98 0 0 0 2.26-3.9 1.02 1.02 0 0 0-.47-1.14l-.81-.47v-.56l.81-.47c.4-.23.57-.7.47-1.13a7.98 7.98 0 0 0-2.26-3.9 1.02 1.02 0 0 0-1.21-.17l-.8.47-.5-.28v-.95a.98.98 0 0 0-.67-.94A8 8 0 0 0 10 2m0 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6m0-9.5c.51 0 1.01.06 1.5.17v1.14c0 .18.1.35.25.44l1.5.86a.5.5 0 0 0 .5 0l.97-.57a6.43 6.43 0 0 1 1.5 2.6l-.98.57a.5.5 0 0 0-.25.43v1.72a.5.5 0 0 0 .25.43l.98.57a6.43 6.43 0 0 1-1.5 2.6l-.98-.57a.5.5 0 0 0-.5 0l-1.49.87a.5.5 0 0 0-.25.43v1.14a6.54 6.54 0 0 1-3 0v-1.14a.5.5 0 0 0-.25-.43l-1.5-.87a.5.5 0 0 0-.5 0l-.97.57a6.43 6.43 0 0 1-1.5-2.6l.98-.57a.5.5 0 0 0 .25-.43V9.14a.5.5 0 0 0-.25-.43l-.98-.57a6.43 6.43 0 0 1 1.5-2.6l.98.57a.5.5 0 0 0 .5 0l1.49-.87a.5.5 0 0 0 .25-.43V3.67c.49-.11.99-.17 1.5-.17"></path>
      </svg>
      <div class="UcavstO8yvMTRit4GHxz">Качество</div>
    </div>
    <div class="CVs0BTgazJvOy78WOxcg K01cowoNUeJSyzVMDrXz URPE3uegZa6K1qu6Kyae" data-menu="rates">
      <svg class="oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M10 3a8 8 0 0 1 6.245 13h-2.091a6.5 6.5 0 1 0-8.307 0H3.754A8 8 0 0 1 10 3zm2.758 4.182a.3.3 0 0 1 .424 0l.636.636a.3.3 0 0 1 0 .424l-1.233 1.234a3 3 0 1 1-1.06-1.06h-.001zM10 9.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM.5 0v20m19-20v20"></path>
      </svg>
      <div class="UcavstO8yvMTRit4GHxz">Скорость</div>
    </div>
    <div class="lxCElCu1siAw2uiAsdTk K01cowoNUeJSyzVMDrXz URPE3uegZa6K1qu6Kyae" data-menu="subtitles">
      <svg class="oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M2 5v11c0 .6.4 1 1 1h14c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1H3c-.6 0-1 .4-1 1zm14.5 10.5h-13v-10h13v10zm-2-4.7h-9c-.3 0-.5-.2-.5-.5v-.5c0-.3.2-.5.5-.5h9c.3 0 .5.2.5.5v.5c0 .2-.2.5-.5.5zm-5 3h-4c-.3 0-.5-.2-.5-.5v-.5c0-.3.2-.5.5-.5h4c.3 0 .5.2.5.5v.5c0 .2-.2.5-.5.5zm3-1.6h2c.3 0 .5.2.5.5v.5c0 .3-.2.5-.5.5h-2c-.3 0-.5-.2-.5-.5v-.5c0-.2.2-.5.5-.5zM0 0v20V0zm20 0v20V0z"></path>
      </svg>
      <div class="UcavstO8yvMTRit4GHxz">Субтитры</div>
    </div>
    <div class="WEvv65vcGxtg6D8a7JGC K01cowoNUeJSyzVMDrXz URPE3uegZa6K1qu6Kyae" data-menu="menu">
      <svg class="oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M0 20V0m20 0v20m-10-8.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3M10 2a8 8 0 0 0-2.33.35.98.98 0 0 0-.67.94v.94l-.5.29-.8-.47a1.02 1.02 0 0 0-1.21.16 7.98 7.98 0 0 0-2.26 3.9 1.02 1.02 0 0 0 .47 1.14l.81.47v.56l-.81.47a1.02 1.02 0 0 0-.47 1.14 7.98 7.98 0 0 0 2.26 3.9c.33.31.82.38 1.21.16l.8-.47.5.29v.94c0 .42.26.82.67.94a8 8 0 0 0 4.66 0c.4-.12.67-.52.67-.94v-.94l.5-.29.8.47c.4.22.88.15 1.21-.16a7.98 7.98 0 0 0 2.26-3.9 1.02 1.02 0 0 0-.47-1.14l-.81-.47v-.56l.81-.47c.4-.23.57-.7.47-1.13a7.98 7.98 0 0 0-2.26-3.9 1.02 1.02 0 0 0-1.21-.17l-.8.47-.5-.28v-.95a.98.98 0 0 0-.67-.94A8 8 0 0 0 10 2m0 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6m0-9.5c.51 0 1.01.06 1.5.17v1.14c0 .18.1.35.25.44l1.5.86a.5.5 0 0 0 .5 0l.97-.57a6.43 6.43 0 0 1 1.5 2.6l-.98.57a.5.5 0 0 0-.25.43v1.72a.5.5 0 0 0 .25.43l.98.57a6.43 6.43 0 0 1-1.5 2.6l-.98-.57a.5.5 0 0 0-.5 0l-1.49.87a.5.5 0 0 0-.25.43v1.14a6.54 6.54 0 0 1-3 0v-1.14a.5.5 0 0 0-.25-.43l-1.5-.87a.5.5 0 0 0-.5 0l-.97.57a6.43 6.43 0 0 1-1.5-2.6l.98-.57a.5.5 0 0 0 .25-.43V9.14a.5.5 0 0 0-.25-.43l-.98-.57a6.43 6.43 0 0 1 1.5-2.6l.98.57a.5.5 0 0 0 .5 0l1.49-.87a.5.5 0 0 0 .25-.43V3.67c.49-.11.99-.17 1.5-.17"></path>
      </svg>
      <div class="UcavstO8yvMTRit4GHxz">Настройки</div>
    </div>

    <span class="UZZIXu3ct190ZkdFwT6Z K01cowoNUeJSyzVMDrXz URPE3uegZa6K1qu6Kyae" data-fullscreen="">
      <svg class="oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M20 0v20V0ZM0 0v20V0Zm3.5 16.5v-4c0-.3-.2-.5-.5-.5h-.5c-.3 0-.5.2-.5.5V17c0 .6.4 1 1 1h4.5c.3 0 .5-.2.5-.5V17c0-.3-.2-.5-.5-.5h-4Zm13-13v4c0 .3.2.5.5.5h.5c.3 0 .5-.2.5-.5V3c0-.6-.4-1-1-1h-4.5c-.3 0-.5.2-.5.5V3c0 .3.2.5.5.5h4Zm-13 0h4c.3 0 .5-.2.5-.5v-.5c0-.3-.2-.5-.5-.5H3a1 1 0 0 0-1 1v4.5c0 .3.2.5.5.5H3c.3 0 .5-.2.5-.5v-4ZM17 12h.5c.3 0 .5.2.5.5V17c0 .6-.4 1-1 1h-4.5a.5.5 0 0 1-.5-.5V17c0-.3.2-.5.5-.5h4v-4c0-.3.2-.5.5-.5Z"></path>
      </svg>
    </span>
  </div>
</div>
</div>
<div class="KQ8y1L6rrX8MQVbUmAJw eplayer-skin-component eplayer-skin-fullsize eplayer-skin-shiftable" data-thumbnails="">
  <div class="zXDoZtA5P3I0UuZ_BRfe">
    <div class="tC5VmS97bmahd9MKEcIS" data-thumbnails-sprite=""></div>
    <div class="lBTomF9Us1hMRK2lC7Kw" data-thumbnails-time="">00:00</div>
  </div>
  <div class="mCHb4oySdsfGjsGdHZ7S" data-episode-label=""></div>
</div>
<div class="KV59UMOWEQgvuVOZms9t eplayer-hide-control-start" data-progress=""></div>
<div class="
  gsPn7YuUnkuSP6rCrcJf uYaTe6HCN9zQQoSqR0fw
  eplayer-holdable eplayer-hide-control-start
"></div>
<div class="
  gMG1wB2IgDMSSssajBJp uYaTe6HCN9zQQoSqR0fw
  eplayer-holdable eplayer-hide-control-start
"></div>
<div class="
  Ra92aSe94EkacKMKpaE3
  eplayer-hide-control-start eplayer-holdable eplayer-skin-component
">
<div class="DW2hBww0s2WznCtQaABS" data-title=""></div>
</div>
<div class="yDzIQuMitYISHPpK31Sw eplayer-skin-fullsize eplayer-holdable" data-toggle-play="" data-three-sixty="">
  <svg class="VDMy0JzsmiEViQHm0X0r wPIaSvDsJJ39mLEwu8s6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
    <path class="IWXzbl9owMA9saHd_7Gn
      fill-rule=" evenodd"="" d="M20 0v20M0 0v20m17.48-9.13L6.5 17.15a1 1 0 0 1-1.5-.87V3.72a1 1 0 0 1 1.5-.87l10.98 6.28a1 1 0 0 1 0 1.74"></path>
  </svg>
  <svg class="VDMy0JzsmiEViQHm0X0r C29dzOZnB_rpOjH1jFWr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
    <path class="IWXzbl9owMA9saHd_7Gn
      fill-rule=" evenodd"="" d="M0 100V0m100 100V0M23.12 44.08a27.55 27.55 0 0 0 24.5 33.32A2.53 2.53 0 0 1 50 79.88v2.5a2.5 2.5 0 0 1-2.62 2.53A35 35 0 0 1 50 15a34.8 34.8 0 0 1 28 14.2V17.5a2.5 2.5 0 0 1 2.5-2.5h2a2.5 2.5 0 0 1 2.5 2.5v20a2.5 2.5 0 0 1-2.5 2.5h-20a2.5 2.5 0 0 1-2.5-2.5v-2a2.5 2.5 0 0 1 2.5-2.5h9.03a27.46 27.46 0 0 0-48.4 11.08"></path>
  </svg>
  <div class="Dq8rU1SEL7sPMW_zxGeo">
    <div class="D2k0FEvmOzRLRbXEuIm4">Смотреть заново</div>
    <div class="TxDKC71Eg4tdbXKKjPnP" data-title=""></div>
  </div>
</div>
<div class="d9ANyqB6x7Zcv6pDws23 TiO74SfiDSOKcmosHslW eplayer-holdable">
  
  <span class="UZZIXu3ct190ZkdFwT6Z K01cowoNUeJSyzVMDrXz URPE3uegZa6K1qu6Kyae" data-fullscreen="">
    <svg class="oZ7L2wLsgD_vqPsa5Qkl" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M20 0v20V0ZM0 0v20V0Zm3.5 16.5v-4c0-.3-.2-.5-.5-.5h-.5c-.3 0-.5.2-.5.5V17c0 .6.4 1 1 1h4.5c.3 0 .5-.2.5-.5V17c0-.3-.2-.5-.5-.5h-4Zm13-13v4c0 .3.2.5.5.5h.5c.3 0 .5-.2.5-.5V3c0-.6-.4-1-1-1h-4.5c-.3 0-.5.2-.5.5V3c0 .3.2.5.5.5h4Zm-13 0h4c.3 0 .5-.2.5-.5v-.5c0-.3-.2-.5-.5-.5H3a1 1 0 0 0-1 1v4.5c0 .3.2.5.5.5H3c.3 0 .5-.2.5-.5v-4ZM17 12h.5c.3 0 .5.2.5.5V17c0 .6-.4 1-1 1h-4.5a.5.5 0 0 1-.5-.5V17c0-.3.2-.5.5-.5h4v-4c0-.3.2-.5.5-.5Z"></path>
    </svg>
  </span>
</div><div class="eplayer-skin-fullsize eplayer-skin-shiftable eplayer-skin-background" style="pointer-events: none; display: none;" data-subtitles=""><div class="eplayer-subtitles"><p style="pointer-events: auto;"></p></div>
</div><div class="eplayer-unmute eplayer-skin-component eplayer-skin-shiftable eplayer-skin-fullsize" style="display: none;"><div class="J1WoJaQ26k1NCpicZikk" data-unmute="">
  <svg class="fvIwz46YsXRSg9lxAyTf" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
    <path class="YMGjIipf6sxcHLWo7KdW" d="M20 0v20M0 0v20M19.35 7.35l-.7-.7a.5.5 0 0 0-.71 0L16 8.59l-1.94-1.94a.5.5 0 0 0-.7 0l-.71.7a.5.5 0 0 0 0 .71L14.59 10l-1.94 1.94a.5.5 0 0 0 0 .7l.7.71c.2.2.52.2.71 0L16 11.41l1.94 1.94c.2.2.51.2.7 0l.71-.7a.5.5 0 0 0 0-.71L17.41 10l1.94-1.94a.5.5 0 0 0 0-.7M8.72 16.71 5 13H2.5a.5.5 0 0 1-.5-.5v-5c0-.28.22-.5.5-.5H5l3.72-3.72a.75.75 0 0 1 1.28.53V16.2c0 .67-.8 1-1.28.53"></path>
    <path class="xgcQDcTeyuib7G0jSUXp" d="M8.72 16.72 5 13H2.5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5H5l3.72-3.72a.75.75 0 0 1 1.28.53V16.2a.75.75 0 0 1-1.28.53zM20 0v20V0zM0 0v20V0zm12 4.53c0-.29.24-.53.53-.5a6 6 0 0 1 0 11.95.5.5 0 0 1-.53-.5v-.8c0-.27.2-.48.47-.5A4.2 4.2 0 0 0 16.2 10a4.2 4.2 0 0 0-3.73-4.17c-.26-.03-.47-.24-.47-.5v-.8zm0 6.89c0 .32.31.58.62.48a2 2 0 0 0 0-3.8c-.3-.1-.62.16-.62.48v2.84z"></path>
  </svg>
</div>
</div><div class="QttQ1tq2ygIZ5_vyHeXR eplayer-skin-shiftable eplayer-skin-fullsize" data-settings-menu="" style="display: none;">
<div class="u_hqQ8p5xQAkmXIwtWjm" data-menu-close="">
  <svg class="HF6OARQCgql9R_5CiYG2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
    <path fill-rule="evenodd" d="M0 20V0m20 0v20M16.18 4.88 11.06 10l5.12 5.12a.5.5 0 0 1 0 .7l-.36.36a.5.5 0 0 1-.7 0L10 11.06l-5.12 5.12a.5.5 0 0 1-.7 0l-.36-.36a.5.5 0 0 1 0-.7L8.94 10 3.82 4.88a.5.5 0 0 1 0-.7l.36-.36a.5.5 0 0 1 .7 0L10 8.94l5.12-5.12a.5.5 0 0 1 .7 0l.36.36a.5.5 0 0 1 0 .7"></path>
  </svg>
</div>
<div class="JVMklWBVVj29caEIXCNk" data-menu-inner="">
  <ul class="cF9b4hLOKljfpX4QBm5V" data-menu-section="menu" style="display: none;">
    
      <li class="LBdBSbyB3hc_aSCl96vg" data-menu="levels">
      <span class="STH2FVXxXCGJFC_OIka5">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M0 20V0m20 0v20m-10-8.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3M10 2a8 8 0 0 0-2.33.35.98.98 0 0 0-.67.94v.94l-.5.29-.8-.47a1.02 1.02 0 0 0-1.21.16 7.98 7.98 0 0 0-2.26 3.9 1.02 1.02 0 0 0 .47 1.14l.81.47v.56l-.81.47a1.02 1.02 0 0 0-.47 1.14 7.98 7.98 0 0 0 2.26 3.9c.33.31.82.38 1.21.16l.8-.47.5.29v.94c0 .42.26.82.67.94a8 8 0 0 0 4.66 0c.4-.12.67-.52.67-.94v-.94l.5-.29.8.47c.4.22.88.15 1.21-.16a7.98 7.98 0 0 0 2.26-3.9 1.02 1.02 0 0 0-.47-1.14l-.81-.47v-.56l.81-.47c.4-.23.57-.7.47-1.13a7.98 7.98 0 0 0-2.26-3.9 1.02 1.02 0 0 0-1.21-.17l-.8.47-.5-.28v-.95a.98.98 0 0 0-.67-.94A8 8 0 0 0 10 2m0 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6m0-9.5c.51 0 1.01.06 1.5.17v1.14c0 .18.1.35.25.44l1.5.86a.5.5 0 0 0 .5 0l.97-.57a6.43 6.43 0 0 1 1.5 2.6l-.98.57a.5.5 0 0 0-.25.43v1.72a.5.5 0 0 0 .25.43l.98.57a6.43 6.43 0 0 1-1.5 2.6l-.98-.57a.5.5 0 0 0-.5 0l-1.49.87a.5.5 0 0 0-.25.43v1.14a6.54 6.54 0 0 1-3 0v-1.14a.5.5 0 0 0-.25-.43l-1.5-.87a.5.5 0 0 0-.5 0l-.97.57a6.43 6.43 0 0 1-1.5-2.6l.98-.57a.5.5 0 0 0 .25-.43V9.14a.5.5 0 0 0-.25-.43l-.98-.57a6.43 6.43 0 0 1 1.5-2.6l.98.57a.5.5 0 0 0 .5 0l1.49-.87a.5.5 0 0 0 .25-.43V3.67c.49-.11.99-.17 1.5-.17"></path>
        </svg>
        Качество
      </span>
      <span class="ed1tD9hfUqsUYFTYoLN9" data-level-label="">Авто</span>
    </li>
    
    
      <li class="LBdBSbyB3hc_aSCl96vg" data-menu="rates">
        <span class="STH2FVXxXCGJFC_OIka5">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 3a8 8 0 0 1 6.245 13h-2.091a6.5 6.5 0 1 0-8.307 0H3.754A8 8 0 0 1 10 3zm2.758 4.182a.3.3 0 0 1 .424 0l.636.636a.3.3 0 0 1 0 .424l-1.233 1.234a3 3 0 1 1-1.06-1.06h-.001zM10 9.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM.5 0v20m19-20v20"></path>
          </svg>
          Скорость
        </span>
        <span class="ed1tD9hfUqsUYFTYoLN9" data-rate-label="">
        Обычная
        </span>
      </li>
    
    
    
  </ul>
  
     <ul class="cF9b4hLOKljfpX4QBm5V" data-menu-section="levels" style="display: none;">
    
      <li class="LBdBSbyB3hc_aSCl96vg" data-level="3">1080p</li>
    
      <li class="LBdBSbyB3hc_aSCl96vg" data-level="2">720p</li>
    
      <li class="LBdBSbyB3hc_aSCl96vg" data-level="1">480p</li>
    
      <li class="LBdBSbyB3hc_aSCl96vg" data-level="0">360p</li>
    
    <li class="LBdBSbyB3hc_aSCl96vg mUBkmrt_AcrEH5KElxIe" data-level="-1">Авто</li>
  </ul>
  
  
    <ul class="cF9b4hLOKljfpX4QBm5V" data-menu-section="rates" style="display: none;">
      
      <li class="LBdBSbyB3hc_aSCl96vg" data-rate="0.25">
        0.25
        </li>
      
      <li class="LBdBSbyB3hc_aSCl96vg" data-rate="0.50">
        0.5
        </li>
      
      <li class="LBdBSbyB3hc_aSCl96vg" data-rate="0.75">
        0.75
        </li>
      
      <li class="LBdBSbyB3hc_aSCl96vg mUBkmrt_AcrEH5KElxIe" data-rate="1.0">
        Обычная
        </li>
      
      <li class="LBdBSbyB3hc_aSCl96vg" data-rate="1.25">
        1.25
        </li>
      
      <li class="LBdBSbyB3hc_aSCl96vg" data-rate="1.5">
        1.5
        </li>
      
      <li class="LBdBSbyB3hc_aSCl96vg" data-rate="1.75">
        1.75
        </li>
      
      <li class="LBdBSbyB3hc_aSCl96vg" data-rate="2.0">
        2
        </li>
      
    </ul>
  
  
</div></div><div class="eplayer-time-to-ad eplayer-skin-fullsize eplayer-skin-shiftable eplayer-skin-component eplayer-holdable" style="display: none;">
  <div class="RXAxDMcxuRgXcmykt9qo">Реклама через: <span>1</span></div>
</div></div><div></div><div class="cTtcpD_RWs9X9osDOBBV"></div><style class="clappr-style">[object Object]</style></div></div><script src="./f.txt" async="" type="text/javascript"></script><script src="./adsdk.js" async="" type="text/javascript"></script></body></html>